(self.webpackChunkbav4=self.webpackChunkbav4||[]).push([[121,591],{620:(e,t,n)=>{"use strict";var r=n(18410);const{TranslationService:i}=r.z.inject("TranslationService");i.register("coordinateInfoProvider",(e=>{switch(e){case"en":return{info_coordinateInfo_copy_icon:"Copy to clipboard",info_coordinateInfo_clipboard_error:'"Copy to clipboard" is not available',info_coordinateInfo_clipboard_success:"was copied to clipboard",info_coordinateInfo_elevation_label:"Elev. (m)",info_coordinateInfo_select:"Choose coordinate system"};case"de":return{info_coordinateInfo_copy_icon:"In die Zwischenablage kopieren",info_coordinateInfo_clipboard_error:'"In die Zwischenablage kopieren" steht nicht zur Verfügung',info_coordinateInfo_clipboard_success:"wurde in die Zwischenablage kopiert",info_coordinateInfo_elevation_label:"Höhe (m)",info_coordinateInfo_select:"Koordinatensystem auswählen"};default:return{}}})),i.register("geometryInfoProvider",(e=>{switch(e){case"en":return{info_geometryInfo_title_coordinate:"Coordinate",info_geometryInfo_title_azimuth:"Azimuth",info_geometryInfo_title_line_length:"Distance",info_geometryInfo_title_polygon_length:"Perimeter",info_geometryInfo_title_polygon_area:"Area",info_geometryInfo_copy_icon:"Copy to clipboard"};case"de":return{info_geometryInfo_title_coordinate:"Koordinate",info_geometryInfo_title_azimuth:"Azimut",info_geometryInfo_title_line_length:"Länge",info_geometryInfo_title_polygon_length:"Umfang",info_geometryInfo_title_polygon_area:"Fläche",info_geometryInfo_copy_icon:"In die Zwischenablage kopieren"};default:return{}}}));var o=n(36752),a=n(28508),s=n.n(a),c=n(2277),l=n(99990),d=n(35558);const u="update_coordinate",g="update_elevation",h="update_selected_cr";class p extends l.T{#e;#t;#n;#r;#i;#o=!1;constructor(){super({coordinate:null,elevation:null,selectedCr:null});const{MapService:e,CoordinateService:t,TranslationService:n,ElevationService:i,ShareService:o}=r.z.inject("MapService","CoordinateService","TranslationService","ElevationService","ShareService");this.#e=e,this.#t=t,this.#n=n,this.#r=i,this.#i=o}update(e,t,n){switch(e){case u:return{...n,coordinate:t};case g:return{...n,elevation:t};case h:return{...n,selectedCr:t}}}createView(e){const{coordinate:t,elevation:n,selectedCr:r}=e;return t?o.qy`
				<style>
					${s()}
				</style>

				<div class="container">
					${this.#o?this.getContentAsSingleRow(t,n,r):this.getContentAsListing(t,n)}
				</div>
			`:o.s6}getContentAsSingleRow(e,t,n){const r=e=>this.#n.translate(e),i=e=>this.#n.translate(e,[],!0),a=this.#e.getCoordinateRepresentations(e),s=this.#t.stringify(e,n??a[0]);return o.qy`<div class="content selectable">
			${o.qy`<div class="r_coordinate single_row">
				<select class="select-cr" @change="${e=>{this.signal(h,a.find((t=>t.id===e.target.value)))}}" title="${r("info_coordinateInfo_select")}">
					${a.map((e=>o.qy`<option class="select-coordinate-option" value="${e.id}">${i(e.label)}</option>`))}
				</select>
				<span class="coordinate">${s}</span>
				<span class="icon">
					<ba-icon
						class="close"
						.icon="${d}"
						.title=${r("info_coordinateInfo_copy_icon")}
						.size=${1.5}
						@click=${()=>{this._copyValueToClipboard(s)}}
					></ba-icon>
				</span>
			</div>`}
			${t?o.qy`<div class="r_elevation single_row">
						<span class="label">${r("info_coordinateInfo_elevation_label")}</span><span class="coordinate">${t}</span>
						<span class="icon">
							<ba-icon
								class="close"
								.icon="${d}"
								.title=${r("info_coordinateInfo_copy_icon")}
								.size=${1.5}
								@click=${()=>{this._copyValueToClipboard(t)}}
							></ba-icon>
						</span>
					</div> `:o.s6}
		</div>`}getContentAsListing(e,t){const n=e=>this.#n.translate(e),r=e=>this.#n.translate(e,[],!0),i=this.#e.getCoordinateRepresentations(e).map((t=>{const{label:i}=t,a=this.#t.stringify(e,t);return o.qy`
				<span class="label">${r(i)}</span><span class="coordinate">${a}</span>
				<span class="icon">
					<ba-icon
						class="close"
						.icon="${d}"
						.title=${n("info_coordinateInfo_copy_icon")}
						.size=${1.5}
						@click=${()=>{this._copyValueToClipboard(a)}}
					></ba-icon>
				</span>
			`}));return o.qy` <ul class="content selectable">
			${i.map((e=>o.qy`<li class="r_coordinate">${e}</li>`))}
			${t?o.qy`<li class="r_elevation">
					<span class="label">${n("info_coordinateInfo_elevation_label")}</span><span class="coordinate">${t}</span>
					<span class="icon">
		<ba-icon
			class="close"
			.icon="${d}"
			.title=${n("info_coordinateInfo_copy_icon")}
			.size=${1.5}
			@click=${()=>{this._copyValueToClipboard(t)}}
		></ba-icon>
				</li>`:o.s6}
		</ul>`}async _copyValueToClipboard(e){try{await this.#i.copyToClipboard(e),(0,c.L)(`"${e}" ${this.#n.translate("info_coordinateInfo_clipboard_success")}`,c.A.INFO)}catch{const e=this.#n.translate("info_coordinateInfo_clipboard_error");(0,c.L)(e,c.A.WARN),console.warn("Clipboard API not available")}}async _getElevation(e){try{const t=await this.#r.getElevation(e);this.signal(g,t)}catch(e){throw this.signal(g,null),e}}static get tag(){return"ba-coordinate-info"}set coordinate(e){this.signal(u,e),this._getElevation(e)}get coordinate(){return this.getModel().coordinate}set displaySingleRow(e){this.#o=e}}window.customElements.get(p.tag)||window.customElements.define(p.tag,p);var m=n(40068),_=n(59844),v=n.n(_),y=n(69600);const b="update_statistic",S={geometryType:null,coordinate:null,azimuth:null,length:null,area:null};class f extends l.T{#i;constructor(){super({statistic:S});const{CoordinateService:e,UnitsService:t,TranslationService:n,ShareService:i}=r.z.inject("CoordinateService","UnitsService","TranslationService","ShareService");this._translationService=n,this._coordinateService=e,this._unitsService=t,this.#i=i}update(e,t,n){if(e===b)return{...n,statistic:t}}createView(e){const t=(e=>{switch(e.geometryType){case y.d.POINT:return this._getPointContent(e);case y.d.LINE:return this._getLineContent(e);case y.d.POLYGON:return this._getPolygonContent(e);default:return null}})(e.statistic);return t?o.qy` <style>
						${v()}
					</style>
					<div>
						<div class="stats-container">
							${t}
							<div></div>
						</div>
					</div>`:o.s6}async _copyValueToClipboard(e){try{await this.#i.copyToClipboard(e),(0,c.L)(`"${e}" ${this._translationService.translate("info_coordinateInfo_clipboard_success")}`,c.A.INFO)}catch{const e=this._translationService.translate("info_coordinateInfo_clipboard_error");(0,c.L)(e,c.A.WARN),console.warn("Clipboard API not available")}}_getPointContent(e){const{coordinate:t}=e,n=(()=>this._translationService.translate("info_geometryInfo_title_coordinate"))();return o.qy`<div class="stats-point stats-content" title=${n}>
			<ba-coordinate-info .coordinate=${t} .displaySingleRow=${!0}></ba-coordinate-info>
		</div>`}_getLineContent(e){const t=e=>this._translationService.translate(e),n=this._unitsService.formatDistance(e.length,2),r=this._unitsService.formatAngle(e.azimuth,2),i=()=>{this._copyValueToClipboard(n.localizedValue)};if(null===e.azimuth){const e=t("info_geometryInfo_title_line_length");return o.qy`<div class="stats-line-length stats-content" title=${e}>
				<span class="label">${e} (${n.unit}):</span><span class="value">${n.localizedValue}</span>
				<span class="icon">
					<ba-icon
						class="close"
						.icon="${d}"
						.title=${t("info_geometryInfo_copy_icon")}
						.size=${1.5}
						@click=${i}
					></ba-icon>
				</span>
			</div>`}const a=t("info_geometryInfo_title_azimuth"),s=t("info_geometryInfo_title_line_length");return o.qy`<div class="stats-line-azimuth stats-content" title=${a}>
				<span class="label">${a} (${r.unit}):</span><span class="value">${r.localizedValue}</span>
				<span class="icon">
					<ba-icon
						class="close"
						.icon="${d}"
						.title=${t("info_geometryInfo_copy_icon")}
						.size=${1.5}
						@click=${()=>{this._copyValueToClipboard(r.localizedValue)}}
					></ba-icon>
				</span>
			</div>
			<div class="stats-line-length stats-content" title=${s}>
				<span class="label">${s} (${n.unit}):</span><span class="value">${n.localizedValue}</span>
				<span class="icon">
					<ba-icon
						class="close"
						.icon="${d}"
						.title=${t("info_geometryInfo_copy_icon")}
						.size=${1.5}
						@click=${i}
					></ba-icon>
				</span>
			</div>`}_getPolygonContent(e){const t=e=>this._translationService.translate(e),n=t("info_geometryInfo_title_polygon_area"),r=t("info_geometryInfo_title_line_length"),i=this._unitsService.formatDistance(e.length,2),a=this._unitsService.formatArea(e.area,2);return o.qy`<div class="stats-polygon-length stats-content" title=${r}>
				<span class="label">${r} (${i.unit}):</span><span class="value">${i.localizedValue}</span>
				<span class="icon">
					<ba-icon
						class="close"
						.icon="${d}"
						.title=${t("info_geometryInfo_copy_icon")}
						.size=${1.3}
						@click=${()=>{this._copyValueToClipboard(i.localizedValue)}}
					></ba-icon>
				</span>
			</div>
			<div class="stats-polygon-area stats-content" title=${n}>
				<span class="label">${n} (${(0,m._)(a.unit)}):</span><span class="value">${a.localizedValue}</span>
				<span class="icon">
					<ba-icon
						class="close"
						.icon="${d}"
						.title=${t("info_geometryInfo_copy_icon")}
						.size=${1.3}
						@click=${()=>{this._copyValueToClipboard(a.localizedValue)}}
					></ba-icon>
				</span>
			</div>`}static get tag(){return"ba-geometry-info"}set statistic(e){this.signal(b,e)}}window.customElements.get(f.tag)||window.customElements.define(f.tag,f)},1001:(e,t,n)=>{"use strict";n.d(t,{IX:()=>c,YE:()=>l,sZ:()=>s});var r=n(18410),i=n(28353),o=n(14983);const a=()=>{const{StoreService:e}=r.z.inject("StoreService");return e.getStore()},s=e=>{(null===e||(0,i.Kg)(e))&&a().dispatch({type:o.Lv,payload:e})},c=(e=null)=>{(null===e||(0,i.Kg)(e))&&a().dispatch({type:o.D2,payload:{active:!0,timestamp:e}})},l=()=>{a().dispatch({type:o.D2,payload:{active:!1,timestamp:null}})}},1175:(e,t,n)=>{"use strict";n.d(t,{R_:()=>i,Yz:()=>o,hs:()=>l,pK:()=>s,um:()=>a});var r=n(42376);const i="highlight/feature/add",o="highlight/clear",a="highlight/remove/id",s="highlight/remove/category",c={features:[],active:!1},l=(e=c,t)=>{const n=e=>e.map((e=>(e.id||(e.id=(0,r.Ds)().toString()),e))),{type:l,payload:d}=t;switch(l){case i:{const t=[...e.features,...n(d)],r=!!t.length;return{...e,features:t,active:r}}case o:return{...e,features:[],active:!1};case a:{const t=e.features.filter((e=>!d.includes(e.id))),n=!!t.length;return{...e,features:t,active:n}}case s:{const t=e.features.filter((e=>!d.includes(e.category))),n=!!t.length;return{...e,features:t,active:n}}}return e}},1473:(e,t,n)=>{"use strict";n.d(t,{Jm:()=>o,aN:()=>r});const r="contextMenu/changed",i={coordinate:null,content:null,active:!1},o=(e=i,t)=>{const{type:n,payload:o}=t;switch(n){case r:return{...e,coordinate:o.coordinate,content:o.content,active:!!o.coordinate};case"contextMenu/contentChanged":return{...e,content:o}}return e}},1616:(e,t,n)=>{var r=n(31601),i=n(76314),o=n(4417),a=n(81576),s=i(r),c=o(a);s.push([e.id,`.geolocation-icon {\n\tmask: url(${c});\n\t-webkit-mask-image: url(${c});\n\tbackground: var(--text3);\n}\n.icon {\n\tmask-size: cover;\n\t-webkit-mask-size: cover;\n\tcursor: pointer;\n\tdisplay: inline-block;\n\theight: 1.6em;\n\twidth: 1.6em;\n}\n.inactive {\n\tbackground: var(--text3);\n}\n.active .geolocation-icon {\n\tbackground: var(--text3);\n\tanimation-name: stretch;\n\tanimation-duration: 4s;\n\tanimation-timing-function: ease-out;\n\tanimation-delay: 0s;\n\tanimation-direction: alternate;\n\tanimation-iteration-count: infinite;\n\tanimation-fill-mode: none;\n\tanimation-play-state: running;\n}\n.denied.active .geolocation-icon {\n\tanimation-name: none;\n}\n@keyframes stretch {\n\t0% {\n\t\ttransform: scale(1);\n\t}\n\t10% {\n\t\ttransform: scale(1.2);\n\t}\n\t20% {\n\t\ttransform: scale(1);\n\t}\n\t100% {\n\t\ttransform: scale(1);\n\t}\n}\n.geolocation-button {\n\tbackground: var(--primary-color);\n\tdisplay: inline-block;\n\theight: 2.5em;\n\twidth: 2.5em;\n\tborder-radius: 50%;\n\tborder: none;\n\toutline: none;\n\tpadding-top: 0.2em;\n}\n.geolocation-button.active {\n\tbackground: var(--error-color);\n}\n.geolocation-button.active.denied {\n\tbackground: var(--surface5-dark);\n}\n.geolocation-button:hover,\n.geolocation-button:focus {\n\ttransform: scale(1.1);\n}\n.geolocation-button:focus {\n\tbox-shadow: 0 0 0 0.2em var(--primary-color-lighter);\n}\n.geolocation-button:active {\n\ttransform: scale(1.15);\n\tborder: none;\n}\n`,""]),e.exports=s},1826:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgY2xhc3M9ImJpIGJpLWNhcmV0LWRvd24tZmlsbCI+PCEtLU1JVCBMaWNlbnNlLS0+PHBhdGggZmlsbD0iIzJjNWE5MyIgZD0iTTcuMjQ3IDExLjE0IDIuNDUxIDUuNjU4QzEuODg1IDUuMDEzIDIuMzQ1IDQgMy4yMDQgNGg5LjU5MmExIDEgMCAwIDEgLjc1MyAxLjY1OWwtNC43OTYgNS40OGExIDEgMCAwIDEtMS41MDYgMHoiLz48L3N2Zz4K"},1942:(e,t,n)=>{var r=n(2562);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},2151:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9ImN1cnJlbnRDb2xvciIgY2xhc3M9ImJpIGJpLXRocmVlLWRvdHMiIHZpZXdCb3g9IjAgMCAxNiAxNiI+PCEtLU1JVCBMaWNlbnNlLS0+PHBhdGggZD0iTTMgOS41YTEuNSAxLjUgMCAxIDEgMC0zIDEuNSAxLjUgMCAwIDEgMCAzbTUgMGExLjUgMS41IDAgMSAxIDAtMyAxLjUgMS41IDAgMCAxIDAgM201IDBhMS41IDEuNSAwIDEgMSAwLTMgMS41IDEuNSAwIDAgMSAwIDMiLz48L3N2Zz4K"},2277:(e,t,n)=>{"use strict";n.d(t,{A:()=>a,L:()=>s});var r=n(91875),i=n(18410),o=n(47518);const a=Object.freeze({INFO:Symbol.for("info"),WARN:Symbol.for("warn"),ERROR:Symbol.for("error")}),s=(e,t)=>{(()=>{const{StoreService:e}=i.z.inject("StoreService");return e.getStore()})().dispatch({type:r.th,payload:new o.MD({content:e,level:t})})}},2562:(e,t,n)=>{var r=n(31601),i=n(76314),o=n(4417),a=n(97711),s=i(r),c=o(a);s.push([e.id,`.three-dimension-icon {\n\tmask: url(${c});\n\t-webkit-mask-image: url(${c});\n\tbackground: var(--text3);\n}\n.icon {\n\tmask-size: cover;\n\t-webkit-mask-size: cover;\n\tcursor: pointer;\n\tdisplay: inline-block;\n\theight: 1.6em;\n\twidth: 1.6em;\n}\n\n.three-dimension-button {\n\tbackground-color: var(--primary-color);\n\tdisplay: inline-block;\n\theight: 2.5em;\n\twidth: 2.5em;\n\tborder-radius: 50%;\n\tborder: none;\n\toutline: none;\n\tpadding: 0.4em;\n}\n\n.three-dimension-button:hover,\n.three-dimension-button:focus {\n\ttransform: scale(1.1);\n}\n.three-dimension-button:focus {\n\tbox-shadow: 0 0 0 0.2em var(--primary-color-lighter);\n}\n.three-dimension-button:active {\n\ttransform: scale(1.15);\n\tborder: none;\n}\n`,""]),e.exports=s},2718:(e,t,n)=>{var r=n(81706);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},3630:(e,t,n)=>{"use strict";var r=n(18410);const{TranslationService:i}=r.z.inject("TranslationService");i.register("coordinateSelectProvider",(e=>{switch(e){case"en":return{footer_coordinate_select:"Choose coordinate system"};case"de":return{footer_coordinate_select:"Koordinatensystem auswählen"};default:return{}}})),i.register("baseLayerInfoProvider",(e=>{switch(e){case"en":return{map_baseLayerInfo_label:"Basemap",map_baseLayerInfo_fallback:"No information available"};case"de":return{map_baseLayerInfo_label:"Basiskarte",map_baseLayerInfo_fallback:"Keine Informationen verfügbar"};default:return{}}})),i.register("privacyPolicyProvider",(e=>{switch(e){case"en":return{footer_privacy_policy_link:"Privacy Policy"};case"de":return{footer_privacy_policy_link:"Datenschutzerklärung"};default:return{}}}));var o=n(36752),a=n(71275),s=n.n(a),c=n(99990);const l="update_pointer_coordinate",d="selected_cr_changed";class u extends c.T{constructor(){super({selectedCr:null,pointerPosition:[]});const{CoordinateService:e,EnvironmentService:t,MapService:n,TranslationService:i}=r.z.inject("CoordinateService","EnvironmentService","MapService","TranslationService");this._coordinateService=e,this._environmentService=t,this._mapService=n,this._translationService=i}update(e,t,n){switch(e){case l:return{...n,pointerPosition:[...t]};case d:return{...n,selectedCr:t}}}onInitialize(){this._items=this._mapService.getCoordinateRepresentations(),this.signal(d,this._items[0]),this.observe((e=>e.pointer.move),(e=>this.signal(l,e.payload.coordinate)),!1)}isRenderingSkipped(){return this._environmentService.isTouch()}createView(e){const t=e=>this._translationService.translate(e,[],!0),{pointerPosition:n,selectedCr:r}=e;return o.qy`
			<style>
				${s()}
			</style>
			<div class="coordinate-container">
				<select class="select-coordinate" @change="${e=>{this.signal(d,this._items.find((t=>t.id===e.target.value)))}}" title="${(()=>this._translationService.translate("footer_coordinate_select"))()}">
					${this._items.map((e=>o.qy`<option class="select-coordinate-option" value="${e.id}">${t(e.label)}</option>`))}
				</select>
				${n.length?o.qy`<div class="coordinate-label">${(()=>{const e=this._mapService.getCoordinateRepresentations(n).filter((e=>e.group===r.group))[0];return e?this._coordinateService.stringify(n,e):" - "})()}</div>`:o.s6}
			</div>
		`}static get tag(){return"ba-coordinate-select"}}window.customElements.get(u.tag)||window.customElements.define(u.tag,u);var g=n(25837),h=n.n(g);class p extends c.T{createView(){return o.qy`
			<style>
				${h()}
			</style>
			<div class="content selectable">
				<div class="base-layer-info">
					<ba-base-layer-info></ba-base-layer-info>
				</div>
				<div class="coordinates">
					<ba-coordinate-select></ba-coordinate-select>
				</div>
			</div>
		`}static get tag(){return"ba-map-info"}}window.customElements.get(p.tag)||window.customElements.define(p.tag,p);const m="update_layers",_="update_zoomLevel";class v extends c.T{constructor(){super({activeLayers:null,zoomLevel:null});const{TranslationService:e,GeoResourceService:t}=r.z.inject("TranslationService","GeoResourceService");this._translationService=e,this._georesourceService=t,this.observe((e=>e.layers.active),(e=>this.signal(m,[...e]))),this.observe((e=>e.position.zoom),(e=>this.signal(_,e)))}update(e,t,n){switch(e){case m:return{...n,activeLayers:[...t]};case _:return{...n,zoomLevel:t}}}createView(e){const t=e=>this._translationService.translate(e),{activeLayers:n,zoomLevel:r}=e,i=(()=>{const e=n[0]?this._georesourceService.byId(n[0].geoResourceId):null;if(e){return e.getAttribution(r).map((e=>e.description)).filter((e=>!!e)).join(", ")||e.label}return null})()??t("map_baseLayerInfo_fallback");return n.length>0?o.qy` <div>${t("map_baseLayerInfo_label")}: ${i}</div> `:o.s6}static get tag(){return"ba-base-layer-info"}}window.customElements.get(v.tag)||window.customElements.define(v.tag,v);var y=n(30785),b=n.n(y);class S extends c.T{constructor(){super();const{TranslationService:e}=r.z.inject("TranslationService");this._translationService=e}createView(){const e=e=>this._translationService.translate(e);return o.qy`
			<style>
				${b()}
			</style>
			<div class="privacy_policy-container">
				<a
					class="privacy-policy-link"
					title="${e("footer_privacy_policy_link")}"
					aria-label="${e("footer_privacy_policy_link")}"
					href="${e("global_privacy_policy_url")}"
					target="_blank"
					>${e("footer_privacy_policy_link")}</a
				>
			</div>
		`}static get tag(){return"ba-privacy-policy"}}window.customElements.get(S.tag)||window.customElements.define(S.tag,S);var f=n(82494);window.customElements.get(f.w.tag)||window.customElements.define(f.w.tag,f.w)},4046:(e,t,n)=>{"use strict";n.d(t,{G:()=>s});var r=n(18410),i=n(89707),o=n(1001);const a=Object.freeze({DISPLAY_TIME_TRAVEL:"display_time_travel"});class s{#a;constructor(){const{StoreService:e}=r.z.inject("StoreService");this.#a=e}apply(e){e===a.DISPLAY_TIME_TRAVEL&&this._displayTimeTravel()}_displayTimeTravel(){const e="zeitreihe_tk";(0,i.EI)(e),this.#a.getStore().getState().layers.active.forEach((t=>{t.geoResourceId===e&&(0,i.I7)(t.id,{visible:!0})})),(0,o.IX)()}}},6444:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDI0IiBoZWlnaHQ9IjEwMjQiPjwhLS1NSVQgTGljZW5zZS0tPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik01MTIgNjRjMTcuNjczIDAgMzIgMTQuMzI3IDMyIDMydjgzMmMwIDE3LjY3My0xNC4zMjcgMzItMzIgMzJzLTMyLTE0LjMyNy0zMi0zMlY5NmMwLTE3LjY3MyAxNC4zMjctMzIgMzItMzJtNTAyLjY1NiA0MjUuMzQ0YzUuODA4IDUuNzk0IDkuNDAxIDEzLjgwNSA5LjQwMSAyMi42NTZzLTMuNTkzIDE2Ljg2Mi05LjQwMSAyMi42NTVMODg2LjY1NSA2NjIuNjU2Yy01Ljc5OCA1Ljc5OC0xMy44MDggOS4zODQtMjIuNjU2IDkuMzg0LTE3LjY5NSAwLTMyLjA0LTE0LjM0NS0zMi4wNC0zMi4wNCAwLTguODQ4IDMuNTg2LTE2Ljg1OCA5LjM4NC0yMi42NTZMOTE0Ljc1MSA1NDRINjcxLjk5OWMtMTcuNjczIDAtMzItMTQuMzI3LTMyLTMyczE0LjMyNy0zMiAzMi0zMmgyNDIuNzUybC03My40MDgtNzMuMzQ0Yy01Ljc5OC01Ljc5OC05LjM4NC0xMy44MDgtOS4zODQtMjIuNjU2IDAtMTcuNjk1IDE0LjM0NS0zMi4wNCAzMi4wNC0zMi4wNCA4Ljg0OCAwIDE2Ljg1OCAzLjU4NiAyMi42NTYgOS4zODRsMTI4IDEyOHpNMzg0IDUxMmMwIDE3LjY3My0xNC4zMjcgMzItMzIgMzJIMTA5LjI0OGw3My40MDggNzMuMzQ0YzUuNzk4IDUuNzk4IDkuMzg0IDEzLjgwOCA5LjM4NCAyMi42NTYgMCAxNy42OTUtMTQuMzQ1IDMyLjA0LTMyLjA0IDMyLjA0LTguODQ4IDAtMTYuODU4LTMuNTg2LTIyLjY1Ni05LjM4NGwtMTI4LTEyOEMzLjUzNiA1MjguODYyLS4wNTcgNTIwLjg1MS0uMDU3IDUxMnMzLjU5My0xNi44NjIgOS40MDEtMjIuNjU1bDEyOC4wMDEtMTI4LjAwMWM1Ljc5OC01Ljc5OCAxMy44MDgtOS4zODQgMjIuNjU2LTkuMzg0IDE3LjY5NSAwIDMyLjA0IDE0LjM0NSAzMi4wNCAzMi4wNCAwIDguODQ4LTMuNTg2IDE2Ljg1OC05LjM4NCAyMi42NTZMMTA5LjI0OSA0ODBoMjQyLjc1MmMxNy42NzMgMCAzMiAxNC4zMjcgMzIgMzJ6Ii8+PC9zdmc+Cg=="},6727:(e,t,n)=>{"use strict";n.d(t,{iu:()=>o,pI:()=>r});const r="import/added",i={latest:null},o=(e=i,t)=>{const{type:n,payload:o}=t;return n===r?{...e,latest:o}:e}},7642:(e,t,n)=>{var r=n(31601),i=n(76314)(r);i.push([e.id,".color-row {\n\tdisplay: flex;\n}\n\n.color {\n\tcursor: pointer;\n\tdisplay: inline-block;\n\theight: 2em;\n\twidth: 2em;\n\tborder: none;\n\ttransition: transform var(--animation-duration-small-close) var(--animation-easing-open);\n\tbox-shadow: 0 1px 2px rgb(0 0 0 / 50%);\n}\n\n.color:hover {\n\ttransform: scale(1.1);\n\tz-index: 1;\n}\n\n/* \n\tPalette with 16 Colors.\n*/\n.black {\n\tbackground: black;\n}\n\n.grey {\n\tbackground: grey;\n}\n\n.maroon {\n\tbackground: maroon;\n}\n\n.red {\n\tbackground: red;\n}\n\n.green {\n\tbackground: green;\n}\n\n.lime {\n\tbackground: lime;\n}\n\n.olive {\n\tbackground: olive;\n}\n\n.yellow {\n\tbackground: yellow;\n}\n\n.navy {\n\tbackground: navy;\n}\n\n.blue {\n\tbackground: blue;\n}\n\n.purple {\n\tbackground: purple;\n}\n\n.fuchsia {\n\tbackground: fuchsia;\n}\n\n.teal {\n\tbackground: teal;\n}\n\n.aqua {\n\tbackground: aqua;\n}\n\n.silver {\n\tbackground: silver;\n}\n\n.white {\n\tbackground: white;\n}\n",""]),e.exports=i},8196:(e,t,n)=>{var r=n(31601),i=n(76314),o=n(4417),a=n(16009),s=i(r),c=o(a);s.push([e.id,`.ba_values_container {\n\tmax-height: 19em;\n\toverflow: auto;\n\tpadding: 0.1em;\n\tborder: 1px solid var(--primary-bg-color);\n\tbox-shadow: 0px 0px 4px rgb(0 0 0 / 50%);\n\tbackground-color: var(--tertiary-bg-color);\n\tz-index: 100;\n\tpointer-events: auto;\n\ttransform-origin: top right;\n\tanimation-name: openScale;\n\tanimation-duration: var(--animation-duration-medium-open);\n\tanimation-iteration-count: 1;\n\twidth: auto;\n\tcontain: layout;\n}\n\n.grid {\n\tdisplay: grid;\n\tgrid-template-columns: repeat(10, 1fr);\n\tgrid-template-rows: 1fr;\n\tgrid-column-gap: 0;\n\tgrid-row-gap: 0;\n\ttransform: scaleX(-1);\n}\n\n.is-portrait .ba_values_container {\n\tposition: inherit;\n}\n\n.is-landscape .ba_values_container {\n\tposition: fixed;\n\tz-index: 1;\n}\n\n.ba_value_item {\n\tcolor: var(--text1);\n\tpadding: 0.3em 0.5em;\n\tborder-color: var(--primary-bg-color);\n\tborder-width: 0px;\n\tborder-style: solid;\n\ttransition: transform var(--animation-duration-medium-close) var(--animation-easing-open);\n\tjustify-self: center;\n\ttext-align: center;\n\tfont-size: 1.1rem;\n\ttransform: scaleX(-1);\n\tmargin-top: 0.1em;\n\tborder-right: 2px dotted var(--header-background-color);\n}\n\n.ba_value_item:hover {\n\tbackground: var(--primary-color-lighter);\n\tcolor: var(--secondary-color) !important;\n\tborder-right: 2px solid var(--header-background-color) !important;\n}\n\n.isselected {\n\tcolor: var(--text3) !important;\n\tbackground: var(--primary-color);\n\tborder-right: 2px solid var(--primary-color) !important;\n}\n\n.iscollapsed {\n\tdisplay: none;\n}\n\n.valueselect__toggle-button {\n\tborder: 0;\n\twidth: auto;\n\tborder-bottom: 0.2em solid var(--secondary-color);\n\tbackground: var(--header-background-color);\n\tfont-size: 1rem;\n\tpadding: 0.3em 2em 0.3em 0.5em;\n\tbox-shadow: none;\n\tbackground-repeat: no-repeat;\n\tbackground-position: calc(100% - 0.6em) center;\n\tbackground-size: 0.8em;\n\tbackground-image: url(${c});\n}\n\nba-icon {\n\tdisplay: none;\n}\n\n.ba_value_item[id$='0'] {\n\tgrid-column-start: 10;\n\tgrid-column-end: 10;\n\tcolor: var(--text4);\n}\n.ba_value_item[id$='1'] {\n\tgrid-column-start: 9;\n\tgrid-column-end: 9;\n}\n.ba_value_item[id$='2'] {\n\tgrid-column-start: 8;\n\tgrid-column-end: 8;\n}\n.ba_value_item[id$='3'] {\n\tgrid-column-start: 7;\n\tgrid-column-end: 7;\n}\n.ba_value_item[id$='4'] {\n\tgrid-column-start: 6;\n\tgrid-column-end: 6;\n}\n.ba_value_item[id$='5'] {\n\tgrid-column-start: 5;\n\tgrid-column-end: 5;\n}\n.ba_value_item[id$='6'] {\n\tgrid-column-start: 4;\n\tgrid-column-end: 4;\n}\n.ba_value_item[id$='7'] {\n\tgrid-column-start: 3;\n\tgrid-column-end: 3;\n}\n.ba_value_item[id$='8'] {\n\tgrid-column-start: 2;\n\tgrid-column-end: 2;\n}\n.ba_value_item[id$='9'] {\n\tgrid-column-start: 1;\n\tgrid-column-end: 1;\n}\n`,""]),e.exports=s},8649:(e,t,n)=>{"use strict";n.d(t,{p:()=>a,q:()=>o});var r=n(86407),i=n(18410);const o=Object.freeze({TOPICS:0,CATALOG_0:1,CATALOG_1:2}),a=e=>{(()=>{const{StoreService:e}=i.z.inject("StoreService");return e.getStore()})().dispatch({type:r.wt,payload:e})}},9525:(e,t,n)=>{"use strict";n.d(t,{Hp:()=>i,hf:()=>a,l3:()=>o,po:()=>s});var r=n(47518);const i="components/menu/mainMenu/open",o="components/menu/mainMenu/tabChanged",a="components/menu/mainMenu/focusSearchField",s=(e=window)=>{const t={open:!e.matchMedia("(max-width: 80em) or (orientation: portrait)").matches,tab:null,focusSearchField:new r.MD};return(e=t,n)=>((e,t)=>{const{type:n,payload:r}=t;switch(n){case i:return{...e,open:r};case o:return{...e,tab:r};case a:return{...e,focusSearchField:r}}return e})(e,n)}},9559:(e,t,n)=>{"use strict";n.d(t,{R_:()=>r,Yz:()=>i,um:()=>o,z8:()=>s});const r="featureCollection/entry/add",i="featureCollection/clear",o="featureCollection/remove/id",a={entries:[]},s=(e=a,t)=>{const{type:n,payload:s}=t;switch(n){case r:{const t=[...e.entries,...s];return{...e,entries:t}}case i:return{...e,entries:[]};case o:{const t=e.entries.filter((e=>!s.includes(e.id)));return{...e,entries:t}}}return e}},9923:(e,t,n)=>{var r=n(55343);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},10314:(e,t,n)=>{var r=n(48318);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},11177:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmktYm91bmRpbmctYm94LWNpcmNsZXMiPjxwYXRoIGQ9Im0yLjAxNyAzLjYyNSAxLjEzMS0uNjI3Ljc1LTEuMTA0IDguMjU5LjEzNy43NjMgMS4xMyAxLjAyMi42MTQuMTEgOC41MTgtMS4xNi41ODYtLjQ5IDEuMDc3LTguNjk1LjA0LS42NTQtMS4wNjItLjkxMy0uNTMyWiIgc3R5bGU9ImZpbGw6I2EwMDtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6LjI0NTY2OTI5O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjE7b3BhY2l0eTouMjtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZSIvPjxwYXRoIGQ9Ik0yIDFhMSAxIDAgMSAwIDAgMiAxIDEgMCAwIDAgMC0yTTAgMmEyIDIgMCAwIDEgMy45MzctLjVoOC4xMjZBMiAyIDAgMSAxIDE0LjUgMy45Mzd2OC4xMjZhMiAyIDAgMSAxLTIuNDM3IDIuNDM3SDMuOTM3QTIgMiAwIDEgMSAxLjUgMTIuMDYzVjMuOTM3QTIgMiAwIDAgMSAwIDJtMi41IDEuOTM3djguMTI2Yy43MDMuMTggMS4yNTYuNzM0IDEuNDM3IDEuNDM3aDguMTI2YTIgMiAwIDAgMSAxLjQzNy0xLjQzN1YzLjkzN0EyIDIgMCAwIDEgMTIuMDYzIDIuNUgzLjkzN0EyIDIgMCAwIDEgMi41IDMuOTM3TTE0IDFhMSAxIDAgMSAwIDAgMiAxIDEgMCAwIDAgMC0yTTIgMTNhMSAxIDAgMSAwIDAgMiAxIDEgMCAwIDAgMC0ybTEyIDBhMSAxIDAgMSAwIDAgMiAxIDEgMCAwIDAgMC0yIi8+PC9zdmc+PCEtLU1JVCBMaWNlbnNlLS0+Cg=="},12347:(e,t,n)=>{"use strict";var r=n(18410);const{TranslationService:i}=r.z.inject("TranslationService");i.register("featureInfoProvider",(e=>{switch(e){case"en":return{featureInfo_close_button:"Close",featureInfo_header:"Object Information",featureInfo_info:"No information available.<br>Please click into the <b>map</b>."};case"de":return{featureInfo_close_button:"Schließen",featureInfo_header:"Objekt-Info",featureInfo_info:"Keine Informationen verfügbar.<br>Bitte in die <b>Karte</b> klicken."};default:return{}}}));var o=n(33261),a=n(36752),s=n(40068),c=n(78645),l=n(90374),d=n.n(l),u=n(43174),g=n(56729),h=n(42376),p=n(28353),m=n(99990),_=n(12723);const v="update_featureInfo_data",y=`highlightedFeatureInfoGeometry_${(0,h.Ds)()}`;class b extends m.T{constructor(){super({featureInfoData:[]});const{TranslationService:e}=r.z.inject("TranslationService");this._translationService=e,this.observe((e=>e.featureInfo.current),(e=>this.signal(v,[...e])))}update(e,t,n){if(e===v)return{...n,featureInfoData:[...t]}}createView(e){const{featureInfoData:t}=e,n=e=>this._translationService.translate(e);return a.qy`
			<style>
				${d()}
			</style>
			<div>
				<div class="container">
					<ul class="ba-list">
						<li class="ba-list-item  ba-list-inline ba-list-item__header featureinfo-header">
							<span class="ba-list-item__pre" style="position:relative;left:-1em;">
								<ba-icon .icon="${u}" .size=${4} .title=${n("featureInfo_close_button")} @click=${c.pT}></ba-icon>
							</span>
							<span class="ba-list-item__text vertical-center">
								<span class="ba-list-item__main-text" style="position:relative;left:-1em;"> ${n("featureInfo_header")} </span>
							</span>
						</li>
						${t.map((e=>{return a.qy`
								<li class="ba-section">
									<button
										class="ba-list-item ba-list-item__header ${n=e.geometry,n?"is-geometry":""}"
										@mouseenter=${()=>(e=>{e&&(0,g.lX)({id:y,type:_.p.MARKER_TMP,data:e})})(e.geometry)}
										@mouseleave=${()=>{(0,g.kf)(y)}}
									>
										<span class="ba-list-item__text  ba-list-item__primary-text">${e.title}</span>
										<span class="ba-list-item__after">
											<i class="icon icon-rotate-90 chevron iconexpand"></i>
										</span>
									</button>
									<div class="collapse-content divider">${t=e.content,(0,p.qb)(t)?t:a.qy`${(0,s._)(t)}`}</div>
								</li>
							`;var t,n}))}
					</ul>
					<div></div>
				</div>
			</div>
		`}static get tag(){return"ba-feature-info-iframe-panel"}}var S=n(55449),f=n(2277),w=n(68098),M=n.n(w),I=n(68514),A=n(28288);const L="update_configuration";class E extends m.T{#n;#a;#s;constructor(){super({configuration:null});const{TranslationService:e,StoreService:t,EnvironmentService:n}=r.z.inject("TranslationService","StoreService","EnvironmentService");this.#n=e,this.#a=t,this.#s=n}update(e,t,n){if(e===L)return{...n,configuration:t}}createView(e){const{configuration:t}=e;if(t&&!this.#s.isEmbeddedAsIframe()){const{feature:e,geoResourceId:n}=t,r=e=>this.#n.translate(e),i=this.#a.getStore().getState().featureCollection.entries.map((e=>e.id)).includes(e.id),o=()=>{(0,S.gI)(e.id),(0,f.L)(r("global_featureCollection_remove_feature_notification"),f.A.INFO),(0,c.pT)()},s=()=>{(0,g.r3)([A.ck]),(0,S.db)(e),(0,f.L)(r("global_featureCollection_add_feature_notification"),f.A.INFO),(0,c.pT)()};if(i&&n===I.eU)return a.qy`<style>
						${M()}
					</style>
					<button class="chips__button remove" .title=${r("global_featureCollection_remove_feature_title")} @click=${o}>
						<span class="chips__icon"></span>
						<span class="chips__button-text">${r("global_featureCollection_remove_feature")}</span>
					</button>`;if(!i)return a.qy`<style>
						${M()}
					</style>
					<button class="chips__button add" .title=${r("global_featureCollection_add_feature_title")} @click=${s}>
						<span class="chips__icon"></span>
						<span class="chips__button-text">${r("global_featureCollection_add_feature")}</span>
					</button>`}return a.s6}set configuration(e){this.signal(L,e)}static get tag(){return"ba-feature-info-collection-panel"}}window.customElements.get(o.X.tag)||window.customElements.define(o.X.tag,o.X),window.customElements.get(b.tag)||window.customElements.define(b.tag,b),window.customElements.get(E.tag)||window.customElements.define(E.tag,E)},12723:(e,t,n)=>{"use strict";n.d(t,{p:()=>r});const r=Object.freeze({MARKER:0,MARKER_TMP:1,QUERY_RUNNING:2,QUERY_SUCCESS:3,DEFAULT:4,DEFAULT_TMP:5})},12982:(e,t,n)=>{var r=n(31601),i=n(76314),o=n(4417),a=n(45709),s=n(26101),c=i(r),l=o(a),d=o(s);c.push([e.id,`.chips__button {\n\tbackground: var(--primary-bg-color);\n\tborder: 1px solid var(--text2);\n\tdisplay: flex;\n\tmargin-left: 0;\n\tz-index: calc(var(--z-header) + 20);\n\tborder-radius: 2em;\n\tpadding: 0.5em 0.9em;\n\tcursor: pointer;\n\ttext-decoration: none;\n\tflex-shrink: 0;\n\tfont-size: 0.75rem;\n}\n.chips__button:focus {\n\tbox-shadow: 0 0 0 0.2em var(--primary-color-lighter);\n}\n.chips__button-text {\n\tcolor: var(--text1);\n\tfont-weight: bold;\n\tmargin: auto 0.5em;\n}\n.chips__button:hover {\n\tborder: 1px solid var(--secondary-color);\n}\n.chips__button:hover .chips__button-text {\n\tcolor: var(--text4);\n}\n.chips__icon {\n\theight: 1.5em;\n\twidth: 1.5em;\n\tposition: relative;\n\ttop: -0.1em;\n\tmask-size: cover;\n\tbackground: var(--text4);\n}\n.add .chips__icon {\n\tbackground: var(--success-color);\n\tmask: url(${l});\n\t-webkit-mask-image: url(${l});\n\t-webkit-mask-size: cover;\n}\n.remove .chips__icon {\n\tbackground: var(--error-color);\n\tmask: url(${d});\n\t-webkit-mask-image: url(${d});\n\t-webkit-mask-size: cover;\n}\n.chips__button.add:hover .chips__icon {\n\tbackground: var(--success-color);\n\tmask: url(${d});\n\t-webkit-mask-image: url(${d});\n\t-webkit-mask-size: cover;\n}\n`,""]),e.exports=c},13513:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxZW0iIGhlaWdodD0iMWVtIiBmaWxsPSJjdXJyZW50Q29sb3IiIGNsYXNzPSJiaSBiaS1wbHVzLWNpcmNsZS1maWxsIiB2aWV3Qm94PSIwIDAgMTYgMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTE2IDhBOCA4IDAgMSAxIDAgOGE4IDggMCAwIDEgMTYgME04LjUgNGEuNS41IDAgMCAwLTEgMHYzLjVINGEuNS41IDAgMCAwIDAgMWgzLjVWMTJhLjUuNSAwIDAgMCAxIDBWOC41SDEyYS41LjUgMCAwIDAgMC0xSDguNXoiLz48L3N2Zz4K"},13869:(e,t,n)=>{"use strict";n.d(t,{K1:()=>r,Tk:()=>a,hK:()=>i});const r="elevationProfile/activeChanged",i="elevationProfile/changed",o={active:!1,id:null},a=(e=o,t)=>{const{type:n,payload:a}=t;switch(n){case r:{const{active:t}=a;return{...e,active:t}}case i:return{...e,id:a}}return e}},14075:(e,t,n)=>{"use strict";n.d(t,{n1:()=>u,C_:()=>l,EI:()=>d});var r=n(18410),i=n(44668);const o=async e=>{const{HttpService:t,ConfigService:n}=r.z.inject("HttpService","ConfigService"),o=await(async()=>{switch(e.constructor){case d:return await t.post(`${n.getValueAsPath("BACKEND_URL")}feedback/tim/message`,JSON.stringify(e),i.z.JSON);case l:return await t.post(`${n.getValueAsPath("BACKEND_URL")}feedback/general/message`,JSON.stringify(e),i.z.JSON);default:throw new Error("Feedback could not be stored: Unknown feedback class")}})();if(200===o.status)return!0;throw new Error(`Feedback could not be stored: Http-Status ${o.status}`)},a=async()=>{const{HttpService:e,ConfigService:t}=r.z.inject("HttpService","ConfigService"),n=`${t.getValueAsPath("BACKEND_URL")}feedback/tim/categories`,i=await e.get(n);if(200===i.status)return await i.json();throw new Error(`MapFeedback categories could not be loaded: Http-Status ${i.status}`)},s=async()=>{const{HttpService:e,ConfigService:t}=r.z.inject("HttpService","ConfigService"),n=`${t.getValueAsPath("BACKEND_URL")}feedback/general/categories`,i=await e.get(n);if(200===i.status)return await i.json();throw new Error(`MapFeedback categories could not be loaded: Http-Status ${i.status}`)},c=()=>"tim";class l{constructor(e,t,n=null,r=null,i=null){this.category=e,this.description=t,this.email=n,this.rating=r,this.state=i}}class d{constructor(e,t,n,r,i=null){this.state=e,this.category=t,this.description=n,this.geometryId=r,this.email=i}}class u{constructor(e=o,t=a,n=c,r=s){this._feedbackStorageProvider=e,this._mapFeedbackCategoriesProvider=t,this._mapFeedbackOverlayGeoResourceProvider=n,this._generalFeedbackCategoriesProvider=r,this._mapCategories=null,this._generalCategories=null}async getMapFeedbackCategories(){return this._mapCategories||(this._mapCategories=await this._mapFeedbackCategoriesProvider()),[...this._mapCategories]}async getGeneralFeedbackCategories(){return this._generalCategories||(this._generalCategories=await this._generalFeedbackCategoriesProvider()),[...this._generalCategories]}async save(e){return this._feedbackStorageProvider(e)}getOverlayGeoResourceId(){return this._mapFeedbackOverlayGeoResourceProvider()}}},14629:(e,t,n)=>{"use strict";n.d(t,{EC:()=>b,Gw:()=>h,KH:()=>f,MJ:()=>l,Qw:()=>c,ZS:()=>s,bW:()=>g,dN:()=>a,mg:()=>u,zQ:()=>p,z_:()=>d});var r=n(18410),i=n(47518),o=n(89707);const a="layer/added",s="layer/removed",c="layer/removeAndSet",l="layer/modified",d="layer/props/modified",u="layer/resources/ready",g="layer/geoResource/changed",h="layer/ui/filter/changed",p="layer/ui/settings/changed",m={active:[],removed:new i.MD([]),added:new i.MD([]),ready:!1,activeFilterUI:null,activeSettingsUI:null},_=e=>(e.forEach(((e,t)=>{e.zIndex=t})),e),v=e=>{const t=e.filter((e=>e.constraints.alwaysTop)),n=e.sort(((e,t)=>e.zIndex-t.zIndex));return t.forEach((e=>{n.push(n.splice(n.indexOf(e),1)[0])})),_(n)},y=()=>({alwaysTop:!1,hidden:!1,cloneable:!0,metaData:!0,filter:null,swipeAlignment:o.E0.NOT_SET,updateInterval:null}),b=()=>({visible:!0,zIndex:-1,opacity:1,timestamp:null,state:o.lr.OK,props:{},style:null,constraints:y(),grChangedFlag:null,activeFilterUI:null,activeSettingsUI:null}),S=e=>{const{GeoResourceService:t}=r.z.inject("GeoResourceService"),n=t.byId(e.geoResourceId);return n?.hasTimestamps()?e.timestamp??n.timestamps[0]:e.timestamp},f=(e=m,t)=>((e,t)=>[a,s,c,l].includes(t.type)?{...e,active:e.active.map((e=>({...e,timestamp:S(e)})))}:e)(((e,t)=>{const{type:n,payload:r}=t;switch(n){case a:return((e,t)=>{const{id:n,properties:r}=t;if(-1!==e.active.findIndex((e=>e.id===n)))return{...e};const o={...b(),geoResourceId:n,...r,constraints:{...y(),...r.constraints??{}},id:n},{constraints:{alwaysTop:a}}=o,s=r.zIndex>=0&&!a?r.zIndex:e.active.length,c=[...e.active];return c.splice(s,0,o),{...e,active:v(_(c)),added:new i.MD([n])}})(e,r);case s:return((e,t)=>{const n=_(e.active.filter((e=>e.id!==t)));return{...e,active:n,removed:e.active.length!==n.length?new i.MD([t]):e.removed}})(e,r);case c:return((e,t)=>{const{layerOptions:n,restoreHiddenLayers:r}=t,o=n.map(((t,n)=>({...b(),geoResourceId:t.id,...t,zIndex:n,constraints:{...y(),...t.constraints},grChangedFlag:e.active[n]?.id===t.id?e.active[n].grChangedFlag:null})));if(r){const t=e.active.map(((e,t)=>e.constraints.hidden?t:-1)).filter((e=>e>-1));t.forEach((t=>{const n=e.active[t];n.zIndex=o.length,o.splice(o.length,0,n)}))}return{...e,active:o,removed:e.active.length>0?new i.MD([...e.active.filter((e=>!r||!e.constraints.hidden)).map((e=>e.id))]):e.removed,added:n.length>0?new i.MD(n.map((e=>e.id))):e.added}})(e,r);case l:return((e,t)=>{const{id:n,properties:r,constraints:i}=t,o=e.active.find((e=>e.id===n));if(o){const t=[...e.active],n=t.indexOf(o);t.splice(n,1);const a={...o,...r,constraints:{...o.constraints,...i}};return t.splice(a.zIndex,0,a),{...e,active:v(_(t))}}return{...e}})(e,r);case d:return((e,t)=>{const{id:n,props:r,replace:i}=t,o=e.active.find((e=>e.id===n));if(o){const t=[...e.active],n=t.indexOf(o);t.splice(n,1);const a={...o,props:i?{...r}:{...o.props,...r}};return t.splice(a.zIndex,0,a),{...e,active:v(_(t))}}return{...e}})(e,r);case g:return((e,t)=>({...e,active:e.active.map((e=>({...e,grChangedFlag:e.geoResourceId===t?new i.MD(t):e.grChangedFlag})))}))(e,r);case u:return((e,t)=>({...e,ready:t}))(e,r);case h:return((e,t)=>({...e,activeFilterUI:t}))(e,r);case p:return((e,t)=>({...e,activeSettingsUI:t}))(e,r)}return e})(e,t),t)},14707:(e,t,n)=>{var r=n(66823);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},14983:(e,t,n)=>{"use strict";n.d(t,{D2:()=>i,Lv:()=>r,QN:()=>a});const r="timeTravel/timestamp",i="timeTravel/active",o={timestamp:null,active:!1},a=(e=o,t)=>{const{type:n,payload:a}=t;switch(n){case r:return{...e,timestamp:a};case i:{const{active:t,timestamp:n}=a;return{...e,active:t,timestamp:n??e.timestamp}}}return e}},15337:(e,t,n)=>{"use strict";n.d(t,{LU:()=>c,Yf:()=>s,pv:()=>l});var r=n(92327),i=n(18410),o=n(28353);const a=()=>{const{StoreService:e}=i.z.inject("StoreService");return e.getStore()},s=()=>{a().dispatch({type:r.kR,payload:!0})},c=()=>{a().dispatch({type:r.kR,payload:!1})},l=e=>{(0,o.Et)(e)&&e>=0&&e<=100&&a().dispatch({type:r.Lz,payload:e})}},16009:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgY2xhc3M9ImJpIGJpLWNhcmV0LWRvd24tZmlsbCI+PCEtLU1JVCBMaWNlbnNlLS0+PHBhdGggZmlsbD0iIzJjNWE5MyIgZD0iTTcuMjQ3IDExLjE0IDIuNDUxIDUuNjU4QzEuODg1IDUuMDEzIDIuMzQ1IDQgMy4yMDQgNGg5LjU5MmExIDEgMCAwIDEgLjc1MyAxLjY1OWwtNC43OTYgNS40OGExIDEgMCAwIDEtMS41MDYgMHoiLz48L3N2Zz4K"},16129:(e,t,n)=>{"use strict";n.d(t,{LU:()=>s,Yf:()=>a,b4:()=>c,iY:()=>l,td:()=>u,xy:()=>d});var r=n(79071),i=n(18410);n(47518);const o=()=>{const{StoreService:e}=i.z.inject("StoreService");return e.getStore()},a=()=>{o().dispatch({type:r.kR,payload:!0})},s=()=>{o().dispatch({type:r.kR,payload:!1})},c=e=>{o().dispatch({type:r.Y2,payload:e})},l=e=>{o().dispatch({type:r.LN,payload:e})},d=e=>{o().dispatch({type:r.RW,payload:e})},u=e=>{o().dispatch({type:r.Wn,payload:e})}},16438:(e,t,n)=>{var r=n(92474);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},16575:(e,t,n)=>{var r=n(96579);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},16800:(e,t,n)=>{"use strict";n.d(t,{$3:()=>m,$4:()=>E,CG:()=>b,CI:()=>h,Fl:()=>v,Fp:()=>A,GT:()=>x,NI:()=>L,Q5:()=>S,Ql:()=>y,TV:()=>T,Zj:()=>M,nT:()=>f,p2:()=>D,qC:()=>p,r6:()=>I,tT:()=>g,xQ:()=>w});var r=n(27430),i=n(22809),o=n(11217),a=n(96702),s=n(44294),c=n(34142),l=n(28353),d=n(18410),u=n(69600);const g="projectedLength",h="azimuth",p=e=>e instanceof o.A?e:e instanceof i.A?new o.A(e.getCoordinates()):e instanceof c.Ay?new o.A(e.getCoordinates()[0]):e instanceof a.A?1===e.getLineStrings().length?e.getLineStrings()[0]:_(e):null,m=e=>{let t=0;if(!(e.length<3)){for(let n=0;n<e.length-1;n+=1){const r=e[n],i=e[(n+1)%e.length];t+=(i[0]-r[0])*(i[1]+r[1])}return 0===t?void 0:t>0}},_=e=>{if(!(e instanceof a.A))return null;const t=(e,t)=>{const n=e.getLastCoordinate(),r=t.getFirstCoordinate();return n[0]===r[0]&&n[1]===r[1]},n=e.getLineStrings();let r=[];for(let e=0;e<n.length;e++){const i=n[e],o=n[e+1];if(o&&!t(i,o)){r.length=0;break}r=r.concat(i.getCoordinates())}return 0===r.length?null:new o.A(r)},v=e=>{if(!Array.isArray(e)||4!==e.length)return null;const[t,n,r,i]=e;return new c.Ay([[[t,i],[r,i],[r,n],[t,n],[t,i]]])},y=(e,t)=>{if(e&&t&&(0,l.Et)(t.width)&&(0,l.Et)(t.height))return[e[0]-t.width/2,e[1]-t.height/2,e[0]+t.width/2,e[1]+t.height/2]},b=(e,t)=>{const n=p(e);return n?n.getCoordinateAt(t):null},S=e=>{if(e instanceof o.A){const t=e.getCoordinates();if(2===t.length||3===t.length&&t[1][0]===t[2][0]&&t[1][1]===t[2][1])return!0}return e instanceof a.A&&null!=e.get(h)},f=e=>{if(e instanceof a.A){const t=e.get(h);if(null!=t)return t}if(!(e instanceof c.Ay||e instanceof o.A||e instanceof i.A))return null;const t=e instanceof c.Ay?e.getCoordinates(!1)[0]:e.getCoordinates();if(t.length<2)return null;const n=t[0],r=t[1],s=r[0]-n[0],l=r[1]-n[1];return(360+(s>0?1:-1)*Math.acos(l/Math.sqrt(s*s+l*l))*180/Math.PI)%360},w=e=>{if(!e||"Polygon"!==e.getType())return null;const t=e.getCoordinates()[0],n=(e,t)=>Math.atan2(t[1]-e[1],t[0]-e[0]);return(n(t[0],t[1])+n(t[3],t[2]))/2},M=(e,t=1)=>{const n=r=>{const i=r/e;return 1<i?1:(o=r)/t>40&&e>o&&.02<i?i:n(10*r);var o};return n(10)},I=(e,t)=>{if(!(t instanceof s.A))return!1;const n=t.getCoordinates(),r=(e=>e instanceof c.Ay?e.getCoordinates(!1)[0]:e instanceof s.A?[e.getCoordinates()]:e.getCoordinates())(e);return!!r.find((e=>e[0]===n[0]&&e[1]===n[1]))},A=(e,t,n)=>{const r=Math.atan2(t[1]-e[1],t[0]-e[0]),i=[Math.sin(r)*n+e[0],-Math.cos(r)*n+e[1]],a=[Math.sin(r)*n+t[0],-Math.cos(r)*n+t[1]];return new o.A([i,a])},L=(e,t,n)=>{const r=t*(Math.PI/180);return[Math.cos(r)*n+e[0],Math.sin(r)*n+e[1]]},E=(e,t)=>{const n=[],r=p(e);if(r){const e=r.getLength()*t;let i=0,a=0;r.forEachSegment(((t,r)=>{const s=new o.A([t,r]);i+=s.getLength(),n.push(a),a=i%e/e}))}return n},T=e=>null!=e&&(e instanceof s.A||(e instanceof o.A?e.getLength()>0:e instanceof c.Ay&&e.getArea()>0)),x=e=>{const{MapService:t}=d.z.inject("MapService"),n={geometryType:null,coordinate:null,azimuth:null,length:null,area:null};return e instanceof s.A?{...n,geometryType:u.d.POINT,coordinate:e.getCoordinates()}:e instanceof o.A?{...n,geometryType:u.d.LINE,azimuth:S(e)?f(e):null,length:t.calcLength(e.getCoordinates())}:e instanceof a.A?{...n,geometryType:u.d.LINE,length:e.getLineStrings().reduce(((e,n)=>e+t.calcLength(n.getCoordinates())),0)}:e instanceof c.Ay?{...n,geometryType:u.d.POLYGON,length:t.calcLength(p(e).getCoordinates()),area:t.calcArea(e.getCoordinates())}:n},D=e=>{if(e instanceof r.A){const t=(e=>e instanceof r.A&&e?.getCoordinates().length>1e3?e.simplify(17.5):e)(p(e));if(t)return t.getCoordinates()}return[]}},16907:(e,t,n)=>{"use strict";var r=n(36752),i=n(99990),o=n(18410),a=n(89707),s=n(94447),c=n(30191),l=n(84693),d=n(39400),u=n(42376),g=n(32551);class h extends i.T{constructor(){super();const{ImportVectorDataService:e,GeoResourceService:t}=o.z.inject("ImportVectorDataService","GeoResourceService");this._importVectorDataService=e,this._geoResourceService=t}createView(){const e={baseColor:"#f08126"},t={baseColor:"#57C785"},n={baseColor:"#2A7B9B"},i=()=>new c.g(new l.S("SRID=3857;POINT Z(1175135.201038777 6407648.071937083 0)",d.Y1.forEwkt(3857)),`${(0,u.Ds)()}`);return r.qy`
			<h3>Vector Data Styling</h3>
			<div class="example row">
				<ba-button .label=${"No Style at all"} .type=${"primary"} @click=${()=>{const e=new s.HA(`${(0,u.Ds)()}`,"No Style at all").addFeature(i()).setHidden(!0);this._geoResourceService.addOrReplace(e),(0,a.VE)(e.id)}}></ba-button>
				<ba-button .label=${"GeoResource has StyleHint"} .type=${"primary"} @click=${()=>{const e=new s.HA(`${(0,u.Ds)()}`,"GeoResource has StyleHint").addFeature(i()).setStyleHint(g.T.HIGHLIGHT).setHidden(!0);this._geoResourceService.addOrReplace(e),(0,a.VE)(e.id)}}></ba-button>
				<ba-button .label=${"GeoResource has Style"} .type=${"primary"} @click=${()=>{const t=new s.HA(`${(0,u.Ds)()}`,"GeoResource has Style").addFeature(i()).setStyleHint(g.T.HIGHLIGHT).setStyle(e).setHidden(!0);this._geoResourceService.addOrReplace(t),(0,a.VE)(t.id)}}></ba-button>
				<ba-button .label=${"BaLayer has Style"} .type=${"primary"} @click=${()=>{const n=new s.HA(`${(0,u.Ds)()}`,"BaLayers has Style").addFeature(i()).setStyleHint(g.T.HIGHLIGHT).setStyle(e).setHidden(!0);this._geoResourceService.addOrReplace(n),(0,a.VE)(n.id,{style:t})}}></ba-button>
				<ba-button .label=${"BaFeature has StyleHint"} .type=${"primary"} @click=${()=>{const t=new s.HA(`${(0,u.Ds)()}`,"BaFeature has StyleHint").addFeature(i().setStyleHint(g.T.HIGHLIGHT)).setStyle(e).setHidden(!0);this._geoResourceService.addOrReplace(t),(0,a.VE)(t.id)}}></ba-button>
				<ba-button .label=${"BaFeature has Style"} .type=${"primary"} @click=${()=>{const r=new s.HA(`${(0,u.Ds)()}`,"BaFeature has Style").addFeature(i().setStyle(n)).setStyleHint(g.T.HIGHLIGHT).setStyle(e).setHidden(!0);this._geoResourceService.addOrReplace(r),(0,a.VE)(r.id,{style:t})}}></ba-button>
				<ba-button .label=${"Data source has its own Style"} .type=${"primary"} @click=${async()=>{const n=new s.HA(`${(0,u.Ds)()}`,"Data Source has its own Style",s.Vz.KML).setSource('<kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd"><Document><name>Drawing</name><Placemark id="draw_marker_1751472597861"><Style><IconStyle><scale>1.125</scale><Icon><href>https://services.atlas.bayern.de/icons/255,0,0/marker.png</href><gx:w>48</gx:w><gx:h>48</gx:h></Icon><hotSpot x="24" y="0" xunits="pixels" yunits="pixels"/></IconStyle></Style><Point><coordinates>10.5564198,49.7764351</coordinates></Point></Placemark></Document></kml>',4326).setStyleHint(g.T.HIGHLIGHT).setStyle(e).setHidden(!0);this._geoResourceService.addOrReplace(n),(0,a.VE)(n.id,{style:t})}}></ba-button>
			</div>
		`}static get tag(){return"ba-vector-data-styling-test-panel"}}var p=n(83245);const m="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmktcm9ja2V0LXRha2VvZmYiPjwhLS1NSVQgTGljZW5zZS0tPjxwYXRoIGQ9Ik05Ljc1MiA2LjE5M2MuNTk5LjYgMS43My40MzcgMi41MjgtLjM2MnMuOTYtMS45MzIuMzYyLTIuNTMxYy0uNTk5LS42LTEuNzMtLjQzOC0yLjUyOC4zNjEtLjc5OC44LS45NiAxLjkzMy0uMzYyIDIuNTMyIi8+PHBhdGggZD0iTTE1LjgxMSAzLjMxMmMtLjM2MyAxLjUzNC0xLjMzNCAzLjYyNi0zLjY0IDYuMjE4bC0uMjQgMi40MDhhMi41NiAyLjU2IDAgMCAxLS43MzIgMS41MjZMOC44MTcgMTUuODVhLjUxLjUxIDAgMCAxLS44NjctLjQzNGwuMjctMS44OTljLjA0LS4yOC0uMDEzLS41OTMtLjEzMS0uOTU2YTkgOSAwIDAgMC0uMjQ5LS42NTdsLS4wODItLjIwMmMtLjgxNS0uMTk3LTEuNTc4LS42NjItMi4xOTEtMS4yNzctLjYxNC0uNjE1LTEuMDc5LTEuMzc5LTEuMjc1LTIuMTk1bC0uMjAzLS4wODNhMTAgMTAgMCAwIDAtLjY1NS0uMjQ4Yy0uMzYzLS4xMTktLjY3NS0uMTcyLS45NTUtLjEzMmwtMS44OTYuMjdBLjUxLjUxIDAgMCAxIC4xNSA3LjE3bDIuMzgyLTIuMzg2Yy40MS0uNDEuOTQ3LS42NyAxLjUyNC0uNzM0aC4wMDZsMi40LS4yMzhDOS4wMDUgMS41NSAxMS4wODcuNTgyIDEyLjYyMy4yMDhjLjg5LS4yMTcgMS41OS0uMjMyIDIuMDgtLjE4OC4yNDQuMDIzLjQzNS4wNi41Ny4wOTNxLjEuMDI2LjE2LjA0NWMuMTg0LjA2LjI3OS4xMy4zNTEuMjk1bC4wMjkuMDczYTMuNSAzLjUgMCAwIDEgLjE1Ny43MjFjLjA1NS40ODUuMDUxIDEuMTc4LS4xNTkgMi4wNjVtLTQuODI4IDcuNDc1LjA0LS4wNC0uMTA3IDEuMDgxYTEuNTQgMS41NCAwIDAgMS0uNDQuOTEzbC0xLjI5OCAxLjMuMDU0LS4zOGMuMDcyLS41MDYtLjAzNC0uOTkzLS4xNzItMS40MThhOSA5IDAgMCAwLS4xNjQtLjQ1Yy43MzgtLjA2NSAxLjQ2Mi0uMzggMi4wODctMS4wMDZNNS4yMDUgNWMtLjYyNS42MjYtLjk0IDEuMzUxLTEuMDA0IDIuMDlhOSA5IDAgMCAwLS40NS0uMTY0Yy0uNDI0LS4xMzgtLjkxLS4yNDQtMS40MTYtLjE3MmwtLjM4LjA1NCAxLjMtMS4zYy4yNDUtLjI0Ni41NjYtLjQwMS45MS0uNDRsMS4wOC0uMTA3em05LjQwNi0zLjk2MWMtLjM4LS4wMzQtLjk2Ny0uMDI3LTEuNzQ2LjE2My0xLjU1OC4zOC0zLjkxNyAxLjQ5Ni02LjkzNyA0LjUyMS0uNjIuNjItLjc5OSAxLjM0LS42ODcgMi4wNTEuMTA3LjY3Ni40ODMgMS4zNjIgMS4wNDggMS45MjguNTY0LjU2NSAxLjI1Ljk0MSAxLjkyNCAxLjA0OS43MS4xMTIgMS40MjktLjA2NyAyLjA0OC0uNjg4IDMuMDc5LTMuMDgzIDQuMTkyLTUuNDQ0IDQuNTU2LTYuOTg3LjE4My0uNzcxLjE4LTEuMzQ1LjEzOC0xLjcxM2EzIDMgMCAwIDAtLjA0NS0uMjgzIDMgMyAwIDAgMC0uMy0uMDQxWiIvPjxwYXRoIGQ9Ik03LjAwOSAxMi4xMzlhNy42IDcuNiAwIDAgMS0xLjgwNC0xLjM1MkE3LjYgNy42IDAgMCAxIDMuNzk0IDguODZjLTEuMTAyLjk5Mi0xLjk2NSA1LjA1NC0xLjgzOSA1LjE4LjEyNS4xMjYgMy45MzYtLjg5NiA1LjA1NC0xLjkwMloiLz48L3N2Zz4K",_="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmktcm9ja2V0LXRha2VvZmYiPjwhLS1NSVQgTGljZW5zZS0tPjxwYXRoIGQ9Ik04IDBhOCA4IDAgMCAwIDAgMTZBOCA4IDAgMCAwIDggMG0uMTYgMi4zMTNjLjA2OCAwIC4xMTYuMDE4LjE3LjA0M3EuMDM3LjAxNy4wOTguMDUxYy4wOC4wNDUuMTg4LjExMy4zMTQuMjEzLjI1My4yMDEuNTc2LjUyOS44OTMgMS4wNDMuNTQ5Ljg4OSAxLjA3MyAyLjMyNCAxLjIwNSA0LjYyMWwxLjAxNiAxLjI0Yy4yMzEuMjg3LjM3MS42NTYuMzcxIDEuMDU4djIuMjM2YS4zNC4zNCAwIDAgMS0uNjA5LjIwNGwtLjAwMS0uMDAxLS43NjQtMS4wMThjLS4xMTMtLjE1LS4yODUtLjI3LS41MS0uMzg1YTcgNyAwIDAgMC0uNDI0LS4xOTFsLS4xMzMtLjA1N2MtLjQ3NC4yOS0xLjA1MS40My0xLjYyNy40M3MtMS4xNTItLjE0LTEuNjI3LS40M2wtLjEzNS4wNTdjLS4xNDMuMDYtLjI3OS4xMTgtLjQyNC4xOTEtLjIyNS4xMTUtLjM5Ny4yMzQtLjUxLjM4NWwtLjc2MiAxLjAxOGEuMzQuMzQgMCAwIDEtLjYwOS0uMjAzdi0yLjIzNmMwLS40MDIuMTQtLjc3MS4zNzQtMS4wNjJsLS4wMDMuMDAzLjAwMi0uMDAyIDEuMDE2LTEuMjM4Yy4xMzQtMi4yNTIuNjU2LTMuNjgyIDEuMjAxLTQuNTc4LjMxNi0uNTIuNjM4LS44NTYuODg5LTEuMDY0cS4xODEtLjE1My4zOTUtLjI3M2wuMDEzLS4wMDdhLjQuNCAwIDAgMSAuMTc5LS4wNDl6bTAgMi43MWMtLjU2MSAwLTEuMDE4LjYwNi0xLjAxOCAxLjM1NXMuNDU2IDEuMzU1IDEuMDE4IDEuMzU1Yy41NjEgMCAxLjAxNi0uNjA2IDEuMDE2LTEuMzU1UzguNzIyIDUuMDIzIDguMTYgNS4wMjNtLTEuMDAyIDcuMDI0Yy4zMjUuMDYzLjY2NC4wOTQgMS4wMDIuMDk0cy42NzctLjAzMSAxLjAwMi0uMDk0bC0uNzMuOTc1YS4zMzguMzM4IDAgMCAxLS41NDIuMDAxbC0uMDAxLS4wMDF6Ii8+PC9zdmc+Cg==";var v=n(16129),y=n(2277),b=n(24973),S=n(84459),f=n.n(S),w=n(34919),M=n(72145),I=n(38611),A=n(99651);const L="update_profile_active";class E extends i.T{constructor(){super({activeProfile:!1});const{CoordinateService:e,EnvironmentService:t,ShareService:n,UrlService:r,FileStorageService:i,ImportVectorDataService:a}=o.z.inject("CoordinateService","EnvironmentService","ShareService","UrlService","FileStorageService","ImportVectorDataService");this._coordinateService=e,this._environmentService=t,this._importVectorDataService=a,this._urlService=r,this._shareService=n,this._icons=[],this._url="",this._shortUrl="",this._fileStorageService=i}onInitialize(){this.observe((e=>e.elevationProfile.active),(e=>this.signal(L,e)))}update(e,t,n){if(e===L)return{...n,activeProfile:t}}createView(e){const{profileActive:t}=e,n=async()=>{const e=this._importVectorDataService.forUrl("https://www.geodaten.bayern.de/ba-data/Themen/kml/huetten.kml");e.onReject((({id:e})=>console.warn(`Oops, something got wrong for ${e}`)));const{id:t}=e;(0,a.VE)(t)},i=()=>{(0,p.eP)({zoom:11,center:this._coordinateService.fromLonLat([11.081,49.449])})},o=e=>{console.log("toggled "+e.detail.checked)};let c=1;const l=[{label:"Apple",icon:m,action:()=>(0,y.L)("Apple",y.A.INFO)},{label:"Lemon",icon:m,action:()=>(0,y.L)("Lemon",y.A.INFO)},{label:"Orange",action:()=>(0,y.L)("Orange",y.A.INFO)},{label:"Banana",icon:_,disabled:!0,action:()=>(0,y.L)("Banana",y.A.INFO)}];return r.qy`
			<style>
				${f()}
			</style>
			<div>
				<div class="divider">
					<p>Here we present components in random order that:</p>
					<ul>
						<li>are <i>common and reusable</i> components or <i>functional behaviors</i>, who can be added to or extend other components</li>
						<li><i>feature</i> components, which have already been implemented, but have not yet been given the most suitable place...</li>
					</ul>
				</div>
				<h2>Test Area</h2>
				<div class="section"></div>

				<ba-vector-data-styling-test-panel></ba-vector-data-styling-test-panel>

				<h2>Specific components</h2>

				<div class="section">
					<h3>slider</h3>
					<div class="example row">
						<input type="range" />
					</div>

					<h3>Switch</h3>
					<div class="example row">
						<ba-switch .title=${"Toggle me"} @toggle=${o}><span slot="before">Toggle</span></ba-switch>
						<ba-switch .title=${"Toggle me"} @toggle=${o}><slot slot="after">Toggle</slot></ba-switch>
						<ba-switch .title=${"Toggle me.checked"} .checked=${!0} @toggle=${o}>checked</ba-switch>
						<ba-switch .title=${"Toggle me.indeterminate"} .indeterminate=${!0} @toggle=${o}>indeterminate</ba-switch>
						<ba-switch .title=${"Toggle me.disabled"} .disabled=${!0}>disabled</ba-switch>
						<ba-switch .title=${"Toggle me.disabled"} .disabled=${!0} .checked=${!0}>disabled.checked</ba-switch>
					</div>

					<h3>Profile</h3>
					<div class="example row">
						<ba-button id="button1" .label=${"Show/Hide elevation profile"} .type=${"primary"} @click=${()=>{t?(0,I.Er)():((0,b.Oo)(),(0,I.UO)([[1328315.0062647895,6089975.78297438],[1310581.6157026286,6045336.558455837]]))}}></ba-button>
					</div>

					<h3>Measure Distance</h3>
					<div class="example row">
						<ba-button
							id="buttonActivateMeasureDistance"
							.label=${"Measure Distance"}
							.type=${"primary"}
							@click=${()=>{(0,v.Yf)(),(0,b.Oo)()}}
						></ba-button>
						<ba-button
							id="buttonDeactivateMeasureDistance"
							.label=${"Deactivate Measure Distance"}
							.type=${"secondary"}
							@click=${()=>{(0,v.LU)(),(0,b.Oo)()}}
						></ba-button>
					</div>

					<h3>BaseLayer Switcher</h3>
					<div class="example">
						<ba-base-layer-switcher></ba-base-layer-switcher>
					</div>

					<h3>Url of State</h3>
					<div class="example row">
						<ba-button id="copyurlbutton" .label=${"Copy Url"} .type=${"primary"} @click=${async()=>{const e=this._shareService.encodeState(),t=await this._urlService.shorten(e);await this._shareService.copyToClipboard(e),this._url=e,this._shortUrl=t,this.render()}}></ba-button>
						<input type="text" readonly="readonly" value=${this._url} />
						<input type="text" readonly="readonly" value=${this._shortUrl} />
					</div>

					<h3>Layer Manager</h3>
					<div class="example">
						<ba-layer-manager></ba-layer-manager>
					</div>

					<h3>Notifications</h3>
					<div class="example row">
						<ba-button id="notification0" .label=${"Info Notification"} .type=${"primary"} @click=${()=>{(0,y.L)("This is just a Info ("+new Date+")",y.A.INFO)}}></ba-button>
						<ba-button id="notification1" .label=${"Warn Notification"} .type=${"primary"} @click=${()=>{(0,y.L)("This is a Warning! Prepare yourself! ("+new Date+")",y.A.WARN)}}></ba-button>
						<ba-button id="notification2" .label=${"Error Notification"} .type=${"primary"} @click=${()=>{(0,y.L)("This is a Error! Oh no...something went wrong. ("+new Date+")",y.A.ERROR)}}></ba-button>
						<ba-button id="notification3" .label=${"Open Bottom Sheet"} .type=${"primary"} @click=${()=>{const e=()=>setTimeout((()=>(0,M.D)()),2e3),t=()=>(0,M.D)(),n=()=>{const e=this.observe((e=>e.pointer.beingDragged),(()=>{(0,M.D)(),e()}));return r.qy`<div>
					<h3>Bottom Sheet autoclose with...</h3>
					<div style="color: white;background-color: var(--warning-color);">observing store...</div>
					<div style="color: white;background-color: var(--error-color);">i.e. dragging map</div>
				</div>`};var i;(0,M.j)((i=>{switch(i){case 1:return r.qy`<div>
							<h3>Feature-Info</h3>
							<div style="color: var(--text1);background-color: var(--secondary-color);"><b>ID:</b>Lorem ipsum dolor</div>
							<div style="color: var(--text2);background-color: var(--secondary-bg-color);">
								<b>Value:</b>Lorem ipsum dolor sit amet, consetetur sadipscing elitr...
							</div>
							<div style="display:flex">
								<ba-button .label=${"Wait & close"} @click=${e}></ba-button
								><ba-button .label=${"dismiss!"} @click=${t}></ba-button>
							</div>
						</div>`;case 2:return r.qy`<div>
							<h3>Bottom Sheet ...</h3>
							<div style="color: white;background-color: var(--warning-color);">waiting forever...</div>
							<div style="color: white;background-color: var(--error-color);">until a new content for the bottom sheet comes</div>
						</div>`;case 3:return n()}})(c)),c=(i=c)===1?i+1:3===i?1:i+1}}></ba-button>
					</div>
				</div>

				<h2>Common components or functional behaviors</h2>

				<div class="section">
					<h3>ba-buttons</h3>
					<div class="example">
						<div class="row">
							<ba-button id="button0" .label=${"primary style"} .type=${"primary"} @click=${n}></ba-button>
							<ba-button id="button1" .label=${"secondary style"} @click=${i}></ba-button>
							<ba-button id="button2" .label=${"disabled"} .type=${"primary"} .disabled=${!0}></ba-button>
							<ba-button id="button3" .label=${"disabled"} .disabled=${!0}></ba-button>
							<ba-button id="button3" .label=${"loading style"} .type=${"loading"}></ba-button>
						</div>
						<div class="row" style="margin-top:2em">
							<ba-button id="button0" .label=${"primary style"} .icon=${m} .type=${"primary"} @click=${n}></ba-button>
							<ba-button id="button1" .label=${"secondary style"} .icon=${m} @click=${i}></ba-button>
							<ba-button id="button2" .label=${"disabled"} .icon=${m} .type=${"primary"} .disabled=${!0}></ba-button>
							<ba-button id="button3" .label=${"disabled"} .icon=${m} .disabled=${!0}></ba-button>
							<ba-button id="button3" .label=${"loading style"} .icon=${m} .type=${"loading"}></ba-button>
						</div>
					</div>
					<h3>ba-badges</h3>
					<div class="example">
						<div class="row">
							<ba-badge .color=${"var(--text3)"} .background=${"var(--primary-color)"} .label=${"Badge"}></ba-badge>
							<ba-badge .background=${"var(--secondary-bg-color)"} .label=${"Badge"} .color=${"var(--text2)"}></ba-badge>
							<ba-badge .background=${"var(--secondary-color)"} .label=${"42"} .color=${"var(--text3)"}></ba-badge>
							<ba-badge .icon=${m} .size=${"1.1"}></ba-badge>
							<ba-badge
								.icon=${m}
								.size=${"1.5"}
								.color=${"var(--text3)"}
								.background=${"var(--primary-color)"}
								.label=${"Badge"}
								.title=${"Badge title"}
							></ba-badge>
						</div>
					</div>

					<h3>ba-icons</h3>
					<div class="example icons">
						<ba-icon .icon="${m}" .title=${"some"} @click=${n}></ba-icon>
						<ba-icon .icon="${_}" .disabled=${!0} @click=${n}></ba-icon>
						<ba-icon .icon="${_}" .size=${1} @click=${n}></ba-icon>
						<ba-icon .icon="${_}" .size=${2.5} @click=${n}></ba-icon>
					</div>

					<h3>Overflow-Menu</h3>
					<div class="example menu">
						<div><ba-overflow-menu .items=${l}></ba-overflow-menu>Type:(Default)</div>
						<div><ba-overflow-menu .type=${w.$.MEATBALL} .items=${l}></ba-overflow-menu>Type:Meatball</div>
						<div><ba-overflow-menu .type=${w.$.KEBAB} .items=${l}></ba-overflow-menu>Type:Kebab</div>
					</div>

					<h3>Checkbox</h3>
					<div class="example row">
						<ba-checkbox .title=${"checkbox title"} @toggle=${o}><span>checkbox</span></ba-checkbox>
						<ba-checkbox .checked=${!0} .title=${"checkbox title"} @toggle=${o}><span>checkbox checked</span></ba-checkbox>
						<ba-checkbox .checked=${!0} .type=${"eye"} .title=${"checkbox title"} @toggle=${o}><span>checkbox eye</span></ba-checkbox>
						<ba-checkbox .checked=${!1} .disabled=${!0} .title=${"checkbox title"} @toggle=${o}
							><span>checkbox checked disabled</span></ba-checkbox
						>
						<ba-checkbox .checked=${!0} .disabled=${!0} .title=${"checkbox title"} @toggle=${o}
							><span>checkbox checked disabled</span></ba-checkbox
						>
					</div>

					<h3>input</h3>
					<div class="example row">
						<input placeholder="input" />
						<input value="input readonly" readonly />
					</div>

					<h3>textarea</h3>
					<div class="example row">
						<textarea placeholder="textarea"></textarea>
						<textarea readonly> textarea readonly</textarea>
					</div>

					<h3>select</h3>
					<div class="example row">
						<select name="pets">
							<option>Value 1</option>
							<option>Value 2</option>
						</select>
						<select disabled>
							<option>Value 1</option>
							<option>Value 2</option>
						</select>
					</div>

					<h3>searchable-select</h3>
					<div class="example row">
						<ba-searchable-select
							.options=${["Red","Green","Blue","Yellow","Orange","Purple","Pink","Brown","Black","White","Gray","Cyan","Magenta"]}
							.isResponsive=${!0}
						></ba-searchable-select>
						<ba-searchable-select
							.placeholder=${"Without caret..."}
							.showCaret=${!1}
							.options=${["Red","Green","Blue","Yellow","Orange","Purple","Pink","Brown","Black","White","Gray","Cyan","Magenta"]}
							.isResponsive=${!0}
						></ba-searchable-select>
					</div>

					<h3>ba-form-element</h3>
					<div class="example row">
						<div class="column" style="width:40em;">
							<div class="ba-form-element">
								<input type="text" placeholder="Choose category" id="textarea-foo" />
								<label for="textarea-foo" class="control-label">Choose category</label>
								<i class="bar"></i>
								<i class="icon clear"></i>
							</div>
							<div class="ba-form-element">
								<textarea type="text" placeholder="Description"></textarea>
								<label class="control-label">Description</label>
								<i class="bar"></i>
								<label class="helper-label">Helper text</label>
							</div>
							<div class="ba-form-element">
								<input type="text" id="textarea-foo" placeholder="Test" pattern="[a-z]+" />
								<label for="textarea-foo" class="control-label">Test</label>
								<i class="bar"></i>
								<i class="icon error"></i>
								<label class="helper-label">Helper text</label>
							</div>
							<div class="ba-form-element">
								<input name="email" type="email" placeholder="Your email address" />
								<label for="tttttttt" class="control-label">Your email address</label>
								<i class="bar"></i>
								<i class="icon error"></i>
								<label class="helper-label">Helper text</label>
								<label class="error-label">Error text</label>
							</div>
							<div class="ba-form-element error">
								<input type="mail" id="textarea-foo" placeholder="with label" />
								<label for="textarea-foo" class="control-label">with label</label>
								<i class="bar"></i>
								<label class="helper-label error-label">Helper text error</label>
							</div>
							<div class="ba-form-element">
								<select select required>
									<option value=""></option>
									<option value="1">Value 1</option>
									<option value="2">Value 2</option>
								</select>
								<label for="select" class="control-label">with label</label><i class="bar"></i>
							</div>
						</div>
					</div>

					<h3>Loading hint</h3>
					<div class="example row">
						<ba-spinner></ba-spinner>
						<ba-spinner .label=${"Waiting"}></ba-spinner>
					</div>

					<h3>Credentials</h3>
					<div class="example row">
						<ba-button id="button0" .label=${"Authenticate by password for URL"} .type=${"primary"} @click=${async()=>{(0,b.Oo)(),await(0,A.yy)(1e3);const e="https://my.restricted.url/for/wms",t={},n=this.observe((e=>e.modal),(e=>o(e)),!1),i=(e,t)=>{n(),(e?()=>{(0,y.L)(t.message,y.A.INFO),(0,b.Oo)()}:()=>{(0,y.L)("Authentication aborted",y.A.WARN)})()},o=e=>{e.active||(n(),i(null))};(0,b.qf)("Connect to restricted WMS...",r.qy`<ba-auth-password-credential-panel
					.url=${e}
					.authenticate=${async(n,r)=>(await(0,A.yy)(3e3),r===e&&"foo"===n?.username&&"bar"===n?.password?(t.username=n.username,t.password=n.password,{message:"Credential is valid"}):null)}
					.onClose=${i}
				></ba-auth-password-credential-panel>`)}}></ba-button>
						<div>Hint: Demo Credentials are foo/bar</div>
					</div>

					<div class="example row">
						<ba-button id="button0" .label=${"Authenticate by password for Role"} .type=${"primary"} @click=${async()=>{(0,b.Oo)(),await(0,A.yy)(1e3);const e=s.Mg.PLUS,t={},n=this.observe((e=>e.modal),(e=>o(e)),!1),i=(e,t)=>{n(),(e?()=>{(0,y.L)(t.message,y.A.INFO),(0,b.Oo)()}:()=>{(0,y.L)("Authentication aborted",y.A.WARN)})()},o=e=>{e.active||(n(),i(null))},a=r.qy`Sign in
				<ba-badge .size=${"1.5"} .color=${"var(--text3)"} .background=${"var(--primary-color)"} .label=${"Role"}></ba-badge>`;(0,b.qf)(a,r.qy`<ba-auth-password-credential-panel .authenticate=${async(n,r)=>(await(0,A.yy)(3e3),r===e&&"foo"===n?.username&&"bar"===n?.password?(t.username=n.username,t.password=n.password,{message:"Credential is valid"}):null)} .onClose=${i}></ba-auth-password-credential-panel>`)}}></ba-button>
						<div>Hint: Demo Credentials are foo/bar</div>
					</div>

					<div class="example row">
						<ba-button
							id="button0"
							.label=${"Authenticate by password with custom footer content"}
							.type=${"primary"}
							@click=${async()=>{(0,b.Oo)(),await(0,A.yy)(1e3);const e=s.Mg.PLUS,t={},n=this.observe((e=>e.modal),(e=>o(e)),!1),i=(e,t)=>{n(),(e?()=>{(0,y.L)(t.message,y.A.INFO),(0,b.Oo)()}:()=>{(0,y.L)("Authentication aborted",y.A.WARN)})()},o=e=>{e.active||(n(),i(null))},a=r.qy`<ba-auth-password-credential-bvv-footer></ba-auth-password-credential-bvv-footer>`,c=r.qy`Sign in
				<ba-badge .size=${"1.5"} .color=${"var(--text3)"} .background=${"var(--primary-color)"} .label=${"Role"}></ba-badge>`;(0,b.qf)(c,r.qy`<ba-auth-password-credential-panel
					.authenticate=${async(n,r)=>(await(0,A.yy)(3e3),r===e&&"foo"===n?.username&&"bar"===n?.password?(t.username=n.username,t.password=n.password,{message:"Credential is valid"}):null)}
					.footer=${a}
					.onClose=${i}
				></ba-auth-password-credential-panel>`)}}
						></ba-button>
						<div>Hint: Demo Credentials are foo/bar</div>
					</div>

					<h3>Colors</h3>
					<div class="example row">
						<div class="column" style="width:20em;">
							<div class="row" style="justify-content:space-between">
								<span> --primary-color </span>
								<div class="column" style="height: 1.5em; width:5em;background:var(--primary-color);"></div>
							</div>
							<div class="row" style="justify-content:space-between">
								<span> --primary-color-lighter </span>
								<div class="column" style="height: 1.5em; width:5em;background:var(--primary-color-lighter);"></div>
							</div>
							<div class="row" style="justify-content:space-between">
								<span> --secondary-color </span>
								<div class="column" style="height: 1.5em; width:5em;background:var(--secondary-color);"></div>
							</div>
							<div class="row" style="justify-content:space-between">
								<span> --split-one-color </span>
								<div class="column" style="height: 1.5em; width:5em;background:var(--split-one-color);"></div>
							</div>
							<div class="row" style="justify-content:space-between">
								<span> --split-one-color-lighter </span>
								<div class="column" style="height: 1.5em; width:5em;background:var(--split-one-color-lighter);"></div>
							</div>
							<div class="row" style="justify-content:space-between">
								<span> --primary-bg-color </span>
								<div class="column" style="height: 1.5em; width:5em;background:var(--primary-bg-color);"></div>
							</div>
							<div class="row" style="justify-content:space-between">
								<span> --secondary-bg-color </span>
								<div class="column" style="height: 1.5em; width:5em;background:var(--secondary-bg-color);"></div>
							</div>
							<div class="row" style="justify-content:space-between">
								<span> --tertiary-bg-color </span>
								<div class="column" style="height: 1.5em; width:5em;background:var(--tertiary-bg-color);"></div>
							</div>
							<div class="row" style="justify-content:space-between">
								<span> --header-background-color </span>
								<div class="column" style="height: 1.5em; width:5em;background:var(--header-background-color);"></div>
							</div>
							<div class="row" style="justify-content:space-between">
								<span> --modal-background-color </span>
								<div class="column" style="height: 1.5em; width:5em;background:var(--modal-background-color);"></div>
							</div>
							<div class="row" style="justify-content:space-between">
								<span> --text1 </span>
								<div class="column" style="height: 1.5em; width:5em;background:var(--text1);"></div>
							</div>
							<div class="row" style="justify-content:space-between">
								<span> --text2 </span>
								<div class="column" style="height: 1.5em; width:5em;background:var(--text2);"></div>
							</div>
							<div class="row" style="justify-content:space-between">
								<span> --text3 </span>
								<div class="column" style="height: 1.5em; width:5em;background:var(--text3);"></div>
							</div>
							<div class="row" style="justify-content:space-between">
								<span> --text4 </span>
								<div class="column" style="height: 1.5em; width:5em;background:var(--text4);"></div>
							</div>
							<div class="row" style="justify-content:space-between">
								<span> --error-color </span>
								<div class="column" style="height: 1.5em; width:5em;background:var(--error-color);"></div>
							</div>
							<div class="row" style="justify-content:space-between">
								<span> --warning-color </span>
								<div class="column" style="height: 1.5em; width:5em;background:var(--warning-color);"></div>
							</div>
							<div class="row" style="justify-content:space-between">
								<span> --info-color</span>
								<div class="column" style="height: 1.5em; width:5em;background:var(--info-color);"></div>
							</div>
							<div class="row" style="justify-content:space-between">
								<span>--success-color </span>
								<div class="column" style="height: 1.5em; width:5em;background:var(--success-color);"></div>
							</div>
							<div class="row" style="justify-content:space-between">
								<span> --highlight-map-color </span>
								<div class="column" style="height: 1.5em; width:5em;background:var(--highlight-map-color);"></div>
							</div>
						</div>
					</div>
				</div>
			</div>
		`}static get tag(){return"ba-showcase"}}window.customElements.get(h.tag)||window.customElements.define(h.tag,h),window.customElements.get(E.tag)||window.customElements.define(E.tag,E);var T=n(45838);window.customElements.get(T.M.tag)||window.customElements.define(T.M.tag,T.M)},17937:(e,t,n)=>{"use strict";n.d(t,{W:()=>r,i:()=>i});const r=Object.freeze({LOCAL:"local",REMOTE:"remote",UNKNOWN:"unknown"}),i=e=>e?.startsWith("data:image/svg+xml;base64,")?r.LOCAL:e?.startsWith("http://")||e?.startsWith("https://")?r.REMOTE:r.UNKNOWN},18407:(e,t,n)=>{"use strict";n.d(t,{ag:()=>r,eq:()=>o});const r="catalog/openNodes",i={openNodes:[]},o=(e=i,t)=>{const{type:n,payload:o}=t;return n===r?{...e,openNodes:[...new Set(o)]}:e}},19304:(e,t,n)=>{var r=n(30004);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},19366:(e,t,n)=>{"use strict";n.d(t,{$z:()=>i,dR:()=>a,eD:()=>o,po:()=>s,w0:()=>r});const r=e=>{const t=new URL(e);return`${t.origin}${t.pathname.length>1?t.pathname:""}`},i=e=>`${new URL(e).origin}`,o=e=>new URL(e).pathname.split("/").filter((e=>e.length>0)),a=(e,t={})=>{const n=new URL(e),r=n.toString().replace(n.search,""),i=new URLSearchParams(n.search);for(const[e,n]of Object.entries(t))null===n?i.delete(e):i.set(e,n);return`${r}?${i.toString()}`},s=e=>Object.entries(e).map((e=>e.map(encodeURIComponent).join("="))).join("&")},19593:(e,t,n)=>{"use strict";n.d(t,{yE:()=>a});var r=n(18407),i=n(18410),o=n(28353);const a=e=>{Array.isArray(e)&&(()=>{const{StoreService:e}=i.z.inject("StoreService");return e.getStore()})().dispatch({type:r.ag,payload:e.filter((e=>(0,o.Kg)(e)))})}},20083:(e,t,n)=>{"use strict";n.d(t,{N:()=>a});var r=n(62253),i=n(18410),o=n(47518);const a=e=>{(()=>{const{StoreService:e}=i.z.inject("StoreService");return e.getStore()})().dispatch({type:r.od,payload:new o.MD(e?.trim()??null)})}},22209:(e,t,n)=>{var r=n(31601),i=n(76314)(r);i.push([e.id,".content {\n\tlist-style-type: none;\n\tmargin: 0;\n\tfont-size: 1rem;\n\tpadding: 0.3em 0 0.6em 0;\n}\n\n.content li {\n\tpadding: 0.3em 1.5em;\n\tdisplay: flex;\n\tjustify-content: flex-start;\n}\n\n.content li ba-coordinate-info {\n\twidth: 100%;\n}\n\n.content li .label {\n\tmin-width: 7em;\n\tmargin: auto;\n}\n\n.content li .coordinate {\n\tflex-grow: 4;\n\tmargin: auto;\n}\n\n.content li .icon {\n\tpadding-left: 1em;\n\tmargin: auto;\n}\n\n.chips {\n\tdisplay: flex;\n\tjustify-content: start;\n\tflex-flow: wrap;\n\tgap: 0.5em 0.8em;\n\tpadding: 0.8em 1.3em 1em;\n}\n\nba-badge {\n\tposition: relative;\n\ttop: -0.15em;\n}\n",""]),e.exports=i},22295:(e,t,n)=>{"use strict";n.d(t,{KC:()=>c,SO:()=>s,T5:()=>o,TN:()=>l,aF:()=>r,rf:()=>a,z_:()=>i});const r="media/orientation",i="media/min-width",o="media/color-schema",a="(orientation: portrait)",s="(min-width: 80em)",c="(prefers-color-scheme: dark)",l=(e=window)=>{const t={portrait:e.matchMedia(a).matches,minWidth:e.matchMedia(s).matches,darkSchema:e.matchMedia(c).matches,observeResponsiveParameter:!0};return(e=t,n)=>((e,t)=>{const{type:n,payload:a}=t;switch(n){case r:return{...e,portrait:a};case i:return{...e,minWidth:a};case o:return{...e,darkSchema:a};case"media/responsive-parameter-observation":return{...e,observeResponsiveParameter:a}}return e})(e,n)}},24973:(e,t,n)=>{"use strict";n.d(t,{Oo:()=>s,qf:()=>a});var r=n(86731),i=n(18410);const o=()=>{const{StoreService:e}=i.z.inject("StoreService");return e.getStore()},a=(e,t,n={steps:1})=>{o().dispatch({type:r.k7,payload:{title:e,content:t,options:n}})},s=()=>{o().dispatch({type:r.k7,payload:null})}},25373:(e,t,n)=>{var r=n(96857);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},25639:(e,t,n)=>{var r=n(31601),i=n(76314)(r);i.push([e.id,".container {\n\tposition: absolute;\n\tpadding: 0.5em;\n\tfont-size: 0.75rem;\n\tbottom: 0;\n\tcolor: var(--text1);\n\twidth: auto;\n\tbackground: var(--secondary-bg-color);\n}\n",""]),e.exports=i},25837:(e,t,n)=>{var r=n(27249);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},26010:(e,t,n)=>{var r=n(31601),i=n(76314)(r);i.push([e.id,"#baSwitch {\n\tfont-size: 0.7rem;\n}\n\n.ba-switch {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 2ch;\n\tjustify-content: space-between;\n\n\t--thumb-size: 1.4rem;\n\t--thumb: var(--text2);\n\t--thumb-highlight: hsl(var(--brand-hue) 0% 100% / 25%); /* todo:transform to/replace with a global defined color */\n\n\t--thumb-color: var(--thumb);\n\t--thumb-color-active: var(--primary-color);\n\t--thumb-color-highlight: var(--thumb-highlight);\n\n\t--track-size: calc(var(--thumb-size) * 2);\n\t--track-padding: 0.25em;\n\n\t--track-inactive: var(--secondary-bg-color);\n\t--track-active: var(--primary-color-lighter);\n\n\t--track-color-inactive: var(--track-inactive);\n\t--track-color-active: var(--track-active);\n\n\t--thumb-position: 0%;\n\t--thumb-transition-duration: var(--animation-duration-small-open);\n\n\tcursor: pointer;\n\tuser-select: none;\n\t-webkit-tap-highlight-color: transparent;\n\n\t--isLTR: 1;\n\n\t&:dir(rtl) {\n\t\t--isLTR: -1;\n\t}\n}\n\n.ba-switch > label,\n.cursor-disabled {\n\tcursor: not-allowed;\n\t--thumb-color: transparent;\n}\n\n.ba-switch > label,\n.cursor-disabled::before {\n\tcursor: not-allowed;\n\tbox-shadow: inset 0 0 0 2px hsl(var(--brand-hue) 0% 0% / 50%); /* todo:transform to/replace with a global defined color */\n}\n\n.ba-switch > input {\n\tappearance: none;\n\tpointer-events: none;\n\toutline-offset: 5px;\n\tbox-sizing: content-box;\n\n\tpadding: var(--track-padding);\n\tbackground: var(--track-color-inactive);\n\tinline-size: var(--track-size);\n\tblock-size: var(--thumb-size);\n\tborder-radius: var(--track-size);\n\n\tflex-shrink: 0;\n\tdisplay: grid;\n\talign-items: center;\n\tgrid: [track] 1fr / [track] 1fr;\n\ttouch-action: pan-y;\n\tborder: 0.2em solid transparent;\n\ttransition: box-shadow var(--animation-duration-small-open) ease;\n}\n.ba-switch > input:focus-visible {\n\tborder: 0.2em solid var(--tertiary-bg-color);\n\tbox-shadow: 0 0 0 0.2em var(--primary-color-lighter);\n}\n\n.ba-switch > input::before {\n\ttransform: translateX(var(--thumb-position));\n\t--highlight-size: 0;\n\n\tcontent: '';\n\tcursor: pointer;\n\tpointer-events: auto;\n\tgrid-area: track;\n\tinline-size: var(--thumb-size);\n\tblock-size: var(--thumb-size);\n\n\tbackground: var(--thumb-color);\n\tbox-shadow: 0 0 0 var(--highlight-size) var(--thumb-color-highlight);\n\tborder-radius: 50%;\n\ttransition:\n\t\ttransform var(--thumb-transition-duration) ease,\n\t\tbox-shadow 0.25s ease;\n}\n\n.ba-switch > input:disabled {\n\tcursor: not-allowed;\n\t--thumb-color: transparent !important;\n}\n\n.ba-switch > input:disabled::before {\n\tcursor: not-allowed;\n\tbox-shadow: inset 0 0 0 2px hsl(var(--brand-hue) 0% 0% / 50%); /* todo:transform to/replace with a global defined color */\n}\n\n.ba-switch > input:focus::before,\n.ba-switch > input:not(:disabled):hover::before {\n\t--highlight-size: 0.5rem;\n}\n\n/* positioned at the end of the track: track length - 100% (thumb width) */\n.ba-switch > input:checked {\n\tbackground: var(--track-color-active);\n\t--thumb-position: calc((var(--track-size) - 100%) * var(--isLTR));\n\t--thumb-color: var(--thumb-color-active);\n}\n\n/* positioned in the center of the track: half the track - half the thumb */\n.ba-switch > input:indeterminate {\n\t--thumb-position: calc(((var(--track-size) / 2) - (var(--thumb-size) / 2)) * var(--isLTR));\n}\n\n.ba-switch.-vertical {\n\tmin-block-size: calc(var(--track-size) + calc(var(--track-padding) * 2));\n\n\t& > input {\n\t\ttransform: rotate(calc(90deg * var(--isLTR) * -1));\n\t\ttouch-action: pan-x;\n\t}\n}\n",""]),e.exports=i},26101:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmktc3Rhci1maWxsIj48cGF0aCBkPSJNMy42MTIgMTUuNDQzYy0uMzg2LjE5OC0uODI0LS4xNDktLjc0Ni0uNTkybC44My00LjczTC4xNzMgNi43NjVjLS4zMjktLjMxNC0uMTU4LS44ODguMjgzLS45NWw0Ljg5OC0uNjk2TDcuNTM4Ljc5MmMuMTk3LS4zOS43My0uMzkuOTI3IDBsMi4xODQgNC4zMjcgNC44OTguNjk2Yy40NDEuMDYyLjYxMi42MzYuMjgyLjk1bC0zLjUyMiAzLjM1Ni44MyA0LjczYy4wNzguNDQzLS4zNi43OS0uNzQ2LjU5Mkw4IDEzLjE4N2wtNC4zODkgMi4yNTZ6Ii8+PC9zdmc+Cg=="},26197:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmktc2hhcmUtZmlsbCI+PHBhdGggZD0iTTExIDIuNWEyLjUgMi41IDAgMSAxIC42MDMgMS42MjhsLTYuNzE4IDMuMTJhMi41IDIuNSAwIDAgMSAwIDEuNTA0bDYuNzE4IDMuMTJhMi41IDIuNSAwIDEgMS0uNDg4Ljg3NmwtNi43MTgtMy4xMmEyLjUgMi41IDAgMSAxIDAtMy4yNTZsNi43MTgtMy4xMkEyLjUgMi41IDAgMCAxIDExIDIuNSIvPjwvc3ZnPjwhLS1NSVQgTGljZW5zZS0tPgo="},26221:(e,t,n)=>{"use strict";n.d(t,{h:()=>r});class r{constructor(){if(this.constructor===r)throw new Error("Can not construct abstract class.")}async register(e){throw new Error("Please implement abstract method #register or do not call super.register from child.")}}},26421:(e,t,n)=>{"use strict";var r=n(36752),i=n(18410);const{TranslationService:o}=i.z.inject("TranslationService");o.register("mapProvider",(e=>{switch(e){case"en":return{olMap_handler_measure_start:"Start measurement: click",olMap_handler_measure_continue_line:"Draw a line: continue clicking<br/>Finish line: double click",olMap_handler_measure_continue_polygon:"Draw a polygon: continue clicking<br/> finish: double-click",olMap_handler_measure_snap_first_point:"Close polygon: click",olMap_handler_measure_snap_last_point:"Finish measurement: click",olMap_handler_measure_modify_click_new_point:"Add point: click<br/>move point: click and drag",olMap_handler_measure_modify_click_or_drag:"Click then drag to move the point",olMap_handler_measure_modify_polygon_click_or_drag:"Delete point: click<br/>move point: click and drag",olMap_handler_measure_modify_linestring_click_or_drag:"Delete point: click<br/>move point: click and drag",olMap_handler_measure_modify_click_drag_overlay:"Move label: click and drag",olMap_handler_measure_modify_key_for_delete:"Delete measurement: press DEL",olMap_handler_draw_modify_key_for_delete:"Delete drawing: press DEL",olMap_handler_delete_last_point:"Delete last point drawn: press DEL",olMap_handler_measure_select:"Select existing or start new measurement",olMap_handler_measure_layer_label:"Measurement",olMap_handler_draw_start:"Start drawing: click",olMap_handler_draw_layer_label:"Drawing",olMap_handler_draw_continue_line:"Continue drawing: click<br/>finish drawing: double-click",olMap_handler_draw_select:"Select existing or start new drawing",olMap_handler_draw_new_text:"New text",olMap_handler_storage_offline:"Offline: Could not store layer-data. The data will get lost after this session.",olMap_handler_featureInfo_not_available:"Object Information not available",olMap_handler_termsOfUse:"",olMap_handler_mfp_distortion_warning:"The projection used for export has distortions in some areas which are not suitable for length measurements.",olMap_handler_mfp_distortion_more_info:"More info...",olMap_handler_mfp_id_a4_landscape:"DIN A4 landscape",olMap_handler_mfp_id_a4_portrait:"DIN A4 portrait",olMap_handler_mfp_id_a3_landscape:"DIN A3 landscape",olMap_handler_mfp_id_a3_portrait:"DIN A3 portrait",olMap_handler_mfp_encoder_max_specs_limit_reached:"The map to be exported exceeds the size limit.",olMap_handler_mfp_encoder_layer_not_exportable:"The following layers cannot be exported:",olMap_handler_routing_choose_alternative_route:e=>`${e[0]}`,olMap_handler_routing_modify_segment:"Modify route: click and pull",olMap_handler_routing_modify_start:"Modify starting point: click and pull",olMap_handler_routing_modify_destination:"Modify destination point: click and pull",olMap_handler_routing_modify_intermediate:"Modify waypoint: click and pull",olMap_handler_routing_rt_layer_label:"Route (Track)",olMap_handler_routing_wp_layer_label:"Route (Waypoints)",olMap_handler_routing_routingService_exception:"Due to a technical error no route could be created",olMap_handler_routing_routingService_improper_waypoints:"No route could be created based on the given points. Please adjust one ore more points.",olMap_handler_featureInfo_feature_properties:"Properties",olMap_vectorLayerService_default_layer_name_vector:"Data",olMap_map:"Interactive map"};case"de":return{olMap_handler_measure_start:"Messung beginnen: klicken",olMap_handler_measure_continue_line:"Messlinie zeichnen: klicken<br/>beenden: Doppelklick",olMap_handler_measure_continue_polygon:"Fläche zeichnen: klicken<br/>beenden: Doppelklick",olMap_handler_measure_snap_first_point:"Fläche schließen: klicken",olMap_handler_measure_snap_last_point:"Messung abschließen: klicken",olMap_handler_measure_modify_click_new_point:"Punkt hinzufügen: klicken<br/>Punkt verschieben: klicken und ziehen",olMap_handler_measure_modify_click_or_drag:"Punkt verschieben: klicken und ziehen",olMap_handler_measure_modify_polygon_click_or_drag:"Punkt löschen: klicken<br/>Punkt verschieben: klicken und ziehen",olMap_handler_measure_modify_linestring_click_or_drag:"Punkt löschen: klicken<br/>Punkt verschieben: klicken und ziehen",olMap_handler_measure_modify_click_drag_overlay:"Beschriftung verschieben: klicken und ziehen",olMap_handler_measure_modify_key_for_delete:"Messung löschen: ENTF-Taste",olMap_handler_draw_modify_key_for_delete:"Zeichnung löschen: ENTF-Taste",olMap_handler_delete_last_point:"Letzten Punkt löschen: ENTF-Taste",olMap_handler_measure_select:"bestehende Messung auswählen oder neue Messung beginnen",olMap_handler_measure_layer_label:"Messung",olMap_handler_draw_start:"Zeichnung beginnen: klicken",olMap_handler_draw_layer_label:"Zeichnung",olMap_handler_draw_continue_line:"Linie zeichnen: klicken<br/>Beenden: Doppelklick",olMap_handler_draw_select:"bestehende Zeichnung auswählen oder neue Zeichnung beginnen",olMap_handler_draw_new_text:"Neuer Text",olMap_handler_storage_offline:"Offline: Die Zeichnung kann nicht gespeichert werden. Die Daten werden nach der Sitzung gelöscht.",olMap_handler_featureInfo_not_available:"Objekt-Info nicht verfügbar",olMap_handler_termsOfUse:e=>r.qy`Ihre Zeichnung wird automatisch gespeichert. Durch die Nutzung dieses Dienstes stimmen Sie den <a href="${e[0]}" target="_blank" tabindex="0">Nutzungsbedingungen</a> zu.`,olMap_handler_mfp_distortion_warning:"Die für den Export verwendete Projektion besitzt in einigen Bereichen\nVerzerrungen, die nicht für Längenmessungen geeignet sind.",olMap_handler_mfp_distortion_more_info:"Mehr erfahren...",olMap_handler_mfp_id_a4_landscape:"DIN A4 Querformat",olMap_handler_mfp_id_a4_portrait:"DIN A4 Hochformat",olMap_handler_mfp_id_a3_landscape:"DIN A3 Querformat",olMap_handler_mfp_id_a3_portrait:"DIN A3 Hochformat",olMap_handler_mfp_encoder_max_specs_limit_reached:"Die zu exportierende Karte überschreitet die Größenbegrenzung.",olMap_handler_mfp_encoder_layer_not_exportable:"Die folgenden Ebenen können nicht exportiert werden:",olMap_handler_routing_choose_alternative_route:e=>`${e[0]}`,olMap_handler_routing_modify_segment:"Ändern der Route: klicken und ziehen",olMap_handler_routing_modify_start:"Ändern des Startpunktes: klicken und ziehen",olMap_handler_routing_modify_destination:"Ändern des Zielpunktes: klicken und ziehen",olMap_handler_routing_modify_intermediate:"Ändern des Zwischenpunktes: klicken und ziehen",olMap_handler_routing_rt_layer_label:"Route (Track)",olMap_handler_routing_wp_layer_label:"Route (Wegpunkte)",olMap_handler_routing_routingService_exception:"Aufgrund eines technischen Fehlers konnte keine Route erstellt werden",olMap_handler_routing_routingService_improper_waypoints:"Anhand der angegebenen Punkte konnte keine Route erstellt werden. Bitte passen Sie einen oder mehrere Punkte an.",olMap_handler_featureInfo_feature_properties:"Attribute",olMap_vectorLayerService_default_layer_name_vector:"Daten",olMap_map:"Interaktive Karte"};default:return{}}}));var a=n(69716),s=n(75488);window.customElements.get(a._.tag)||window.customElements.define(a._.tag,a._),window.customElements.get(s.OM.tag)||window.customElements.define(s.OM.tag,s.OM)},26492:(e,t,n)=>{var r=n(74488);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},27249:(e,t,n)=>{var r=n(31601),i=n(76314)(r);i.push([e.id,".content {\n\tdisplay: flex;\n\tjustify-content: normal;\n\twidth: 100%;\n\talign-items: center;\n\tpadding: 0.4em 0;\n}\n\n.coordinates {\n\tdisplay: block;\n}\n\n.base-layer-info {\n\tdisplay: block;\n\tmax-width: 30em;\n\tmax-height: 3em;\n\tborder-left: 1px dotted var(--text1);\n\tpadding: 0 1em;\n}\n",""]),e.exports=i},27842:(e,t,n)=>{"use strict";n.d(t,{N7:()=>l,bx:()=>c,lW:()=>o,yb:()=>d});var r=n(42376),i=n(28791);const o=Object.freeze({EQUALS:"equals",NOT_EQUALS:"not_equals",CONTAINS:"contains",NOT_CONTAINS:"not_contains",BEGINS_WITH:"begins_with",NOT_BEGINS_WITH:"not_begins_with",ENDS_WITH:"ends_with",NOT_ENDS_WITH:"not_ends_with",BETWEEN:"between",NOT_BETWEEN:"not_between",GREATER:"greater",GREATER_EQUALS:"greater_equals",LESS:"less",LESS_EQUALS:"less_equals",NOT:"not_"}),a=Object.freeze({Binary:"binary",Comparison:"comparison"}),s=Object.freeze([{name:o.EQUALS,translationKey:"oaf_operator_equals",operatorType:a.Binary},{name:o.NOT_EQUALS,translationKey:"oaf_operator_not_equals",operatorType:a.Binary},{name:o.GREATER,translationKey:"oaf_operator_greater",typeConstraints:[i.P.INTEGER,i.P.FLOAT],operatorType:a.Binary},{name:o.GREATER_EQUALS,translationKey:"oaf_operator_greater_equals",typeConstraints:[i.P.INTEGER,i.P.FLOAT],operatorType:a.Binary},{name:o.LESS,translationKey:"oaf_operator_less",typeConstraints:[i.P.INTEGER,i.P.FLOAT],operatorType:a.Binary},{name:o.LESS_EQUALS,translationKey:"oaf_operator_less_equals",typeConstraints:[i.P.INTEGER,i.P.FLOAT],operatorType:a.Binary},{name:o.CONTAINS,translationKey:"oaf_operator_contains",typeConstraints:[i.P.STRING],operatorType:a.Binary},{name:o.NOT_CONTAINS,translationKey:"oaf_operator_not_contains",typeConstraints:[i.P.STRING],operatorType:a.Binary},{name:o.BEGINS_WITH,translationKey:"oaf_operator_begins_with",typeConstraints:[i.P.STRING],operatorType:a.Binary},{name:o.NOT_BEGINS_WITH,translationKey:"oaf_operator_not_begins_with",typeConstraints:[i.P.STRING],operatorType:a.Binary},{name:o.ENDS_WITH,translationKey:"oaf_operator_ends_with",typeConstraints:[i.P.STRING],operatorType:a.Binary},{name:o.NOT_ENDS_WITH,translationKey:"oaf_operator_not_ends_with",typeConstraints:[i.P.STRING],operatorType:a.Binary},{name:o.BETWEEN,translationKey:"oaf_operator_between",typeConstraints:[i.P.DATE,i.P.INTEGER,i.P.FLOAT],operatorType:a.Comparison},{name:o.NOT_BETWEEN,translationKey:"oaf_operator_not_between",typeConstraints:[i.P.DATE,i.P.INTEGER,i.P.FLOAT],operatorType:a.Comparison}]),c=e=>((e=null)=>null===e?[...s]:s.filter((t=>{const n=t.typeConstraints??[];return!(n.length>0)||n.find((t=>t===e))})))().find((t=>t.name===e)),l=()=>({id:(0,r.Ds)(),oafFilters:[]}),d=()=>({queryable:{},operator:c(o.EQUALS),value:null,minValue:null,maxValue:null,expression:""})},28288:(e,t,n)=>{"use strict";n.d(t,{$A:()=>h,bE:()=>y,ck:()=>v,k3:()=>b,xf:()=>p});var r=n(47518),i=n(26221),o=n(89707),a=n(56729),s=n(38903),c=n(42376),l=n(18410),d=n(40781),u=n(28353),g=n(12723);const h="highlight_layer",p="queryRunningHighlightFeatureId",m="querySuccessHighlightFeatureId",_="querySuccessWithGeometryHighlightFeatureId",v="searchResultHighlightFeatureCategory",y="crosshairHighlightFeatureId";class b extends i.h{constructor(){super();const{TranslationService:e}=l.z.inject("TranslationService");this._translationService=e}async register(e){const t=`${(0,c.Ds)()}`,n=e=>this._translationService.translate(e),{EnvironmentService:i}=l.z.inject("EnvironmentService");if(i.getQueryParams().get(d.h.CROSSHAIR)){const t=i.getQueryParams().get(d.h.CROSSHAIR).split(",");setTimeout((()=>{const r=t.length>1?isFinite(t[1])&&isFinite(t[2])?[t[1],t[2]].map((e=>parseFloat(e))):null:e.getState().position.center;(0,u.Xq)(r)&&(0,a.lX)({id:y,label:n("global_marker_symbol_label"),data:r,type:g.p.MARKER})}),b.CROSSHAIR_DELAY_MS)}(0,r.lB)(e,(e=>e.highlight.active),(e=>{e?(0,o.VE)(h,{constraints:{hidden:!0,alwaysTop:!0}}):(0,o.e5)(h)})),(0,r.lB)(e,(e=>e.pointer.click),(()=>{(0,a.kf)(p)})),(0,r.lB)(e,(e=>e.mainMenu.tab),(e=>{e!==s.K.FEATUREINFO&&(0,a.kf)([p,m,_])}),!1),(0,r.lB)(e,(e=>e.search.query),(e=>{e.payload||(0,a.r3)([v,"searchResultTemporaryHighlightFeatureCategory"])})),(0,r.lB)(e,(e=>e.featureInfo.querying),((e,n)=>{if(e){const e=n.featureInfo.coordinate.payload;(0,a.lX)({id:t,data:e,type:g.p.QUERY_RUNNING}),(0,a.kf)([m,_])}else{const e=n.featureInfo.coordinate.payload;(0,a.kf)(t),n.featureInfo.current.some((e=>!e.geometry))&&(0,a.lX)({id:m,data:e,type:g.p.QUERY_SUCCESS});const r=n.featureInfo.current.filter((e=>e.geometry)).map((e=>({id:_,type:g.p.DEFAULT,data:e.geometry})));(0,a.lX)(r)}}))}static get CROSSHAIR_DELAY_MS(){return 1e3}}},28508:(e,t,n)=>{var r=n(88016);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},28791:(e,t,n)=>{"use strict";n.d(t,{P:()=>r});const r=Object.freeze({STRING:"string",INTEGER:"integer",FLOAT:"float",BOOLEAN:"boolean",DATE:"date",DATETIME:"datetime"})},29355:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmkteC1sZyI+PHBhdGggZD0iTTEuMjkzIDEuMjkzYTEgMSAwIDAgMSAxLjQxNCAwTDggNi41ODZsNS4yOTMtNS4yOTNhMSAxIDAgMSAxIDEuNDE0IDEuNDE0TDkuNDE0IDhsNS4yOTMgNS4yOTNhMSAxIDAgMCAxLTEuNDE0IDEuNDE0TDggOS40MTRsLTUuMjkzIDUuMjkzYTEgMSAwIDAgMS0xLjQxNC0xLjQxNEw2LjU4NiA4IDEuMjkzIDIuNzA3YTEgMSAwIDAgMSAwLTEuNDE0Ii8+PC9zdmc+Cg=="},29498:(e,t,n)=>{var r=n(31601),i=n(76314)(r);i.push([e.id,".iframe__preview {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\toverflow-x: hidden;\n\toverflow-y: auto;\n}\n.container {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\theight: calc(100vh - 15em);\n}\n.iframe__code_string {\n\tmargin-top: 0.5em;\n\tresize: none;\n\tmin-height: 6em;\n\tposition: relative;\n\tpadding-right: 3em;\n}\n.iframe__copy_icon {\n\tposition: absolute;\n\tright: 0.77em;\n}\n.iframe__input {\n\tmargin: 0 0 0 1em !important;\n\twidth: 10em;\n}\n.iframe__input input {\n\ttext-align: right;\n}\n.iframe__input span {\n\ttext-align: left;\n\tdisplay: inline-block;\n\tmin-width: 1.2em;\n\tposition: absolute;\n\ttop: 1em;\n\tright: 0.5em;\n\tcolor: var(--text2);\n}\n.iframe__input input:read-only {\n\tcontent: '100';\n}\ninput[type='range']:focus {\n\tbox-shadow: none !important;\n}\n.fieldset .control-label {\n\ttop: -1rem;\n}\n.fieldset {\n\tdisplay: flex;\n}\niframe {\n\tborder: 0;\n\ttransition: all var(--animation-duration-medium-close) var(--animation-easing-open);\n}\niframe[width='100%'] {\n\twidth: 800px;\n}\n.iframe__section {\n\tborder-bottom: 1px solid var(--header-background-color);\n}\n.iframe__controls {\n\tposition: fixed;\n\tz-index: 999999;\n\tpadding: 0.8em 1.5em;\n\tbackground: var(--primary-bg-color);\n\tbox-shadow: 0px 0px 4px rgb(0 0 0 / 50%);\n\ttransition: all var(--animation-duration-medium-close) var(--animation-easing-open);\n\twidth: 30em;\n\ttop: 100vh;\n\tmargin-top: -24em;\n}\n.iframe__controls-section {\n\tdisplay: flex;\n\talign-content: space-evenly;\n\tflex-direction: column;\n}\n.iframe__code {\n\twidth: 100%;\n\tdisplay: flex;\n\talign-items: center;\n\tposition: relative;\n}\n.iframe__toggle {\n\tdisplay: flex;\n\tflex-direction: column;\n}\n#iframe_slider_width:disabled {\n\tvisibility: hidden;\n}\n.iframe__toggle_text {\n\tposition: absolute;\n\ttop: 1em;\n\tpointer-events: none;\n\tpadding-left: 0.125rem;\n\tz-index: 1;\n\tcolor: var(--text1);\n\tfont-size: 1rem;\n\tfont-weight: normal;\n\t-webkit-transition: all 0.28s ease;\n\ttransition: all 0.28s ease;\n}\n.iframe__toggle_sub-text {\n\tmargin: 1em 0;\n\twidth: 22.8em;\n\tcolor: var(--text2);\n}\n.width_placeholder {\n\tfont-size: 1.5rem;\n\tmargin: 0.3em 0.2em 0 1em;\n\tmargin-left: 13.9em !important;\n\tmin-height: 1.6em;\n\tpadding-left: 0.1em;\n\tpadding-top: 0.3em;\n}\n.width_placeholder-sub {\n\ttop: 2.5em !important;\n}\ninput::-webkit-outer-spin-button,\ninput::-webkit-inner-spin-button {\n\t-webkit-appearance: none;\n\tmargin: 0;\n}\ninput[type='number'] {\n\t-moz-appearance: textfield;\n}\n.iframe__input input[type='number'] {\n\tfont-size: 1.5rem;\n\tpadding: 0 1.5em 0 0;\n\tborder: 0;\n}\n\n.iframe__container {\n\tdisplay: flex;\n\tpadding-top: 1.5em;\n\tposition: relative;\n}\n\n.iframe__container label {\n\tposition: absolute;\n\ttop: 0em;\n}\n.iframe__container-width {\n\tmin-height: 4.8em;\n}\n#toggleAutoWidth {\n\twidth: 100%;\n}\n",""]),e.exports=i},30004:(e,t,n)=>{var r=n(31601),i=n(76314),o=n(4417),a=n(44275),s=i(r),c=o(a);s.push([e.id,`.zoom-to-extent-icon {\n\tmask: url(${c});\n\t-webkit-mask-image: url(${c});\n}\n\n.icon {\n\tbackground: var(--text3);\n\tmask-size: cover;\n\t-webkit-mask-size: cover;\n\tcursor: pointer;\n\tdisplay: inline-block;\n\theight: 1.5em;\n\twidth: 1.5em;\n}\n\n.zoom-to-extent-button {\n\tbackground-color: var(--primary-color);\n\tdisplay: inline-block;\n\theight: 2.5em;\n\twidth: 2.5em;\n\tborder-radius: 50%;\n\tborder: none;\n\toutline: none;\n\tpadding-top: 0.25em;\n\ttransition: all var(--animation-duration-small-open) var(--animation-easing-open);\n}\n\n.zoom-to-extent-button:hover,\n.zoom-to-extent-button:focus {\n\ttransform: scale(1.1);\n}\n.zoom-to-extent-button:focus {\n\tbox-shadow: 0 0 0 0.2em var(--primary-color-lighter);\n}\n\n.zoom-to-extent-button:active {\n\ttransform: scale(1.15);\n\tborder: none;\n}\n`,""]),e.exports=s},30191:(e,t,n)=>{"use strict";n.d(t,{g:()=>o});var r=n(28353),i=n(84693);class o{#c;#l;#d;#u;#g={};constructor(e,t){if(!(e instanceof i.S))throw new Error("<geometry> must be a Geometry");if(!(0,r.Kg)(t))throw new Error("<id> must be a String");this.#c=t,this.#l=e}set(e,t){return(0,r.Kg)(e)&&(this.#g[e]=t),this}get(e){return this.getProperties()[e]??null}remove(e){return delete this.#g[e],this}getProperties(){return{...this.#g}}setStyleHint(e){return(e||null===e)&&(this.#d=e),this}hasStyleHint(){return!!this.#d}get styleHint(){return this.#d??null}setStyle(e){return(e||null===e)&&(this.#u=e),this}get style(){return this.#u}hasStyle(){return!!this.#u}get id(){return this.#c}get geometry(){return this.#l}}},30612:(e,t,n)=>{var r=n(74336);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},30785:(e,t,n)=>{var r=n(97717);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},31507:(e,t,n)=>{"use strict";n.d(t,{Hz:()=>o,NX:()=>r,Vj:()=>l,i_:()=>a,mC:()=>s,zy:()=>i});const r="featureInfo/added",i="featureInfo/request/start",o="featureInfo/request/abort",a="featureInfo/queriedGeoresource/added",s="featureInfo/queriedGeoresource/removed",c={current:[],coordinate:null,queries:[],querying:!1,aborted:null},l=(e=c,t)=>{const{type:n,payload:l}=t;switch(n){case r:return{...e,current:[...l,...e.current]};case i:return{...e,current:[],coordinate:l,querying:!0};case a:return{...e,queries:[...e.queries,l],querying:!0};case s:{const t=e.queries.filter((e=>e!==l));return{...e,queries:t,querying:t.length>0}}case o:return{...e,queries:[],aborted:l,querying:!1}}return e}},31533:(e,t,n)=>{"use strict";n.d(t,{BY:()=>_,Bi:()=>p,C$:()=>m,F7:()=>S,Fb:()=>c,Gl:()=>b,LU:()=>y,XX:()=>d,Yb:()=>l,Yf:()=>v,cL:()=>u,e5:()=>h,jV:()=>g});var r=n(18410),i=n(28353),o=n(47518),a=n(44651);const s=()=>{const{StoreService:e}=r.z.inject("StoreService");return e.getStore()},c=e=>{s().dispatch({type:a.bP,payload:e})},l=(e,t)=>{s().dispatch({type:a.Ct,payload:{route:e?{...e}:null,stats:t?{...t}:null}})},d=e=>{e?.length>1&&!e.some((e=>!(0,i.Xq)(e)))&&s().dispatch({type:a.v3,payload:[...e]})},u=()=>{s().dispatch({type:a.hK,payload:{}})},g=e=>{(0,i.Xq)(e)&&s().dispatch({type:a.lM,payload:e})},h=e=>{(0,i.Xq)(e)&&s().dispatch({type:a.r9,payload:e})},p=e=>{(0,i.Xq)(e)&&s().dispatch({type:a.NU,payload:e})},m=e=>{(0,i.Xq)(e)&&s().dispatch({type:a.jB,payload:e})},_=(e,t)=>{(0,i.Xq)(e)&&(0,i.Et)(t)&&s().dispatch({type:a.Vh,payload:new o.MD({coord:[...e],type:t})})},v=()=>{s().dispatch({type:a.lB,payload:!0})},y=()=>{s().dispatch({type:a.lB,payload:!1})},b=e=>{s().dispatch({type:a.qh,payload:{zoomToExtent:!1,...e}})},S=()=>{s().dispatch({type:a.uB})}},31826:(e,t,n)=>{var r=n(31601),i=n(76314),o=n(4417),a=n(6444),s=i(r),c=o(a);s.push([e.id,`.layer-swipe {\n\tz-index: calc(var(--z-footer) - 10);\n\tposition: fixed;\n\tleft: -1em;\n\tright: -1em;\n\ttop: 50%;\n}\n.line {\n\tz-index: calc(var(--z-footer) - 20);\n\tposition: fixed;\n\theight: 100%;\n\twidth: 2px;\n\tleft: 50%;\n\tmargin-left: -2px;\n\tbackground: var(--tertiary-bg-color);\n}\n\n.layer-swipe input {\n\twidth: 100%;\n\tleft: 0;\n\n\tpointer-events: all;\n}\ninput[type='range'] {\n\tappearance: none;\n\tdisplay: block;\n\tbackground: transparent;\n\toutline-offset: 5px;\n\tpointer-events: none;\n\theight: 0;\n}\ninput[type='range']::-webkit-slider-thumb {\n\tappearance: none;\n\tcursor: ew-resize;\n\tborder: 0.2em solid var(--primary-color);\n\tborder-radius: 50%;\n\tbackground: url(${c}) var(--primary-color);\n\twidth: 2.3rem;\n\theight: 2.3rem;\n\tbackground-size: 1.9em 1.9em;\n\tbackground-repeat: no-repeat;\n\tbox-shadow: 0 0 0 var(--thumb-highlight-size) var(--primary-color-lighter);\n\ttransition: box-shadow 0.1s ease;\n\tpointer-events: all;\n}\ninput[type='range']::-moz-range-thumb {\n\tappearance: none;\n\tcursor: ew-resize;\n\tborder: 0.2em solid var(--primary-color);\n\tblock-size: 2rem;\n\tinline-size: 2rem;\n\tmargin-top: 0;\n\tborder-radius: 50%;\n\tbackground: url(${c}) var(--primary-color);\n\twidth: 2rem;\n\theight: 2rem;\n\tbackground-size: 1.9em 1.9em;\n\tbackground-repeat: no-repeat;\n\tbox-shadow: 0 0 0 var(--thumb-highlight-size) var(--primary-color-lighter);\n\ttransition: box-shadow 0.1s ease;\n\tpointer-events: all;\n}\ninput[type='range']::-webkit-slider-runnable-track {\n\tappearance: none;\n\tblock-size: 0;\n}\ninput[type='range']::-moz-range-track {\n\tappearance: none;\n\tblock-size: 0;\n}\ninput[type='range']:focus {\n\t--thumb-highlight-size: 0.3em;\n}\n`,""]),e.exports=s},32551:(e,t,n)=>{"use strict";n.d(t,{T:()=>i,d:()=>r});const r=Object.freeze({SMALL:"small",MEDIUM:"medium",LARGE:"large"}),i=Object.freeze({HIGHLIGHT:"highlight",CLUSTER:"cluster"})},32907:(e,t,n)=>{var r=n(25639);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},33261:(e,t,n)=>{"use strict";n.d(t,{X:()=>f});var r=n(36752),i=n(40068),o=n(18410),a=n(78645),s=n(85919),c=n(10314),l=n.n(c),d=n(43174),u=n(26197),g=n(56729),h=n(42376),p=n(28353),m=n(84693),_=n(12723);const v="update_featureInfo_data",y="update_isPortrait_hasMinWidth",b="update_querying",S=`highlightedFeatureInfoGeometry_${(0,h.Ds)()}`;class f extends s.S{constructor(){super({featureInfoData:[],isPortrait:!1,isQuerying:!1});const{TranslationService:e}=o.z.inject("TranslationService");this._translationService=e,this.observe((e=>e.featureInfo.current),(e=>this.signal(v,[...e]))),this.observe((e=>e.media),(e=>this.signal(y,e.portrait))),this.observe((e=>e.featureInfo.querying),(e=>this.signal(b,e)))}update(e,t,n){switch(e){case v:return{...n,featureInfoData:[...t]};case y:return{...n,isPortrait:t};case b:return{...n,isQuerying:t}}}createView(e){const{featureInfoData:t,isPortrait:n,isQuerying:o}=e,s=e=>this._translationService.translate(e);return r.qy`
			<style>
				${l()}
			</style>
			<div>
				<div class="container  ${n?"is-portrait":"is-landscape"}">
					<ul class="ba-list">
						<li class="ba-list-item  ba-list-inline ba-list-item__header featureinfo-header">
							<span class="ba-list-item__pre" style="position:relative;left:-1em;">
								<ba-icon .icon="${d}" .size=${4} .title=${s("featureInfo_close_button")} @click=${a.pT}></ba-icon>
							</span>
							<span class="ba-list-item__text vertical-center">
								<span class="ba-list-item__main-text" style="position:relative;left:-1em;"> ${s("featureInfo_header")} </span>
							</span>
							<span class="share ba-icon-button ba-list-item__after vertical-center separator" style="padding-right: 1.5em;">
								<ba-icon .icon="${u}" .size=${1.3}></ba-icon>
							</span>
							<span class="print ba-icon-button ba-list-item__after vertical-center separator">
								<ba-icon .icon="${"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmktcHJpbnRlciI+PHBhdGggZD0iTTIuNSA4YS41LjUgMCAxIDAgMC0xIC41LjUgMCAwIDAgMCAxIi8+PHBhdGggZD0iTTUgMWEyIDIgMCAwIDAtMiAydjJIMmEyIDIgMCAwIDAtMiAydjNhMiAyIDAgMCAwIDIgMmgxdjFhMiAyIDAgMCAwIDIgMmg2YTIgMiAwIDAgMCAyLTJ2LTFoMWEyIDIgMCAwIDAgMi0yVjdhMiAyIDAgMCAwLTItMmgtMVYzYTIgMiAwIDAgMC0yLTJ6TTQgM2ExIDEgMCAwIDEgMS0xaDZhMSAxIDAgMCAxIDEgMXYySDR6bTEgNWEyIDIgMCAwIDAtMiAydjFIMmExIDEgMCAwIDEtMS0xVjdhMSAxIDAgMCAxIDEtMWgxMmExIDEgMCAwIDEgMSAxdjNhMSAxIDAgMCAxLTEgMWgtMXYtMWEyIDIgMCAwIDAtMi0yem03IDJ2M2ExIDEgMCAwIDEtMSAxSDVhMSAxIDAgMCAxLTEtMXYtM2ExIDEgMCAwIDEgMS0xaDZhMSAxIDAgMCAxIDEgMSIvPjwvc3ZnPjwhLS1NSVQgTGljZW5zZS0tPgo="}" .size=${1.5}></ba-icon>
							</span>
						</li>
						${(e=>o?r.qy`<ba-spinner></ba-spinner>`:0===e.length?r.qy`<div class="info-container">
							<div class="info-icon"></div>
							<span class="info-text">${(0,i._)(s("featureInfo_info"))} </span>
						</div>`:r.s6)(t)}
						${t.map((e=>{return r.qy`
								<li class="ba-section selectable">
									<button
										class="ba-list-item ba-list-item__header ${n=e.geometry,n?"is-geometry":""}"
										@mouseenter=${()=>(e=>{e&&(0,g.lX)({id:S,type:_.p.DEFAULT_TMP,data:new m.S(e.data,e.sourceType)})})(e.geometry)}
										@mouseleave=${()=>{(0,g.kf)(S)}}
									>
										<span class="ba-list-item__text  ba-list-item__primary-text">${e.title}</span>
										<span class="ba-list-item__after">
											<i class="icon icon-rotate-90 chevron iconexpand"></i>
										</span>
									</button>
									<div class="collapse-content divider">${t=e.content,(0,p.qb)(t)?t:r.qy`${(0,i._)(t)}`}</div>
								</li>
							`;var t,n}))}
					</ul>
					<div></div>
				</div>
			</div>
		`}static get tag(){return"ba-feature-info-panel"}}},34919:(e,t,n)=>{"use strict";n.d(t,{$:()=>b,o:()=>S});var r=n(36752),i=n(6683),o=n(12378),a=n(18410),s=n(99990),c=n(90996),l=n.n(c),d=n(51863),u=n.n(d),g=n(34844),h=n(72145);const p="update_is_collapsed",m="update_menu_type",_="update_menu_items",v="update_last_anchor_position",y={label:null,icon:null,action:null,disabled:!1,isDivider:!1},b=Object.freeze({MEATBALL:"meatball",KEBAB:"kebab"});class S extends s.T{constructor(){super({type:b.MEATBALL,menuItems:[],isCollapsed:!0,anchorPosition:null}),this._documentListener={pointerdown:null,pointerup:null}}onInitialize(){this.setAttribute(g.QE,"")}update(e,t,n){switch(e){case p:return{...n,isCollapsed:t};case m:return{...n,type:t};case _:return{...n,menuItems:t.map((e=>({...y,...e})))};case v:return{...n,anchorPosition:t}}}createView(e){const{isCollapsed:t,type:n}=e,i=this._getMenuOrFixedNotification(e);return r.qy`
		 <style>${l()}</style> 
         <button class='anchor'>
            <span id="menu-icon" data-test-id class='menu__button ${n} ' @click=${e=>{t?(this._registerDocumentListener("pointerdown"),this._registerDocumentListener("pointerup")):(this._deregisterDocumentListener("pointerdown"),this._deregisterDocumentListener("pointerup"));const n=this.getBoundingClientRect(),r=[e.x-e.offsetX,e.y-e.offsetY];this.signal(v,{absolute:[n.x,n.y],relative:[n.x-r[0],n.y-r[1]]}),this.signal(p,!t)}} >
            </span>
			${i}
			</button>				      
     </div>`}_getMenuOrFixedNotification(e){const{isCollapsed:t,menuItems:n,anchorPosition:s}=e,{EnvironmentService:c}=a.z.inject("EnvironmentService");if(c.isTouch())return t?(0,h.D)():(0,h.j)(this._getItems(n)),r.s6;const l=s?this._calculateSector(s.absolute):0,d=s?(()=>{const e=l<2?0:-1;return{"--anchor-x":(1===l||2===l?1:0)*(s.relative[0]+35)+"px","--anchor-y":e*(s.relative[1]+35)+"px"}})():{},u={collapsed:t,sector0:0===l,sector1:1===l,sector2:2===l,sector3:3===l};return r.qy`<div class='menu__container ${(0,i.H)(u)}' style=${(0,o.W)(d)}'>
             ${t?"":this._getItems(n)} 
             </div>`}_registerDocumentListener(e){const t=e=>{e.composedPath().includes(this)||this._closeMenu()};this._documentListener[e]=t,document.addEventListener(e,t)}_deregisterDocumentListener(e){document.removeEventListener(e,this._documentListener[e]),this._documentListener[e]=null}_closeMenu(){this._deregisterDocumentListener("pointerdown"),this._deregisterDocumentListener("pointerup");const{EnvironmentService:e}=a.z.inject("EnvironmentService");(e.isTouch()?()=>{(0,h.D)(),this.signal(p,!0)}:()=>this.signal(p,!0))()}_calculateSector(e){const t=.66*window.innerWidth,n=.66*window.innerHeight;return e[0]<=t&&e[1]<=n?0:e[0]>t&&e[1]<=n?1:e[0]>t&&e[1]>n?2:3}_getItems(e){const t=(e,t)=>{const{id:n,label:o,icon:s,action:c,disabled:l}=e,d=n?`menuitem_${n}`:`menuitem_${t}`,{EnvironmentService:u}=a.z.inject("EnvironmentService"),g={touch:u.isTouch()};return r.qy` <button
				id=${d}
				data-test-id
				class="menuitem ${(0,i.H)(g)}"
				?disabled=${l}
				@pointerdown=${()=>{this._deregisterDocumentListener("pointerdown")}}
				@click=${e=>{this._deregisterDocumentListener("pointerdown"),this._deregisterDocumentListener("pointerup"),e.stopPropagation(),this._closeMenu(),c()}}
				@pointerup=${e=>{e.preventDefault(),e.stopPropagation()}}
			>
				${(e=>s?(()=>{const t=`menuitem__icon_${e}`,n=`.${t} { mask : url(${s});-webkit-mask-image : url(${s});mask-size:cover;-webkit-mask-size:cover;}`;return r.qy` <style>
							${n}
						</style>
						<div class="menuitem__icon ${t}"></div>`})():r.qy`<div></div>`)(n||t)}
				<div class="menuitem__text">${o}</div>
			</button>`};return r.qy`<style>
				${u()}</style
			>${e.map(((e,n)=>t(e,n)))}`}set items(e){this.signal(_,e)}set type(e){this.signal(m,e)}static get tag(){return"ba-overflow-menu"}}},35427:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmktZm9yd2FyZCI+PCEtLU1JVCBMaWNlbnNlLS0+PHBhdGggZD0iTS42NjMgOC4zNTFjLS44ODYuMDE4LS44NTktLjY5LjAyNy0uNzA3aDIuNjUzdi43MDd6bTEyLjExLjA1N3YtLjcwN2gyLjU5Yy44ODUgMCAuODg1LjcwNyAwIC43MDd6TTguMzY1IDEyLjg4djIuNTAzYzAgLjg2Mi0uNjczLjg2Mi0uNjczIDBWMTIuODh6IiBzdHlsZT0iZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlLXdpZHRoOjEuMzEwMDUxOTIiLz48ZyBzdHlsZT0iZm9udC1zdHlsZTpub3JtYWw7Zm9udC13ZWlnaHQ6NDAwO2ZvbnQtc2l6ZTo3LjQzODgxNzVweDtsaW5lLWhlaWdodDoxMjUlO2ZvbnQtZmFtaWx5OlNhbnM7bGV0dGVyLXNwYWNpbmc6MDt3b3JkLXNwYWNpbmc6MDtmaWxsOiMwMDA7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOi4xODU5NzA0MXB4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiPjxwYXRoIGQ9Ik03LjEgNS44NzJoLjg3MmwyLjEyIDR2LTRoLjYyN3Y0Ljc4MWgtLjg3MWwtMi4xMi00djRoLS42MjdaIiBhcmlhLWxhYmVsPSJOIiBzdHlsZT0iZm9udC1zdHlsZTpub3JtYWw7Zm9udC12YXJpYW50Om5vcm1hbDtmb250LXdlaWdodDo0MDA7Zm9udC1zdHJldGNoOm5vcm1hbDtmb250LWZhbWlseTpWZW1hbmEyMDAwOy1pbmtzY2FwZS1mb250LXNwZWNpZmljYXRpb246VmVtYW5hMjAwMDtzdHJva2Utd2lkdGg6LjE2Mzk0MzcycHgiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0uOTM1IC0uMTkyKSIvPjwvZz48cGF0aCBkPSJtNy43NzIuMTczLTEuNTE4IDIuNmMtLjE4LjMwNy0uMDIzLjQ0NS4yNS40NDVoMy4wMzVjLjI3MiAwIC40MDctLjEzOC4yMjctLjQ0NUw4LjI0OC4xNzNjLS4xMjYtLjIxNi0uMzUtLjIxNi0uNDc2IDAiIHN0eWxlPSJzdHJva2Utd2lkdGg6LjM4NzQ4NzAyIi8+PC9zdmc+Cg=="},35479:(e,t,n)=>{"use strict";n.r(t),n(71424),n(78424),n(3630),n(66625),n(65506),n(26421),n(79340),n(16907),n(85029),n(87037),n(83120),n(12347),n(620);var r=n(37875);customElements.get(r.P.tag)||window.customElements.define(r.P.tag,r.P)},35558:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmktY2xpcGJvYXJkIj48IS0tTUlUIExpY2Vuc2UtLT48cGF0aCBkPSJNNCAxLjVIM2EyIDIgMCAwIDAtMiAyVjE0YTIgMiAwIDAgMCAyIDJoMTBhMiAyIDAgMCAwIDItMlYzLjVhMiAyIDAgMCAwLTItMmgtMXYxaDFhMSAxIDAgMCAxIDEgMVYxNGExIDEgMCAwIDEtMSAxSDNhMSAxIDAgMCAxLTEtMVYzLjVhMSAxIDAgMCAxIDEtMWgxeiIvPjxwYXRoIGQ9Ik05LjUgMWEuNS41IDAgMCAxIC41LjV2MWEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNXYtMWEuNS41IDAgMCAxIC41LS41em0tMy0xQTEuNSAxLjUgMCAwIDAgNSAxLjV2MUExLjUgMS41IDAgMCAwIDYuNSA0aDNBMS41IDEuNSAwIDAgMCAxMSAyLjV2LTFBMS41IDEuNSAwIDAgMCA5LjUgMHoiLz48L3N2Zz4K"},36e3:(e,t,n)=>{var r=n(31601),i=n(76314)(r);i.push([e.id,".badge {\n\tdisplay: inline-flex;\n\talign-items: center;\n\tborder-radius: 2em;\n\tpadding: 0.2em 0.5em;\n}\n.icon {\n\tmask-size: cover;\n\t-webkit-mask-size: cover;\n\tcursor: pointer;\n\tdisplay: inline-block;\n\tmargin-right: 0.2em;\n}\n.text {\n\tfont-weight: bold;\n}\n",""]),e.exports=i},38297:(e,t,n)=>{"use strict";n.d(t,{Fn:()=>a,Mq:()=>i,Vv:()=>r});const r="topics/current",i="topics/resources/ready",o={current:null,ready:!1},a=(e=o,t)=>{const{type:n,payload:a}=t;switch(n){case r:return{...e,current:a};case i:return{...e,ready:a}}return e}},38440:(e,t,n)=>{var r=n(31601),i=n(76314)(r);i.push([e.id,".loading {\n\tcolor: var(--primary-color);\n}\n\n.loading:after {\n\tcontent: ' .';\n\tanimation: dots 1s steps(5, end) infinite;\n\tcolor: var(--primary-color);\n}\n\n@keyframes dots {\n\t0%,\n\t20% {\n\t\tcolor: var(--primary-bg-color);\n\t\ttext-shadow:\n\t\t\t0.25em 0 0 var(--primary-bg-color),\n\t\t\t0.5em 0 0 var(--primary-bg-color);\n\t}\n\t40% {\n\t\tcolor: var(--primary-color);\n\t\ttext-shadow:\n\t\t\t0.25em 0 0 var(--primary-bg-color),\n\t\t\t0.5em 0 0 var(--primary-bg-color);\n\t}\n\t60% {\n\t\ttext-shadow:\n\t\t\t0.25em 0 0 var(--primary-color),\n\t\t\t0.5em 0 0 var(--primary-bg-color);\n\t}\n\t80%,\n\t100% {\n\t\ttext-shadow:\n\t\t\t0.25em 0 0 var(--primary-color),\n\t\t\t0.5em 0 0 var(--primary-color);\n\t}\n}\n",""]),e.exports=i},38611:(e,t,n)=>{"use strict";n.d(t,{Er:()=>s,KZ:()=>c,UO:()=>a});var r=n(18410),i=n(13869);const o=()=>{const{StoreService:e}=r.z.inject("StoreService");return e.getStore()},a=()=>{o().dispatch({type:i.K1,payload:{active:!0}})},s=()=>{o().dispatch({type:i.K1,payload:{active:!1}})},c=e=>{o().dispatch({type:i.hK,payload:e})}},38745:(e,t,n)=>{var r=n(31601),i=n(76314)(r);i.push([e.id,".notification_item {\n\tanimation-name: animateIn;\n\tanimation-fill-mode: both;\n\tanimation-duration: var(--animation-duration-medium-open);\n\tanimation-timing-function: var(--animation-easing-open);\n\tbackground-color: var(--primary-bg-color);\n\tbox-shadow: 0px 0px 2px rgb(0 0 0 / 50%);\n\tdisplay: flex;\n\tflex-direction: column;\n\tmargin: 0.1em auto;\n\tpadding: 0.8em 1.5em;\n\twidth: min-content;\n\tmin-width: 25em;\n\tpointer-events: all;\n\tfont-size: 1.1rem;\n}\n\n.notification_content {\n\tcolor: var(--text3);\n}\n\n.notification_content a {\n\tcolor: var(--text3);\n\tfont-weight: bold;\n}\n\n.notification_content a:hover {\n\ttext-decoration: underline;\n}\n\n.notification_level {\n\tfont-weight: bold;\n\tcolor: var(--text3);\n\tmargin-bottom: 0.2em;\n}\n\n.notification_fixed {\n\tborder: 0.2em solid var(--primary-color);\n}\n\n.notification_info {\n\tbackground: var(--info-color);\n}\n.notification_warn {\n\tbackground: var(--warning-color);\n}\n.notification_error {\n\tbackground: var(--error-color);\n}\n\n.notification_item_hide {\n\tanimation-name: animateOut;\n\tanimation-fill-mode: both;\n\tanimation-duration: var(--animation-duration-medium-close);\n\tanimation-timing-function: var(--animation-easing-close);\n}\n@keyframes animateIn {\n\t0% {\n\t\topacity: 0;\n\t\ttransform: translateY(200%);\n\t}\n\t100% {\n\t\topacity: 1;\n\t}\n}\n@keyframes animateOut {\n\t0% {\n\t\topacity: 1;\n\t}\n\t100% {\n\t\topacity: 0;\n\t\ttransform: translateY(200%);\n\t}\n}\n",""]),e.exports=i},38903:(e,t,n)=>{"use strict";n.d(t,{K:()=>r});const r=Object.freeze({TOPICS:0,MAPS:1,SEARCH:2,ROUTING:3,MISC:4,FEATUREINFO:5})},39043:(e,t,n)=>{"use strict";n.d(t,{Fw:()=>a,SM:()=>i,a6:()=>r,cw:()=>o,yp:()=>c});const r="pointer/click",i="pointer/contextClick",o="pointer/beingDragged",a="pointer/move",s={click:null,contextClick:null,beingDragged:!1,move:null},c=(e=s,t)=>{const{type:n,payload:c}=t;switch(n){case r:return{...e,click:c};case i:return{...e,contextClick:c};case a:return{...e,move:c};case o:return{...e,beingDragged:c}}return e}},39400:(e,t,n)=>{"use strict";n.d(t,{$I:()=>s,FQ:()=>r,Y1:()=>i,bu:()=>o,t8:()=>a});const r=2**27;class i{constructor(e,t=null,n=null){this._name=e,this._version=t,this._srid=n}get name(){return this._name}get version(){return this._version}get srid(){return this._srid}static forKml(){return new i(o.KML,null,4326)}static forGpx(){return new i(o.GPX,null,4326)}static forGeoJSON(){return new i(o.GEOJSON,null,4326)}static forEwkt(e){return new i(o.EWKT,null,e)}}const o=Object.freeze({KML:"kml",GPX:"gpx",GEOJSON:"geojson",WMS:"wms",OAF:"oaf",EWKT:"ewkt"});class a{constructor(e,t=null){this._status=e,this._sourceType=t}get status(){return this._status}get sourceType(){return this._sourceType}}const s=Object.freeze({OK:0,UNSUPPORTED_TYPE:1,MAX_SIZE_EXCEEDED:2,OTHER:3,BAA_AUTHENTICATED:4,RESTRICTED:5,UNSUPPORTED_SRID:6})},39447:(e,t,n)=>{"use strict";n.d(t,{Hy:()=>g,LU:()=>c,O9:()=>y,TF:()=>b,Xo:()=>m,Yf:()=>s,ZR:()=>p,b4:()=>l,cL:()=>v,dv:()=>u,eC:()=>h,iY:()=>d,td:()=>_});var r=n(49105),i=n(18410),o=n(47518);const a=()=>{const{StoreService:e}=i.z.inject("StoreService");return e.getStore()},s=(e=!0)=>{a().dispatch({type:r.kR,payload:{active:!0,createPermanentLayer:e}})},c=()=>{a().dispatch({type:r.kR,payload:{active:!1,createPermanentLayer:!0}})},l=e=>{a().dispatch({type:r.Y2,payload:e})},d=e=>{a().dispatch({type:r.LN,payload:e})},u=e=>{a().dispatch({type:r.Em,payload:e})},g=e=>{a().dispatch({type:r.o1,payload:e})},h=e=>{a().dispatch({type:r.zN,payload:e})},p=e=>{a().dispatch({type:r.HD,payload:e})},m=e=>{a().dispatch({type:r.Au,payload:e})},_=e=>{a().dispatch({type:r.Wn,payload:e})},v=()=>{a().dispatch({type:r.tD,payload:new o.MD("reset")})},y=()=>{a().dispatch({type:r.ly,payload:new o.MD("finish")})},b=()=>{a().dispatch({type:r.WD,payload:new o.MD("remove")})}},39576:(e,t,n)=>{var r=n(31601),i=n(76314),o=n(4417),a=n(13513),s=n(72157),c=i(r),l=o(a),d=o(s);c.push([e.id,`.zoom-buttons {\n\tdisplay: flex;\n\tflex-direction: column;\n}\n\n.button {\n\ttransition: all var(--animation-duration-small-open) var(--animation-easing-open);\n}\n\n.button:focus {\n\tbox-shadow: 0 0 0 0.2em var(--primary-color-lighter);\n}\n\n.zoom-buttons :first-child {\n\tmargin: 0 0 0.4em 0;\n}\n\n.zoom-in {\n\tmask: url(${l});\n\t-webkit-mask-image: url(${l});\n}\n\n.zoom-out {\n\tmask: url(${d});\n\t-webkit-mask-image: url(${d});\n}\n\n.icon {\n\tbackground: var(--primary-color);\n\tmask-size: cover;\n\t-webkit-mask-size: cover;\n\tcursor: pointer;\n\tdisplay: inline-block;\n\theight: 2.5em;\n\twidth: 2.5em;\n}\n\n.button:hover,\n.button:focus {\n\ttransform: scale(1.1);\n}\n\n.button:focus-visible {\n\toutline-offset: 0.2em;\n\toutline: 0.2em solid var(--secondary-color);\n}\n\n.button:active {\n\ttransform: scale(1.15);\n}\n\n.zoom-buttons .button {\n\tbackground-color: var(--text3);\n\tdisplay: inline-block;\n\theight: 2.5em;\n\twidth: 2.5em;\n\tborder-radius: 50%;\n\tborder: 0;\n}\n`,""]),e.exports=c},39892:(e,t,n)=>{"use strict";n.d(t,{E2:()=>a,Ob:()=>o,yQ:()=>c});var r=n(28353);const i=e=>Array.isArray(e)&&3<=e.filter((e=>0<=e&&e<=255)).length,o=e=>{if(!i(e))return null;const t=e=>{const t=e.toString(16);return 1===t.length?"0"+t:t};return"#"+t(e[0])+t(e[1])+t(e[2])},a=e=>{if(!(0,r.Kg)(e))return null;e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,r){return t+t+n+n+r+r}));const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null},s=e=>{if(t=e,!(Array.isArray(t)&&3<=t.filter((e=>0<=e)).length&&t[0]<=360&&t[1]<=1&&t[2]<=1))return null;var t;const n=e[0]/360,r=e[1],i=e[2],o=Math.floor(6*n),a=6*n-o,s=i*(1-r),c=i*(1-a*r),l=i*(1-(1-a)*r),d=(()=>{switch(o%6){case 0:return[i,l,s];case 1:return[c,i,s];case 2:return[s,i,l];case 3:return[s,c,i];case 4:return[l,s,i];case 5:return[i,s,c]}})();return[Math.round(255*d[0]),Math.round(255*d[1]),Math.round(255*d[2])]},c=e=>{if(!i(e))return null;const t=(e=>{if(!i(e))return null;const t=e[0]/255,n=e[1]/255,r=e[2]/255,o=Math.max(t,n,r),a=o-Math.min(t,n,r),s=a&&(o===t?(n-r)/a:o===n?2+(r-t)/a:4+(t-n)/a);return[60*(s<0?s+6:s),o&&a/o,o]})(e);if(1===t[1]&&1===t[2]){const e=[(t[0]+180)%360,t[1],t[2]],n=s(e),r=.299*n[0]+.587*n[1]+.114*n[2];return[r,r,r]}const n=(e=>e[2]<.7)(t)?(e=>[e[0],0,1])(t):(e=>[e[0],0,0])(t);return s(n)}},40472:(e,t,n)=>{var r=n(31601),i=n(76314)(r);i.push([e.id,".stats-container {\n\tmargin: 0.5em 0 0 0;\n\tfont-size: 0.9rem;\n}\n\n.stats-content {\n\tdisplay: flex;\n}\n\n.stats-content ba-coordinate-info {\n\twidth: 100%;\n}\n\n.stats-content .label {\n\tmin-width: 7em;\n\tmargin: auto;\n}\n\n.stats-content .value {\n\tflex-grow: 4;\n\tmargin: auto;\n}\n.stats-content .icon {\n\tpadding-left: 1em;\n\tmargin: auto;\n}\n.stats-polygon-area.stats-content {\n\tmargin-top: 0.1em;\n}\n",""]),e.exports=i},40555:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmktYm91bmRpbmctYm94LWNpcmNsZXMiPjxwYXRoIGQ9Ik04LjUxNS0uMDA3YTIgMiAwIDAgMC0yIDIgMiAyIDAgMCAwIDIgMiAyIDIgMCAwIDAgMi0yIDIgMiAwIDAgMC0yLTJ6bTAgMWExIDEgMCAwIDEgMSAxIDEgMSAwIDAgMS0xIDEgMSAxIDAgMCAxLTEtMSAxIDEgMCAwIDEgMS0xek0xLjk2MiA3Ljk5MmEyIDIgMCAwIDAtMiAyIDIgMiAwIDAgMCAyIDIgMiAyIDAgMCAwIDItMiAyIDIgMCAwIDAtMi0yem0wIDFhMSAxIDAgMCAxIDEgMSAxIDEgMCAwIDEtMSAxIDEgMSAwIDAgMS0xLTEgMSAxIDAgMCAxIDEtMXptOS4wNCAzLjAzOGEyIDIgMCAwIDAtMiAyIDIgMiAwIDAgMCAyIDIgMiAyIDAgMCAwIDItMiAyIDIgMCAwIDAtMi0yem0wIDFhMSAxIDAgMCAxIDEgMSAxIDEgMCAwIDEtMSAxIDEgMSAwIDAgMS0xLTEgMSAxIDAgMCAxIDEtMXoiIHN0eWxlPSJvcGFjaXR5OjE7ZmlsbDpyZWQ7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOnJlZDtzdHJva2Utd2lkdGg6MDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIi8+PHBhdGggZD0ibTMuMDA3IDguOTA3IDQuNTg3LTUuNzA1bS00LjM1NiA3LjYxMyA2LjI4MyAyLjcxOG0xLjg1MS0uODY3IDEuNTAzLTQuMzk1IiBzdHlsZT0iZmlsbDpub25lO2ZpbGwtcnVsZTpldmVub2RkO3N0cm9rZTojMDAwO3N0cm9rZS13aWR0aDoxcHg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIvPjwvc3ZnPjwhLS1NSVQgTGljZW5zZS0tPgo="},40781:(e,t,n)=>{"use strict";n.d(t,{h:()=>r});const r=Object.freeze({ZOOM:"z",CENTER:"c",ROTATION:"r",LAYER:"l",LAYER_VISIBILITY:"l_v",LAYER_OPACITY:"l_o",LAYER_TIMESTAMP:"l_t",LAYER_SWIPE_ALIGNMENT:"l_sa",LAYER_STYLE:"l_st",LAYER_FILTER:"l_f",SWIPE_RATIO:"sr",TOPIC:"t",QUERY:"q",CHIP_ID:"chid",MENU_ID:"mid",CATALOG_NODE_IDS:"cnids",TOOL_ID:"tid",CROSSHAIR:"crh",ZOOM_TO_EXTENT:"zte",ROUTE_WAYPOINTS:"rtwp",ROUTE_CATEGORY:"rtc",GEOLOCATION:"gl",EC_DRAW_TOOL:"ec_draw_tool",EC_MAP_ACTIVATION:"ec_map_activation",EC_LINK_TO_APP:"ec_link_to_app",T_ENABLE_TEST_IDS:"t_enable-test-ids"})},42508:(e,t,n)=>{var r=n(47976);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},43174:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmktYXJyb3ctbGVmdC1zaG9ydCI+PCEtLU1JVCBMaWNlbnNlLS0+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTIgOGEuNS41IDAgMCAxLS41LjVINS43MDdsMi4xNDcgMi4xNDZhLjUuNSAwIDAgMS0uNzA4LjcwOGwtMy0zYS41LjUgMCAwIDEgMC0uNzA4bDMtM2EuNS41IDAgMSAxIC43MDguNzA4TDUuNzA3IDcuNUgxMS41YS41LjUgMCAwIDEgLjUuNSIvPjwvc3ZnPgo="},44004:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGFyaWEtaGlkZGVuPSJ0cnVlIiBjbGFzcz0iY2hldnJvbi1yaWdodCIgZGF0YS1pY29uPSJjaGV2cm9uLXJpZ2h0IiBkYXRhLXByZWZpeD0iZmFzIiB2aWV3Qm94PSIwIDAgMzIwIDUxMiI+PCEtLUZvbnQgQXdlc29tZSBGcmVlIDUuMTUuMSBieSBAZm9udGF3ZXNvbWUgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbSBMaWNlbnNlIC0gaHR0cHM6Ly9mb250YXdlc29tZS5jb20vbGljZW5zZS9mcmVlIChJY29uczogQ0MgQlkgNC4wLCBGb250czogU0lMIE9GTCAxLjEsIENvZGU6IE1JVCBMaWNlbnNlKS0tPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTI4NS40NzYgMjcyLjk3MSA5MS4xMzIgNDY3LjMxNGMtOS4zNzMgOS4zNzMtMjQuNTY5IDkuMzczLTMzLjk0MSAwbC0yMi42NjctMjIuNjY3Yy05LjM1Ny05LjM1Ny05LjM3NS0yNC41MjItLjA0LTMzLjkwMUwxODguNTA1IDI1NiAzNC40ODQgMTAxLjI1NWMtOS4zMzUtOS4zNzktOS4zMTctMjQuNTQ0LjA0LTMzLjkwMWwyMi42NjctMjIuNjY3YzkuMzczLTkuMzczIDI0LjU2OS05LjM3MyAzMy45NDEgMEwyODUuNDc1IDIzOS4wM2M5LjM3MyA5LjM3MiA5LjM3MyAyNC41NjguMDAxIDMzLjk0MSIvPjwvc3ZnPgo="},44275:e=>{"use strict";e.exports="data:image/svg+xml;base64,PCEtLUdlbmVyYXRlZCBieSBJY29Nb29uLmlvLS0+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiI+PHBhdGggZD0iTTEuMzU2IDUuNzYzaDMuMzIyTDguNjEgMS4wODVsMi44NDcgMy41OTMgMS40MjQtMS4wODVjNS4zMDEtLjAwOC4wNC0uMDEyIDYuNzI0LjAybDIuNzY4IDIuODk1LjA2OCAzLjY2MSAyLjEwMiAyLjU3NiA1Ljc2MyA0LjQwN3YyLjM3M2MtMi4zMzQgMS4zNzktMi43MzkgMS42OTItNi45MTUgNC4yNzFsMi40NDEgNS42OTUtNS4wMTctMi4xMDJjLTYuMDg4IDIuNTQ4LjAwMi4wNDMtNy4wNTEgMi45MTVsLTMuMzIyLTEuNjI3LTEuODMxIDMuMDUxLTMuNzk3LTMuMjU0IDIuNjQ0LTEuMDg1LS4yNzEtNi4wMzQgMy4xMTktMi4yMzd2LTMuMjU0bC0yLjMwNS0xLjQ5MmMtLjI3NC0xLjYzNC0uNDg0LTIuMjExLS44ODEtNC4xMzZMMy44NjYgOC40MDVsLTEuODMgMS44MzF6Ii8+PC9zdmc+Cg=="},44430:(e,t,n)=>{var r=n(26010);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},44651:(e,t,n)=>{"use strict";n.d(t,{Ct:()=>a,NU:()=>g,Rb:()=>y,Vh:()=>p,bP:()=>o,hK:()=>l,jB:()=>h,lB:()=>s,lM:()=>d,qh:()=>m,r9:()=>u,uB:()=>_,v3:()=>c});var r=n(80943),i=n(47518);const o="routing/categoryChanged",a="routing/routeStatsChanged",s="routing/activeChanged",c="routing/waypointsChanged",l="routing/reset",d="routing/startSet",u="routing/forceStartSet",g="routing/destinationSet",h="routing/forceDestinationSet",p="routing/proposalSet",m="routing/highlightSet",_="routing/highlightRemoved",v={categoryId:null,status:r.Tc.Start_Destination_Missing,stats:null,route:null,waypoints:[],highlightedSegments:new i.MD,active:!1,proposal:new i.MD,intermediate:new i.MD},y=(e=v,t)=>{const{type:n,payload:y}=t;switch(n){case o:return{...e,categoryId:y};case"routing/statusChanged":return{...e,status:y};case"routing/statsChanged":return{...e,stats:y};case"routing/routeChanged":return{...e,route:y?{...y}:null};case a:return{...e,route:y.route?{...y.route}:null,stats:y.stats?{...y.stats}:null};case c:return{...e,waypoints:[...y.map((e=>[...e]))],status:r.Tc.Ok};case"routing/waypointDeleted":{const t=e.waypoints.findIndex((e=>(0,i.aI)(e,y))),n=()=>{if(1===e.waypoints.length&&0===t)return r.Tc.Start_Destination_Missing;if(2===e.waypoints.length)switch(t){case 0:return r.Tc.Start_Missing;case 1:return r.Tc.Destination_Missing}return e.status};return{...e,waypoints:e.waypoints.filter((e=>!(0,i.aI)(e,y))),status:n()}}case l:return{...e,waypoints:[],route:null,status:r.Tc.Start_Destination_Missing};case d:return 1===e.waypoints.length?{...e,waypoints:[[...y],...e.waypoints],status:r.Tc.Ok}:{...e,waypoints:[[...y]],status:r.Tc.Destination_Missing};case u:return{...e,waypoints:[[...y]],status:r.Tc.Destination_Missing};case g:return 1===e.waypoints.length?{...e,waypoints:[...e.waypoints,[...y]],status:r.Tc.Ok}:{...e,waypoints:[[...y]],status:r.Tc.Start_Missing};case h:return{...e,waypoints:[[...y]],status:r.Tc.Start_Missing};case p:return{...e,proposal:y};case"routing/intermediateSet":return-1===e.waypoints.findIndex((e=>(0,i.aI)(e,y.payload)))?{...e,intermediate:y}:{...e};case m:return{...e,highlightedSegments:new i.MD({...y,segments:[...y.segments.map((e=>[...e]))]})};case _:return{...e,highlightedSegments:new i.MD};case s:return{...e,active:y}}return e}},45709:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmktc3RhciI+PHBhdGggZD0iTTIuODY2IDE0Ljg1Yy0uMDc4LjQ0NC4zNi43OTEuNzQ2LjU5M2w0LjM5LTIuMjU2IDQuMzg5IDIuMjU2Yy4zODYuMTk4LjgyNC0uMTQ5Ljc0Ni0uNTkybC0uODMtNC43MyAzLjUyMi0zLjM1NmMuMzMtLjMxNC4xNi0uODg4LS4yODItLjk1bC00Ljg5OC0uNjk2TDguNDY1Ljc5MmEuNTEzLjUxMyAwIDAgMC0uOTI3IDBMNS4zNTQgNS4xMmwtNC44OTguNjk2Yy0uNDQxLjA2Mi0uNjEyLjYzNi0uMjgzLjk1bDMuNTIzIDMuMzU2LS44MyA0Ljczem00LjkwNS0yLjc2Ny0zLjY4NiAxLjg5NC42OTQtMy45NTdhLjU2LjU2IDAgMCAwLS4xNjMtLjUwNUwxLjcxIDYuNzQ1bDQuMDUyLS41NzZhLjUzLjUzIDAgMCAwIC4zOTMtLjI4OEw4IDIuMjIzbDEuODQ3IDMuNjU4YS41My41MyAwIDAgMCAuMzkzLjI4OGw0LjA1Mi41NzUtMi45MDYgMi43N2EuNTYuNTYgMCAwIDAtLjE2My41MDZsLjY5NCAzLjk1Ny0zLjY4Ni0xLjg5NGEuNS41IDAgMCAwLS40NjEgMHoiLz48L3N2Zz4K"},45838:(e,t,n)=>{"use strict";n.d(t,{M:()=>l});var r=n(36752),i=n(18410),o=n(32907),a=n.n(o),s=n(24973),c=n(99990);class l extends c.T{constructor(){super();const{ConfigService:e}=i.z.inject("ConfigService");this._configService=e}isRenderingSkipped(){return!this._configService.getValue("SOFTWARE_INFO",!1)}createView(){const e=`v${this._configService.getValue("SOFTWARE_VERSION")} - ${this._configService.getValue("SOFTWARE_INFO")}`;return r.qy`
			<style>${a()}</style>
			<div class='container'><ba-button @click=${()=>{(0,s.qf)("Showcase",r.qy`<ba-showcase></ba-showcase>`)}} .size=${2} .label=${e} .type=${"secondary"}><ba-button></div>
		`}static get tag(){return"ba-dev-info"}}},47644:(e,t,n)=>{var r=n(38440);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},47963:(e,t,n)=>{var r=n(93863);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},47976:(e,t,n)=>{var r=n(31601),i=n(76314)(r);i.push([e.id,"/* \nbase from: https://codepen.io/avstorm/pen/vYYBxRM\n*/\n.ba-checkbox {\n\t-webkit-user-select: none;\n\tuser-select: none;\n\t-webkit-tap-highlight-color: transparent;\n\tcursor: pointer;\n\tdisplay: flex;\n}\n.ba-checkbox span {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\ttransform: translate3d(0, 0, 0);\n}\n.ba-checkbox span:first-child {\n\tposition: relative;\n\twidth: 1.5em;\n\theight: 1.5em;\n\tborder-radius: 50%;\n\ttransform: scale(1);\n\tvertical-align: middle;\n\tborder: 1px solid var(--text2);\n\ttransition: all 0.2s ease;\n\tmargin: auto 0;\n}\n.ba-checkbox.check span:first-child svg {\n\tposition: absolute;\n\tz-index: 1;\n\tfill: none;\n\tstroke: var(--text3);\n\tstroke-width: 2;\n\tstroke-linecap: round;\n\tstroke-linejoin: round;\n\tstroke-dasharray: 1.2em;\n\tstroke-dashoffset: 1.2em;\n\ttransition: all var(--animation-duration-small-open) var(--animation-easing-open);\n\ttransition-delay: 0.1s;\n\ttransform: translate3d(0, 0, 0);\n\ttop: 0;\n\tleft: 0;\n\tpadding: 0.3em;\n}\n.ba-checkbox.eye span:first-child svg {\n\tposition: absolute;\n\tz-index: 1;\n\tfill: none;\n\ttransition: all var(--animation-duration-small-open) var(--animation-easing-open);\n\ttransition-delay: 0.1s;\n\ttransform: translate3d(0, 0, 0);\n\ttop: 0;\n\tleft: 0;\n\tpadding: 0.2em;\n}\n\n.ba-checkbox span:first-child:before {\n\tcontent: '';\n\twidth: 100%;\n\tmin-width: 1.5em;\n\theight: 100%;\n\tbackground: var(--primary-color);\n\tdisplay: block;\n\ttransform: scale(0);\n\topacity: 1;\n\tborder-radius: 50%;\n\ttransition-delay: 0.2s;\n}\n.ba-checkbox span:last-child {\n\tmargin: auto 1em;\n}\n.ba-checkbox span:last-child:after {\n\tcontent: '';\n\tposition: absolute;\n\ttop: 0.5em;\n\tleft: 0;\n\theight: 1px;\n\twidth: 100%;\n\tbackground: var(--icon-default-color);\n\ttransform-origin: 0 0;\n\ttransform: scaleX(0);\n}\n.ba-checkbox:hover span:first-child {\n\tborder-color: var(--primary-color);\n}\n.input:checked + .ba-checkbox span:first-child {\n\tborder-color: var(--primary-color);\n\tbackground: color(from var(--primary-color) srgb r g b / 0.8);\n\tanimation: check 0.6s ease;\n}\n.input:disabled + .ba-checkbox span:first-child {\n\tborder-color: var(--secondary-bg-color);\n\tbackground: var(--secondary-bg-color);\n\tanimation: check 0.6s ease;\n}\n.input:checked + .ba-checkbox span:first-child svg {\n\tstroke-dashoffset: 0;\n}\n.input:disabled + .ba-checkbox span:first-child svg {\n\tstroke: var(--text2);\n}\n.input:checked + .ba-checkbox span:first-child:before {\n\ttransform: scale(2.2);\n\topacity: 0;\n\ttransition: all 0.6s ease;\n}\n.input:checked + .ba-checkbox.eye span:first-child svg path {\n\tfill: var(--text3);\n}\n.input:checked + .ba-checkbox.eye span:first-child svg path:first-child {\n\tfill: var(--primary-color);\n}\n@keyframes check {\n\t50% {\n\t\ttransform: scale(1.1);\n\t}\n}\n",""]),e.exports=i},48318:(e,t,n)=>{var r=n(31601),i=n(76314),o=n(4417),a=n(85114),s=i(r),c=o(a);s.push([e.id,`.ba-list {\n\tbackground-color: var(--tertiary-bg-color);\n}\n.ba-list:after {\n\tbackground-image: linear-gradient(180deg, var(--tertiary-bg-color) 20%, var(--primary-bg-color) 100%);\n\theight: 10em;\n\tcontent: '';\n\tposition: absolute;\n\tbottom: -10em;\n\tleft: -3em;\n\tright: -3em;\n\tmargin: 0.5em 1px 0;\n}\n.icon-share {\n\tbackground: var(--primary-bg-color);\n\tborder-radius: 2em;\n}\n\n.collapse-content {\n\tpadding: 0 1.2em;\n\toverflow-x: scroll;\n}\n\n.featureinfo-header {\n\tposition: sticky;\n\tz-index: calc(var(--z-header) + 92);\n\ttop: 0;\n\tbackground-color: var(--tertiary-bg-color);\n\tborder-bottom: 1px solid var(--header-background-color);\n}\n.featureinfo-header:hover {\n\tbackground-color: var(--tertiary-bg-color);\n}\n\n.info-container {\n\tmargin-bottom: -2em;\n}\n\n.info-icon {\n\theight: 13em;\n\twidth: 13em;\n\tbackground-size: contain;\n\tbackground-color: transparent;\n\tmargin: 3em auto 1em;\n\tbackground-image: url(${c});\n\tdisplay: flex;\n}\n.info-text {\n\tfont-size: 1.4em;\n\tmargin: 1em;\n\tdisplay: block;\n\tpadding: 1em;\n\ttext-align: center;\n}\n\nba-spinner {\n\tdisplay: block;\n\tpadding: 0.8em 1.2em;\n}\n\n/* not implemented yet  */\n.icon-rotate-90,\n.print,\n.share {\n\tdisplay: none;\n}\n\n/* GetFeat styl  */\n\ntable,\ntr,\ntd,\nth {\n\tborder: 0;\n\tbackground: transparent;\n\twidth: 100%;\n}\n\na {\n\tcolor: var(--text4);\n}\na:hover {\n\ttext-decoration: underline;\n}\n\ntable {\n\tmargin-bottom: 1em;\n\tposition: relative;\n\tborder-collapse: collapse;\n\tborder: 1px solid var(--header-background-color);\n}\n\ntable:not(:only-of-type):not(:last-child):after {\n\tcontent: ' ';\n\tposition: absolute;\n\tleft: -1em;\n\tright: -1em;\n\tbottom: -1.5em;\n\tborder-bottom: 1px dotted var(--header-background-color);\n}\n\ntr {\n\tpadding: 0 0 0.8em 0;\n\tborder: 1px solid var(--header-background-color);\n}\n\nth,\ntd {\n\tpadding: 0.8em 1em;\n\twidth: auto;\n}\n\n.is-portrait table,\n.is-portrait tr,\n.is-portrait th {\n\tdisplay: flex;\n\tflex-direction: column;\n}\n\ntd:nth-last-child(2):first-child {\n\topacity: 0.8;\n\tfont-size: 0.9rem;\n\tfont-weight: bold;\n\tcolor: var(--text1);\n\tmin-width: 11em;\n\tmax-width: 22em;\n\twidth: auto;\n\tvertical-align: top;\n\tpadding-top: 0.9em;\n}\n\n.collapse-content b {\n\tfont-size: 0.9rem;\n\topacity: 0.8;\n}\n\ncaption {\n\ttext-align: left;\n\tpadding: 0.8em 1em;\n}\n\n.table-striped > tbody > tr:nth-of-type(odd) {\n\tbackground: var(--header-background-color);\n}\n\nimg {\n\twidth: 100%;\n\tmax-width: 25em;\n\theight: auto;\n}\n\n.ba-list-item__header {\n\tcursor: default;\n}\n.ba-section:hover .ba-list-item__header .ba-list-item__text {\n\tcolor: var(--primary-color) 0.3;\n}\n.ba-section:hover .ba-list-item__header {\n\tcolor: var(--secondary-color);\n}\n.ba-list-item__header.is-geometry:hover {\n\tcolor: var(--highlight-map-color);\n}\n\n.content {\n\tmargin: 0 0 1em 0;\n}\n\n.chips__container {\n\tdisplay: flex;\n\tjustify-content: flex-start;\n\tflex-flow: wrap;\n\tgap: 0.5em 0.8em;\n\tpadding: 1em 0;\n\tborder-bottom: 1px solid var(--header-background-color);\n}\n\np,\nh1,\nh2,\nh3,\nh4,\nh5 {\n\tmargin: 1em 0;\n}\n\n.button {\n\tcursor: pointer;\n\tpadding: 0.8em 1em;\n\tbackground: transparent;\n\tbackground-color: transparent;\n\tborder: none;\n\tfont-weight: bold;\n\ttransition: all var(--animation-duration-medium-open) var(--animation-easing-linear);\n\tdisplay: inline-block;\n}\n.primary {\n\tbackground-color: var(--primary-color);\n\tcolor: var(--text3);\n\topacity: 0.8;\n}\n.secondary {\n\tbackground-color: var(--primary-bg-color);\n\tcolor: var(--primary-color);\n}\n.primary.button:focus-visible {\n\topacity: 1;\n}\n.secondary.button:focus-visible {\n\tbackground: var(--primary-color);\n\tcolor: var(--text3);\n}\n.secondary.button:focus-visible,\n.primary.button:focus-visible,\n.loading.button:focus-visible {\n\tbox-shadow: 0 0 0 0.2em var(--primary-color-lighter);\n}\n.primary:hover {\n\topacity: 1;\n\ttext-decoration: none;\n}\n.secondary:hover {\n\tbackground: var(--primary-color);\n\tcolor: var(--text3);\n\ttext-decoration: none;\n}\n\n/*Fixme: remove temporary workaround for OpenData*/\na[href^="https://geodaten.bayern.de/odd/"]\n{\n\tcursor: pointer;\n\tpadding: 0.8em 1em;\n\tbackground: transparent;\n\tborder: none;\n\tfont-weight: bold;\n\ttransition: all var(--animation-duration-medium-open) var(--animation-easing-linear);\n\tbackground-color: var(--primary-color);\n\tcolor: var(--text3);\n\topacity: 0.8;\n\tdisplay: block;\n\ttext-align: center;\n}\na[href^="https://geodaten.bayern.de/odd/"]:hover\n{\n\topacity: 1;\n\ttext-decoration: none;\n}\n\n.prop-header {\n\tmargin-top: 0.5em;\n}\n.prop-header .ba-list-item__text.ba-list-item__primary-text {\n\tcolor: var(--text2);\n\tpadding: 0.5em 0;\n}\n.prop-header .ba-list-item__after {\n\tpadding: 0.5em 0.4em 0 0.5em;\n}\n.chevron {\n\ttransform: rotate(270deg);\n}\n.prop-header .chevron {\n\tdisplay: block;\n}\n.propshide .chevron {\n\ttransform: rotate(90deg);\n}\n.propshide + table {\n\tdisplay: none;\n}\n`,""]),e.exports=s},48471:(e,t,n)=>{"use strict";n.d(t,{Q9:()=>o,sy:()=>r});const r="tools/toolId",i={current:null},o=(e=i,t)=>{const{type:n,payload:o}=t;return n===r?{...e,current:o}:e}},49105:(e,t,n)=>{"use strict";n.d(t,{Au:()=>d,BE:()=>v,Em:()=>a,HD:()=>l,LN:()=>o,WD:()=>p,Wn:()=>u,Y2:()=>i,kR:()=>r,ly:()=>g,o1:()=>s,tD:()=>h,zN:()=>c,zR:()=>m});const r="draw/active",i="draw/statistic",o="draw/mode",a="draw/type",s="draw/geometryIsValid",c="draw/style",l="draw/selectedStyle",d="draw/description",u="draw/selection",g="draw/finish",h="draw/reset",p="draw/remove",m={symbolSrc:null,scale:null,color:null,text:null},_={active:!1,statistic:{length:null,area:null},createPermanentLayer:!0,mode:null,type:null,validGeometry:!1,style:m,selectedStyle:null,description:null,selection:[],finish:null,reset:null,remove:null},v=(e=_,t)=>{const{type:n,payload:m}=t;switch(n){case r:{const{active:t,createPermanentLayer:n}=m;return{...e,active:t,createPermanentLayer:n}}case i:return{...e,statistic:m};case o:return{...e,mode:m};case a:return{...e,type:m};case s:return{...e,validGeometry:m};case c:return{...e,style:m};case l:return{...e,selectedStyle:m};case d:return{...e,description:m};case"draw/clearDescription":return{...e,description:null};case"draw/clearText":return{...e,style:{...e.style,text:null},selectedStyle:e.selectedStyle?{...e.selectedStyle,style:{...e.selectedStyle.style,text:null}}:null};case u:return{...e,selection:[...m]};case g:return{...e,finish:m};case h:return{...e,reset:m};case p:return{...e,remove:m}}return e}},49208:(e,t,n)=>{var r=n(78612);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},50567:(e,t,n)=>{"use strict";n.d(t,{Z_:()=>s,jA:()=>a});var r=n(1473),i=n(18410);const o=()=>{const{StoreService:e}=i.z.inject("StoreService");return e.getStore()},a=(e,t)=>{o().dispatch({type:r.aN,payload:{coordinate:e,content:t}})},s=()=>{o().dispatch({type:r.aN,payload:{coordinate:null,content:null}})}},50764:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmkteC1sZyI+PCEtLU1JVCBMaWNlbnNlLS0+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTMuODU0IDIuMTQ2YS41LjUgMCAwIDEgMCAuNzA4bC0xMSAxMWEuNS41IDAgMCAxLS43MDgtLjcwOGwxMS0xMWEuNS41IDAgMCAxIC43MDggMCIvPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTIuMTQ2IDIuMTQ2YS41LjUgMCAwIDAgMCAuNzA4bDExIDExYS41LjUgMCAwIDAgLjcwOC0uNzA4bC0xMS0xMWEuNS41IDAgMCAwLS43MDggMCIvPjwvc3ZnPgo="},51207:(e,t,n)=>{"use strict";n.d(t,{Ve:()=>c,a9:()=>l,aI:()=>a,hM:()=>d,l6:()=>s});var r=n(18410),i=n(28353),o=n(94447);const a=(e,t=0)=>{const{GeoResourceService:n}=r.z.inject("GeoResourceService");if(e.getType()===o.Fl.AGGREGATE)return[...new Set(e.geoResourceIds.map((e=>{const r=n.byId(e);return r?r.getAttribution(t):null})).filter((e=>!!e)).flatMap((e=>e)))];const i=e.attribution;if(!i||t<0)return null;if(Array.isArray(i)){const e=Math.round(t);return e>i.length-1?i[i.length-1]:i[e]}return i},s=e=>e.attribution?(0,i.Kg)(e.attribution)?u(e.attribution):e.attribution:u(""),c=e=>{const{TranslationService:t}=r.z.inject("TranslationService");return{description:e.label,copyright:{label:t.translate("global_locally_imported_dataset_copyright_label")}}},l=e=>({description:e.label,copyright:[{label:"Bayerische Vermessungsverwaltung"},{label:"Powered by Graphhopper",url:"https://www.graphhopper.com/"}]}),d=e=>t=>({description:t.label,copyright:(e=>{const t=new URL(e);return{label:t.hostname,url:`${t.protocol}//${t.hostname}`}})(e)}),u=e=>({copyright:{label:e}})},51456:(e,t,n)=>{"use strict";n.d(t,{LL:()=>o,UW:()=>s,fP:()=>a,n5:()=>c});var r=n(28353);const i="_ba_",o=e=>(0,r.Kg)(e)?a(e)?e:`${i}${e}`:null,a=e=>!!(0,r.Kg)(e)&&e.startsWith(i),s=Object.freeze(["style","styleHint","showPointNames","finishOnFirstPoint","displayruler","measurement","measurement_position_x","measurement_position_y","area","area_position_x","area_position_y","partitions","partition_delta","overlays","manualPositioning","dragging","draggable","geodesic","measurement_style_listeners","projectedLength"]),c=Object.freeze(["geometry","styleUrl"])},51863:(e,t,n)=>{var r=n(54739);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},52411:(e,t,n)=>{"use strict";n.d(t,{VN:()=>c,fh:()=>d,ho:()=>s,sI:()=>l});var r=n(9525),i=n(18410),o=n(47518);const a=()=>{const{StoreService:e}=i.z.inject("StoreService");return e.getStore()},s=()=>{a().dispatch({type:r.Hp,payload:!0})},c=()=>{a().dispatch({type:r.Hp,payload:!1})},l=e=>{a().dispatch({type:r.l3,payload:e})},d=()=>{a().dispatch({type:r.hf,payload:new o.MD})}},52608:(e,t,n)=>{"use strict";n.d(t,{X:()=>m});var r=n(36752),i=n(14707),o=n.n(i),a=n(99990),s=n(72145),c=n(50764),l=n(6683);const d="update",u="update_id",g="update_main_menu",h="update_media",p="update_isOpen_NavigationRail";class m extends a.T{constructor(){super({id:null,content:null,isOpen:!1,isOpenNavigationRail:!1,isPortrait:!1}),this.observe((e=>e.mainMenu),(e=>this.signal(g,e)),!0),this.observe((e=>e.media),(e=>this.signal(h,e)),!0),this.observe((e=>e.navigationRail),(e=>this.signal(p,{isOpenNavigationRail:e.open})))}update(e,t,n){switch(e){case g:return{...n,isOpen:t.open};case d:return{...n,content:t};case u:return{...n,id:t};case h:return{...n,isPortrait:t.portrait};case p:return{...n,...t}}}createView(e){const{id:t,content:n,isOpen:i,isOpenNavigationRail:a,isPortrait:d}=e,u={"is-open":i&&!d,"is-open-navigationRail":a&&!d,"is-portrait":d,"is-landscape":!d};return n?r.qy` <style>
						${o()}
					</style>
					<div class="bottom-sheet ${(0,l.H)(u)}" data-test-id>
						${n}
						<ba-icon
							id="close-icon"
							class="tool-container__close-button"
							.icon="${c}"
							.size=${1.6}
							.color=${"var(--text2)"}
							.color_hover=${"var(--text2)"}
							@click=${()=>{const e=this.shadowRoot.querySelector(".bottom-sheet");e.classList.add("fade-out"),e.addEventListener("animationend",(()=>{(0,s.D)(t),e.classList.remove("fade-out")}))}}
						></ba-icon>
					</div>`:r.s6}static get tag(){return"ba-bottom-sheet"}set content(e){this.signal(d,e)}set id(e){this.signal(u,e)}}},52957:(e,t,n)=>{"use strict";n.d(t,{Kk:()=>u,LU:()=>s,Wh:()=>l,Yf:()=>a,c_:()=>d,uc:()=>c});var r=n(83739),i=n(18410);const o=()=>{const{StoreService:e}=i.z.inject("StoreService");return e.getStore()},a=()=>{o().dispatch({type:r.kR,payload:!0})},s=()=>{o().dispatch({type:r.kR,payload:!1})},c=e=>{o().dispatch({type:r.nz,payload:e})},l=e=>{o().dispatch({type:r.rg,payload:e})},d=e=>{o().dispatch({type:r.NH,payload:e})},u=e=>{o().dispatch({type:r.Zg,payload:e})}},53290:(e,t,n)=>{var r=n(31601),i=n(76314)(r);i.push([e.id,'.ba-list-item {\n\tdisplay: flex;\n\ttext-decoration: none;\n\toverflow-wrap: break-word;\n\tbackground: transparent;\n\tborder: 0;\n\twidth: 100%;\n\ttext-align: left;\n}\n.ba-list-item:focus-visible {\n\tbox-shadow: Inset 0 0 0 0.2em var(--primary-color-lighter);\n}\n.ba-list-item:hover {\n\tbackground: var(--header-background-color);\n}\n.ba-list-item span {\n\toverflow-wrap: break-word;\n}\n.ba-list-item > * {\n\tpadding-top: 0.8em;\n\tpadding-bottom: 0.8em;\n}\n.ba-list-item > *:first-child {\n\tpadding-left: 1.5em;\n}\n.ba-list-item > *:last-child {\n\tpadding-right: 1.5em;\n}\n.ba-list-item__pre {\n\tdisplay: flex;\n\tmargin: 0 1em 0 0;\n}\n.ba-list-item__after {\n\tdisplay: flex;\n\tpadding-left: 1.5em;\n\tposition: relative;\n\tbackground: transparent;\n\tborder: 0;\n}\n.ba-list-item__image {\n\theight: 4em;\n\twidth: 8em;\n\tmin-width: 8em;\n\tbackground: var(--secondary-bg-color);\n\tbackground-position: center;\n\tbackground-repeat: no-repeat;\n\tbackground-size: cover;\n}\n.ba-list-item__icon {\n\theight: 3em;\n\twidth: 3em;\n\tborder-radius: 2em;\n\tbackground: var(--secondary-bg-color);\n\tbackground-position: center;\n\tbackground-repeat: no-repeat;\n\tbackground-size: cover;\n}\n.ba-list-item__text {\n\tflex-grow: 1;\n}\n.ba-list-item__main-text {\n\tfont-size: 1.7rem;\n}\n.ba-list-item__primary-text {\n\tdisplay: block;\n\tfont-size: 1rem;\n\tfont-weight: bold;\n}\n.ba-list-item__secondary-text {\n\tfont-size: 0.95rem;\n\tcolor: var(--text2);\n}\n.ba-list-item__sub-header {\n\topacity: 0.8;\n\tmargin-left: 1.5em;\n}\n.ba-list-item__sub-header .ba-list-item__text {\n\tpadding-left: 0;\n\tfont-size: 0.9rem;\n}\n.ba-list-item__sub-header:hover {\n\tbackground: none;\n}\n.ba-section {\n\tborder-left: 0.3em solid var(--primary-bg-color);\n}\n.ba-section .ba-list-item > *:first-child {\n\tpadding-left: 1.2em;\n}\n.ba-section:hover {\n\tborder-left: 0.3em solid var(--secondary-color);\n}\n.ba-list-item__header {\n\tcursor: default;\n}\n.ba-section:hover .ba-list-item__header .ba-list-item__text {\n\tcolor: var(--primary-color) 0.3;\n}\n.ba-section:hover .ba-list-item__header {\n\tcolor: var(--secondary-color);\n}\n.ba-list-item__header.is-geometry:hover {\n\tcolor: var(--highlight-map-color);\n}\n.divider {\n\tborder-bottom: 1px solid var(--header-background-color);\n}\n.vertical-center {\n\tmargin: auto;\n}\n.ba-list {\n\tbackground-color: var(--tertiary-bg-color);\n\tbox-shadow: 0px 0px 4px rgba(0, 0, 0, 0.5);\n}\n.collapse-content {\n\tpadding: 0 1.2em 1em;\n\toverflow-x: scroll;\n}\n.featureinfo-header {\n\tposition: sticky;\n\tz-index: calc(var(--z-header) + 92);\n\ttop: 0;\n\tbackground-color: var(--tertiary-bg-color);\n\tborder-bottom: 1px solid var(--header-background-color);\n}\n.featureinfo-header:hover {\n\tbackground-color: var(--tertiary-bg-color);\n}\ntable,\ntr,\ntd,\nth {\n\tborder: 0;\n\tbackground: transparent;\n\twidth: 100%;\n}\n\na {\n\tcolor: var(--text4);\n}\na:hover {\n\ttext-decoration: underline;\n}\n\ntable {\n\tmargin-bottom: 1em;\n\tposition: relative;\n\tborder-collapse: collapse;\n\tborder: 1px solid var(--header-background-color);\n}\ntable:not(:only-of-type):not(:last-child):after {\n\tcontent: \' \';\n\tposition: absolute;\n\tleft: -1em;\n\tright: -1em;\n\tbottom: -1.5em;\n\tborder-bottom: 1px dotted var(--header-background-color);\n}\ntr {\n\tpadding: 0 0 0.8em 0;\n\tborder: 1px solid var(--header-background-color);\n}\nth,\ntd {\n\tpadding: 0.8em 1em;\n\twidth: auto;\n}\ntd:nth-last-child(2):first-child {\n\topacity: 0.8;\n\tfont-size: 0.9rem;\n\tfont-weight: bold;\n\tcolor: var(--text1);\n\tmin-width: 11em;\n\tmax-width: 22em;\n\twidth: auto;\n\tvertical-align: top;\n\tpadding-top: 0.9em;\n}\n.collapse-content b {\n\tfont-size: 0.9rem;\n\topacity: 0.8;\n}\ncaption {\n\ttext-align: left;\n\tpadding: 0.8em 1em;\n}\n.table-striped > tbody > tr:nth-of-type(odd) {\n\tbackground: var(--header-background-color);\n}\nimg {\n\twidth: 100%;\n\tmax-width: 25em;\n\theight: auto;\n}\n\np,\nh1,\nh2,\nh3,\nh4,\nh5 {\n\tmargin: 1em 0;\n}\n\n.button {\n\tcursor: pointer;\n\tpadding: 0.8em 1em;\n\tbackground: transparent;\n\tbackground-color: transparent;\n\tborder: none;\n\tfont-weight: bold;\n\ttransition: all var(--animation-duration-medium-open) var(--animation-easing-linear);\n\tdisplay: inline-block;\n}\n.primary {\n\tbackground-color: var(--primary-color);\n\tcolor: var(--text3);\n\topacity: 0.8;\n}\n.secondary {\n\tbackground-color: var(--primary-bg-color);\n\tcolor: var(--primary-color);\n}\n.primary.button:focus-visible {\n\topacity: 1;\n}\n.secondary.button:focus-visible {\n\tbackground: var(--primary-color);\n\tcolor: var(--text3);\n}\n.secondary.button:focus-visible,\n.primary.button:focus-visible,\n.loading.button:focus-visible {\n\tbox-shadow: 0 0 0 0.2em var(--primary-color-lighter);\n}\n.primary:hover {\n\topacity: 1;\n\ttext-decoration: none;\n}\n.secondary:hover {\n\tbackground: var(--primary-color);\n\tcolor: var(--text3);\n\ttext-decoration: none;\n}\n\n/*Fixme: remove temporary workaround for OpenData*/\na[href^="https://geodaten.bayern.de/odd/"]\n{\n\tcursor: pointer;\n\tpadding: 0.8em 1em;\n\tbackground: transparent;\n\tborder: none;\n\tfont-weight: bold;\n\ttransition: all var(--animation-duration-medium-open) var(--animation-easing-linear);\n\tbackground-color: var(--primary-color);\n\tcolor: var(--text3);\n\topacity: 0.8;\n\tdisplay: block;\n\ttext-align: center;\n}\na[href^="https://geodaten.bayern.de/odd/"]:hover\n{\n\topacity: 1;\n\ttext-decoration: none;\n}\n',""]),e.exports=i},53648:(e,t,n)=>{var r=n(31601),i=n(76314)(r);i.push([e.id,".map-buttons-container {\n\tposition: fixed;\n\tz-index: var(--z-mapbuttons);\n\tbottom: 5.7em;\n\tright: 0.4em;\n\tmargin: 0 1.25em;\n\tdisplay: flex;\n\tflex-direction: column;\n}\n.map-buttons-container > * {\n\tmargin: 0.2em 0;\n}\n.is-portrait ba-zoom-buttons,\n.is-portrait ba-extent-button,\n.is-portrait ba-three-dimension-button {\n\tdisplay: none;\n}\n.is-portrait > * {\n\ttransform: scale(1.5);\n\tmargin: 0 0 1.4em 0;\n}\n.map-buttons-container.is-portrait {\n\tbottom: 10.2em;\n}\n.is-portrait ba-rotation-button {\n\tmargin-bottom: 2.2em;\n}\n.is-embedded > * {\n\ttransform: scale(1);\n\tmargin: 0.3em !important;\n\tfont-size: 1.1rem;\n}\n.is-embedded.map-buttons-container {\n\tbottom: 1.5em;\n\tright: -0.5em;\n}\n.is-embedded ba-zoom-buttons {\n\tdisplay: block;\n}\n.is-embedded ba-geolocation-button,\n.is-embedded ba-extent-button,\n.is-embedded ba-three-dimension-button {\n\tdisplay: none;\n}\n",""]),e.exports=i},54739:(e,t,n)=>{var r=n(31601),i=n(76314)(r);i.push([e.id,".menuitem {\n\twidth: 100%;\n\tpadding: 0.5em 0.8em;\n\tcursor: pointer;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: flex-start;\n\tborder: none;\n\tbackground-color: var(--tertiary-bg-color);\n\tpointer-events: auto;\n}\n\n.touch {\n\tbackground-color: var(--primary-bg-color);\n}\n\n.menuitem:hover {\n\tbackground-color: var(--header-background-color);\n}\n\n.menuitem:disabled,\n.menuitem[disabled] {\n\tbackground-color: var(--tertiary-bg-color);\n\tcolor: var(--text1);\n\topacity: 0.38;\n\tcursor: default;\n}\n\n.menuitem__icon {\n\theight: 2em;\n\twidth: 2em;\n\tbackground-color: var(--primary-color);\n}\n\n.menuitem__text {\n\tpadding-left: 1em;\n\twhite-space: nowrap;\n}\n",""]),e.exports=i},55171:(e,t,n)=>{"use strict";n.d(t,{C9:()=>i,R6:()=>c,Z2:()=>s,dg:()=>o,fU:()=>a,kR:()=>r,uR:()=>d});const r="mfp/active",i="mfp/current/scale",o="mfp/current",a="mfp/gridSupported",s="mfp/exportSupported",c="mfp/job/spec",l={active:!1,current:{id:null,scale:null,dpi:null},showGrid:!1,gridSupported:!0,exportSupported:!0,jobRequest:null,jobSpec:null},d=(e=l,t)=>{const{type:n,payload:d}=t;switch(n){case r:return{...e,active:d};case i:{const{current:t}=e;return{...e,current:{...t,scale:d}}}case"mfp/current/id":{const{current:t}=e;return{...e,current:{...t,id:d}}}case o:return{...e,current:d};case"mfp/showGrid":return{...e,showGrid:d};case a:return{...e,gridSupported:d};case s:return{...e,exportSupported:d};case"mfp/job/request":return{...e,jobRequest:d};case c:return{...e,jobSpec:d}}return e}},55286:(e,t,n)=>{"use strict";n.d(t,{I:()=>r,d:()=>i});const r=Object.freeze({WGS84:{id:"cr_global_wgs84",label:"global_cr_global_wgs84",code:4326,digits:5,global:!0,group:"wgs84"},UTM:{id:"cr_global_utm",label:"UTM",code:null,digits:0,global:!0,group:"utm"},MGRS:{id:"cr_global_mgrs",label:"MGRS",code:null,digits:0,global:!0,group:"mgrs"},SphericalMercator:{id:"cr_global_3857",label:"3857",code:3857,digits:6,global:!0,group:"sm"}}),i=Object.freeze({UTM32:{id:"cr_local_utm32",label:"UTM32",code:25832,digits:0,global:!1,group:"utm"},UTM33:{id:"cr_local_utm33",label:"UTM33",code:25833,digits:0,global:!1,group:"utm"},GK4:{id:"cr_local_gk4",label:"GK4",code:31468,digits:0,global:!1,group:"gk4"}})},55343:(e,t,n)=>{var r=n(31601),i=n(76314)(r);i.push([e.id,".preload * {\n\t-webkit-transition: none !important;\n\t-moz-transition: none !important;\n\t-ms-transition: none !important;\n\t-o-transition: none !important;\n}\n.footer {\n\tposition: fixed;\n\tdisplay: flex;\n\talign-items: flex-end;\n\tz-index: var(--z-footer);\n\tbottom: 0.7em;\n\tleft: 1em;\n\ttransition: transform var(--animation-duration-large-open) var(--animation-easing-linear);\n}\n.content {\n\tdisplay: flex;\n\tfont-size: 0.8rem;\n\tbackground-color: color(from var(--primary-bg-color) srgb r g b / 0.9);\n}\n.is-open .footer {\n\ttransform: translate(28em, 0);\n}\n.is-portrait .footer,\n.is-tablet .footer,\n.is-embedded .footer {\n\tbottom: 0;\n\tleft: 0;\n}\n.is-embedded .footer {\n\tz-index: calc(var(--z-mapbuttons) + 1);\n}\n.is-landscape.is-open-navigationRail .footer {\n\ttransform: translate(5em, 0);\n}\n.is-open.is-open-navigationRail .footer {\n\ttransform: translate(33em, 0);\n}\n.is-portrait:not(.is-embedded) .content,\n.is-tablet:not(.is-embedded) .content {\n\tdisplay: none;\n}\n.is-embedded .content ba-map-info {\n\tdisplay: none;\n}\n.is-desktop:not(.is-embedded) .content ba-privacy-policy {\n\tdisplay: none;\n}\n.scale {\n\tposition: absolute;\n\ttop: -2em;\n\tbackground: var(--secondary-color);\n\tfont-size: 0.7rem;\n}\n.is-portrait .scale,\n.is-tablet .scale,\n.is-embedded .scale {\n\tposition: absolute;\n\ttop: -2.2em;\n\tleft: 1.1em;\n}\n.ol-scale-line-inner {\n\tpadding: 0.2em 0.5em;\n\tcolor: var(--text3);\n\tfont-weight: bold;\n}\nba-base-layer-container {\n\twidth: 20em;\n\theight: 3.1em;\n\tdisplay: block;\n\toverflow: hidden;\n\ttransition: all var(--animation-duration-medium-open) var(--animation-easing-linear);\n}\n/* enables scrollIntoView */\n.is-open ba-base-layer-container {\n\theight: 1px;\n\tvisibility: hidden;\n}\nba-base-layer-container::part(section),\nba-base-layer-container::part(container) {\n\toverflow: hidden;\n}\nba-base-layer-container::part(title) {\n\tdisplay: none;\n}\nba-base-layer-container::part(base-layer-switcher-button) {\n\tfont-size: 0.55rem;\n}\nba-base-layer-container::part(base-layer-switcher-label) {\n\tcolor: transparent;\n\theight: 0;\n}\nba-base-layer-container::part(base-layer-switcher-container) {\n\tbackground: transparent;\n\tpadding: 0 0 0.5em 0;\n\toverflow: clip;\n}\nba-base-layer-container::part(scroll-button) {\n\tdisplay: none;\n}\n",""]),e.exports=i},55449:(e,t,n)=>{"use strict";n.d(t,{Js:()=>s,db:()=>a,gI:()=>c});var r=n(9559),i=n(18410);const o=()=>{const{StoreService:e}=i.z.inject("StoreService");return e.getStore()},a=e=>{const t=Array.isArray(e)?[...e]:[e];o().dispatch({type:r.R_,payload:t})},s=()=>{o().dispatch({type:r.Yz})},c=e=>{const t=Array.isArray(e)?[...e]:[e];o().dispatch({type:r.um,payload:t})}},55921:(e,t,n)=>{var r=n(31601),i=n(76314)(r);i.push([e.id,".ba-overlay,\n.help,\n.static,\n.floating {\n\tcursor: default;\n\t-webkit-user-select: none;\n\t-ms-user-select: none;\n\tuser-select: none;\n\tbackground-color: var(--primary-bg-color);\n\tborder-radius: 0;\n\tcolor: var(--text1);\n\tpadding: 0.3em 0.5em;\n\tfont-size: 1rem;\n}\n\n.help {\n\tborder: 1px solid var(--text2);\n}\n\n.distance,\n.area,\n.partition {\n\tcursor: default;\n\t-webkit-user-select: none;\n\t-ms-user-select: none;\n\tuser-select: none;\n\tbackground-color: rgba(140, 140, 140, 0.9);\n\tborder-radius: 0.25em;\n\tcolor: var(--text3);\n\tpadding: 0.125em 0.5em;\n\tfont-size: 0.75rem;\n}\n\n.ba-overlay:after,\n.static:after,\n.floating:after {\n\tposition: absolute;\n\tleft: 50%;\n\tbottom: -0.375em;\n\tmargin-left: -0.25em;\n\tcontent: '';\n\tborder-top: 6px solid rgba(140, 140, 140, 0.9);\n}\n\n.static,\n.distance,\n.area {\n\tbackground-color: rgba(255, 0, 0, 0.9);\n\t/* cursor: move; */\n}\n\n.partition {\n\tbackground: color(from var(--primary-bg-color) srgb r g b / 0.9);\n\tcolor: var(--text1);\n\tpadding: 0.1em 0.2em;\n\tborder-radius: 0;\n}\n\n.draggable {\n\tcursor: move;\n}\n",""]),e.exports=i},55973:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmktaW5mby1sZyI+PHBhdGggZD0ibTEwLjI3NyA1LjQzMy00LjAzMS41MDUtLjE0NS42Ny43OTQuMTQ1Yy41MTYuMTIzLjYxOS4zMDkuNTA1LjgyNEw2LjEwMSAxMy42OGMtLjM0IDEuNTc4LjE4NiAyLjMyIDEuNDIzIDIuMzIuOTU5IDAgMi4wNzItLjQ0MyAyLjU3Ny0xLjA1MmwuMTU1LS43MzJjLS4zNS4zMS0uODY2LjQzNC0xLjIwNi40MzQtLjQ4NSAwLS42Ni0uMzQtLjUzNi0uOTM5em0uMTIyLTMuNjczYTEuNzYgMS43NiAwIDEgMS0zLjUyIDAgMS43NiAxLjc2IDAgMCAxIDMuNTIgMCIvPjwvc3ZnPgo="},56729:(e,t,n)=>{"use strict";n.d(t,{N_:()=>s,kf:()=>c,lX:()=>a,r3:()=>l});var r=n(1175),i=n(18410);const o=()=>{const{StoreService:e}=i.z.inject("StoreService");return e.getStore()},a=e=>{const t=Array.isArray(e)?[...e]:[e];o().dispatch({type:r.R_,payload:t})},s=()=>{o().dispatch({type:r.Yz})},c=e=>{const t=Array.isArray(e)?[...e]:[e];o().dispatch({type:r.um,payload:t})},l=e=>{const t=Array.isArray(e)?[...e]:[e];o().dispatch({type:r.pK,payload:t})}},56741:(e,t,n)=>{"use strict";n.d(t,{LU:()=>c,Yf:()=>s,_1:()=>h,b8:()=>u,hF:()=>l,iY:()=>d,mh:()=>p,tM:()=>g});var r=n(18410),i=n(47518),o=n(55171);const a=()=>{const{StoreService:e}=r.z.inject("StoreService");return e.getStore()},s=()=>{a().dispatch({type:o.kR,payload:!0})},c=()=>{a().dispatch({type:o.kR,payload:!1})},l=e=>{a().dispatch({type:o.C9,payload:e})},d=e=>{a().dispatch({type:o.dg,payload:e})},u=e=>{a().dispatch({type:o.fU,payload:e})},g=e=>{a().dispatch({type:o.Z2,payload:e})},h=e=>{a().dispatch({type:o.R6,payload:new i.MD(e)})},p=()=>{a().dispatch({type:o.R6,payload:new i.MD(null)})}},56851:(e,t,n)=>{"use strict";n.d(t,{J5:()=>s,LU:()=>r,Xd:()=>o,i8:()=>i});const r="pointer/beingMoved",i="pointer/moveStart",o="pointer/moveEnd",a={moveStart:null,moveEnd:null,beingMoved:!1},s=(e=a,t)=>{const{type:n,payload:s}=t;switch(n){case r:return{...e,beingMoved:s};case i:return{...e,moveStart:s};case o:return{...e,moveEnd:s}}return e}},57114:(e,t,n)=>{"use strict";n.d(t,{SU:()=>c,Y5:()=>o,eG:()=>d,nf:()=>s,rG:()=>l,wX:()=>a});var r=n(35598),i=n(51456);const o=(e,t)=>(e.setVisible(t.visible),e.setOpacity(t.opacity),e.set("timestamp",t.timestamp),e.set("filter",t.constraints.filter),e.set("updateInterval",t.constraints.updateInterval),e.set("style",t.style),e),a=(e,t,n)=>{const r=t.activate(n);return r&&r.set("id",e),r},s=(e,t,n=()=>{},r=300)=>{let i;const o=()=>{window.clearTimeout(i),i=null};e.on("pointerdown",(e=>{i&&o(),i=window.setTimeout((()=>{i=null,t(e)}),r)})),e.on("pointerup",(e=>{i&&n(e),o()})),e.on("pointermove",(e=>{e.dragging&&o()}))},c=(e,t)=>e&&t?e.getLayers().getArray().find((e=>e.get("id")===t))??null:null,l=(e,t)=>e&&t?e.getLayers().getArray().filter((e=>e instanceof r.A)).filter((e=>e.getLayers().getArray().flat().find((e=>e===t))))[0]??null:null,d=(e,t)=>e?i.UW.includes(t)?e.get((0,i.LL)(t))??e.get(t):e.get((0,i.LL)(t)):null},58349:(e,t,n)=>{var r=n(22209);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},59540:(e,t,n)=>{var r=n(1616);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},59834:(e,t,n)=>{"use strict";n.d(t,{g:()=>r});const r=Object.freeze({EMBED:"embed.html"})},59844:(e,t,n)=>{var r=n(40472);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},60025:(e,t,n)=>{var r=n(31601),i=n(76314)(r);i.push([e.id,"#ol-map {\n\twidth: 100%;\n\theight: 100%;\n\tposition: fixed;\n\tbackground: var(--secondary-bg-color);\n}\n\n#ol-map.is-embedded:focus-within .ol-overlaycontainer-stopevent {\n\tbox-shadow: inset 0 0 0 0.2em var(--primary-color-lighter);\n}\n\n#ol-map.is-embedded:focus-visible .ol-overlaycontainer-stopevent {\n\tbox-shadow:\n\t\tinset 0 0 0 0.2em var(--primary-color-lighter),\n\t\tinset 0 0 0 0.4em var(--secondary-color);\n}\n\n.grab {\n\tcursor: grab;\n}\n\n.dragging,\n.grabbing {\n\tcursor: grabbing;\n}\n\n.ol-dragzoom {\n\tborder: 2px solid var(--split-one-color);\n\tbackground-color: color(from var(--primary-color) srgb r g b / 0.2);\n}\n",""]),e.exports=i},60034:(e,t,n)=>{"use strict";n.d(t,{p:()=>c,N:()=>s});var r=n(18410),i=n(44668),o=n(94447);const a=async e=>{const{HttpService:t,ConfigService:n,GeoResourceService:a,BaaCredentialService:s}=r.z.inject("HttpService","ConfigService","GeoResourceService","BaaCredentialService"),l=t=>{throw new Error(`GeoResourceInfoResult for '${e}' could not be loaded: ${t}`)},d=a.byId(e);if(d.isExternal()&&!(d instanceof o.He))return null;const u=d.isExternal()?async r=>{const c=`${n.getValueAsPath("BACKEND_URL")}georesource/info/external/wms`;return t.post(c,(e=>{const t={url:e.url,layers:[...e.layers.split(",")]},n=e.authenticationType===o.Mg.BAA?(t=>{const n=s.get(e.url);return n||l("No credential available"),{...t,...n}})(t):t;return JSON.stringify(n)})(r),i.z.JSON,{response:r.authenticationType===o.Mg.BAA?[]:[a.getAuthResponseInterceptorForGeoResource(e)]})}:async e=>{const r=`${n.getValueAsPath("BACKEND_URL")}georesource/info/${e.id}`;return t.get(r)},g=await u(d);switch(g.status){case 200:{const e=await g.text();return new c(e)}case 204:return null}l(`Http-Status ${g.status}`)};class s{constructor(e=[a]){this._providers=e,this._geoResourceInfoResults=new Map;const{EnvironmentService:t}=r.z.inject("EnvironmentService");this._environmentService=t}async byId(e){if(this._environmentService.isStandalone())return console.warn("GeoResourceInfo could not be fetched from backend. Using a fallback GeoResourceInfo."),this._newFallbackGeoResourceInfo(e);if(!this._geoResourceInfoResults.get(e))try{for(const t of this._providers){const n=await t(e);if(n)return this._geoResourceInfoResults.set(e,n),n}}catch(e){throw new Error("Could not load a GeoResourceInfoResult from provider",{cause:e})}return this._geoResourceInfoResults.get(e)??null}_newFallbackGeoResourceInfo(e){return new c(`This is a fallback GeoResourceInfoResult for '${e}'`,e)}}class c{constructor(e,t=null){this._content=e,this._title=t}get content(){return this._content}get title(){return this._title}}},60359:(e,t,n)=>{var r=n(31601),i=n(76314)(r);i.push([e.id,".row,\n.icons {\n\tdisplay: flex;\n}\n\n.row > *,\n.icons > * {\n\tmargin: 0 0.5em;\n}\n\np,\nul,\nh2,\nh3 {\n\tpadding: 0.8em 0;\n}\n\nh2 {\n\tmargin-top: 2em;\n}\n\nh3 {\n\tfont-size: 0.8rem;\n\tmargin-top: 1em;\n\tcolor: var(--text2);\n}\n\nli {\n\tlist-style: none;\n}\n\nli:before {\n\tcontent: '-';\n\tmargin-right: 0.5em;\n\tcolor: var(--primary-color);\n}\n\n.divider {\n\tborder-bottom: 1px solid var(--header-background-color);\n}\n\n.example {\n\tpadding: 2em;\n\tbox-shadow: 0px 0px 4px rgb(0 0 0 / 50%);\n\tbackground: var(--tertiary-bg-color);\n}\n\n.menu {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n}\n\n.section {\n\tpadding: 1em;\n}\n\n#copyurlbutton {\n\twidth: 25em;\n}\n",""]),e.exports=i},60704:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9ImN1cnJlbnRDb2xvciIgY2xhc3M9ImJpIGJpLXRocmVlLWRvdHMtdmVydGljYWwiIHZpZXdCb3g9IjAgMCAxNiAxNiI+PCEtLU1JVCBMaWNlbnNlLS0+PHBhdGggZD0iTTkuNSAxM2ExLjUgMS41IDAgMSAxLTMgMCAxLjUgMS41IDAgMCAxIDMgMG0wLTVhMS41IDEuNSAwIDEgMS0zIDAgMS41IDEuNSAwIDAgMSAzIDBtMC01YTEuNSAxLjUgMCAxIDEtMyAwIDEuNSAxLjUgMCAwIDEgMyAwIi8+PC9zdmc+Cg=="},61263:(e,t,n)=>{"use strict";n.d(t,{Px:()=>o,RR:()=>a,TR:()=>r,Yx:()=>s,gn:()=>i,j2:()=>l});const r="bottomSheet/contentChanged",i="default",o="interaction",a="layerFilter",s="layerSettings",c={data:[],active:[]},l=(e=c,t)=>{const{type:n,payload:i}=t;if(n===r){const t=((e,t)=>{const{id:n,content:r}=t,i=e.data.findIndex((e=>e.id===n));return-1===i?r?[t,...e.data]:e.data:r?[t,...e.data.toSpliced(i,1)]:e.data.filter((e=>e.id!==n))})(e,i);return{...e,data:t,active:(o=t,o.map((e=>e.id)))}}var o;return e}},62253:(e,t,n)=>{"use strict";n.d(t,{JT:()=>a,od:()=>i});var r=n(47518);const i="search/query",o={query:new r.MD(null)},a=(e=o,t)=>{const{type:n,payload:r}=t;return n===i?{...e,query:r}:e}},63103:(e,t,n)=>{"use strict";n.d(t,{E4:()=>h,FJ:()=>m,ZZ:()=>u,tH:()=>p});var r=n(78314),i=n(94447),o=n(39400),a=n(18410),s=n(28353),c=n(42376),l=n(51207);const d=e=>{const t=t=>t?t.setAttributionProvider(l.aI).setAttribution(g(e)).setOpacity(e.opacity??t.opacity).setHidden(e.hidden??t.hidden).setMinZoom(e.minZoom??null).setMaxZoom(e.maxZoom??null).setQueryable(e.queryable??!0).setExportable(e.exportable??!0).setAuthRoles(e.authRoles??[]).setTimestamps(e.timestamps??[]).setUpdateInterval(e.updateInterval??null):null;return t((e=>{switch(e.type){case"wms":return new i.He(e.id,e.label,e.url,e.layers,e.format).setExtraParams(e.extraParams??{}).setMaxSize(e.maxSize??null);case"xyz":return new i.X5(e.id,e.label,e.urls).setTileGridId(e.tileGridId);case"vt":return new i.u8(e.id,e.label,e.url);case"oaf":return new i.uv(e.id,e.label,e.url,e.collectionId,e.srid??3857).setLimit(e.limit).setFilter(e.filter).setClusterParams(e.clusterParams??{}).setStyle(e.baseColor?{baseColor:e.baseColor}:null);case"vector":return new i.fX(e.id,_(e.url,Symbol.for(e.sourceType),e.id,e.label),e.label).onResolve((n=>{t(n.setClusterParams(e.clusterParams??{}).setStyle(e.baseColor?{baseColor:e.baseColor}:null))}));case"rtvector":return new i.H5(e.id,e.label,e.url,Symbol.for(e.sourceType)).setClusterParams(e.clusterParams??{}).setStyle(e.baseColor?{baseColor:e.baseColor}:null);case"aggregate":return new i.DJ(e.id,e.label,e.geoResourceIds);default:return null}})(e))},u=async()=>{const{HttpService:e,ConfigService:t}=a.z.inject("HttpService","ConfigService"),n=t.getValueAsPath("BACKEND_URL")+"georesources/all",r=await e.get(n);if(r.ok){const e=[];return(await r.json()).forEach((t=>{const n=d(t);n?e.push(n):console.warn("Could not create a GeoResource  for "+t.id)})),e}throw new Error("GeoResources could not be loaded")},g=e=>Array.isArray(e.extendedAttributions)?e.extendedAttributions.map((t=>({copyright:t.copyright??e?.attribution?.copyright??null,description:t.description??e?.attribution?.description??null}))):e.attribution??null,h=e=>{const{HttpService:t,ConfigService:n}=a.z.inject("HttpService","ConfigService");return new i.fX(e,(async e=>{const i=`${n.getValueAsPath("BACKEND_URL")}georesources/byId/${e}`,o=await t.get(i);if(o.ok){const e=await o.json(),t=d(e);if(t)return t}throw new r.o(`GeoResource for id '${e}' could not be loaded`,e,o.status)}))},p=e=>{if((0,s.oq)(e)){const t=e.split("||"),{SourceTypeService:n,ImportVectorDataService:s,ImportWmsService:c,ImportOafService:l}=a.z.inject("SourceTypeService","ImportVectorDataService","ImportWmsService","ImportOafService"),d=async()=>{const i=t[0],{status:a,sourceType:d}=await n.forUrl(i);if(a===o.$I.OK||a===o.$I.BAA_AUTHENTICATED){const n=async n=>{switch(n.name){case o.bu.GEOJSON:case o.bu.GPX:case o.bu.KML:case o.bu.EWKT:{const r=t[1],o=t[2],a=await s.forUrl(i,{sourceType:n,id:e}).get();return"false"===o&&a.setShowPointNames(!1),r?.length?a.setLabel(r):a}case o.bu.WMS:{const r=()=>{throw new Error(`Unsupported WMS: '${i}'`)},s=t[1],l=t[2],d=s?{sourceType:n,layers:[s],ids:[e]}:{sourceType:n,layers:[],ids:[e]};d.isAuthenticated=a===o.$I.BAA_AUTHENTICATED;const u=(await c.forUrl(i,d))[0]??r();return l?.length?u.setLabel(l):u}case o.bu.OAF:{const r=()=>{throw new Error(`Unsupported OAF: '${i}'`)},s=t[1],c=t[2],d=s?{sourceType:n,collections:[s],ids:[e]}:{sourceType:n,collections:[],ids:[e]};d.isAuthenticated=a===o.$I.BAA_AUTHENTICATED;const u=(await l.forUrl(i,d))[0]??r();return c?.length?u.setLabel(c):u}default:throw new Error(`Unsupported source type '${Object.keys(n.name)[0]}'`)}};return n(d)}throw new r.o(`SourceTypeService returns status=${Object.keys(o.$I).find((e=>o.$I[e]===a))} for ${i}`,e)};return new i.fX(e,d)}return null},m=(e,t,n=(0,c.Ds)().toString(),o=null)=>async()=>{const{HttpService:s}=a.z.inject("HttpService"),c=await s.get(e);if(c.ok){const e=await c.text();return new i.HA(n,o,t).setSource(e,4326)}throw new r.o(`VectorGeoResource for '${e}' could not be loaded`,n,c.status)},_=(e,t,n,o)=>async()=>{const{HttpService:s,UrlService:c,GeoResourceService:l}=a.z.inject("HttpService","UrlService","GeoResourceService"),d=await s.get(c.proxifyInstant(e),{response:[l.getAuthResponseInterceptorForGeoResource(n)]});if(d.ok){const e=await d.text();return new i.HA(n,o,t).setSource(e,4326)}throw new r.o(`VectorGeoResource for '${e}' could not be loaded`,n,d.status)}},63332:(e,t,n)=>{var r=n(53648);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},63690:(e,t,n)=>{var r=n(84518);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},64668:(e,t,n)=>{var r=n(39576);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},65304:(e,t,n)=>{var r=n(8196);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},65394:(e,t,n)=>{"use strict";n.d(t,{S:()=>r,o:()=>i});const r=Object.freeze({MEASURE:"measure",DRAW:"draw",SHARE:"share",IMPORT:"import",EXPORT:"export",ROUTING:"routing",COMPARE:"compare"}),i=Object.freeze([r.DRAW])},65506:(e,t,n)=>{"use strict";var r=n(18410);const{TranslationService:i}=r.z.inject("TranslationService");i.register("infoButtonProvider",(e=>{switch(e){case"en":return{map_infoButton_title:"Information",map_infoButton_help:"Help and FAQ",map_infoButton_contact:"Contact",map_infoButton_about:"About us"};case"de":return{map_infoButton_title:"Information",map_infoButton_help:"Hilfe und FAQ",map_infoButton_contact:"Kontakt",map_infoButton_about:"Impressum"};default:return{}}})),i.register("zoomButtonsProvider",(e=>{switch(e){case"en":return{map_zoomButtons_in:"Zoom in",map_zoomButtons_out:"Zoom out",map_zoomButtons_extent:"Zoom to full extent"};case"de":return{map_zoomButtons_in:"Vergrößere Kartenausschnitt",map_zoomButtons_out:"Verkleinere Kartenausschnitt",map_zoomButtons_extent:"Ganz Bayern anzeigen"};default:return{}}})),i.register("geolocationButtonProvider",(e=>{switch(e){case"en":return{map_geolocationButton_title_activate:"Activate geolocation",map_geolocationButton_title_deactivate:"Deactivate geolocation",map_geolocationButton_title_denied:"Geolocation not allowed or not possible"};case"de":return{map_geolocationButton_title_activate:"Standort anzeigen",map_geolocationButton_title_deactivate:"Standortanzeige ausschalten",map_geolocationButton_title_denied:"Standortanzeige nicht erlaubt oder nicht möglich"};default:return{}}})),i.register("contextMenuProvider",(e=>{switch(e){case"en":return{map_contextMenu_header:"Location",map_contextMenu_close_button:"Close",map_contextMenuContent_community_label:"Community",map_contextMenuContent_district_label:"District",map_contextMenuContent_parcel_label:"Parcel",map_contextMenuContent_parcel_badge:"Plus",map_contextMenuContent_copy_icon:"Copy to clipboard",map_contextMenuContent_clipboard_error:'"Copy to clipboard" is not available',map_contextMenuContent_clipboard_success:"was copied to clipboard"};case"de":return{map_contextMenu_header:"Position",map_contextMenu_close_button:"Schließen",map_contextMenuContent_community_label:"Gemeinde",map_contextMenuContent_district_label:"Gemarkung",map_contextMenuContent_parcel_label:"Flurstück",map_contextMenuContent_parcel_badge:"Plus",map_contextMenuContent_copy_icon:"In die Zwischenablage kopieren",map_contextMenuContent_clipboard_error:'"In die Zwischenablage kopieren" steht nicht zur Verfügung',map_contextMenuContent_clipboard_success:"wurde in die Zwischenablage kopiert"};default:return{}}})),i.register("attributionInfoProvider",(e=>{switch(e){case"en":return{map_attributionInfo_label:"Data",map_attributionInfo_label_aria_label:"Data source ",map_attributionInfo_collapse_title_open:"Show all",map_attributionInfo_collapse_title_close:"Close"};case"de":return{map_attributionInfo_label:"Daten",map_attributionInfo_label_aria_label:"Datenquelle ",map_attributionInfo_collapse_title_open:"Alle anzeigen",map_attributionInfo_collapse_title_close:"Schließen"};default:return{}}})),i.register("rotationButtonProvider",(e=>{switch(e){case"en":return{map_rotationButton_title:"Reset rotation to north"};case"de":return{map_rotationButton_title:"Karte wieder nach Norden ausrichten"};default:return{}}})),i.register("threeDimensionButtonProvider",(e=>{switch(e){case"en":return{map_threeDimensionButton_title:"Open the 3D view in a new window"};case"de":return{map_threeDimensionButton_title:"3D-Ansicht in neuem Fenster öffnen"};default:return{}}})),i.register("activeStatButtonsProvider",(e=>{switch(e){case"en":return{map_interaction_button_container_routing:"Complete routing",map_interaction_button_container_layerSwipe:"Exit comparison tool"};case"de":return{map_interaction_button_container_routing:"Routing abschließen",map_interaction_button_container_layerSwipe:"Vergleichen beenden"};default:return{}}})),i.register("layerSwipeSliderProvider",(e=>{switch(e){case"en":return{map_layerSwipeSlider:"Move left or right"};case"de":return{map_layerSwipeSlider:"Nach links oder rechts verschieben"};default:return{}}}));var o=n(36752),a=n(64668),s=n.n(a),c=n(83245),l=n(99990);class d extends l.T{constructor(){super();const{TranslationService:e}=r.z.inject("TranslationService");this._translationService=e}createView(){const e=e=>this._translationService.translate(e);return o.qy`
			<style>${s()}</style>
			<div class="zoom-buttons">
				<button class="button" aria-label="${e("map_zoomButtons_in")}" title="${e("map_zoomButtons_in")}" @click="${c.oi}"><span class="icon zoom-in"></button>
				<button class="button" aria-label="${e("map_zoomButtons_out")}" title="${e("map_zoomButtons_out")}"  @click="${c.e1}"><span class="icon zoom-out"></button>
			</div>
		`}static get tag(){return"ba-zoom-buttons"}}var u=n(19304),g=n.n(u);class h extends l.T{#n;#e;constructor(){super();const{TranslationService:e,MapService:t}=r.z.inject("TranslationService","MapService");this.#n=e,this.#e=t}createView(){const e=()=>this.#e.getDefaultMapExtent();return o.qy`
			<style>
				${g()}
			</style>
			<div class="zoom-to-extent">
				<button class="zoom-to-extent-button" @click=${()=>{(0,c.BY)(e(),{useVisibleViewport:!1})}} title="${(()=>this.#n.translate("map_zoomButtons_extent"))()}">
					<i class="icon zoom-to-extent-icon"></i>
				</button>
			</div>
		`}static get tag(){return"ba-extent-button"}}window.customElements.get(d.tag)||window.customElements.define(d.tag,d),window.customElements.get(h.tag)||window.customElements.define(h.tag,h);var p=n(63332),m=n.n(p);const _="update_isPortrait_hasMinWidth";class v extends l.T{constructor(){super({isPortrait:!1,hasMinWidth:!1});const{EnvironmentService:e}=r.z.inject("EnvironmentService");this._environmentService=e}update(e,t,n){if(e===_)return{...n,...t}}onInitialize(){this.observe((e=>e.media),(e=>this.signal(_,{isPortrait:e.portrait,hasMinWidth:e.minWidth})))}createView(e){const{isPortrait:t,hasMinWidth:n}=e;return o.qy`
			<style>
				${m()}
			</style>
			<div class="map-buttons-container ${t?"is-portrait":"is-landscape"} ${n?"is-desktop":"is-tablet"} ${(()=>this._environmentService.isEmbedded()?"is-embedded":"")()}">
				<ba-rotation-button></ba-rotation-button>
				<ba-geolocation-button></ba-geolocation-button>
				<ba-zoom-buttons></ba-zoom-buttons>
				<ba-extent-button></ba-extent-button>
				<ba-three-dimension-button></ba-three-dimension-button>
			</div>
		`}static get tag(){return"ba-map-button-container"}}window.customElements.get(v.tag)||window.customElements.define(v.tag,v);var y=n(65394),b=n(79545),S=n(34844),f=n(50764),w=n(30612),M=n.n(w),I=n(6683),A=n(52608);const L="update_isPortrait_hasMinWidth",E="update_tooId",T="update_bottom_sheet",x="update_main_menu",D="update_isOpen_NavigationRail";class C extends l.T{#n;#s;constructor(){super({toolId:null,isOpenMainMenu:!1,isPortrait:!1,isOpenNavigationRail:!1});const{TranslationService:e,EnvironmentService:t}=r.z.inject("TranslationService","EnvironmentService");this.#n=e,this.#s=t}update(e,t,n){switch(e){case L:return{...n,...t};case E:return{...n,toolId:t};case T:return{...n,active:t};case x:case D:return{...n,...t}}}onInitialize(){this.observe((e=>e.media),(e=>this.signal(L,{isPortrait:e.portrait}))),this.observe((e=>e.tools.current),(e=>this.signal(E,e))),this.observe((e=>e.bottomSheet.active),(e=>this.signal(T,e))),this.observe((e=>e.mainMenu),(e=>this.signal(x,{isOpenMainMenu:e.open,tab:e.tab}))),this.observe((e=>e.navigationRail),(e=>this.signal(D,{isOpenNavigationRail:e.open})))}onAfterRender(){setTimeout((()=>{const e=this.shadowRoot.getElementById("mapInteractionButtonContainer"),t=(0,S.Ne)(this.#s.getWindow().document,A.X.tag);t[0]?e.style.bottom=t[0].offsetHeight+10+"px":e.style.bottom="var(--map-interaction-container-bottom)"}))}createView(e){const t=e=>this.#n.translate(e),{toolId:n,isOpenMainMenu:r,isOpenNavigationRail:i,isPortrait:a}=e,s={"is-open":r,"is-open-navigationRail":i,"is-portrait":a,"is-landscape":!a};return o.qy`
			<style>
				${M()}
			</style>
			<div id="mapInteractionButtonContainer" class="map-interaction-button-container ${(0,I.H)(s)}">
				<ba-button
					class="${y.S.ROUTING===n?"":"hide"} routing ui-center"
					.icon=${f}
					.label=${t("map_interaction_button_container_routing")}
					.type=${"primary"}
					@click=${()=>(0,b.i)(null)}
				></ba-button>
				<ba-button
					class="${y.S.COMPARE===n?"":"hide"} layer-swipe"
					.icon=${f}
					.label=${t("map_interaction_button_container_layerSwipe")}
					.type=${"primary"}
					@click=${()=>(0,b.i)(null)}
				></ba-button>
			</div>
		`}static get tag(){return"ba-map-interaction-button-container"}}window.customElements.get(C.tag)||window.customElements.define(C.tag,C);var N=n(59540),k=n.n(N),z=n(52957);const R="update_active",j="update_denied";class O extends l.T{#n;constructor(){super({active:!1,denied:!1});const{TranslationService:e}=r.z.inject("TranslationService");this.#n=e}onInitialize(){this.observe((e=>e.geolocation.active),(e=>this.signal(R,e))),this.observe((e=>e.geolocation.denied),(e=>this.signal(j,e)))}update(e,t,n){switch(e){case R:return{...n,active:t};case j:return{...n,denied:t}}}createView(e){const{active:t,denied:n}=e,r={inactive:!t,active:t,denied:n};return o.qy`
			<style>
				${k()}
			</style>
			<div class="geolocation">
				<button class="geolocation-button ${(0,I.H)(r)}" @click=${()=>{t?(0,z.LU)():(0,z.Yf)()}} title=${(e=>this.#n.translate(e))(n?"map_geolocationButton_title_denied":t?"map_geolocationButton_title_deactivate":"map_geolocationButton_title_activate")}>
					<i class="icon geolocation-icon"></i>
				</button>
			</div>
		`}static get tag(){return"ba-geolocation-button"}}window.customElements.get(O.tag)||window.customElements.define(O.tag,O);var P=n(87542),$=n.n(P),F=n(15337),G=n(14731);const U="update_layer_swipe";class Y extends l.T{constructor(){super({active:!1,ratio:null});const{TranslationService:e}=r.z.inject("TranslationService");this._translationService=e}update(e,t,n){if(e===U)return{...n,active:t.active,ratio:t.ratio}}onInitialize(){this.observe((e=>e.layerSwipe),(e=>this.signal(U,e)))}createView(e){const{active:t,ratio:n}=e;return t?o.qy`
					<style>
						${$()}
					</style>
					<div id="line" class="line" style="left:${n}%"></div>
					<div class="layer-swipe">
						<input
							id="rangeslider"
							type="range"
							min="0"
							max="100"
							step="1"
							title="${(()=>this._translationService.translate("map_layerSwipeSlider"))()}"
							value="${n}"
							@input=${e=>{this.shadowRoot.getElementById("line").style.left=parseInt(e.target.value)+"%",(0,F.pv)(parseInt(e.target.value))}}
						/>
					</div>
				`:G.s}static get tag(){return"ba-layer-swipe"}}window.customElements.get(Y.tag)||window.customElements.define(Y.tag,Y);var H=n(12378),B=n(49208),V=n.n(B),W=n(50567);const Z="update";class Q extends l.T{#n;#h;constructor(){super({coordinate:null,content:null});const{TranslationService:e,StoreService:t}=r.z.inject("TranslationService","StoreService");this.#n=e,this.#h=e=>{"Escape"!==e.key||t.getStore().getState().modal.active||(e.preventDefault(),(0,W.Z_)())}}onInitialize(){this.observe((e=>e.mapContextMenu),(e=>this.signal(Z,e))),this.observeModel(["coordinate"],(e=>{e?document.addEventListener("keydown",this.#h):this.#p()}))}#p(){document.removeEventListener("keydown",this.#h)}onDisconnect(){this.#p()}update(e,t){const{coordinate:n,content:r}=t;if(e===Z)return{coordinate:n,content:r}}_calculateSector(e){const t=.5*window.innerWidth,n=.5*window.innerHeight;return e[0]<=t&&e[1]<=n?0:e[0]>t&&e[1]<=n?1:e[0]>t&&e[1]>n?2:3}createView(e){const t=e=>this.#n.translate(e),{coordinate:n,content:r}=e;if(!n||!r)return o.s6;const i=this._calculateSector(n),a=20*(i<2?1:-1),s={"--mouse-x":n[0]+"px","--mouse-y":n[1]+a+"px"},c="sector-"+i;return o.qy` <style>
				${V()}
			</style>
			<div class="context-menu ${c}" style=${(0,H.W)(s)}>
				<div class="header">
					${t("map_contextMenu_header")}<ba-icon
						class="close-icon"
						.icon="${f}"
						.title=${t("map_contextMenu_close_button")}
						.size=${1.5}
						.color=${"var(--text2)"}
						.color_hover=${"var(--text2)"}
						@click=${W.Z_}
					></ba-icon>
				</div>
				${r}
			</div>`}static get tag(){return"ba-map-context-menu"}}var q=n(58349),K=n.n(q),X=n(35558),J=n(2277);const ee="update_coordinate",te="update_administration",ne={community:null,district:null,parcel:null};class re extends l.T{constructor(e){super(e??{coordinate:null,administration:{...ne}});const{MapService:t,TranslationService:n,ShareService:i,AdministrationService:o}=r.z.inject("MapService","TranslationService","ShareService","AdministrationService");this._mapService=t,this._translationService=n,this._shareService=i,this._administrationService=o}update(e,t,n){switch(e){case ee:return{...n,coordinate:t,administration:{...ne}};case te:return{...n,administration:t}}}set coordinate(e){this.signal(ee,e),this._getAdministration(e)}async _getAdministration(e){try{const t=await this._administrationService.getAdministration(e);this.signal(te,t??J.L)}catch(e){throw this.signal(te,{...ne}),e}}async _copyValueToClipboard(e){try{await this._shareService.copyToClipboard(e),(0,J.L)(`"${e}" ${this._translationService.translate("map_contextMenuContent_clipboard_success")}`,J.A.INFO)}catch{const e=this._translationService.translate("map_contextMenuContent_clipboard_error");(0,J.L)(e,J.A.WARN),console.warn("Clipboard API not available")}}createView(e){const{coordinate:t,administration:{community:n,district:r,parcel:i}}=e,a=e=>this._translationService.translate(e);return t?o.qy`
				<style>
					${K()}
				</style>

				<div class="container">
					<ul class="content selectable">
						${n&&r?o.qy`<li class="r_community">
										<span class="label">${a("map_contextMenuContent_community_label")}</span><span class="coordinate">${n}</span
										><span class="icon">
											<ba-icon
												class="close"
												.icon="${X}"
												.title=${a("map_contextMenuContent_copy_icon")}
												.size=${1.5}
												@click=${()=>{this._copyValueToClipboard(n)}}
											></ba-icon>
										</span>
									</li>
									<li class="r_district">
										<span class="label">${a("map_contextMenuContent_district_label")}</span><span class="coordinate">${r}</span
										><span class="icon">
											<ba-icon
												class="close"
												.icon="${X}"
												.title=${a("map_contextMenuContent_copy_icon")}
												.size=${1.5}
												@click=${()=>{this._copyValueToClipboard(r)}}
											></ba-icon>
										</span>
									</li>
									${i?o.qy`<li class="r_parcel">
												<span class="label"
													>${a("map_contextMenuContent_parcel_label")}
													<ba-badge
														.color=${"var(--text3)"}
														.background=${"var(--roles-color)"}
														.label=${a("map_contextMenuContent_parcel_badge")}
														.size=${"0.6"}
													></ba-badge> </span
												><span class="coordinate">${i}</span>
												<span class="icon">
													<ba-icon
														class="close"
														.icon="${X}"
														.title=${a("map_contextMenuContent_copy_icon")}
														.size=${1.5}
														@click=${()=>{this._copyValueToClipboard(i)}}
													></ba-icon>
												</span>
											</li>`:o.s6}`:o.s6}
						<li><ba-coordinate-info .coordinate=${t}></ba-coordinate-info></li>
					</ul>
					<div class="chips">
						<ba-share-chip .center=${t}></ba-share-chip>
						<ba-map-feedback-chip .center=${t}></ba-map-feedback-chip>
						<ba-routing-chip .coordinate=${t}></ba-routing-chip>
					</div>
				</div>
			`:o.s6}static get tag(){return"ba-map-context-menu-content"}}window.customElements.get(Q.tag)||window.customElements.define(Q.tag,Q),window.customElements.get(re.tag)||window.customElements.define(re.tag,re);var ie=n(97156),oe=n.n(ie),ae=n(70402);const se="update_open_property",ce="update_activeLayers_property",le="update_zoomLevel_property";class de extends l.T{constructor(){super({open:!1,activeLayers:null,zoomLevel:null});const{TranslationService:e,GeoResourceService:t,EnvironmentService:n}=r.z.inject("TranslationService","GeoResourceService","EnvironmentService");this._translationService=e,this._georesourceService=t,this._environmentService=n}onInitialize(){this.observe((e=>e.layers.active),(e=>this.signal(ce,e))),this.observe((e=>e.position.zoom),(e=>this.signal(le,e)))}update(e,t,n){switch(e){case se:return{...n,open:t};case ce:return{...n,activeLayers:t};case le:return{...n,zoomLevel:t}}}_getCopyrights(e,t){const n=e.filter((({visible:e})=>e)).filter((({constraints:{hidden:e}})=>!e)).map((e=>this._georesourceService.byId(e.geoResourceId)));return(0,ae.I)(n,t)}createView(e){const t=e=>this._translationService.translate(e),{activeLayers:n,zoomLevel:r,open:i}=e,a=this._getCopyrights(n,r).map(((e,n,r)=>{const i=n===r.length-1?"":",";return e.url?o.qy`<a
						class="attribution attribution-link"
						target="_blank"
						aria-label="${t("map_attributionInfo_label_aria_label")}${n+1}${": "+e.label}"
						title="${t("map_attributionInfo_label_aria_label")}${n+1}${": "+e.label}"
						href=${e.url}
						>${e.label}${i}</a
					>`:o.qy`<span class="attribution">${e.label}${i}</span>`})),s={isopen:i,selectable:i,isembedded:this._environmentService.isEmbedded()};return o.qy` <style>
				${oe()}
			</style>
			<div class="attribution-container ${(0,I.H)(s)}">
				© ${t("map_attributionInfo_label")}: ${a}
				<div @click=${()=>this.signal(se,!i)} class="collapse-button ${a.length>0||i?"is-collapse":""}" title="${t(i?"map_attributionInfo_collapse_title_close":"map_attributionInfo_collapse_title_open")}">
					<i class="icon chevron"></i>
				</div>
			</div>`}static get tag(){return"ba-attribution-info"}}window.customElements.get(de.tag)||window.customElements.define(de.tag,de);var ue=n(93062),ge=n.n(ue),he=n(99651);const pe="update_live_rotation";class me extends l.T{constructor(){super({liveRotation:0});const{TranslationService:e}=r.z.inject("TranslationService");this._translationService=e,this._timeoutId=null}update(e,t,n){if(e===pe)return{...n,liveRotation:t}}onInitialize(){const e=(0,he.v6)(me.THROTTLE_DELAY_MS,(e=>this.signal(pe,e)));this.observe((e=>e.position.liveRotation),(t=>{Math.abs(t)>=me.VISIBILITY_THRESHOLD_RAD?this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=null):this._timeoutId||(this._timeoutId=setTimeout((()=>{e(t)}),me.HIDE_BUTTON_DELAY_MS)),e(t)}),!0)}createView(e){const{liveRotation:t}=e,n=e=>this._translationService.translate(e);if(!this._timeoutId){const e=()=>{(0,c.bg)(0)},r={transform:`rotate(${t}rad)`};return o.qy`
				<style>
					${ge()}
				</style>
				<div>
					<button class="rotation-button" style="${(0,H.W)(r)}" @click=${e} title=${n("map_rotationButton_title")}>
						<i class="icon rotation-icon"></i>
					</button>
				</div>
			`}return o.s6}static get tag(){return"ba-rotation-button"}static get HIDE_BUTTON_DELAY_MS(){return 1e3}static get THROTTLE_DELAY_MS(){return 10}static get VISIBILITY_THRESHOLD_RAD(){return 1e-4}}window.customElements.get(me.tag)||window.customElements.define(me.tag,me);var _e=n(1942),ve=n.n(_e),ye=n(40781),be=n(55286);class Se extends l.T{#n;#s;#i;#t;#a;#e;constructor(){super();const{TranslationService:e,EnvironmentService:t,ShareService:n,CoordinateService:i,StoreService:o,MapService:a}=r.z.inject("TranslationService","EnvironmentService","ShareService","CoordinateService","StoreService","MapService");this.#n=e,this.#s=t,this.#i=n,this.#t=i,this.#a=o,this.#e=a}createView(){return o.qy`
			<style>
				${ve()}
			</style>
			<div>
				<button @click="${()=>{const e=Object.fromEntries(this.#i.getParameters()),t=this.#t.toLonLat(this.#a.getStore().getState().position.center).map((e=>e.toFixed(be.I.WGS84.digits)));e[ye.h.CENTER]=t,e.res=this.#e.calcResolution(this.#a.getStore().getState().position.zoom,this.#a.getStore().getState().position.center).toFixed(1);const n=`https://geodaten.bayern.de/bayernatlas_3d_preview?${decodeURIComponent(new URLSearchParams(e).toString())}`;this.#s.getWindow().open(n)}}" class="three-dimension-button" title=${(()=>this.#n.translate("map_threeDimensionButton_title"))()}>
					<i class="icon three-dimension-icon"></i>
				</button>
			</div>
		`}static get tag(){return"ba-three-dimension-button"}}window.customElements.get(Se.tag)||window.customElements.define(Se.tag,Se)},66032:(e,t,n)=>{var r=n(31601),i=n(76314),o=n(4417),a=n(60704),s=n(2151),c=i(r),l=o(a),d=o(s);c.push([e.id,`:host {\n\tdisplay: inline-block;\n}\n\n.menu__button {\n\tcursor: pointer;\n\tdisplay: inline-block;\n\theight: 1.9em;\n\twidth: 1.9em;\n\tbackground-color: var(--primary-color);\n}\n\n.kebab {\n\tmask: url(${l});\n\t-webkit-mask-image: url(${l});\n}\n\n.meatball {\n\tmask: url(${d});\n\t-webkit-mask-image: url(${d});\n}\n\n.anchor {\n\tdisplay: inline-block;\n\tposition: absolute;\n\tbackground: transparent;\n\tborder: none;\n\tborder-radius: calc(2.5em / 2);\n\theight: 2.5em;\n\twidth: 2.5em;\n\tpadding: 0.3em;\n}\n\n.anchor:hover {\n\tbackground: var(--header-background-color);\n}\n\n.menu__container {\n\t--anchor-x: 0;\n\t--anchor-y: 0;\n\tposition: absolute;\n\tright: 0;\n\tborder: 1px solid var(--primary-bg-color);\n\tbox-shadow: 0px 0px 4px rgb(0 0 0 / 50%);\n\tbackground-color: var(--primary-bg-color);\n\tz-index: 100;\n\tpointer-events: auto;\n\ttransform-origin: top right;\n\tanimation-name: openScale;\n\tanimation-duration: var(--animation-duration-medium-open);\n\tanimation-iteration-count: 1;\n}\n\n@keyframes openScale {\n\t0% {\n\t\tscale: 0;\n\t}\n\t100% {\n\t\tscale: 1;\n\t}\n}\n\n.sector0 {\n\ttransform: translateX(calc(var(--anchor-x))) translateY(calc(var(--anchor-y)));\n}\n\n.sector1 {\n\ttransform: translateX(calc(var(--anchor-x) - 100%)) translateY(calc(var(--anchor-y)));\n}\n\n.sector2 {\n\ttransform: translateX(calc(var(--anchor-x) - 100%)) translateY(calc(var(--anchor-y) - 100%));\n}\n\n.sector3 {\n\ttransform: translateX(calc(var(--anchor-x))) translateY(calc(var(--anchor-y) - 100%));\n}\n\n.collapsed {\n\tdisplay: none;\n}\n`,""]),e.exports=c},66625:(e,t,n)=>{"use strict";var r=n(18410);const{TranslationService:i}=r.z.inject("TranslationService");i.register("dndImportProvider",(e=>{switch(e){case"en":return{dndImport_import_textcontent:"Drop Text-Data or URL here",dndImport_import_filecontent:"Drop KML/GPX/GeoJSON/EWKT file here",dndImport_import_unknown:"Cannot read import-data",dndImport_import_unsupported:"The file-type is not supported",dndImport_import_file_error:"File is not readable",dndImport_import_no_file_found:"File not found",dndImport_import_max_size_exceeded:"Filesize is too large"};case"de":return{dndImport_import_textcontent:"Text oder URL hierhin ziehen",dndImport_import_filecontent:"KML/GPX/GeoJSON/EWKT Datei hierhin ziehen",dndImport_import_unknown:"Die Import-Daten sind unbekannt",dndImport_import_unsupported:"Der Dateityp wird nicht unterstützt",dndImport_import_file_error:"Die Datei kann nicht gelesen werden",dndImport_import_no_file_found:"Die Datei ist leer",dndImport_import_max_size_exceeded:"Die Datei überschreitet die erlaubte Größe"};default:return{}}}));var o=n(36752),a=n(99990),s=n(2277),c=n(97823),l=n.n(c),d=n(6683),u=n(44668),g=n(80009),h=n(20083),p=n(39400),m=n(28353);const _="update_dropzone_content",v="update_modal_changed",y=e=>{e.stopPropagation(),e.preventDefault()};class b extends a.T{#n;#m;constructor(){super({dropzoneContent:null,active:!1,modalActive:!1});const{TranslationService:e,SourceTypeService:t}=r.z.inject("TranslationService","SourceTypeService");this.#n=e,this.#m=t}onInitialize(){document.addEventListener("dragenter",(e=>this._onDragEnter(e))),this.observe((e=>e.modal.active),(e=>this.signal(v,e)))}update(e,t,n){switch(e){case _:return{...n,dropzoneContent:t,active:null!==t};case v:return{...n,modalActive:t}}}createView(e){const t={is_active:e.active};return o.qy`<style>
				${l()}
			</style>
			<div id="dropzone" class="dropzone ${(0,d.H)(t)}" @dragover=${e=>{y(e)}} @dragleave=${e=>{y(e),this.signal(_,null)}} @drop=${e=>{y(e),(e.dataTransfer.types||[]).forEach((t=>{switch(t){case"Files":this._importFile(e.dataTransfer);break;case u.z.TEXT_PLAIN:this._importText(e.dataTransfer)}})),this.signal(_,null)}}>
				${e.dropzoneContent?e.dropzoneContent:o.s6}
			</div> `}_onDragEnter(e){const t=e=>this.#n.translate(e);if(this.getModel().modalActive)return;y(e);const n=e.dataTransfer.types||[],r=n.find((e=>/(files|text\/plain)/i.test(e))),i=r?e=>{const n=e===u.z.TEXT_PLAIN?t("dndImport_import_textcontent"):t("dndImport_import_filecontent");this.signal(_,n)}:()=>{const e=0!==n?.length?t("dndImport_import_unknown"):null;this.signal(_,e)};i(r)}_importOrNotify(e,t){const n=e=>this.#n.translate(e);switch(e.status){case p.$I.OK:t();break;case p.$I.MAX_SIZE_EXCEEDED:(0,s.L)(n("dndImport_import_max_size_exceeded"),s.A.WARN);break;case p.$I.UNSUPPORTED_TYPE:(0,s.L)(n("dndImport_import_unsupported"),s.A.WARN);break;case p.$I.OTHER:(0,s.L)(n("dndImport_import_unknown"),s.A.ERROR)}}_importFile(e){const t=e=>this.#n.translate(e),n=e.files,r=n&&0<n.length?e=>{Array.from(e).forEach((async e=>{try{const t=await this.#m.forBlob(e);this._importOrNotify(t,(()=>(async(e,t)=>{const n=await e.text();(0,g.X)(n,t)})(e,t.sourceType)))}catch(e){(0,s.L)(t("dndImport_import_file_error"),s.A.ERROR)}}))}:()=>{(0,s.L)(t("dndImport_import_no_file_found"),s.A.WARN)};r(n)}_importText(e){const t=e.getData(u.z.TEXT_PLAIN);((0,m.q$)(t)?async e=>{const t=await this.#m.forUrl(e);this._importOrNotify(t,t.sourceType?.name===p.bu.WMS?()=>(0,h.N)(e):()=>(0,g.c)(e,t.sourceType))}:e=>{const t=this.#m.forData(e);this._importOrNotify(t,(()=>(0,g.X)(e,t.sourceType)))})(t)}static get tag(){return"ba-dnd-import-panel"}}window.customElements.get(b.tag)||window.customElements.define(b.tag,b)},66823:(e,t,n)=>{var r=n(31601),i=n(76314)(r);i.push([e.id,".bottom-sheet {\n\tbackground-color: var(--primary-bg-color);\n\tbox-shadow: 3px 0px 4px rgb(0 0 0 / 50%);\n\tdisplay: flex;\n\tflex-direction: column;\n\tpadding: 0.8em 1.5em;\n\tpointer-events: all;\n\tmargin: 0 0 0 0;\n\ttransition-property: margin;\n\ttransition-duration: var(--animation-duration-large-open);\n\ttransition-timing-function: var(--animation-easing-linear);\n\tanimation-name: animateIn;\n\tanimation-fill-mode: both;\n\tanimation-duration: var(--animation-duration-large-open);\n\tanimation-timing-function: var(--animation-easing-linear);\n}\n.fade-out {\n\tanimation-name: animateOut;\n}\n.is-open {\n\tmargin: 0 0 0 28em;\n}\n.is-open-navigationRail {\n\tmargin: 0 0 0 5em;\n}\n.is-open.is-open-navigationRail {\n\tmargin: 0 0 0 33em;\n}\n.tool-container__close-button {\n\tmargin: 0;\n\twidth: 3em;\n\theight: 3em;\n\tborder-radius: 1.5em;\n\tborder: 0;\n\tbackground: transparent;\n\tfont-weight: bold;\n\tcursor: pointer;\n\tdisplay: block;\n\tpadding: 0.7em;\n\tposition: absolute;\n\tright: 0;\n\ttop: 0;\n}\n.tool-container__close-button:hover {\n\tbackground: var(--header-background-color);\n}\n@keyframes animateIn {\n\t0% {\n\t\ttransform: translateY(100%);\n\t}\n}\n@keyframes animateOut {\n\t100% {\n\t\ttransform: translateY(100%);\n\t}\n}\n",""]),e.exports=i},67167:(e,t,n)=>{var r=n(31601),i=n(76314)(r);i.push([e.id,".coordinate-container {\n\tdisplay: flex;\n\tmargin: auto;\n\tuser-select: none;\n\tborder-left: 1px dotted var(--text1);\n\tpadding: 0 1em;\n}\n\n@media (max-width: 600px) {\n\t.coordinate-container {\n\t\tdisplay: none;\n\t}\n}\n\n.coordinate-label {\n\tpadding-left: 1em;\n\tmargin: auto;\n\tdisplay: block;\n}\n\n.select-coordinate {\n\tfont-size: 0.7rem;\n\tfont-weight: bold;\n\twidth: fit-content;\n\tpadding: 0 1.5em 0 0;\n}\n\n.select-coordinate-option {\n\tfont-weight: bold;\n}\n",""]),e.exports=i},67806:(e,t,n)=>{var r=n(7642);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},68098:(e,t,n)=>{var r=n(12982);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},68514:(e,t,n)=>{"use strict";n.d(t,{KP:()=>g,eU:()=>u});var r=n(47518),i=n(89707),o=n(26221),a=n(18410),s=n(94447),c=n(55449),l=n(51207);const d="feature_collection_layer",u="feature_collection";class g extends o.h{#_;#n;constructor(){super();const{GeoResourceService:e,TranslationService:t}=a.z.inject("GeoResourceService","TranslationService");this.#_=e,this.#n=t}async register(e){const t=e=>this.#n.translate(e);let n=!1;(0,r.lB)(e,(e=>e.featureCollection.entries),(e=>{n=!0,(0,i.e5)(d),e.length>0&&(this.#_.addOrReplace(new s.HA(u,`${t("global_featureCollection_layer_label")}`).setFeatures(e).markAsLocalData(!0).setHidden(!0).setAttributionProvider(l.Ve)),(0,i.VE)(d,{geoResourceId:u,constraints:{cloneable:!1},props:{featureCount:e.length}})),n=!1})),(0,r.lB)(e,(e=>e.layers.removed),(e=>(e=>{[d].some((t=>e.payload.includes(t)))&&!n&&(0,c.Js)()})(e)))}}},68990:(e,t,n)=>{var r=n(83850);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},69600:(e,t,n)=>{"use strict";n.d(t,{d:()=>r});const r=Object.freeze({POINT:"Point",LINE:"Line",POLYGON:"Polygon",COLLECTION:"Collection"})},69716:(e,t,n)=>{"use strict";n.d(t,{_:()=>k});var r=n(36752),i=n(99990),o=n(3632),a=n.n(o),s=n(90061),c=n.n(s),l=n(91765),d=n(78556),u=n(56916),g=n(43965),h=n(99113),p=n(33711),m=n(89707),_=n(83245),v=n(18410),y=n(57114),b=n(47518),S=n(39043);const f=()=>{const{StoreService:e}=v.z.inject("StoreService");return e.getStore()},w=e=>{f().dispatch({type:S.cw,payload:e})};var M=n(56851);const I=()=>{const{StoreService:e}=v.z.inject("StoreService");return e.getStore()},A=e=>{I().dispatch({type:M.LU,payload:e})};var L=n(78445),E=n(35598),T=n(94447),x=n(99887),D=n(70915);const C="update_position",N="update_layers";class k extends i.T{constructor(){super({zoom:null,center:null,rotation:null,fitRequest:null,fitLayerRequest:null,layers:[]});const{MapService:e,GeoResourceService:t,LayerService:n,EnvironmentService:r,OlMeasurementHandler:i,OlDrawHandler:o,OlGeolocationHandler:a,OlHighlightLayerHandler:s,OlFeatureInfoHandler:c,OlElevationProfileHandler:l,OlOverlayMapHandler:d,OlMfpHandler:u,OlRoutingHandler:g,OlSelectableFeatureHandler:h,TranslationService:p,OlLayerSwipeHandler:m}=v.z.inject("MapService","GeoResourceService","LayerService","EnvironmentService","OlMeasurementHandler","OlDrawHandler","OlGeolocationHandler","OlHighlightLayerHandler","OlFeatureInfoHandler","OlElevationProfileHandler","OlOverlayMapHandler","OlMfpHandler","OlRoutingHandler","OlSelectableFeatureHandler","TranslationService","OlLayerSwipeHandler");this._mapService=e,this._layerService=n,this._environmentService=r,this._geoResourceService=t,this._layerHandler=new Map([[i.id,i],[a.id,a],[s.id,s],[o.id,o],[u.id,u],[g.id,g]]),this._mapHandler=new Map([[c.id,c],[l.id,l],[d.id,d],[h.id,h],[m.id,m]]),this._translationService=p}update(e,t,n){switch(e){case C:return{...n,...t};case N:return{...n,layers:t}}}createView(){const e=e=>this._translationService.translate(e);return r.qy`
			<style>
				${a()+c()}
			</style>
			<div
				data-test-id
				id="ol-map"
				class="${(()=>this._environmentService.isEmbedded()?"is-embedded":"")()}"
				aria-label="${e("olMap_map")}"
				aria-roledescription="${e("olMap_map")}"
				tabindex="0"
			></div>
		`}onInitialize(){this.observe((e=>e.position),(e=>this.signal(C,e))),this.observe((e=>e.layers.active),(e=>this.signal(N,e))),this.observe((e=>e.media.portrait),(()=>this._map.updateSize()),!1);const{zoom:e,center:t,rotation:n}=this.getModel();this._view=new l.Ay({center:t,zoom:e,rotation:n,minZoom:this._mapService.getMinZoomLevel(),maxZoom:this._mapService.getMaxZoomLevel(),constrainRotation:!1,constrainResolution:!this._environmentService.isTouch()}),this._view.on("change:rotation",(e=>{(0,_.FA)(e.target.getRotation())})),this._view.on("change:center",(e=>{(0,_.sQ)(e.target.getCenter())})),this._view.on("change:resolution",(e=>{(0,_.CI)(e.target.getZoom())})),this._map=new d.A({layers:[],view:this._view,controls:(0,u.N)({attribution:!1,zoom:!1,rotate:!1}).extend([new g.A({target:this._mapService.getScaleLineContainer()})]),moveTolerance:this._environmentService.isTouch()?3:1,interactions:(0,h.N)({pinchRotate:!1}).extend([new p.A({threshold:this._mapService.getMinimalRotation()})])}),this._map.on("movestart",(()=>{I().dispatch({type:M.i8,payload:new b.MD("movestart")}),A(!0)})),this._map.on("moveend",(()=>{this._view&&this._syncStore(),w(!1),I().dispatch({type:M.Xd,payload:new b.MD("moveend")}),A(!1)}));const r=e=>{if(0===[...this._layerHandler.values()].filter((e=>e.active)).filter((e=>e.options.preventDefaultClickHandling)).length){e.preventDefault();t={coordinate:this._map.getEventCoordinate(e.originalEvent),screenCoordinate:[e.originalEvent.clientX,e.originalEvent.clientY]},f().dispatch({type:S.a6,payload:new b.MD(t)})}var t},i=e=>{if(0===[...this._layerHandler.values()].filter((e=>e.active)).filter((e=>e.options.preventDefaultContextClickHandling)).length){e.preventDefault();t={coordinate:this._map.getEventCoordinate(e.originalEvent),screenCoordinate:[e.originalEvent.clientX,e.originalEvent.clientY]},f().dispatch({type:S.SM,payload:new b.MD(t)})}var t};this._environmentService.isTouch()?(0,y.nf)(this._map,i,r):(this._map.on("contextmenu",i),this._map.on("singleclick",r)),this._map.on("pointermove",(e=>{if(e.dragging)return;var t;t={coordinate:this._map.getEventCoordinate(e.originalEvent),screenCoordinate:[e.originalEvent.clientX,e.originalEvent.clientY]},f().dispatch({type:S.Fw,payload:new b.MD(t)})})),this._map.on("pointerdrag",(()=>{w(!0)})),this._mapHandler.forEach((e=>{e.register(this._map)})),this.observeModel(["fitRequest","fitLayerRequest"],(e=>this._fitToExtent(e))),this.observeModel("layers",(()=>this._syncLayers())),this.observeModel(["zoom","center","rotation"],(()=>this._syncView()))}onDisconnect(){this._map?.setTarget(null),this._map=null,this._view=null}onModelChanged(){}_syncStore(){(0,_.uj)({zoom:this._view.getZoom(),center:this._view.getCenter(),rotation:this._view.getRotation()})}_syncView(){const{zoom:e,center:t,rotation:n}=this.getModel(),r=this._map.getView();(0,b.aI)(e,(0,x.qL)(r.getZoom()))&&(0,b.aI)(t,(0,x.OB)(r.getCenter()))&&(0,b.aI)(n,(0,x.FW)(r.getRotation()))||this._view.animate({zoom:e,center:t,rotation:n,duration:200})}_syncLayers(){const{layers:e}=this.getModel(),t=e.map((e=>e.id)),n=this._map.getLayers().getArray().map((e=>e.get("id"))),r=t.filter((e=>n.includes(e))),i=t.filter((e=>!n.includes(e))),o=n.filter((e=>!t.includes(e))),a=e=>{e.getSource()instanceof L.A&&e.getSource().clear()};o.forEach((e=>{const t=(0,y.SU)(this._map,e);t&&(this._map.removeLayer(t),this._layerHandler.has(e)&&this._layerHandler.get(e).deactivate(this._map),t instanceof E.A?t.getLayers().forEach(a):a(t))})),i.forEach((t=>{const n=e.find((e=>e.id===t))?.geoResourceId,r=this._geoResourceService.byId(n);r?.getType()===T.Fl.FUTURE&&r.get().then((n=>{const r=this._layerService.toOlLayer(t,n,this._map),i=e.find((e=>e.id===t));(0,y.Y5)(r,i),this._map.getLayers().remove((0,y.SU)(this._map,t)),r.setZIndex(i.zIndex),this._map.addLayer(r)})),((t,n)=>{const r=n?this._layerService.toOlLayer(t,n,this._map):this._layerHandler.has(t)?(0,y.wX)(t,this._layerHandler.get(t),this._map):null;if(r){const n=e.find((e=>e.id===t));(0,y.Y5)(r,n),r.setZIndex(n.zIndex),this._map.addLayer(r)}else console.warn(`Could not add an olLayer for id '${t}'`),(0,m.e5)(t)})(t,r)})),r.forEach((t=>{const n=e.find((e=>e.id===t)),r=(0,y.SU)(this._map,t);(0,y.Y5)(r,n),r.setZIndex(n.zIndex)}))}_fitToExtent(e){const t=()=>{this._syncStore()},n=()=>{const n=(0,y.SU)(this._map,e.payload.id)?.getSource?.()?.getExtent?.()??e.payload.extent;if(n&&!(0,D.Im)(n)){const r=e.payload.options.maxZoom??this._view.getMaxZoom(),i=this._mapService.getVisibleViewport(this._map.getTarget()),o=e.payload.options.useVisibleViewport?[i.top+k.DEFAULT_PADDING_PX[0],i.right+k.DEFAULT_PADDING_PX[1],i.bottom+k.DEFAULT_PADDING_PX[2],i.left+k.DEFAULT_PADDING_PX[3]]:k.DEFAULT_PADDING_PX;this._view.fit(n,{maxZoom:r,callback:t,padding:o})}};if(e.payload.id){const{layers:t}=this.getModel(),r=t.find((t=>t.id===e.payload.id))?.geoResourceId,i=this._geoResourceService.byId(r);i instanceof T.fX?i.onResolve((()=>setTimeout((()=>n())))):n()}else n()}onAfterRender(e){e&&this._map.setTarget(this.shadowRoot.getElementById("ol-map"))}static get tag(){return"ba-ol-map"}static get DEFAULT_PADDING_PX(){return Array.of(10,10,10,10)}}},70402:(e,t,n)=>{"use strict";n.d(t,{I:()=>r});const r=(e=[],t=0)=>{const n=e.map((e=>e?.getAttribution(t))).filter((e=>!!e)).flat().reverse().map((e=>Array.isArray(e.copyright)?e.copyright:[e?.copyright])).flat().filter((e=>!!e));return n.filter(((e,t)=>n.findIndex((t=>t.label===e.label))===t))}},71275:(e,t,n)=>{var r=n(67167);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},71424:(e,t,n)=>{"use strict";var r=n(18410),i=n(14644),o=n(93003),a=n(14629),s=n(38297);const c="network/fetching",l={pendingRequests:0,fetching:!1,offline:!1},d=(e=l,t)=>{const{type:n,payload:r}=t;switch(n){case c:{const{pendingRequests:t}=e,n=r?t+1:Math.max(0,t-1),i=n>0;return{...e,pendingRequests:n,fetching:i}}case"network/offline":return{...e,offline:r}}return e};var u=n(62253),g=n(1175),h=n(91875),p=n(22295),m=n(86407),_=n(86731),v=n(48471),y=n(49105);const b="shared/termsOfUsAcknowledged",S={termsOfUseAcknowledged:!1},f=(e=S,t)=>{const{type:n,payload:r}=t;return n===b?{...e,termsOfUseAcknowledged:r}:e};var w=n(83739),M=n(56851),I=n(79071),A=n(39043),L=n(1473),E=n(9525),T=n(73469),x=n(31507),D=n(6727),C=n(55171),N=n(61263),k=n(13869);const z="chips/current",R={current:[]},j=(e=R,t)=>{const{type:n,payload:r}=t;return n===z?{...e,current:[...r]}:e};var O=n(47518);const P="stateForEncoding/changed",$={changed:new O.MD(null)},F=(e=$,t)=>{const{type:n,payload:r}=t;return n===P?{...e,changed:r}:e},G="iframeContainer/contentChanged",U={content:null,active:!1},Y=(e=U,t)=>{const{type:n,payload:r}=t;return n===G?{...e,content:r,active:!!r}:e};var H=n(44651);const B="auth/statusChanged",V={signedIn:!1,byUser:!1},W=(e=V,t)=>{const{type:n,payload:r}=t;if(n===B){const{signedIn:t,byUser:n}=r;return{...e,signedIn:t,byUser:n}}return e},Z="wcAttribute/changed",Q={changed:new O.MD(null)},q=(e=Q,t)=>{const{type:n,payload:r}=t;return n===Z?{...e,changed:r}:e},K="fileStorage/adminId",X="fileStorage/data",J="fileStorage/latest",ee="fileStorage/latestAndFileId",te="fileStorage/latestAndFAdminAndFileId",ne={adminId:null,fileId:null,data:null,latest:new O.MD({success:!1,created:null,lastSaved:null})},re=(e=ne,t)=>{const{type:n,payload:r}=t;switch(n){case K:{const{adminId:t,fileId:n}=r;return{...e,adminId:t,fileId:n}}case X:return{...e,data:r};case"fileStorage/clear":return ne;case J:return{...e,latest:r};case ee:return{...e,latest:r.latest,fileId:r.fileId};case te:return{...e,latest:r.latest,adminId:r.adminId,fileId:r.fileId}}return e};var ie=n(14983),oe=n(92327),ae=n(18407),se=n(9559),ce=n(96293);const le=73,de=79,ue=.9996;function ge(e){return e*(Math.PI/180)}function he(e){const t=e.lat,n=e.lon,r=6378137,i=ge(t),o=ge(n);let a;a=Math.floor((n+180)/6)+1,180===n&&(a=60),t>=56&&t<64&&n>=3&&n<12&&(a=32),t>=72&&t<84&&(n>=0&&n<9?a=31:n>=9&&n<21?a=33:n>=21&&n<33?a=35:n>=33&&n<42&&(a=37));const s=ge(6*(a-1)-180+3),c=.006739496752268451,l=r/Math.sqrt(1-.00669438*Math.sin(i)*Math.sin(i)),d=Math.tan(i)*Math.tan(i),u=c*Math.cos(i)*Math.cos(i),g=Math.cos(i)*(o-s),h=r*(.9983242984503243*i-.002514607064228144*Math.sin(2*i)+2639046602129982e-21*Math.sin(4*i)-3.418046101696858e-9*Math.sin(6*i)),p=ue*l*(g+(1-d+u)*g*g*g/6+(5-18*d+d*d+72*u-58*c)*g*g*g*g*g/120)+5e5;let m=ue*(h+l*Math.tan(i)*(g*g/2+(5-d+9*u+4*u*u)*g*g*g*g/24+(61-58*d+d*d+600*u-2.2240339282485886)*g*g*g*g*g*g/720));return t<0&&(m+=1e7),{northing:Math.trunc(m),easting:Math.trunc(p),zoneNumber:a,zoneLetter:pe(t)}}function pe(e){if(e<=84&&e>=72)return"X";if(e<72&&e>=-80){const t=8,n=-80;return"CDEFGHJKLMNPQRSTUVWX"[Math.floor((e-n)/t)]}return e>84||e<-80?"Z":void 0}var me=n(55286),_e=n(42376);const ve=(e,t,n,r={})=>{const{global:i,code:o,digits:a,id:s}=t;if(i){const i=(e,i)=>{const o=n(i,3857,4326);switch(e){case me.I.SphericalMercator.id:return Se(a,!0)(i);case me.I.WGS84.id:return ye(r.digits??t.digits)(o);case me.I.UTM.id:{const{northing:e,easting:t,zoneNumber:n,zoneLetter:r}=he({lat:o[1],lon:o[0]});return`${n}${r} ${t} ${e}`}case me.I.MGRS.id:return function(e,t){if(t="number"==typeof t?t:5,!Array.isArray(e))throw new TypeError("forward did not receive an array");if("string"==typeof e[0]||"string"==typeof e[1])throw new TypeError("forward received an array of strings, but it only accepts an array of numbers.");const[n,r]=e;if(n<-180||n>180)throw new TypeError(`forward received an invalid longitude of ${n}`);if(r<-90||r>90)throw new TypeError(`forward received an invalid latitude of ${r}`);if(r<-80||r>84)throw new TypeError(`forward received a latitude of ${r}, but this library does not support conversions of points in polar regions below 80°S and above 84°N`);return function(e,t){const n="00000"+e.easting,r="00000"+e.northing;return e.zoneNumber+e.zoneLetter+function(e,t,n){const r=function(e){let t=e%6;return 0===t&&(t=6),t}(n);return function(e,t,n){const r=n-1,i="AJSAJS".charCodeAt(r),o="AFAFAF".charCodeAt(r);let a=i+e-1,s=o+t,c=!1;return a>90&&(a=a-90+65-1,c=!0),(a===le||i<le&&a>le||(a>le||i<le)&&c)&&a++,(a===de||i<de&&a>de||(a>de||i<de)&&c)&&(a++,a===le&&a++),a>90&&(a=a-90+65-1),s>86?(s=s-86+65-1,c=!0):c=!1,(s===le||o<le&&s>le||(s>le||o<le)&&c)&&s++,(s===de||o<de&&s>de||(s>de||o<de)&&c)&&(s++,s===le&&s++),s>86&&(s=s-86+65-1),String.fromCharCode(a)+String.fromCharCode(s)}(Math.floor(e/1e5),Math.floor(t/1e5)%20,r)}(e.easting,e.northing,e.zoneNumber)+n.substr(n.length-5,t)+r.substr(r.length-5,t)}(he({lat:r,lon:n}),t)}(o)}};return i(s,e)}return be(o,r.digits??t.digits,n)(n(e,3857,o))},ye=e=>t=>Se(e,!0)(t.slice(0,2).reverse()),be=(e,t,n)=>31468===e?e=>Se(t)(e):r=>{var i;return`${25832===e?"32":"33"}${(i=n(r,e,4326))[1]<54&&i[1]>=48?"U":i[1]<48&&i[1]>=42?"T":""} ${Se(t)(r)}`},Se=(e,t=!1)=>{const n=n=>t?(0,_e.Rt)(n,e):n;return t=>`${n(t[0].toFixed(e))} ${n(t[1].toFixed(e))}`};var fe=n(70915),we=n(16800),Me=n(11217),Ie=n(34142),Ae=n(28353),Le=n(13387);const Ee=Object.freeze({ELEVATION_PROFILE:"elevationProfile"});class Te{constructor(e=ve){this._stringifyFunction=e;const{ProjectionService:t}=r.z.inject("ProjectionService");this._projectionService=t}static _toEpsgCodeString(e){return"EPSG:"+e}toLonLat(e){return(0,ce.WP)(e)}fromLonLat(e){return(0,ce.Rb)(e)}toLonLatExtent(e){return(0,ce.DI)(e,"EPSG:3857","EPSG:4326")}fromLonLatExtent(e){return(0,ce.DI)(e,"EPSG:4326","EPSG:3857")}transform(e,t,n){const r=Te._toEpsgCodeString(n),i=Te._toEpsgCodeString(t);if(this._projectionService.getProjections().includes(n))return(0,ce.pd)(e,i,r);throw new Error("Unsupported SRID: "+n)}transformExtent(e,t,n){const r=Te._toEpsgCodeString(n),i=Te._toEpsgCodeString(t);if(this._projectionService.getProjections().includes(n))return(0,ce.DI)(e,i,r);throw new Error("Unsupported SRID: "+n)}stringify(e,t,n){return this._stringifyFunction(e,t,((e,t,n)=>this.transform(e,t,n)),n)}buffer(e,t){return[...(0,fe.r)(e,t)]}getCenter(e){return[...(0,fe.q1)(e)]}containsCoordinate(e,t){return(0,fe.Ym)(e,t)}simplify(e,t){const n=()=>{throw new Error("Cannot simplify coordinate, value is not a Coordinates type")};if(Array.isArray(e)||n(),e.forEach((e=>{(0,Ae.Xq)(e)||n()})),t===Ee.ELEVATION_PROFILE)return(0,we.p2)(new Me.A(e));throw new Error(`Unsupported simplification type: ${t}`)}toCoordinate(e){const t=()=>{throw new Error("Cannot convert value to coordinate, value is not a CoordinateLike type")};if(e){if(Array.isArray(e)&&0===e.length)return e}else t();const n=!Array.isArray(e[0]),r=n?[e]:e;r.forEach((e=>{(0,Ae._2)(e)||t()}));const i=r.map((e=>e.slice(0,2)));return n?i[0]:i}getLength(e,t=!0){return t?(e=>{const t=Le.Geodesic.WGS84;return e.reduce(((e,n,r,i)=>{if(r===i.length-1)return e;const o=i[r+1];return e+t.Inverse(n[1],n[0],o[1],o[0]).s12}),0)})(e):new Me.A(e).getLength()}getArea(e,t=!0){return t?(e=>{const t=new Le.PolygonArea.PolygonArea(Le.Geodesic.WGS84);return e.reduce(((e,n,r)=>{t.Clear(),n.forEach((([e,n])=>t.AddPoint(n,e)));const i=t.Compute(!1,!0);return 0===r?e+Math.abs(i.area):e-Math.abs(i.area)}),0)})(e):new Ie.Ay(e).getArea()}}var xe=n(40781),De=n(37875);const Ce=e=>{(()=>{const{StoreService:e}=r.z.inject("StoreService");return e.getStore()})().dispatch({type:c,payload:e})};var Ne=n(24973),ke=n(36752),ze=n(44668);class Re{constructor(){this._queue=Promise.resolve(!0)}async add(e){return new Promise(((t,n)=>{this._queue=this._queue.then(e).then(t).catch(n)}))}}const je=Object.freeze({PLUS:"Plus"});var Oe=n(2277);const Pe=async(e=null)=>{const t=[je.PLUS],{StoreService:n,HttpService:i,ConfigService:o}=r.z.inject("StoreService","HttpService","ConfigService"),a=async e=>{const t=await i.post(`${o.getValueAsPath("BACKEND_URL")}auth/signin`,JSON.stringify(e),ze.z.JSON);switch(t.status){case 200:return await t.json();case 400:return!1;default:throw new Error(`Sign in not possible: Http-Status ${t.status}`)}};return e?a(e):new Promise((e=>{const r=(0,O.lB)(n.getStore(),(e=>e.modal),(e=>(({active:e})=>{e||i(null)})(e))),i=async(t,n)=>{r(),(0,Ne.Oo)(),e(t&&n?n:[])};(0,Ne.qf)(Ge(t),Ue(a,i,t))}))},$e=async()=>{const{HttpService:e,ConfigService:t,TranslationService:n}=r.z.inject("HttpService","ConfigService","TranslationService"),i=await e.get(`${t.getValueAsPath("BACKEND_URL")}auth/signout`);switch(i.status){case 200:case 403:return(0,Oe.L)(`${n.translate("global_signOut_success")}`,Oe.A.INFO),!0;default:throw new Error(`Sign out not possible: Http-Status ${i.status}`)}},Fe=async()=>{const{HttpService:e,ConfigService:t}=r.z.inject("HttpService","ConfigService"),n=await e.get(`${t.getValueAsPath("BACKEND_URL")}auth/roles`);if(200===n.status)return await n.json();throw new Error(`Could not fetch current roles: Http-Status ${n.status}`)},Ge=e=>{const{TranslationService:t}=r.z.inject("TranslationService");return ke.qy`${t.translate("global_import_authenticationModal_title")}&nbsp;
	${e.map((e=>ke.qy`<ba-badge .size=${"1.5"} .color=${"var(--text3)"} .background=${"var(--primary-color)"} .label=${e}></ba-badge>`))} `},Ue=(e,t,n)=>{const r=n.includes(je.PLUS)?ke.qy`<ba-auth-password-credential-bvv-footer></ba-auth-password-credential-bvv-footer>`:null;return ke.qy`<ba-auth-password-credential-panel
		.authenticate=${e}
		.onClose=${t}
		.footer=${r}
		.useForm=${!0}
	></ba-auth-password-credential-panel>`},Ye=new Re,He=new Set,Be=(e=[],t=null,n=1e4,r=We)=>async(i,o)=>401===i.status?await Ye.add((()=>r(i,o,e,t,n))):i,Ve=(e=1e4,t=We)=>async(n,i)=>{const o=n.headers.get("x-auth-role-downgrade"),{AuthService:a}=r.z.inject("AuthService");return o?(a.invalidate(),await Ye.add((()=>t(n,i,o.split(","),"bvvAuthRoleDowngradeInterceptorProvider",e)))):n},We=(e,t,n=[],i=null,o=1e4)=>new Promise((a=>{const{StoreService:s,AuthService:c}=r.z.inject("StoreService","AuthService"),l=(0,O.lB)(s.getStore(),(e=>e.modal),(e=>(({active:e})=>{e||d(null)})(e))),d=async(n,r)=>{if(l(),(0,Ne.Oo)(),n&&r){const e=await t();a(e)}else a(e)};c.isSignedIn()?a(t()):He.has(i)?a(e):(i&&(He.add(i),setTimeout((()=>{He.delete(i)}),o)),(0,Ne.qf)(Ge(n),Ue((async e=>!!await c.signIn(e)),d,n)))})),Ze=()=>{const{ConfigService:e}=r.z.inject("ConfigService");return[`${e.getValueAsPath("BACKEND_URL")}sourceType`]},Qe={response:[]};class qe{static get DEFAULT_REQUEST_MODE(){return"cors"}static get DEFAULT_TIMEOUT(){return 1e4}async fetch(e,t={},n=new AbortController,r=Qe){const i=async()=>{const{timeout:r=qe.DEFAULT_TIMEOUT}=t,i=setTimeout((()=>n.abort()),r),o=await fetch(e,{...t,signal:n.signal});return clearTimeout(i),o};return r.response.length>0?await(async(e,t,n,r)=>{let i;for(const o of e)i=await o(i??t,n,r);return i})(r.response,await i(),i,e):i()}async get(e,t={},n=Qe){const r={mode:qe.DEFAULT_REQUEST_MODE,...t};return this.fetch(e,r,void 0,n)}async delete(e,t={}){const n={mode:qe.DEFAULT_REQUEST_MODE,method:"DELETE",...t};return this.fetch(e,n)}async post(e,t,n,r={},i=Qe){const o={mode:qe.DEFAULT_REQUEST_MODE,method:"POST",body:t,headers:{"Content-Type":n},...r};return this.fetch(e,o,void 0,i)}async head(e,t={},n=Qe){const r={mode:qe.DEFAULT_REQUEST_MODE,method:"HEAD",...t};return this.fetch(e,r,void 0,n)}}class Ke extends qe{async fetch(e,t={},n=new AbortController,r=Qe){Ce(!0);try{return await super.fetch(e,t,n,r)}finally{Ce(!1)}}}class Xe extends Ke{#v;#y;constructor(e=Ze){super();const{AuthService:t,ConfigService:n}=r.z.inject("AuthService","ConfigService");this.#v=t,this.#y=n,this._ignorePathProvider=e}async fetch(e,t={},n=new AbortController,r=Qe){return super.fetch(e,t,n,{response:[async t=>(401===t.status&&e.trim().startsWith(this.#y.getValueAsPath("BACKEND_URL"))&&!this._ignorePathProvider().find((t=>e.trim().includes(t)))&&this.#v.invalidate(),t),...r.response]})}}var Je=n(19366),et=n(28288),tt=n(65394);class nt{#s;#y;constructor(){const{EnvironmentService:e,ConfigService:t}=r.z.inject("EnvironmentService","ConfigService");this.#s=e,this.#y=t}async copyToClipboard(e){if(this.#s.getWindow().isSecureContext)return this.#s.getWindow().navigator.clipboard.writeText(e);throw new Error("Clipboard API is not available")}_mergeExtraParams(e,t){for(const[n,r]of Object.entries(t))if(Object.keys(e).includes(n)){if(Array.isArray(e[n])){const t=Array.isArray(r)?[...r]:[r];e[n]=[...e[n],...t]}}else e[n]=r;return e}getParameters(e={includeHiddenGeoResources:!1}){const t={...this._extractPosition(),...this._extractLayers(e),...this._extractTopic(),...this._extractCatalogNodes(),...this._extractRoute(),...this._extractTool(),...this._extractCrosshair(),...this._extractMainMenu(),...this._extractSwipeRatio(),...this._extractGeolocation()};return new Map(Object.entries(t))}encodeState(e={},t=[]){return this.encodeStateForPosition({},e,t)}encodeStateForPosition(e,t={},n=[]){const{center:r,zoom:i,rotation:o}=e,a=this._mergeExtraParams({...this._extractPosition(r,i,o),...this._extractLayers({includeHiddenGeoResources:!1}),...this._extractTopic(),...this._extractCatalogNodes(),...this._extractRoute(),...this._extractTool(),...this._extractCrosshair(),...this._extractMainMenu(),...this._extractSwipeRatio(),...this._extractGeolocation()},t),s=`${(0,Je.$z)(this.#y.getValueAsPath("FRONTEND_URL"))}/${(0,Je.eD)(this.#y.getValueAsPath("FRONTEND_URL")).filter((e=>!e.endsWith(".html"))).join("/")}`,c=new URLSearchParams(a),l=n.length?[...n]:[];return`${s}${s.endsWith("/")?"":"/"}${l.join("/")}?${decodeURIComponent(c.toString())}`}_extractPosition(e,t,n){const{StoreService:i,CoordinateService:o,MapService:a}=r.z.inject("StoreService","CoordinateService","MapService"),s={},c=i.getStore().getState(),l=e??c.position.center,d=t??c.position.zoom,u=n??c.position.rotation,{digits:g,code:h}=a.getCoordinateRepresentations(l).filter((e=>e.code)).filter((e=>e.code===a.getLocalProjectedSrid()))[0]??me.I.WGS84,p=o.transform(l,a.getSrid(),h).map((e=>e.toFixed(g))),m=(0,_e.LI)(d,nt.ZOOM_LEVEL_PRECISION),_=(0,_e.LI)(u,nt.ROTATION_VALUE_PRECISION);return s[xe.h.CENTER]=p,s[xe.h.ZOOM]=m,s[xe.h.ROTATION]=_,s}_extractLayers(e={includeHiddenGeoResources:!1}){const{StoreService:t,GeoResourceService:n}=r.z.inject("StoreService","GeoResourceService"),i=t.getStore().getState(),o={},{layers:{active:a},tools:{current:s}}=i,c=[];let l=[],d=[],u=[],g=[],h=[],p=[];return a.filter((e=>!e.constraints.hidden)).filter((t=>!!e.includeHiddenGeoResources||!n.byId(t.geoResourceId).hidden)).forEach((e=>{c.push(e.geoResourceId),l.push(e.visible),d.push(e.opacity),u.push(e.timestamp),g.push(e.constraints.swipeAlignment),h.push(e.style?.baseColor),p.push(e.constraints.filter)})),l.some((e=>!1===e))||(l=null),d.some((e=>1!==e))||(d=null),u.some((e=>e))||(u=null),s!==tt.S.COMPARE&&(g=null),h.some((e=>e))||(h=null),p.some((e=>e))||(p=null),o[xe.h.LAYER]=c.map((e=>encodeURIComponent(e))),l&&(o[xe.h.LAYER_VISIBILITY]=l),d&&(o[xe.h.LAYER_OPACITY]=d),u&&(o[xe.h.LAYER_TIMESTAMP]=u.map((e=>null===e?"":e))),g&&(o[xe.h.LAYER_SWIPE_ALIGNMENT]=g),h&&(o[xe.h.LAYER_STYLE]=h.map((e=>e??""))),p&&(o[xe.h.LAYER_FILTER]=p.map((e=>e?encodeURIComponent(e):""))),o}_extractTopic(){const{StoreService:e}=r.z.inject("StoreService"),t=e.getStore().getState(),n={},{topics:{current:i}}=t;return i&&(n[xe.h.TOPIC]=i),n}_extractCatalogNodes(){const{StoreService:e}=r.z.inject("StoreService"),t=e.getStore().getState(),n={},{catalog:{openNodes:i}}=t;return i.length>0&&(n[xe.h.CATALOG_NODE_IDS]=i),n}_extractRoute(){const{StoreService:e}=r.z.inject("StoreService"),t=e.getStore().getState(),n={},{routing:{waypoints:i,categoryId:o}}=t;if(i.length>0){const{MapService:e}=r.z.inject("MapService"),{digits:t}=Object.values(me.I).filter((t=>t.code===e.getSrid()))[0];n[xe.h.ROUTE_WAYPOINTS]=i.map((e=>e.map((e=>e.toFixed(t))))),n[xe.h.ROUTE_CATEGORY]=o}return n}_extractTool(){const{StoreService:e}=r.z.inject("StoreService"),t=e.getStore().getState(),n={},{tools:{current:i}}=t;return i&&(n[xe.h.TOOL_ID]=i),n}_extractMainMenu(){const{StoreService:e}=r.z.inject("StoreService"),t=e.getStore().getState(),n={},{mainMenu:{tab:i}}=t;return(0,Ae.Et)(i)&&(n[xe.h.MENU_ID]=i),n}_extractCrosshair(){const{StoreService:e}=r.z.inject("StoreService"),t=e.getStore().getState(),n={},{highlight:{features:i}}=t;if(1===i.filter((e=>e.id===et.bE)).length){const{MapService:e}=r.z.inject("MapService"),{digits:t}=Object.values(me.I).filter((t=>t.code===e.getSrid()))[0],o=i.find((e=>e.id===et.bE)).data.map((e=>e.toFixed(t)));n[xe.h.CROSSHAIR]=[!0,...o]}return n}_extractGeolocation(){const{StoreService:e}=r.z.inject("StoreService"),t=e.getStore().getState(),n={},{geolocation:{active:i}}=t;return i&&(n[xe.h.GEOLOCATION]=!0),n}_extractSwipeRatio(){const{StoreService:e}=r.z.inject("StoreService"),t=e.getStore().getState(),n={},{layerSwipe:{active:i,ratio:o}}=t;return i&&(n[xe.h.SWIPE_RATIO]=o/100),n}static get ZOOM_LEVEL_PRECISION(){return 3}static get ROTATION_VALUE_PRECISION(){return 4}}const rt=1e6,it=()=>{const{ConfigService:e}=r.z.inject("ConfigService");return[e.getValue("DEFAULT_LANG"),"en"]},ot=e=>({minimumFractionDigits:e,maximumFractionDigits:e}),at=e=>{const t=it();return e>999?(e=>{const n=ot(2),r=Math.round(e/1e3*100)/100;return{value:r,localizedValue:r.toLocaleString(t,n),unit:"km"}})(e):(n=>{const r=ot(1),i=0!==e?Math.round(100*n)/100:0;return{value:i,localizedValue:0!==e?i.toLocaleString(t,r):"0",unit:"m"}})(e)},st=e=>{const t=it(),n=0!==e?Math.round(10*e)/10:0;return{value:n,localizedValue:0!==e?n.toLocaleString(t,ot(1)):"0",unit:"°"}},ct=e=>{const t=it();return e<.5?{value:0,localizedValue:"0",unit:"m²"}:e>=rt?(e=>{const n=Math.round(e/rt*100)/100;return{value:n,localizedValue:n.toLocaleString(t,ot(3)),unit:"km²"}})(e):(e=>{const n=e>1?Math.round(100*e)/100:1;return{value:n,localizedValue:n.toLocaleString(t,ot(0)),unit:"m²"}})(e)};var lt=n(94447);const dt=Object.freeze({KML:"application/vnd.google-earth.kml+xml"});class ut{constructor(){const{HttpService:e,ConfigService:t}=r.z.inject("HttpService","ConfigService");this._httpService=e,this._configService=t}_getFileStorageUrl(){return this._configService.getValueAsPath("BACKEND_URL")+"files"}_getKeyByValue(e,t){return Object.keys(e).find((n=>e[n]===t))}isAdminId(e){return!!e&&e.startsWith("a_")}isFileId(e){return!!e&&e.startsWith("f_")}async getFileId(e){if(this.isFileId(e))return e;const t=`${this._getFileStorageUrl()}/${e}`,n=await this._httpService.get(t);if(n.ok){const{fileId:e}=await n.json();if(e)return e}throw new Error("FileId could not be retrieved: "+t)}async get(e){const t=`${this._getFileStorageUrl()}/${e}`,n=await this._httpService.get(t);if(n.ok){const e=this._getKeyByValue(dt,n.headers.get("Content-Type"));if(e)return{data:await n.text(),type:dt[e],srid:4326};throw new Error("Content-Type "+n.headers.get("Content-Type")+" currently not supported")}throw new Error("File could not be loaded: "+t)}async save(e,t,n){if(n===dt.KML){const r=e?`${this._getFileStorageUrl()}/${e}`:this._getFileStorageUrl(),i=await this._httpService.post(r,t,n,{timeout:2e4});if(i.ok){const e=await i.json();return{adminId:e.adminId,fileId:e.fileId}}throw new Error("File could not be saved: "+r)}throw new Error("Content-Type "+n+" currently not supported")}}var gt=n(51207),ht=n(78314);const pt=e=>{const{FileStorageService:t}=r.z.inject("FileStorageService");return t.isAdminId(e)||t.isFileId(e)?new lt.fX(e,(e=>async()=>{const{FileStorageService:t}=r.z.inject("FileStorageService");try{const n=await t.getFileId(e),{data:r,type:i,srid:o}=await t.get(n);if(i===dt.KML)return new lt.HA(e,null,lt.Vz.KML).setSource(r,o).setAttributionProvider(gt.Ve);throw new ht.o(`Unsupported FileStorageServiceDataType '${i}'`,e)}catch(t){if(t instanceof ht.o)throw t;throw new ht.o(`Could not load vector data for id '${e}'`,e,null,{cause:t})}})(e)):null};var mt=n(63103),_t=n(89707);const vt="tpo_mono",yt="bmde_vector",bt="bmde_vector_relief";class St{#v;#s;constructor(e=mt.ZZ,t=[mt.tH,pt,mt.E4],n=Be){this._provider=e,this._byIdProvider=t,this._authResponseInterceptorProvider=n,this._geoResources=null;const{EnvironmentService:i,AuthService:o}=r.z.inject("EnvironmentService","AuthService");this.#v=o,this.#s=i}async init(){if(!this._geoResources)try{this._geoResources=(await this._provider()).map((e=>this._proxify(e)))}catch(e){this._geoResources=[],this.#s.isStandalone()?(console.warn("GeoResources could not be fetched from backend. Using fallback geoResources ..."),this._geoResources.push(...this._newFallbackGeoResources())):console.error("GeoResources could not be fetched from backend.",e)}return this._geoResources}all(){return this._geoResources?this._geoResources:(console.warn("GeoResourceService not yet initialized"),[])}byId(e){return this._geoResources?e&&this._geoResources.find((t=>t.id===e))||null:(console.warn("GeoResourceService not yet initialized"),null)}asyncById(e){for(const t of this._byIdProvider){const n=t(e);if(n?.id===e)return this.addOrReplace(n),n}return null}addOrReplace(e){const t=this._proxify(e),n=this._geoResources.find((t=>t.id===e.id));if(n){const e=this._geoResources.indexOf(n);this._geoResources.splice(e,1,t)}else this._geoResources.push(t);return(0,_t.Ek)(t),t}isAllowed(e){const t=this.byId(e);return!t||(t instanceof lt.DJ&&0===t.authRoles.length?!t.geoResourceIds.some((e=>!this.isAllowed(e))):0===t.authRoles.length||t.authRoles.filter((e=>this.#v.getRoles().includes(e))).length>0)}getKeywords(e){const t=this.byId(e);return t?t instanceof lt.DJ&&0===t.authRoles.length?[...new Set(t.geoResourceIds.map((e=>this.getKeywords(e))).flat())]:[...t.authRoles]:[]}resolve(e){return e instanceof lt.DJ?e.geoResourceIds.map((e=>this.resolve(this.byId(e)))).flat().filter((e=>!!e)):e?[e]:[]}getAuthResponseInterceptorForGeoResource(e){const t=this.byId(e)?.authRoles??[];return this._authResponseInterceptorProvider(t,e)}_newFallbackGeoResources(){return[...[new lt.X5("tpo","TopPlusOpen","https://sgx.geodatenzentrum.de/wmts_topplus_open/tile/1.0.0/web/default/WEBMERCATOR/{z}/{y}/{x}.png"),new lt.X5(vt,"TopPlusOpen monochrome","https://sgx.geodatenzentrum.de/wmts_topplus_open/tile/1.0.0/web_grau/default/WEBMERCATOR/{z}/{y}/{x}.png")].map((e=>e.setAttribution({description:"TopPlusOpen",copyright:[{label:"Bundesamt für Kartographie und Geodäsie (2024)",url:"https://www.bkg.bund.de/"},{label:"Datenquellen",url:"https://sg.geodatenzentrum.de/web_public/Datenquellen_TopPlus_Open.pdf"}]}))),...[new lt.u8(yt,"Web Vektor","https://sgx.geodatenzentrum.de/gdz_basemapde_vektor/styles/bm_web_col.json"),new lt.u8(bt,"Web Vektor Relief","https://sgx.geodatenzentrum.de/gdz_basemapde_vektor/styles/bm_web_top.json")].map((e=>e.setAttribution({description:"basemap.de Web Vektor",copyright:{label:"basemap.de / BKG 08/2022",url:"https://basemap.de/web-vektor/"}})))].map((e=>this._proxify(e)))}_proxify(e){return e[St.proxyIdentifier]?e:(0,lt.sH)(e,(t=>{"_label"===t&&(0,_t.Ek)(e.id)}),St.proxyIdentifier)}static get proxyIdentifier(){return"__geoResourceServiceProxy"}}const ft=e=>{const{ConfigService:t}=r.z.inject("ConfigService");try{const n=t.getValueAsPath("BACKEND_URL"),r=t.getValueAsPath("PROXY_URL");return e.trim().startsWith(n)||e.trim().startsWith(r)?e:`${r}?url=${encodeURIComponent(e)}`}catch(e){console.warn(e)}return e},wt=e=>{const{ConfigService:t}=r.z.inject("ConfigService");return e.trim().startsWith(t.getValueAsPath("SHORTENING_SERVICE_URL"))?`${e}.png`:`${t.getValueAsPath("SHORTENING_SERVICE_URL")}?url=${encodeURIComponent(e)}`},Mt=async e=>{const{HttpService:t,ConfigService:n}=r.z.inject("HttpService","ConfigService"),i=`${n.getValueAsPath("SHORTENING_SERVICE_URL")}?createcode=${encodeURIComponent(e)}`,o=await t.get(i);if(o.ok)return(await o.json()).shorturl;throw new Error("A short url could not be retrieved")},It=async()=>{const{HttpService:e,ConfigService:t}=r.z.inject("HttpService","ConfigService"),n=t.getValueAsPath("BACKEND_URL")+"icons",i=await e.get(`${n}/available`);if(i.ok){const e=[],t=await i.json(),o=(()=>{const{ConfigService:e}=r.z.inject("HttpService","ConfigService"),t=e.getValueAsPath("BACKEND_URL")+"icons",n=e=>t=>t===e||!!t?.endsWith(`/${e}.png`),i=(e,t)=>{const n=`${e}/${t}.png`;return()=>n};return[new Dt("rt_start",'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="rgba(9, 157, 218, 1)" viewBox="0 0 16 16"><path fill="#fff" d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/><path d="M8.028 14.624s5.203-4.931 5.203-8.671c0-6.937-10.406-6.937-10.406 0 0 3.741 5.203 8.671 5.203 8.671z" style="fill:#369dc9"/><ellipse cx="8.026" cy="5.976" rx="4.06" ry="3.981" style="opacity:.15500004;fill:#000;stroke-width:1.09297371;paint-order:stroke fill markers"/><path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z" style="fill:#fff" transform="translate(4.483 1.786)scale(.50331)"/></svg>',n("rt_start"),i(t,"rt_start"),!1),new Dt("rt_intermediate",'<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="30" height="30" viewBox="0 0 308.621 308.621"><circle cx="154.311" cy="154.311" r="142.325" style="opacity:1;fill:#369dc9;fill-opacity:1;fill-rule:nonzero;stroke:#fff;stroke-width:23.97122383;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"/><circle cx="154.311" cy="154.311" r="92.116" style="opacity:1;fill:#fff;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:22.86945724;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"/></svg>',n("rt_intermediate"),i(t,"rt_intermediate"),!1),new Dt("rt_destination",'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="rgba(9, 157, 218, 1)" viewBox="0 0 16 16"><path fill="#fff" d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/><path d="M8.028 14.624s5.203-4.931 5.203-8.671c0-6.937-10.406-6.937-10.406 0 0 3.741 5.203 8.671 5.203 8.671z" style="fill:#369dc9"/><ellipse cx="8.026" cy="5.976" rx="4.06" ry="3.981" style="opacity:.15500004;fill:#000;stroke-width:1.09297371;paint-order:stroke fill markers"/><path d="M14.778.085A.5.5 0 0 1 15 .5V8a.5.5 0 0 1-.314.464L14.5 8l.186.464-.003.001-.006.003-.023.009a12.435 12.435 0 0 1-.397.15c-.264.095-.631.223-1.047.35-.816.252-1.879.523-2.71.523-.847 0-1.548-.28-2.158-.525l-.028-.01C7.68 8.71 7.14 8.5 6.5 8.5c-.7 0-1.638.23-2.437.477A19.626 19.626 0 0 0 3 9.342V15.5a.5.5 0 0 1-1 0V.5a.5.5 0 0 1 1 0v.282c.226-.079.496-.17.79-.26C4.606.272 5.67 0 6.5 0c.84 0 1.524.277 2.121.519l.043.018C9.286.788 9.828 1 10.5 1c.7 0 1.638-.23 2.437-.477a19.587 19.587 0 0 0 1.349-.476l.019-.007.004-.002h.001" style="fill:#fff" transform="translate(5.228 3.1)scale(.35398)"/></svg>',n("rt_destination"),i(t,"rt_destination"),!1),new Dt("highlight_marker",'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="rgba(9, 157, 218, 1)" viewBox="0 0 16 16"><path fill="#fff" d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10m0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6"/><path d="M8.028 14.624s5.203-4.931 5.203-8.671c0-6.937-10.406-6.937-10.406 0 0 3.741 5.203 8.671 5.203 8.671" style="fill:#369dc9"/><ellipse cx="8.026" cy="5.976" rx="3.455" ry="3.387" style="opacity:.15500004;fill:#000;stroke-width:.93009061;paint-order:stroke fill markers"/><ellipse cx="8.032" cy="5.979" rx="2.294" ry="2.249" style="opacity:1;fill:#fff;stroke-width:.61752313;paint-order:stroke fill markers"/></svg>',n("highlight_marker"),i(t,"highlight_marker"),!1),new Dt("highlight_default",'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="rgba(9, 157, 218, 1)" viewBox="0 0 16 16"><path fill="#fff" d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10m0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6"/><path d="M8.028 14.624s5.203-4.931 5.203-8.671c0-6.937-10.406-6.937-10.406 0 0 3.741 5.203 8.671 5.203 8.671" style="fill:#369dc9"/><ellipse cx="8.026" cy="5.976" rx="3.455" ry="3.387" style="opacity:.15500004;fill:#000;stroke-width:.93009061;paint-order:stroke fill markers"/><ellipse cx="8.032" cy="5.979" rx="2.294" ry="2.249" style="opacity:1;fill:#fff;stroke-width:.61752313;paint-order:stroke fill markers"/></svg>',n("highlight_default"),i(t,"highlight_default"),!1),new Dt("highlight_marker_tmp",'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="rgba(9, 157, 218, 1)" viewBox="0 0 16 16"><path fill="#fff" d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10m0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6"/><path d="M8.028 14.624s5.203-4.931 5.203-8.671c0-6.937-10.406-6.937-10.406 0 0 3.741 5.203 8.671 5.203 8.671" style="fill:#2c5a93;fill-opacity:1"/><ellipse cx="8.026" cy="5.976" rx="3.455" ry="3.387" style="opacity:.15500004;fill:#000;stroke-width:.93009061;paint-order:stroke fill markers"/><ellipse cx="8.032" cy="5.979" rx="2.294" ry="2.249" style="opacity:1;fill:#fff;stroke-width:.61752313;paint-order:stroke fill markers"/></svg>',n("highlight_marker_tmp"),i(t,"highlight_marker_tmp"),!1),new Dt("highlight_default_tmp",'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="rgba(9, 157, 218, 1)" viewBox="0 0 16 16"><path fill="#fff" d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10m0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6"/><path d="M8.028 14.624s5.203-4.931 5.203-8.671c0-6.937-10.406-6.937-10.406 0 0 3.741 5.203 8.671 5.203 8.671" style="fill:#2c5a93;fill-opacity:1"/><ellipse cx="8.026" cy="5.976" rx="3.455" ry="3.387" style="opacity:.15500004;fill:#000;stroke-width:.93009061;paint-order:stroke fill markers"/><ellipse cx="8.032" cy="5.979" rx="2.294" ry="2.249" style="opacity:1;fill:#fff;stroke-width:.61752313;paint-order:stroke fill markers"/></svg>',n("highlight_default_tmp"),i(t,"highlight_default_tmp"),!1)]})(),a=e=>t=>t===e||!!t?.endsWith(`/${e}.png`),s=e=>t=>`${n}/${t[0]},${t[1]},${t[2]}/${e}.png`;return t.forEach((t=>{const{id:n,svg:r}=t;if(r)e.push(new Dt(n,r,a(n),s(n)));else{const t=o.find((e=>e.id===n));t?e.push(t):console.warn(`Could not find or replace a svg resource for icon '${n}'`)}})),0===e.length&&console.warn("The backend provides no icons"),e}throw new Error("Icons could not be retrieved")},At=e=>{const t=e.match(/([0-9]{0,3}),([0-9]{0,3}),([0-9]{0,3})+/g);return t?t[0].split(",").map((e=>parseInt(e))):null},Lt=e=>{const{ConfigService:t}=r.z.inject("ConfigService");return n=>{try{return`${t.getValueAsPath("BACKEND_URL")+"icons"}/${n[0]},${n[1]},${n[2]}/${e}.png`}catch(e){console.warn("No backend-information available.")}return null}},Et="data:image/svg+xml;base64,",Tt="marker",xt='<svg id="marker" xmlns="http://www.w3.org/2000/svg" width="48.0" height="48.0" viewBox="0.0 0.0 48.0 48.0" fill="rgb(255,255,255)">\x3c!-- SIL OFL 1.1 --\x3e<path d="M36.28125,19.28125Q36.28125,20.875,35.515625,23.0Q34.765625,25.125,33.828125,26.921875Q32.90625,28.71875,31.171875,31.28125Q29.453125,33.828125,28.515625,35.0625Q27.59375,36.28125,25.828125,38.609375Q24.0625,40.9375,24.0,41.0Q23.9375,40.9375,22.171875,38.609375Q20.421875,36.28125,19.484375,35.0625Q18.5625,33.828125,16.828125,31.28125Q15.109375,28.71875,14.171875,26.921875Q13.25,25.125,12.484375,23.0Q11.71875,20.875,11.71875,19.28125Q11.71875,14.375,15.53125,10.6875Q19.359375,7.0,24.0,7.0Q28.65625,7.0,32.46875,10.6875Q36.28125,14.375,36.28125,19.28125Z" /></svg>';class Dt{constructor(e,t,n=null,r=null,i=!0){this._id=e,this._svg=t,this._isMonochrome=i,this._base64=this._toBase64(),this._urlMatcher=n||(()=>!1),this._urlProvider=r||(()=>null)}_toBase64(){return Et+(e=this._svg,window.btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,((e,t)=>String.fromCharCode(Number("0x"+t))))));var e}getUrl(e){return this._urlProvider(e)}matches(e){return this._urlMatcher(e)}get id(){return this._id}get svg(){return this._svg}get base64(){return this._base64}get anchor(){return this._id===Tt?[.5,1]:[.5,.5]}get isMonochrome(){return this._isMonochrome}}var Ct=n(99887),Nt=n(34844);const kt=(e,t)=>{const n=e.getBoundingClientRect(),r=t.map((e=>e.getBoundingClientRect())),i=e=>e.left>=e.right||e.top>=e.bottom,o=(e,t,n,r)=>DOMRect.fromRect({x:e,y:t,width:n-e,height:r-t}),a=((e,t)=>{const n=e=>e.width*e.height;return t.reduce(((e,t)=>e.map((e=>((e,t)=>{const n=[];if(t=((e,t)=>{if(i(e)||i(t))return DOMRect.fromRect();const n=Math.max(e.left,t.left),r=Math.min(e.right,t.right),o=Math.max(e.top,t.top),a=Math.min(e.bottom,t.bottom);return DOMRect.fromRect({x:n,y:o,width:Math.max(0,r-n),height:Math.max(0,a-o)})})(t,e),i(t))return[(r=e,DOMRect.fromRect({x:r.x,y:r.y,width:r.width,height:r.height}))];var r;const a=o(e.left,e.top,t.left,e.bottom);i(a)||n.push(a);const s=o(t.left,e.top,t.right,t.top);i(s)||n.push(s);const c=o(t.left,t.bottom,t.right,e.bottom);i(c)||n.push(c);const l=o(t.right,e.top,e.right,e.bottom);return i(l)||n.push(l),n})(e,t))).flat()),[e]).sort(((e,t)=>n(e)-n(t)||e.x-t.x||e.y-t.y))})(n,r);return a[a.length-1]},zt=()=>({defaultExtent:[995772.9694449581,5982715.763684852,1548341.2904285304,6544564.28740462],minZoomLevel:0,maxZoomLevel:20,srid:3857,localProjectedSrid:25832,localProjectedSridExtent:[5,-80,14,80],localProjectedCoordinateRepresentations:Rt,globalCoordinateRepresentations:[me.I.UTM,me.I.WGS84,me.I.MGRS,me.I.SphericalMercator]}),Rt=e=>{const t=[me.d.UTM32,me.d.GK4,me.I.WGS84,me.I.SphericalMercator,me.I.MGRS];if(e){const{CoordinateService:n}=r.z.inject("CoordinateService"),i=n.toLonLat(e);if(i[0]>18||i[0]<6||i[1]>54||i[1]<42)return[me.I.UTM,me.I.WGS84,me.I.SphericalMercator,me.I.MGRS];i[0]<18&&i[0]>=12&&t.splice(0,0,me.d.UTM33)}return t};var jt=n(7326),Ot=n(54620),Pt=n(42770),$t=n(29132),Ft=n(78445),Gt=n(92149),Ut=n(11854);class Yt{constructor(e,t={}){if(this.constructor===Yt)throw new TypeError("Can not construct abstract class.");if(!e)throw new TypeError("Id of this handler must be defined.");this._id=e,this._active=!1,this._options={preventDefaultClickHandling:!0,preventDefaultContextClickHandling:!0,...t}}get id(){return this._id}get active(){return this._active}get options(){return this._options}activate(e){const t=this.onActivate(e);return this._active=!0,t}deactivate(e){this.onDeactivate(e),this._active=!1}onActivate(e){throw new TypeError("Please implement abstract method #onActivate or do not call super.onActivate from child.")}onDeactivate(e){throw new TypeError("Please implement abstract method #onDeactivate or do not call super.onDeactivate from child.")}}var Ht=n(16129),Bt=n(87331),Vt=n(81426),Wt=n(953),Zt=n(13628),Qt=n(29276),qt=n(27733),Kt=n(49700),Xt=n(94974),Jt=n(30503),en=n(39892),tn=n(17937),nn=n(96702),rn=n(2871),on=n(14528);const an="EPSG:3857",sn="EPSG:4326",cn=2*Math.PI*6378137;class ln{#b=null;#S=0;#f=[[]];#w=[[]];#M=[[]];#I=-1;#A={};#L=0;constructor(){}add(e,t=!1){t&&this.#I++,this.#b&&180-Math.abs(this.#b[0])<40&&(e[0]<0&&this.#b[0]>0?(this.#E(e,1),this.#f[++this.#S]=[]):e[0]>0&&this.#b[0]<0&&(this.#E(e,-1),this.#f[++this.#S]=[])),this.#E(e),this.#b=e}#E(e,t=0){const n=[e[0]+360*t,e[1]],r="polygon_"+this.#L;if(this.#L+=t,this.#f[this.#S]?this.#f[this.#S].push(n):this.#f[this.#S]=[n],null==this.#A[r]&&(this.#A[r]=[]),this.#A[r].push(n),this.#I>=0&&this.#f[this.#S].length>1){const e=[...this.#b],r=[(0,on.A)(sn,an,e),(0,on.A)(sn,an,n)];r[1][0]+=t*cn;const i=(0,fe.Tr)(r);this.#w[this.#I]?(this.#w[this.#I].push(r),this.#M[this.#I].push(i)):(this.#I>0&&(this.#w[this.#I-1].push(r),this.#M[this.#I-1].push(i)),this.#w[this.#I]=[],this.#M[this.#I]=[])}}createTiledGeometry(){return this.#f[this.#S].length<=1&&this.#f.pop(),new nn.A(this.#f).transform(sn,an)}createTiledPolygon(){return 1===this.#S||this.#S>1&&0!==this.#L||this.#S>2?null:new rn.A(Object.values(this.#A).map((e=>{const t=e[0];return[[...e,t]]}))).transform(sn,an)}}var dn=n(51456);const un="geodesic",gn=Object.freeze({ACTIVE:"active",INACTIVE:"inactive"}),hn=Le.Geodesic.WGS84;class pn{#T;#x;#D=null;#l=null;#C=null;#N=null;#k=null;#z=null;#R=null;#j;#O;constructor(e,t,n=()=>!1){if(this.#T=e,this.#x=e.getRevision(),!(this.#T.getGeometry()instanceof Ie.Ay||this.#T.getGeometry()instanceof Me.A))throw new Error("This class only accepts Polygons (and Linestrings after initial drawing is finished)");this.#O=t,this.#D=n,this.#P()}#P(){const e=this.#$(this.#T.getGeometry().clone().transform("EPSG:3857","EPSG:4326")),t=this.#T?.getGeometry()instanceof Ie.Ay&&!this.#D(),n=!t&&this.#F(e),r=this.#G(e,t,n);this.#C=this.#U(e);const i=this.#Y(this.#C);this.#R=n?this.#H(e,r.rotation,r.length):null,this.#l=i.createTiledGeometry(),this.#N=t&&!this.#D()?i.createTiledPolygon():null,this.#j===gn.ACTIVE&&(this.#T.set((0,dn.LL)(we.tT),r.length),this.#l.set((0,dn.LL)(we.tT),r.length),this.#l.set(we.CI,r.rotation)),this.#k=r.length,this.#z=r.area}#B(){this.#T.getRevision()!==this.#x&&(this.#x=this.#T.getRevision(),this.#P())}#F(e){return 2===e.length||3===e.length&&e[0][0]===e[2][0]&&e[0][1]===e[2][1]}#$(e){return e instanceof Ie.Ay?this.#D()?e.getCoordinates()[0].slice(0,-1):e.getCoordinates()[0]:e.getCoordinates()}#G(e,t,n){const r=new Le.PolygonArea.PolygonArea(hn,!t);for(const t of e)r.AddPoint(t[1],t[0]);const i=r.Compute(!1,!0);return{length:i.perimeter,area:i.area,rotation:n?(()=>{const t=hn.InverseLine(e[0][1],e[0][0],e[1][1],e[1][0]);return t.azi1<0?t.azi1+360:t.azi1})():null}}#Y(e){const t=new ln;let n=0;return e.forEach((e=>(e=>{const{geodesic:t,from:r,to:i}=e;if(t.s13<55555)return[r,i];const o=[],a=t.a13/50;for(let e=0;e<=50;++e){const n=a*e,r=t.ArcPosition(n,Le.Geodesic.STANDARD|Le.Geodesic.LONG_UNROLL);o.push([r.lon2,r.lat2])}return n++,o})(e).forEach(((e,n)=>0===n?t.add(e,!0):t.add(e))))),this.#j=0===n?gn.INACTIVE:gn.ACTIVE,t}#V(e,t){const n=[];let r=null;return this.#C.forEach((i=>{const{geodesic:o}=i;let a=r;for(let r=a??e;r<=o.s13;r+=e){const e=o.Position(r,Le.Geodesic.STANDARD|Le.Geodesic.LONG_UNROLL),i=(0,ce.Rb)([e.lon2,e.lat2],"EPSG:3857"),s=t.getPixelFromCoordinate(i);n.push([...s,e.azi2]),a=o.s13-r}r=e-a})),n}#U(e){return e.reduce(((t,n,r)=>{const i=r>0?e[r-1]:null;if(i){const e={geodesic:Le.Geodesic.WGS84.InverseLine(i[1],i[0],n[1],n[0]),from:i,to:n};t.push(e)}return t}),[])}#H(e,t,n){const r=e[0],i=new ln;for(let e=0;e<=100;e++){const o=hn.Direct(r[1],r[0],3.6*e+t,n);i.add([o.lon2,o.lat2])}return i.createTiledGeometry()}getTicksByDistance(e){return this.#V(e,this.#O)}getCoordinateAt(e){let t=this.#k*e;for(const e of this.#C){const{geodesic:n}=e;if(!(n.s13<t)){const e=n.Position(t,Le.Geodesic.STANDARD|Le.Geodesic.LONG_UNROLL);return(0,ce.Rb)([e.lon2,e.lat2],"EPSG:3857")}t-=n.s13}}getCalculationStatus(){return this.#B(),this.#j}getGeometry(){return this.#B(),this.#l}getPolygon(){return this.#B(),this.#N}get length(){return this.#B(),this.#k}get area(){return this.#B(),this.#z}get azimuthCircle(){return this.#B(),this.#R}}var mn=n(32551),_n=n(57114);const vn=[255,0,0],yn=[255,255,255],bn=[0,0,0],Sn=[0,0,0,0],fn={symbolSrc:null,color:null,scale:null,text:null,anchor:[.5,.5]},wn=(e,t,n,r=-5)=>((e,t,n)=>new Vt.A({text:e,font:"normal 16px Open Sans",stroke:new Wt.A({color:(0,en.yQ)((0,en.E2)(t)).concat(1),width:2}),fill:new Zt.A({color:(0,en.E2)(t).concat([1])}),scale:n,offsetY:r}))(e,t,n),Mn=e=>{if("number"==typeof e)return e;switch(e){case mn.d.LARGE:return 2;case mn.d.MEDIUM:return 1.5;case mn.d.SMALL:default:return 1}},In=e=>{switch("number"==typeof e?e:An(e)){case 2:return mn.d.LARGE;case 1.5:return mn.d.MEDIUM;default:return mn.d.SMALL}},An=e=>{if("number"==typeof e)return e;switch(e){case mn.d.LARGE:return 1;case mn.d.MEDIUM:return.75;case mn.d.SMALL:default:return.5}},Ln=e=>{const t="number"==typeof e?e:An(e);switch(t){case 1:return mn.d.LARGE;case.75:return mn.d.MEDIUM;default:return t>1?mn.d.LARGE:mn.d.SMALL}},En=e=>{const t={"marker-size":mn.d.MEDIUM,"marker-color":"#fff",stroke:"#555555","stroke-opacity":1,"stroke-width":3,fill:"#555555","fill-opacity":.6},n=e?(e=>{const n={};return Object.keys(t).forEach((t=>{const r=e.get(t);r&&(n[t]=r)})),n})(e):{},r={...t,...n};return[new Qt.Ay({image:new qt.A({fill:new Zt.A({color:(0,en.E2)(r["marker-color"]).concat([1])}),radius:(e=>{if("number"==typeof e)return e;switch(e){case mn.d.LARGE:return 7;case mn.d.MEDIUM:return 5;case mn.d.SMALL:default:return 3}})(r["marker-size"])}),stroke:new Wt.A({color:(0,en.E2)(r.stroke).concat([r["stroke-opacity"]]),width:r["stroke-width"]}),fill:new Zt.A({color:(0,en.E2)(r.fill).concat([r["fill-opacity"]])})})]},Tn=(e=fn)=>{const t=e.color?e.color:"#ff0000",n=e.anchor?e.anchor:[.5,.5],r={anchor:n,anchorXUnits:"fraction",anchorYUnits:"fraction",src:e.symbolSrc,scale:An(e.scale)},i={anchor:n,anchorXUnits:"fraction",anchorYUnits:"fraction",src:e.symbolSrc?e.symbolSrc:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgZmlsbD0iI0ZGRiIgY2xhc3M9ImJpIGJpLWdlby1hbHQtZmlsbCIgdmlld0JveD0iMCAwIDE2IDE2Ij48IS0tTUlUIExpY2Vuc2UtLT48cGF0aCBkPSJNOCAxNnM2LTUuNjg2IDYtMTBBNiA2IDAgMCAwIDIgNmMwIDQuMzE0IDYgMTAgNiAxMG0wLTdhMyAzIDAgMSAxIDAtNiAzIDMgMCAwIDEgMCA2Ii8+PC9zdmc+Cg==",color:t,scale:An(e.scale)},o=e.symbolSrc?(0,tn.i)(e.symbolSrc)===tn.W.LOCAL?i:r:i,a=Mn(e.scale),s=10*Mn(e.scale)/n[1];return[new Qt.Ay({image:new Kt.A(o),text:e.text?wn(e.text,t,a,s):null})]},xn=(e=fn)=>{const t=e.color?e.color:"#ff0000",n=(0,Ae.Kg)(e.text)?e.text:"new text",r=Mn(e.scale);return[new Qt.Ay({text:wn(n,t,r)})]},Dn=e=>{const t=e.getGeometry();return t instanceof Ie.Ay&&0===t.getArea()||t instanceof nn.A&&t.getLineStrings().every((e=>0===e.getLength()))?new Qt.Ay:new Qt.Ay({geometry:e=>{const t=e.get((0,dn.LL)(un));return t&&t.getCalculationStatus()===gn.ACTIVE?t.area?t.getPolygon():t.getGeometry():e.getGeometry()instanceof Ie.Ay?e.get((0,dn.LL)("finishOnFirstPoint"))??1?e.getGeometry():new Me.A(e.getGeometry().getCoordinates()[0].slice(0,-1)):e.getGeometry()},renderer:(e,t)=>{const n=t.feature.get((0,dn.LL)(un)),r=e=>e.customContextRenderFunction?e.customContextRenderFunction:(e=>{const t=(0,Bt.J7)(e.context,{pixelRatio:1});return(e,n,r)=>{t.setFillStrokeStyle(n,r),t.drawGeometry(e)}})(e);n&&n.getCalculationStatus()===gn.ACTIVE?Nn(e,t,r(t),n):Cn(e,t,r(t))}})},Cn=(e,t,n)=>{const{MapService:i}=r.z.inject("MapService"),o=t.geometry.clone(),a=(0,_n.eG)(t.feature,"displayruler"),s=!a||"true"===a,c=(0,we.qC)(o),l=t.resolution,d=t.pixelRatio,u=t.geometry.get((0,dn.LL)(we.tT))??i.calcLength(c.getCoordinates()),g=(0,we.Zj)(u,l),h=g*c.getLength()/l,p=(0,we.$4)(c,g),m=new Zt.A({color:vn.concat([.4])}),_=new Wt.A({color:vn.concat([1]),width:3*d});if(o.setCoordinates(e),n(o,m,_),s){const r=e=>(0,we.$3)(t.geometry.getCoordinates()[0])===(0,we.$3)(e)?e.toReversed():e;(o instanceof Ie.Ay||o instanceof nn.A?r(e[0]):e).every(((e,t,r)=>{return i=n,o=[e,r[t+1]],a=p[t],s=h,!!o[1]&&(()=>{const e=(0,we.Fp)(o[0],o[1],-4*d),t=(0,we.Fp)(o[0],o[1],-2*d);return i(e,m,((e,t)=>new Wt.A({color:vn.concat([1]),width:8*d,lineCap:"butt",lineDash:[3*d,(t-3)*d],lineDashOffset:3*d+t*e}))(a,s)),i(t,m,((e,t)=>new Wt.A({color:vn.concat([1]),width:5*d,lineCap:"butt",lineDash:[2*d,(t/5-2)*d],lineDashOffset:2*d+t*e}))(a,s)),!0})();var i,o,a,s}))}},Nn=(e,t,n,r)=>{const i=t.geometry.clone(),o=(0,_n.eG)(t.feature,"displayruler"),a=!o||"true"===o,s=t.resolution,c=t.pixelRatio,l=r.length,d=(0,we.Zj)(l,s)*l,u=new Zt.A({color:vn.concat([.4])}),g=new Wt.A({color:vn.concat([1]),width:3*c}),h=new Wt.A({color:vn.concat([1]),width:4*c,lineCap:"butt"});i.setCoordinates(e),n(i,u,g),a&&r.getTicksByDistance(d).forEach((e=>((e,t)=>{const n=10*c,[r,i,o]=t,a=[r*c,i*c],s=(0,we.NI)(a,o,n);e(new Me.A([a,s]),u,h)})(n,e)))},kn=(e,t)=>{const n=new Wt.A({color:vn.concat([1]),width:3}),r=(e=>{const t=e?.get((0,dn.LL)(un))?.getGeometry();return t??e.getGeometry()})(e),i=[new Qt.Ay({stroke:n,geometry:e=>{if((0,we.Q5)(e.getGeometry())){const t=e.get((0,dn.LL)(un));return t?t.azimuthCircle:(()=>{const t=e.getGeometry().getCoordinates(),n=e.getGeometry().getLength();return new Xt.A(t[0],n)})()}},zIndex:0}),t?Dn(e):new Qt.Ay({geometry:r,stroke:new Wt.A({color:vn.concat([1]),lineDash:[8],width:2}),fill:new Zt.A({color:vn.concat([.4])})})];return i},zn=e=>{const t=e?(e=>{const t=e.get("features");return t[0]?t[0]:null})(e):null,n=t?Pn(t):vn;return[new Qt.Ay({image:new qt.A({radius:6,stroke:new Wt.A({color:yn,width:3}),fill:new Zt.A({color:n})})})]},Rn=()=>{const e=new Wt.A({color:bn.concat([1]),width:1,lineDash:[8]}),t=new Qt.Ay({stroke:e,geometry:e=>e.getGeometry(),zIndex:0}),n=e=>new Qt.Ay({image:new qt.A({radius:5,stroke:new Wt.A({color:yn,width:3}),fill:new Zt.A({color:e})}),geometry:e=>{const t=(n=e.getGeometry())instanceof Me.A?e.getGeometry().getCoordinates():n instanceof Ie.Ay?e.getGeometry().getCoordinates()[0]:void 0;var n;return t?new Jt.A(t):e.getGeometry()},zIndex:29});return(e,r)=>{const i=Pn(e)||vn,o=e.getStyleFunction();if(!o||!o(e,r))return[n(i)];const a=o(e,r),s=a[0]?a.concat([n(i)]):[a,n(i)];return e.get((0,dn.LL)(un))?[t,...s]:s}},jn=e=>{const t=e,n=e.slice(0,-1),r=new Zt.A({color:t}),i=e=>new Wt.A({color:n,width:e});return e=>{switch(e.getGeometry().getType()){case"Point":case"MultiPoint":return[new Qt.Ay({image:new qt.A({fill:r,radius:5,stoke:i(1)})})];case"LineString":case"MultiLineString":return[new Qt.Ay({stroke:i(3)})];case"Polygon":case"MultiPolygon":return[new Qt.Ay({fill:r,stroke:i(2)})];case"GeometryCollection":return[new Qt.Ay({image:new qt.A({fill:r,radius:5,stoke:i(1)}),fill:r,stroke:i(2)})]}}},On=(e,t={})=>{const n={Point:()=>[new Qt.Ay({image:new qt.A({radius:4,fill:new Zt.A({color:vn.concat([.4])}),stroke:new Wt.A({color:vn.concat([1]),width:3})}),zIndex:30})],LineString:()=>[new Qt.Ay],Polygon:()=>[new Qt.Ay]};return(r,i)=>r.getId()?e(r,i):((e,r)=>{const i=e.getGeometry().getType();return(t[i]??n[i])(e,r)})(r,i)},Pn=e=>{if(null==e)return null;const t=Fn(e);if(e.getStyle(),t){const e=t[0],n=e?.getStroke(),i=e?.getImage(),o=e?.getText();if(n)return(0,en.Ob)(n.getColor());if(i){if(i.getColor())return(0,en.Ob)(i.getColor());const{IconService:e}=r.z.inject("IconService");return(0,en.Ob)(e.decodeColor(i.getSrc()))}if(o)return(0,en.Ob)(o.getFill().getColor())}return null},$n=e=>{if(e){const t=1,n="_",r=e.getId().split(n);return r.length<=t+1?null:r[t]}return null},Fn=e=>{const t=e=>Array.isArray(e)?e:[e];return e.getStyle()?(n=>"function"==typeof n?((e,n)=>t(e(n)))(n,e):t(n))(e.getStyle()):null};var Gn=n(73445),Un=n(75488),Yn=n(11795);class Hn{constructor(){this._overlay=null;const{TranslationService:e}=r.z.inject("TranslationService");this._translationService=e,this._tooltipMessageProvideFunction=()=>null}activate(e){this._map=e,this._overlay=this._createOverlay({offset:[15,0],positioning:"top-left"},Un.JE.HELP),this._map.addOverlay(this._overlay)}deactivate(){this._overlay&&this._map.removeOverlay(this._overlay),this._overlay=null,this._map=null}notify(e){if(!this.active)return;const t=this._tooltipMessageProvideFunction(e);null==t||e.dragging?this._hide():this._updateOverlay(e.coordinate,t)}get active(){return null!==this._overlay}set messageProvideFunction(e){this._tooltipMessageProvideFunction=e}get messageProvideFunction(){return this._tooltipMessageProvideFunction}_createOverlay(e={},t){const n=document.createElement(Un.OM.tag);return n.type=t,new Yn.A({...e,element:n})}_updateOverlay(e,t){this._overlay.getElement().value=t,this._overlay.setPosition(e)}_hide(){this._overlay.setPosition(void 0)}}var Bn=n(58704);const Vn=Object.freeze({ACTIVE:"active",DRAW:"draw",MODIFY:"modify",SELECT:"select",OVERLAY:"overlay"}),Wn=Object.freeze({FIRSTPOINT:"firstPoint",LASTPOINT:"lastPoint",VERTEX:"vertex",EDGE:"edge",FACE:"face"}),Zn=(e,t=!1)=>t?{hitTolerance:10,layerFilter:t=>t===e||t.getStyle&&t.getStyle()===zn}:{hitTolerance:10,layerFilter:t=>t===e},Qn=e=>{const t=t=>t===e;return{layers:t,filter:(e,n)=>t(n)?e:null,style:null}},qn=e=>({features:e,style:zn,deleteCondition:e=>(0,Bn.TS)(e)&&(0,Bn.t5)(e),wrapX:!0}),Kn=(e,t,n)=>{const r=[],i=e.forEachFeatureAtPixel(n,((e,n)=>{if(n===t&&r.push(e),!n&&e.get("features").length>0)return e}),Zn(t,!0));if(i){const e=i.getGeometry(),t=i.get("features")[0].getGeometry();return(0,we.r6)(t,e)?Wn.VERTEX:Wn.EDGE}return r.length>0?Wn.FACE:null},Xn=(e,t,n)=>{const r=[];return e.forEachFeatureAtPixel(n,((e,n)=>{n===t&&r.push(e)}),Zn(t)),r},Jn=(e,t,n)=>{const r="function"==typeof n?n:()=>{};e.forEach((e=>{r(e),t.getSource().removeFeature(e)}))},er=()=>{const{EnvironmentService:e}=r.z.inject("EnvironmentService");return e.isTouch()?12:4},tr=e=>{const{TranslationService:t}=r.z.inject("TranslationService"),n=e=>t.translate(e);if(e.type===Vn.ACTIVE)return n("olMap_handler_measure_start");if(e.type===Vn.DRAW){const t=t=>e.pointCount>2?t+"<br/>"+n("olMap_handler_delete_last_point"):t;return e.snap===Wn.FIRSTPOINT?t(n("olMap_handler_measure_snap_first_point")):e.snap===Wn.LASTPOINT?t(n("olMap_handler_measure_snap_last_point")):t(n("olMap_handler_measure_continue_line"))}return e.type===Vn.MODIFY?e.snap===Wn.VERTEX?e.geometryType&&"Polygon"===e.geometryType?n("olMap_handler_measure_modify_polygon_click_or_drag"):e.geometryType&&"LineString"===e.geometryType?n("olMap_handler_measure_modify_linestring_click_or_drag"):n("olMap_handler_measure_modify_click_or_drag"):e.snap===Wn.EDGE?n("olMap_handler_measure_modify_click_new_point"):n("olMap_handler_measure_modify_key_for_delete"):e.type===Vn.SELECT?n("olMap_handler_measure_select"):e.type===Vn.OVERLAY?n("olMap_handler_measure_modify_click_drag_overlay"):void 0};var nr=n(86717),rr=n(43599);const ir='<?xml version="1.0" encoding="UTF-8"?><kml xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://www.opengis.net/kml/2.2"><Document></Document></kml>',or=(e,t)=>{let n;const i=[];if(e.getSource().getFeatures().filter((e=>"Circle"!==e.getGeometry().getType())).forEach((n=>{const o=n.clone();var a;o.setId(n.getId()),o.getGeometry().setProperties(n.getGeometry().getProperties()),o.getGeometry().transform(t,"EPSG:4326"),"Polygon"===o.getGeometry().getType()&&o.setGeometry((a=o.getGeometry())instanceof Ie.Ay&&3===a.getCoordinates()[0].length?new Me.A(a.getCoordinates()[0]):a);const s=o.getStyleFunction()||e.getStyleFunction();if(s){const e=(e=>{const t=(e=>(e[0]?e[0]:e&&!Array.isArray(e)?e:null)??new Qt.Ay)(e),n=(e=>({fill:e.getFill?e.getFill():null,stroke:e.getStroke?e.getStroke():null,text:e.getText?e.getText():null,image:e.getImage?e.getImage():null,zIndex:e.getZIndex?e.getZIndex():null}))(t);return n.image instanceof qt.A&&(n.image=null),n.image instanceof Kt.A&&(0,tn.i)(n.image.getSrc())===tn.W.LOCAL&&(n.image=(e=>{const t=e.getSrc(),n=e.getScale(),{IconService:i}=r.z.inject("IconService"),o=i.getIconResult(t),a=o&&o.isMonochrome?o?.getUrl(e.getColor()):null,s={anchor:[.5,1],anchorXUnits:"fraction",anchorYUnits:"fraction",src:a,scale:n};return a?new Kt.A(s):e})(n.image)),n.text&&!n.image&&(n.image=new Kt.A({src:"noimage",scale:0})),new Qt.Ay(n)})(s(o));o.get("name")&&o.unset("name"),o.setStyle(e)}null===o.get("description")&&o.unset("description"),i.push(o)})),i.length>0){1===i.length&&i.push(new nr.A);const t={decimals:8};n=new rr.Ay({writeStyles:!0}).writeFeatures(i,t);const r=e=>e.replace(/<Icon>\s*<href>noimage<\/href>\s*<\/Icon>/g,""),o=e=>e.replace(/<Placemark\/>/g,"");n=o(r(n)),e.label&&(n=n.replace(/<Document>/,"<Document><name>"+e.label+"</name>"))}return n},ar=e=>{const t=[];return e.getSource().getFeatures().forEach((e=>{const n=e.get((0,dn.LL)("overlays"));n&&n.forEach((e=>t.push(e)))})),t};class sr{constructor(){}_add(e,t,n){const r=t.get((0,dn.LL)("overlays"))||[];r.push(e),e.set("feature",t),t.set((0,dn.LL)("overlays"),r),n.addOverlay(e)}_remove(e,t,n){const r=t.get((0,dn.LL)("overlays"))||[];t.set((0,dn.LL)("overlays"),r.filter((t=>t!==e))),n.removeOverlay(e)}add(e,t){throw new TypeError("Please implement and call abstract method #add from child or do not call super.add from child.")}update(e,t,n={}){throw new TypeError("Please implement and call abstract method #update from child or do not call super.update from child.")}remove(e,t){(e.get((0,dn.LL)("overlays"))||[]).forEach((e=>t.removeOverlay(e))),e.set((0,dn.LL)("overlays"),[])}}var cr=n(64473);const lr="measurement_style_listeners",dr=[{name:"top",isSector:e=>e<=60||300<e},{name:"right",isSector:e=>60<e&&e<=120},{name:"bottom",isSector:e=>120<e&&e<=210},{name:"left",isSector:e=>210<e&&e<=300}];class ur extends sr{#s;#a;constructor(){super();const{EnvironmentService:e,StoreService:t}=r.z.inject("EnvironmentService","StoreService");this.#s=e,this.#a=t}add(e,t){const n=e.get((0,dn.LL)(lr));n&&(0,Ut.e)(n);const r=t.getView().on("change:resolution",(()=>{const n=(e.get((0,dn.LL)("overlays"))??[])[0],r=n?{visible:"inherit"===n.getElement().style.display,opacity:n.getElement().style.opacity}:{};this.update(e,t,r)}));e.set((0,dn.LL)(lr),[r]),this._createDistanceOverlay(e,t),this._createOrRemoveAreaOverlay(e,t),this._createOrRemovePartitionOverlays(e,t),this._restoreManualOverlayPosition(e,t)}update(e,t,n={}){const r=(0,_n.eG)(e,"measurement"),i=n.geometry?n.geometry:e.getGeometry();r&&(this._updateOlOverlay(r,i,""),this._createOrRemoveAreaOverlay(e,t),this._createOrRemovePartitionOverlays(e,t,i));const o=e.get((0,dn.LL)("overlays"));if(o){const e=e=>{if("visible"in e||"top"in e){const t=!("visible"in e)||e.visible,n=!("top"in e)||e.top;return t&&n?"inherit":"none"}return"inherit"},t=e(n),r="opacity"in n?n.opacity:1;o.forEach((e=>{e.getElement().style.display=t,e.getElement().style.opacity=r}))}}remove(e,t){const n=e.get((0,dn.LL)(lr));n?.length&&((0,Ut.e)(n),e.unset((0,dn.LL)(lr))),(e.get((0,dn.LL)("overlays"))||[]).forEach((e=>t.removeOverlay(e))),e.unset((0,dn.LL)("measurement")),e.unset((0,dn.LL)("area")),e.unset((0,dn.LL)("partitions")),e.unset((0,dn.LL)("overlays"))}_isActiveMeasurement(){const{measurement:e}=this.#a.getStore().getState();return e.active}_createDistanceOverlay(e,t){const n=e.get((0,dn.LL)("measurement"))||(()=>{const n=!this.#s.isTouch()&&this._isActiveMeasurement(),r=this._createOlOverlay(t,{offset:[0,-15],positioning:"bottom-center"},Un.JE.DISTANCE,n);return e.set((0,dn.LL)("measurement"),r),this._add(r,e,t),r})();return e&&!e.getGeometry().get((0,dn.LL)(we.tT))&&e.getGeometry().set((0,dn.LL)(we.tT),e.get((0,dn.LL)(we.tT))),this._updateOlOverlay(n,e.getGeometry()),n}_createOrRemoveAreaOverlay(e,t){let n=e.get((0,dn.LL)("area"));if(e.getGeometry()instanceof Ie.Ay)if(e.getGeometry().getArea()){const r=!this.#s.isTouch()&&this._isActiveMeasurement();n||(n=this._createOlOverlay(t,{positioning:"top-center"},Un.JE.AREA,r),this._add(n,e,t)),this._updateOlOverlay(n,e.getGeometry()),e.set((0,dn.LL)("area"),n)}else n&&(this._remove(n,e,t),e.set((0,dn.LL)("area"),null));else n&&(this._remove(n,e,t),e.set((0,dn.LL)("area"),null))}_createOrRemovePartitionOverlays(e,t,n=null){const r=(0,_n.eG)(e,"displayruler"),i=!r||"true"===r,o=n??(t=>{const n=t.get((0,dn.LL)(un));return n&&n.getCalculationStatus()===gn.ACTIVE?n.getGeometry():e.getGeometry()})(e),a=(()=>{const r=e.get((0,dn.LL)("partitions"))||[];return n?r:(n=>(n.forEach((n=>this._remove(n,e,t))),[]))(r)})(),s=e.get((0,dn.LL)(we.tT)),c=t.getView().getResolution(),l=s?(0,we.Zj)(e.get((0,dn.LL)(we.tT)),c):1;let d=0;if(i)for(let n=l;n<1;n+=l,d++){let r=a[d]||!1;!1===r&&(r=this._createOlOverlay(t,{offset:[0,-25],positioning:"top-center"},Un.JE.DISTANCE_PARTITION),this._add(r,e,t),a.push(r)),this._updateOlOverlay(r,o,n)}if(d<a.length)for(let n=a.length-1;n>=d;n--){const r=a[n];this._remove(r,e,t),a.pop()}this._justifyPlacement(o,a),e.set((0,dn.LL)("partitions"),a),1!==l&&e.set((0,dn.LL)("partition_delta"),l)}_restoreManualOverlayPosition(e){["area","measurement"].forEach((t=>{const n=(0,_n.eG)(e,t);if(n){const r=(0,_n.eG)(e,t+"_position_x"),i=(0,_n.eG)(e,t+"_position_y");void 0!==r&&void 0!==i&&(n.set((0,dn.LL)("manualPositioning"),!0),n.setOffset([0,0]),n.setPosition([r,i]))}}))}_justifyPlacement(e,t){const n=(0,we.qC)(e),r={minPartition:0,length:0};n?.forEachSegment(((e,i)=>{const o=new Me.A([e,i]),a=r.length+o.getLength(),s=a/n.getLength(),c=(0,we.nT)(o);t.forEach((e=>{const t=e.getElement(),n=t.value;r.minPartition<n&&n<s&&(t.placement=this._getPlacement(c),e.setOffset(t.placement.offset),e.setPositioning(t.placement.positioning))})),r.minPartition=s,r.length=a}))}_createOlOverlay(e,t,n,r=!1){const i=document.createElement(Un.OM.tag);i.type=n,i.isDraggable=r;const o=new Yn.A({...t,element:i,stopEvent:r});return r&&this._createDragOn(o,e),o}_updateOlOverlay(e,t,n){const r=e.getElement();if(r.value=n,r.geometry=t,!(0,_n.eG)(e,"manualPositioning"))if(r.type===Un.JE.DISTANCE_PARTITION){const i=e.get("feature");t&&!t.get((0,dn.LL)(we.tT))&&t.set((0,dn.LL)(we.tT),i.get((0,dn.LL)(we.tT)));const o=((e,t)=>{if(e){const n=e.get((0,dn.LL)(un));if(n&&n.getCalculationStatus()===gn.ACTIVE)return n.getCoordinateAt(t)}return null})(i,n);e.setPosition(o??r.position)}else e.setPosition(r.position)}_createDragOn(e,t){const n=e.getElement(),r=t.getInteractions().getArray().find((e=>e instanceof cr.A));if(r){const i=()=>{r.setActive(!1),e.set((0,dn.LL)("dragging"),!0),t.once(Gn.A.POINTERUP,o)},o=()=>{r.setActive(!0),e.set((0,dn.LL)("dragging"),!1)},a=()=>{e.set((0,dn.LL)("draggable"),!0)},s=()=>{e.set((0,dn.LL)("draggable"),!1)};n.addEventListener(Gn.A.POINTERDOWN,i),n.addEventListener(Gn.A.POINTERUP,o),n.addEventListener("mouseenter",a),n.addEventListener("mouseleave",s)}}_getPlacement(e){const t=(e=>dr.find((t=>t.isSector(e))))(e);return{sector:t?.name,positioning:"center-center",offset:((e,t)=>{const n=e/180*Math.PI,r=[Math.sin(n)*t,-Math.cos(n)*t],i=Math.atan2(r[1],r[0]);return[Math.sin(i)*t,-Math.cos(i)*t].map((e=>Math.round(e)))})(e-180,-25)}}}var gr=n(4087),hr=n(93474),pr=n(34338),mr=n(62096),_r=n(44294);const vr=()=>{const{IconService:e}=r.z.inject("IconService");return[new Qt.Ay({image:new Kt.A({anchor:[.5,1],anchorXUnits:"fraction",anchorYUnits:"fraction",src:e.getIconResult("highlight_default").base64})})]},yr=()=>{const{IconService:e}=r.z.inject("IconService");return[new Qt.Ay({image:new Kt.A({anchor:[.5,1],anchorXUnits:"fraction",anchorYUnits:"fraction",src:e.getIconResult("highlight_default_tmp").base64})})]},br=()=>{const e=new Wt.A({color:[255,128,0,1],width:3}),t=new Zt.A({color:[255,255,0,.3]});return[new Qt.Ay({fill:t,stroke:e,image:new qt.A({radius:10,fill:t,stroke:e})})]},Sr=(e,t)=>{const n=new Wt.A({color:[255,128,0,1],width:6}),r=new Zt.A({color:[255,128,0,1]});return((e,t,n,r)=>{const i=e.getGeometry(),o=e=>e instanceof pr.A?new Jt.A(e.getGeometries().map((e=>(0,fe.q1)(e.getExtent())))):e instanceof nn.A?new Jt.A(e.getLineStrings().map((e=>(0,fe.q1)(e.getExtent())))):e instanceof rn.A?new Jt.A(e.getPolygons().map((e=>(0,fe.q1)(e.getExtent())))):new _r.A((0,fe.q1)(e.getExtent())),a=(e=>{const n=e=>{const n=e[2]-e[0],r=e[3]-e[1];return Math.min(n,r)/t};return e instanceof pr.A?e.getGeometries().reduce(((e,t)=>e+n(t.getExtent())),0):e instanceof mr.Ay?n(e.getExtent()):null})(e.getGeometry())??1/0;if(10>a){const e=r[0];return[new Qt.Ay({geometry:o(i),image:e.getImage()})]}return n})(e,t,[new Qt.Ay({fill:r,stroke:n,image:new qt.A({radius:10,fill:r,stroke:n})})],yr())},fr=()=>{const e=new Wt.A({color:[255,255,255,1],width:2}),t=new Zt.A({color:[9,157,221,1]});return[new Qt.Ay({fill:t,image:new qt.A({radius:9,fill:t,stroke:e})})]};var wr=n(26221),Mr=n(31533),Ir=n(72145),Ar=n(80943),Lr=n(56729),Er=n(79545),Tr=n(50567),xr=n(52411),Dr=n(38903),Cr=n(12723);const Nr="routing_layer",kr="perm_rt_layer",zr="perm_wp_layer";class Rr extends wr.h{#n;#s;#W;constructor(){super(),this._initialized=!1;const{TranslationService:e,EnvironmentService:t,RoutingService:n}=r.z.inject("TranslationService","EnvironmentService","RoutingService");this.#n=e,this.#s=t,this.#W=n,this._bottomSheetUnsubscribeFn=null}async _lazyInitialize(){if(!this._initialized){try{return await this.#W.init(),(0,Mr.Fb)(this.#W.getCategories()[0]?.id),this._parseRouteFromQueryParams(this.#s.getQueryParams()),this._initialized=!0}catch(e){console.error("Routing service could not be initialized",e),(0,Oe.L)(`${this.#n.translate("global_routingService_init_exception")}`,Oe.A.ERROR)}return!1}return!0}async register(e){if(!this.#s.isEmbedded()&&this.#s.getQueryParams().has(xe.h.ROUTE_WAYPOINTS)){const t=this.#s.getQueryParams().get(xe.h.TOOL_ID);await this._lazyInitialize()&&setTimeout((()=>{(0,Mr.Yf)(),1===this._parseWaypoints(this.#s.getQueryParams()).length&&((0,xr.sI)(Dr.K.ROUTING),(0,Er.i)(tt.S.ROUTING)),t!==tt.S.ROUTING&&(0,O.sY)(e,(e=>e.routing.route),(()=>(0,Mr.LU)()))}))}const t=(t,n)=>{const{coord:r,type:i}=t;if(i===Ar.to.EXISTING_START_OR_DESTINATION&&n.routing.waypoints.length<1)return;(0,Er.i)(tt.S.ROUTING),(0,Lr.N_)(),(0,Tr.Z_)(),(0,Lr.lX)({id:Rr.HIGHLIGHT_FEATURE_ID,type:[Ar.to.EXISTING_INTERMEDIATE,Ar.to.EXISTING_START_OR_DESTINATION].includes(i)?Cr.p.DEFAULT:Cr.p.MARKER_TMP,data:[...r]});const o=ke.qy`<ba-proposal-context-content></ba-proposal-context-content>`;(0,Ir.j)(o,N.Px),this._bottomSheetUnsubscribeFn=(0,O.lB)(e,(e=>e.bottomSheet.data),(e=>{e.includes(N.Px)||((0,Lr.kf)(Rr.HIGHLIGHT_FEATURE_ID),this._bottomSheetUnsubscribeFn())}))};(0,O.lB)(e,(e=>e.routing.active),(e=>{e?((0,Lr.N_)(),(0,Tr.Z_)(),(0,_t.VE)(Nr,{constraints:{hidden:!0,alwaysTop:!0}}),(0,_t.e5)(kr),(0,_t.e5)(zr)):(0,_t.e5)(Nr)})),(0,O.lB)(e,(e=>e.tools.current),(async e=>{e!==tt.S.ROUTING?((0,Lr.kf)(Rr.HIGHLIGHT_FEATURE_ID),(0,Ir.D)(N.Px),(0,Mr.LU)()):await this._lazyInitialize()&&setTimeout((()=>{(0,Mr.Yf)(),(0,xr.sI)(Dr.K.ROUTING)}))}),!1),(0,O.lB)(e,(e=>e.routing.proposal),((e,n)=>t(e.payload,n))),(0,O.lB)(e,(e=>e.routing.status),(e=>(async e=>{[Ar.Tc.Start_Missing,Ar.Tc.Destination_Missing].includes(e)&&(0,Er.i)(tt.S.ROUTING)})(e))),(0,O.lB)(e,(e=>e.routing.waypoints),(e=>(e=>{(0,Lr.N_)(),(0,Tr.Z_)(),e.length<2&&(0,Ir.D)(N.Px)})(e))),(0,O.lB)(e,(e=>e.layers.removed),((e,t)=>((e,t)=>{!t.routing.active&&[kr,zr].some((t=>e.payload.includes(t)))&&(0,Mr.cL)()})(e,t)))}_parseWaypoints(e){const t=[],n=e.get(xe.h.ROUTE_WAYPOINTS);if(n){const e=n.split(",");if(e.length>1&&e.length%2==0)for(let n=0;n<e.length-1;n+=2)t.push([parseFloat(e[n]),parseFloat(e[n+1])])}return t.filter((e=>(0,Ae.Xq)(e)))}_parseRouteFromQueryParams(e){const t=this._parseWaypoints(e);if(t.length>0){if(e.has(xe.h.ROUTE_CATEGORY)){const t=e.get(xe.h.ROUTE_CATEGORY);this.#W.getCategoryById(t)&&(0,Mr.Fb)(t)}1===t.length?(0,Mr.Bi)(t[0]):(0,Mr.XX)(t)}}static get HIGHLIGHT_FEATURE_ID(){return"#routingPluginHighlightFeatureId"}}var jr=n(35598),Or=n(74458),Pr=n(31706),$r=n(6933),Fr=n(6837);const Gr=e=>{const{TranslationService:t}=r.z.inject("TranslationService"),n=(e,n=[])=>t.translate(e,n),{feature:i}=e;switch(i.get(ei)){case Kr.ROUTE_ALTERNATIVE:{const{description:e}=i.get(Jr);return n("olMap_handler_routing_choose_alternative_route",[e])}case Kr.ROUTE_SEGMENT:return n("olMap_handler_routing_modify_segment");case Kr.START:return n("olMap_handler_routing_modify_start");case Kr.DESTINATION:return n("olMap_handler_routing_modify_destination");case Kr.INTERMEDIATE:return n("olMap_handler_routing_modify_intermediate")}return""};var Ur=n(83245),Yr=n(39400);const Hr={hike:{up:300,down:500,horizontal:4e3},bike:{up:300,down:25e4,horizontal:15e3},mtb:{up:400,down:25e4,horizontal:2e4},racingbike:{up:400,down:35e4,horizontal:27e3}},Br={language:"de",vehicle:null,roadClass:null,surface:null},Vr=[e=>["bike","racingbike"].includes(e.vehicle)&&"path_grade4"===e.roadClass?{id:100,message:"de"===e.language?"(schwieriger) Steig, Trittsicherheit erforderlich. Fahrrad muss vorher abgestellt werden.":"(Difficult) climb, sure-footedness required. Bicycle must be parked beforehand.",criticality:Ar.p2.WARNING}:null,e=>["hike","mtb"].includes(e.vehicle)&&"path_grade4"===e.roadClass?"hike"===e.vehicle?{id:102,message:"de"===e.language?"(schwieriger) Steig, Trittsicherheit erforderlich.":"(Difficult) climb, surefootedness required.",criticality:Ar.p2.HINT}:{id:101,message:"de"===e.language?"(schwieriger) Steig, Trittsicherheit erforderlich. MTB muss evtl. vorher abgestellt oder getragen werden.":"(Difficult) climb, surefootedness required. MTB may have to be parked or carried beforehand.",criticality:Ar.p2.HINT}:null,e=>["hike","bike","mtb","racingbike"].includes(e.vehicle)&&"path_grade5"===e.roadClass?"hike"===e.vehicle?{id:201,message:"de"===e.language?"schwieriger Steig mit Kletterpassagen; gute Trittsicherheit, ggf. spezielle Ausrüstung erforderlich":"difficult climb with climbing passages; good surefootedness, special equipment may be required",criticality:Ar.p2.WARNING}:{id:200,message:"de"===e.language?"schwieriger Steig mit Kletterpassagen; gute Trittsicherheit, ggf. spezielle Ausrüstung erforderlich; Fahrrad muss vorher abgestellt werden.":"difficult trail with climbing sections; good surefootedness, special equipment may be required; bikes must be parked beforehand.",criticality:Ar.p2.WARNING}:null,e=>"racingbike"===e.vehicle&&"compacted"===e.surface?{id:300,message:"de"===e.language?"Befestigter Weg/Pfad. Rennrad muss evtl. geschoben werden.":"Paved path/trail. Racing bike may have to be pushed.",criticality:Ar.p2.HINT}:null,e=>"racingbike"===e.vehicle&&"ground"===e.surface&&["path_grade3","track_grade5","other"].includes(e.roadClass)?{id:301,message:"de"===e.language?"Unbefestigter Weg/Pfad. Rennrad muss geschoben werden.":"Unpaved path/trail. Road bike must be pushed.",criticality:Ar.p2.WARNING}:null,e=>["bike","racingbike"].includes(e.vehicle)&&"ground"===e.surface&&"track_grade5"===e.roadClass?{id:400,message:"de"===e.language?"Unbefestigter Weg/Pfad. Fahrrad muss evtl. geschoben werden.":"Unpaved path/trail. Bicycle may have to be pushed.",criticality:Ar.p2.HINT}:null,e=>["primary","motorway","secondary"].includes(e.roadClass)?{id:500,message:"de"===e.language?"Evtl. hohes Verkehrsaufkommen":"Possibly high traffic volume",criticality:Ar.p2.HINT}:null],Wr=(e,t)=>e.reduce(((e,n)=>{const[r,i,o]=n,a=(e=>{const t=new Le.PolygonArea.PolygonArea(Le.Geodesic.WGS84,!0);for(const[n,r]of e)t.AddPoint(r,n);return t.Compute(!1,!0).perimeter})(t.slice(r,i+1));if(o){const t=[r,i];e[o]?(e[o].distance=e[o].distance+a,e[o].segments=[...e[o].segments,t]):e[o]={distance:a,segments:[t]}}return e}),{}),Zr=(e,t)=>{const n=e[0],r=e[1];return t.filter((e=>{const t=e[0];return e[1]>n&&t<r}))},Qr=(e,t,n,r=null)=>{const i=t.map((t=>[t[0]<=e[0]?e[0]:t[0],t[1]<=e[1]?t[1]:e[1],n(e,t)])),o=r?r(e):e[2];return((e,t,n)=>{const r=t[t.length-1];return[...t.slice(0,-1),r[1]<e[1]?[r[0],e[1],n]:r]})(e,i,o)},qr=(e,t)=>{const{ConfigService:n}=r.z.inject("ConfigService"),i=n.getValue("DEFAULT_LANG"),o=e.vehicle.replace("bvv-","").replace("bayernnetz-",""),a=Object.hasOwn(Hr,o)?Hr[o]:null,s=null!=t?.sumUp&&null!=t?.sumDown,c=a&&s?((e,t,n,r)=>{const{up:i,down:o,horizontal:a}=r,s=36e5,c=(t/i+n/o)*s,l=e/a*s;return c>l?l/2+c:c/2+l})(e.paths[0].distance,t?.sumUp,t?.sumDown,a):e.paths[0].time,l=(d=e.paths[0].points,(new Pr.Ay).readGeometry(d)).getCoordinates();var d;const u=Wr(e.paths[0].details.surface,l),g=((e,t)=>{const n=["track","path","footway"],r=(e,t)=>{const n=Zr(e,t);return n.length>0?Qr(e,n,((e,t)=>e[2]+"_"+t[2])):[e]};return e.reduce(((e,i)=>{const[o,a,s]=i;return n.includes(s)?[...e,...r(i,t)]:[...e,i]}),[])})(e.paths[0].details.road_class,e.paths[0].details.track_type),h={surface:u,road_class:Wr(g,l)},p=((e,t,n,r)=>{const i=(t,n)=>{const i={...Br,language:r,vehicle:e,roadClass:t[2],surface:n[2]};return Vr.map((e=>e(i))).filter((e=>null!==e))},o=()=>"";return t.reduce(((e,t)=>{const r=Zr(t,n);return r.length>0&&Qr(t,r,i,o).filter((e=>0!==e[2].length)).forEach((t=>{const[n,r,i]=t,o=[n,r];i.forEach((t=>{const n=t.id,r=t.message,i=t.criticality;Object.hasOwn(e,n)?e[n].segments=[...e[n].segments,o]:e[n]={message:r,criticality:i,segments:[o]}}))})),e}),{})})(o,g,e.paths[0].details.surface,i);return{time:c,dist:t.linearDistance,twoDiff:s?[t.sumUp,t.sumDown]:[],details:h,warnings:p}},Kr=Object.freeze({START:"start",DESTINATION:"destination",INTERMEDIATE:"intermediate",ROUTE:"route",ROUTE_ALTERNATIVE:"route_alternative",ROUTE_SEGMENT:"route_segment",ROUTE_HIGHLIGHT:"route_highlight",ROUTE_COPY:"route_copy"}),Xr=Object.freeze({ROUTE_ALTERNATIVE:"rt_alternativeRouteLayer",ROUTE:"rt_routeLayer",ROUTE_COPY:"rt_routeCopyLayer",INTERACTION:"rt_interactionLayer",HIGHLIGHT:"rt_highlightLayer"}),Jr="Routing_Cat",ei="Routing_Feature_Type",ti="Routing_Feature_Index",ni="Routing_Segment_Index";class ri extends Yt{constructor(e=qr,t=gt.a9){super(Nr);const{StoreService:n,RoutingService:i,MapService:o,EnvironmentService:a,TranslationService:s,ElevationService:c,GeoResourceService:l}=r.z.inject("StoreService","RoutingService","MapService","EnvironmentService","TranslationService","ElevationService","GeoResourceService");this._storeService=n,this._routingService=i,this._mapService=o,this._environmentService=a,this._translationService=s,this._elevationService=c,this._geoResourceService=l,this._map=null,this._routingLayerGroup=null,this._alternativeRouteLayer=null,this._routeLayer=null,this._routeLayerCopy=null,this._highlightLayer=null,this._interactionLayer=null,this._activeInteraction=!1,this._modifyInteraction=null,this._translateInteraction=null,this._selectInteraction=null,this._catId=null,this._currentRoutingResponse=null,this._promiseQueue=new Re,this._registeredObservers=[],this._mapListeners=[],this._helpTooltip=new Hn,this._helpTooltip.messageProvideFunction=Gr,this._routeStatsProvider=e,this._attributionProvider=t}onActivate(e){return this._map=e,this._alternativeRouteLayer=this._createLayer(Xr.ROUTE_ALTERNATIVE),this._routeLayer=this._createLayer(Xr.ROUTE),this._routeLayerCopy=this._createLayer(Xr.ROUTE_COPY),this._highlightLayer=this._createLayer(Xr.HIGHLIGHT),this._interactionLayer=this._createLayer(Xr.INTERACTION),this._routingLayerGroup=new jr.A({layers:[this._alternativeRouteLayer,this._routeLayer,this._routeLayerCopy,this._highlightLayer,this._interactionLayer]}),this._translateInteraction=this._createTranslate(this._interactionLayer),this._map.addInteraction(this._translateInteraction),this._selectInteraction=this._createSelect(this._interactionLayer,this._alternativeRouteLayer),this._map.addInteraction(this._selectInteraction),this._environmentService.isTouch()||(this._modifyInteraction=this._createModify(this._routeLayerCopy),this._map.addInteraction(this._modifyInteraction)),this._registeredObservers=this._register(this._storeService.getStore()),this._mapListeners.push(e.on(Gn.A.POINTERMOVE,this._newPointerMoveHandler(e,this._interactionLayer,this._alternativeRouteLayer,this._routeLayerCopy)),e.on([Gn.A.CLICK,Fr.A.CONTEXTMENU],this._newClickHandler(e,this._interactionLayer,this._alternativeRouteLayer,this._routeLayerCopy))),this._routingLayerGroup}_getFeaturesAtPixelOptionsForClickHandler(e,t){return{layerFilter:n=>[e,t].includes(n),hitTolerance:5}}_newClickHandler(e,t,n,r){return i=>{i.preventDefault();const o=e.getEventCoordinate(i.originalEvent),a=e.getEventPixel(i.originalEvent),s=e.getFeaturesAtPixel(a,this._getFeaturesAtPixelOptionsForClickHandler(t,n));if(s.length>0){const e=s[0];switch(e.get(ei)){case Kr.START:case Kr.DESTINATION:(0,Mr.BY)(e.getGeometry().getFirstCoordinate(),Ar.to.EXISTING_START_OR_DESTINATION);break;case Kr.INTERMEDIATE:(0,Mr.BY)(e.getGeometry().getFirstCoordinate(),Ar.to.EXISTING_INTERMEDIATE)}}else 0===this._getInteractionFeatures().length?(0,Mr.BY)(o,Ar.to.START_OR_DESTINATION):1===this._getInteractionFeatures().length&&this._getInteractionFeatures()[0].get(ei)===Kr.START?(0,Mr.BY)(o,Ar.to.DESTINATION):1===this._getInteractionFeatures().length&&this._getInteractionFeatures()[0].get(ei)===Kr.DESTINATION?(0,Mr.BY)(o,Ar.to.START):r.getSource().getFeatures().length>0&&(0,Mr.BY)(o,Ar.to.INTERMEDIATE)}}_getFeaturesAtPixelOptionsForPointerMove(e,t,n){return{layerFilter:r=>[e,t,n].includes(r),hitTolerance:5}}_newPointerMoveHandler(e,t,n,r){const i=e=>{e.get(ei)===Kr.ROUTE_SEGMENT?this._setModifyActive(!0):this._setModifyActive(!1)};return o=>{if(this._helpTooltip.deactivate(),!o?.dragging){const a=e.getEventPixel(o.originalEvent),s=e.getFeaturesAtPixel(a,this._getFeaturesAtPixelOptionsForPointerMove(t,n,r));if(s.length>0){this._helpTooltip.activate(this._map);const t=s[0],n={coordinate:t.getGeometry().getClosestPoint(o.coordinate),dragging:!1,feature:t};this._helpTooltip.notify(n),i(t),(t=>{t.get(ei)===Kr.ROUTE_SEGMENT?e.getTarget().style.cursor="grab":e.getTarget().style.cursor="pointer"})(t)}else e.getTarget().style.cursor=""}}}_createLayer(e){return new Gt.A({source:new Ft.A,properties:{id:e}})}_createTranslate(e){let t;const n=new Or.A({layers:[e],pixelTolerance:50});return n.on("translatestart",(e=>{t=e.coordinate,(0,Lr.N_)(),(0,Ir.D)(N.Px)})),n.on("translateend",(e=>{(0,$r.aI)(t,e.coordinate)||(1===this._getInteractionFeatures().length&&e.features.item(0).get(ei)===Kr.START?(0,Mr.e5)(e.features.item(0).getGeometry().getCoordinates()):1===this._getInteractionFeatures().length&&e.features.item(0).get(ei)===Kr.DESTINATION?(0,Mr.C$)(e.features.item(0).getGeometry().getCoordinates()):this._requestRouteFromInteractionLayer())})),n}_getSelectOptions(e,t){return{layers:[e,t],hitTolerance:5}}_createSelect(e,t){const n=new Pt.A(this._getSelectOptions(e,t));return n.on("select",(e=>{const t=e.selected[0].get(Jr);t&&(this._catId=t.id,(0,Mr.Fb)(t.id),this._switchToAlternativeRoute(this._currentRoutingResponse)),this._helpTooltip.deactivate(),n.getFeatures().clear()})),n}_getModifyOptions(e){return{style:oi(),source:e.getSource(),pixelTolerance:5,deleteCondition:()=>!1}}_createModify(e){const t=new $t.A(this._getModifyOptions(e));return t.on("modifyend",(e=>{if("pointerup"===e.mapBrowserEvent.type){const t=e.features.getArray().reduce(((e,t)=>e.getRevision()>=t.getRevision()?e:t)).get(ni);this._incrementIndex(t+1),this._addIntermediateInteractionFeature(e.mapBrowserEvent.coordinate,t+1),this._requestRouteFromInteractionLayer()}})),t}_switchToAlternativeRoute(e){this._clearRouteFeatures(),this._displayCurrentRoutingGeometry(e[this._catId]),this._routingService.getAlternativeCategoryIds(this._catId).forEach((t=>{this._displayAlternativeRoutingGeometry(e[t])}))}_incrementIndex(e){const t=this._getInteractionFeatures();for(let n=e;n<t.length;n++)t[n].set(ti,t[n].get(ti)+1)}_addIntermediateInteractionFeature(e,t){const n=new nr.A({geometry:new _r.A(e)});n.set(ei,Kr.INTERMEDIATE),n.set(ti,t),n.setId(`${ai.ROUTING}_${(0,_e.Ds)()}`),n.setStyle(ii()),this._interactionLayer.getSource().addFeature(n)}_getInteractionFeatures(e){return this._interactionLayer.getSource().getFeatures().sort(((e,t)=>e.get(ti)-t.get(ti))).filter((t=>!e||t.get(ei)===e))}_getIntermediateFeatures(){return this._getInteractionFeatures().filter((e=>e.get(ei)===Kr.INTERMEDIATE))}_polylineToGeometry(e){return(new Pr.Ay).readGeometry(e,{featureProjection:`EPSG:${this._mapService.getSrid()}`})}_splitRouteByIntermediatePoints(e){const t=(e,t)=>{let n=Number.MAX_VALUE,r=-1;for(let i=0;i<e.length;i++){const o=(0,$r.Io)(e[i],t);o<n&&(n=o,r=i)}return r},n=[],r=this._getIntermediateFeatures();if(r.length>0){const i=e.getCoordinates();let o=0;for(let a=0;a<=r.length;a++){let s;s=a<r.length?t(e.getCoordinates(),r[a].getGeometry().getFirstCoordinate()):i.length-1;const c=i.slice(o,s+1),l=new Me.A(c);n.push(l),o=s}}else n.push(e);return n}_displayCurrentRoutingGeometry(e){const t=e.paths[0].points,n=this._polylineToGeometry(t),r=new nr.A({geometry:n});r.set(ei,Kr.ROUTE),r.set(Jr,this._routingService.getCategoryById(e.vehicle)),r.setStyle(ii()),this._routeLayer.getSource().addFeature(r);const i=this._polylineToGeometry(t),o=this._splitRouteByIntermediatePoints(i);for(let t=0;t<o.length;t++){const n=new nr.A({geometry:o[t]});n.set(ei,Kr.ROUTE_SEGMENT),n.set(Jr,this._routingService.getCategoryById(e.vehicle)),n.set(ni,t),n.setStyle(ii()),this._routeLayerCopy.getSource().addFeature(n)}this._updateStore(e)}_displayAlternativeRoutingGeometry(e){const t=e.paths[0].points,n=this._polylineToGeometry(t),r=new nr.A({geometry:n});r.set(ei,Kr.ROUTE_ALTERNATIVE),r.set(Jr,this._routingService.getCategoryById(e.vehicle)),r.setStyle(ii()),this._alternativeRouteLayer.getSource().addFeature(r)}_setInteractionsActive(e){this._selectInteraction.setActive(e),this._translateInteraction.setActive(e),this._setModifyActive(e),this._activeInteraction=e}_setModifyActive(e){this._modifyInteraction&&this._modifyInteraction.setActive(e)}_clearRouteFeatures(){this._routeLayer.getSource().clear(),this._routeLayerCopy.getSource().clear(),this._alternativeRouteLayer.getSource().clear(),this._highlightLayer.getSource().clear()}_clearAllFeatures(){this._routeLayer.getSource().clear(),this._routeLayerCopy.getSource().clear(),this._alternativeRouteLayer.getSource().clear(),this._highlightLayer.getSource().clear(),this._interactionLayer.getSource().clear()}_addStartInteractionFeature(e){const t=new nr.A({geometry:new _r.A(e)});t.setStyle(ii()),t.set(ei,Kr.START),t.set(ti,0),this._interactionLayer.getSource().addFeature(t)}_addDestinationInteractionFeature(e,t=1){const n=new nr.A({geometry:new _r.A(e)});n.set(ei,Kr.DESTINATION),n.set(ti,t),n.setStyle(ii()),this._interactionLayer.getSource().addFeature(n)}async _requestRouteFromCoordinates(e,t){if(this._resetStore(),this._clearAllFeatures(),e.length>0){this._setInteractionsActive(!1);const n=[...e];if(1===e.length)switch(t){case Ar.Tc.Destination_Missing:this._addStartInteractionFeature(n[0]);break;case Ar.Tc.Start_Missing:this._addDestinationInteractionFeature(n[0],0)}else{this._addStartInteractionFeature(n.shift()),this._addDestinationInteractionFeature(n.pop(),e.length-1),n.forEach(((e,t)=>{this._addIntermediateInteractionFeature(e,t+1)}));const t=this._routingService.getAlternativeCategoryIds(this._catId);try{this._currentRoutingResponse=await this._requestAndDisplayRoute(this._catId,t,e)}catch(e){e.cause===Ar.kD.Improper_Waypoints?(0,Oe.L)(`${this._translationService.translate("olMap_handler_routing_routingService_improper_waypoints")}`,Oe.A.WARN):(console.error(e),(0,Oe.L)(`${this._translationService.translate("olMap_handler_routing_routingService_exception")}`,Oe.A.ERROR))}}this._setInteractionsActive(!0)}}async _updateStore(e){const t=this._polylineToGeometry(e.paths[0].points),n=new nr.A({geometry:t.clone().transform(`EPSG:${this._mapService.getSrid()}`,"EPSG:4326")});n.set(ei,Kr.ROUTE_SEGMENT),n.set(Jr,this._routingService.getCategoryById(e.vehicle)),n.setStyle(ii()),n.set("name",`${this._translationService.translate("global_app_name")} ${this._translationService.translate("olMap_handler_routing_rt_layer_label")} - ${this._routingService.getCategoryById(e.vehicle).label}`);const r=t.getCoordinates();try{const{stats:t}=await this._elevationService.requestProfile(r),i=this._routeStatsProvider(e,t),o={data:(new rr.Ay).writeFeatures([n]),type:Yr.Y1.forKml()};(0,Mr.Yb)(o,i)}catch(e){this._clearRouteFeatures(),this._resetStore(),console.error(e),(0,Oe.L)(`${this._translationService.translate("olMap_handler_routing_routingService_exception")}`,Oe.A.ERROR)}}_resetStore(){(0,Mr.Yb)(null,null)}_requestRouteFromInteractionLayer(){if(this._interactionLayer.getSource().getFeatures().length>1){this._clearRouteFeatures();const e=this._getInteractionFeatures().map((e=>e.getGeometry().getCoordinates()));(0,Mr.XX)(e)}}async _requestAndDisplayRoute(e,t,n){const r=0===this._getIntermediateFeatures().length?[e].concat(t):[e],i=await this._routingService.calculateRoute(r,n);return this._displayCurrentRoutingGeometry(i[e]),0===this._getIntermediateFeatures().length&&t.forEach((e=>{this._displayAlternativeRoutingGeometry(i[e])})),i}_highlightSegments(e,t,n){if(clearTimeout(this._highlightSegmentsTimeoutId),t.getSource().clear(),e){const{segments:r,zoomToExtent:i}=e,o=()=>{this._highlightSegmentsTimeoutId=setTimeout((()=>{t.getSource().clear()}),2500)},a=n.getSource().getFeatures().find((e=>e.get(ei)&&e.get(ei)===Kr.ROUTE)).getGeometry().getCoordinates(),s=r.map((e=>{const t=new nr.A(new Me.A(a.slice(e[0],e[1]+1)));return t.set(ei,Kr.ROUTE_HIGHLIGHT),t.setStyle(ii()),t}));t.getSource().addFeatures(s),i?((0,Ur.BY)(t.getSource().getExtent()),o()):this._environmentService.isTouch()&&o()}}_addIntermediate(e,t){const n=this._getInteractionFeatures().map((e=>e.getGeometry().getCoordinates())),r=t.getSource().getFeatures();if(r.length>0){const t=r.reduce(((t,n)=>{const r=n.getGeometry().getClosestPoint(e),i=t.getGeometry().getClosestPoint(e);return(0,$r.Io)(r,e)<(0,$r.Io)(i,e)?n:t})).get(ni);n.splice(t+1,0,e)}return n}_register(e){const t=(e,t,n)=>{this._promiseQueue.add((async()=>{this._catId=t,await this._requestRouteFromCoordinates([...e.map((e=>[...e]))],n)}))},n=e=>{(0,Mr.XX)([...this._addIntermediate(e,this._routeLayerCopy).map((e=>[...e]))])};return[(0,O.lB)(e,(e=>e.routing.waypoints),((e,n)=>t(e,n.routing.categoryId,n.routing.status)),!1),(0,O.lB)(e,(e=>e.routing.categoryId),((e,n)=>t(n.routing.waypoints,e,n.routing.status))),(0,O.lB)(e,(e=>e.routing.highlightedSegments),(e=>this._highlightSegments(e.payload,this._highlightLayer,this._routeLayer))),(0,O.lB)(e,(e=>e.routing.intermediate),(e=>n([...e.payload])))]}onDeactivate(){this._convertToPermanentLayer(),this._map=null,this._routingLayerGroup=null,this._alternativeRouteLayer=null,this._routeLayer=null,this._routeLayerCopy=null,this._highlightLayer=null,this._interactionLayer=null,this._activeInteraction=!1,this._modifyInteraction=null,this._translateInteraction=null,this._selectInteraction=null,this._catId=null,this._currentRoutingResponse=null,this._unsubscribe(this._registeredObservers),this._unregisterMapListener(this._mapListeners),this._helpTooltip.deactivate()}_unsubscribe(e){e.forEach((e=>e())),e.splice(0,e.length)}_unregisterMapListener(e){e.forEach((e=>(0,Ut.e)(e))),e.splice(0,e.length)}_convertToPermanentLayer(){if(this._routeLayerCopy.getSource().getFeatures().length>0){const e=this._routeLayerCopy.getSource().getFeatures()[0].get(Jr).label,t=`${this._translationService.translate("olMap_handler_routing_rt_layer_label")} - ${e}`,n=`${this._translationService.translate("olMap_handler_routing_wp_layer_label")} - ${e}`,r=or(this._routeLayerCopy,`EPSG:${this._mapService.getSrid()}`),i=or(this._interactionLayer,`EPSG:${this._mapService.getSrid()}`),o=(e,t)=>{const n=this._geoResourceService.byId(e);return n?n.setLabel(t):new lt.HA(e,t,lt.Vz.KML)},a=o(kr,t).setSource(r,4326).setHidden(!0).setAttributionProvider(this._attributionProvider),s=o(zr,n).setSource(i,4326).setHidden(!0).setAttributionProvider(gt.Ve);this._geoResourceService.addOrReplace(a),this._geoResourceService.addOrReplace(s),(0,_t.VE)(kr,{constraints:{metaData:!1}}),(0,_t.VE)(zr,{constraints:{metaData:!1}})}}}const ii=()=>{const{IconService:e}=r.z.inject("IconService");return t=>{switch(t.get(ei)){case Kr.START:return[new Qt.Ay({image:new Kt.A({anchor:[.5,1],anchorXUnits:"fraction",anchorYUnits:"fraction",src:e.getIconResult("rt_start").base64})})];case Kr.DESTINATION:return[new Qt.Ay({image:new Kt.A({anchor:[.5,1],anchorXUnits:"fraction",anchorYUnits:"fraction",src:e.getIconResult("rt_destination").base64})})];case Kr.INTERMEDIATE:{const n=t.get(ti)?t.get(ti).toString():"",r=new Vt.A({text:n,offsetY:2,font:"bold 14px Open Sans",stroke:new Wt.A({color:[255,255,255,1],width:3})});return[new Qt.Ay({image:new Kt.A({anchor:[.5,.5],anchorXUnits:"fraction",anchorYUnits:"fraction",src:e.getIconResult("rt_intermediate").base64}),text:r})]}case Kr.ROUTE:return[new Qt.Ay({stroke:new Wt.A({color:t.get(Jr).style.routeBorderColor,width:8})})];case Kr.ROUTE_ALTERNATIVE:return[new Qt.Ay({zIndex:t.get(Jr).style.routeZindex||0,stroke:new Wt.A({color:"white",width:5,lineDash:[10]})}),new Qt.Ay({zIndex:t.get(Jr).style.routeZindex+1||1,stroke:new Wt.A({color:t.get(Jr).style.routeColor,width:3,lineDash:[5]})})];case Kr.ROUTE_SEGMENT:return[new Qt.Ay({stroke:new Wt.A({color:t.get(Jr).style.routeColor,width:5})})];case Kr.ROUTE_HIGHLIGHT:return[new Qt.Ay({stroke:new Wt.A({color:"#ffc107",width:3})})];default:return null}}},oi=()=>[new Qt.Ay({image:new qt.A({radius:8,fill:new Zt.A({color:"#099dda"})})}),new Qt.Ay({image:new qt.A({radius:6,fill:new Zt.A({color:"white"})})})],ai=Object.freeze({NULL:"null",DEFAULT:"default",MEASURE:"measure",DRAW:"draw",MARKER:"marker",POINT:"point",TEXT:"text",ANNOTATION:"annotation",LINE:"line",POLYGON:"polygon",GEOJSON:"geojson",ROUTING:"routing"}),si=[[255,0,0,.8],[255,165,0,.8],[0,0,255,.8],[0,255,255,.8],[0,255,0,.8],[128,0,128,.8],[0,128,0,.8]],ci=["marker-symbol","marker-size","marker-color","stroke","stroke-opacity","stroke-width","fill","fill-opacity"];class li{#Z=0;#Q={};addInternalFeatureStyle(e,t){switch(this._detectStyleType(e)){case ai.MEASURE:this._addMeasureStyle(e,t);break;case ai.ANNOTATION:case ai.TEXT:this._addTextStyle(e);break;case ai.MARKER:this._addMarkerStyle(e);break;case ai.POLYGON:case ai.LINE:break;case ai.GEOJSON:this._addGeoJSONStyle(e);break;case ai.ROUTING:this._addRoutingStyle(e);break;default:console.warn("Could not provide a style for unknown style-type")}}updateInternalFeatureStyle(e,t,n,i=null){const o=i||this._detectStyleType(e),{OverlayService:a}=r.z.inject("OverlayService");o===ai.MEASURE&&a.update(e,t,o,n)}removeInternalFeatureStyle(e,t){const n=this._detectStyleType(e),{OverlayService:i}=r.z.inject("OverlayService");i.remove(e,t,n)}applyStyle(e,t,n){return this._applyLayerSpecificStyles(n,e),this._applyDefaultStyleOptionally(n,e),this._applyFeatureSpecificStyles(e,t)}_applyLayerSpecificStyles(e,t){const n=t.get("style")??e.style;if(n?.baseColor)this._setBaseColorForLayer(t,[...(0,en.E2)(n.baseColor),.8]);else if(e.hasStyleHint())switch(e.styleHint){case mn.T.CLUSTER:t.setStyle((()=>{const e={},t=new Qt.Ay({image:new qt.A({radius:17,fill:new Zt.A({color:bn.concat([.15])})})});return(n,r)=>{const i=n.get("features").length;return 1===i?(()=>{const e=n.get("features")[0].getStyle();return"function"==typeof e?e(n,r):e})():e[i]||(()=>{const n=[t,new Qt.Ay({image:new qt.A({radius:15,stroke:new Wt.A({color:yn}),fill:new Zt.A({color:"#099dda"}),displacement:[0,1]}),text:new Vt.A({text:i.toString(),scale:1.5,fill:new Zt.A({color:yn}),font:"normal 12px Open Sans"})})];return e[i]=n,n})()}})());break;case mn.T.HIGHLIGHT:t.setStyle(br())}return t}_applyDefaultStyleOptionally(e,t){const n=t.get("style")??e.style,r=n?.baseColor||e.hasStyleHint();if(t.getSource().getFeatures().some((e=>!e.getStyle()))&&!r){const n=e?.sourceType===lt.Vz.GPX?this._nextColor():this._getColorByLayerId(t);t.setStyle(jn(n))}return t}_applyFeatureSpecificStyles(e,t){const n=[],r=e.getSource(),i=e=>{const t=e.get((0,dn.LL)("styleHint")),n=e.get((0,dn.LL)("style"));return!t&&!n&&null!==this._detectStyleType(e)},o=o=>{this._sanitizeStyleFor(o);const a=o.get((0,dn.LL)("styleHint")),s=o.get((0,dn.LL)("style"));a&&a===mn.T.HIGHLIGHT&&o.setStyle(br()),s?.baseColor&&o.setStyle(jn((0,en.E2)(s.baseColor))),i(o)&&(this.addInternalFeatureStyle(o,t),this.updateInternalFeatureStyle(o,t,this._mapToStyleProperties(e)),0===n.length&&this._registerStyleEventListeners(r,e,t).forEach((e=>n.push(e))))};return r.getFeatures().forEach((e=>o(e))),e}_mapToStyleProperties(e){const{StoreService:t}=r.z.inject("StoreService"),{layers:{active:n}}=t.getStore().getState();return{visible:e.getVisible(),top:n.filter((({constraints:{hidden:e}})=>!e)).pop()?.id===e.get("id"),opacity:e.getOpacity()}}_registerStyleEventListeners(e,t,n){const r=e.on("addfeature",(e=>{this.addInternalFeatureStyle(e.feature,n),this.updateInternalFeatureStyle(e.feature,n,this._mapToStyleProperties(t))})),i=e.on("removefeature",(e=>{this.removeInternalFeatureStyle(e.feature,n)})),o=e.on("clear",(()=>{e.getFeatures().forEach((e=>this.removeInternalFeatureStyle(e,n)))})),a=n.getLayers().on(["add","remove"],(()=>{e.getFeatures().forEach((e=>this.updateInternalFeatureStyle(e,n,this._mapToStyleProperties(t))))}));return[r,i,o,t.on(["change:zIndex","change:visible","change:opacity"],(()=>{e.getFeatures().forEach((e=>this.updateInternalFeatureStyle(e,n,this._mapToStyleProperties(t))))})),a]}_sanitizeStyleFor(e){const t=e=>e instanceof _r.A||e instanceof Jt.A,n=e.getGeometry(),r=(e=>{const t=e.getStyleFunction(),n=t&&t(e)?t(e):null;return Array.isArray(n)&&n.length>0?n:n instanceof Qt.Ay?[n]:null})(e),i=r?r[0].clone():null,o=(e=>{const t=e?.getStroke?e.getStroke():null;return t&&0===t.getWidth()?null:t})(i);if(i&&t(n)){const t=i.getImage()??void 0,n=(e=>e&&0===e.getScale()?new qt.A({radius:1,fill:new Zt.A({color:Sn}),stroke:new Wt.A({color:Sn})}):e)(t),r=((e,t)=>{if(e&&t?.getText()&&0!==t?.getText().getScale())return new Vt.A({font:"normal 24px Open Sans",text:e,fill:t.getText().getFill(),stroke:new Wt.A({color:(0,en.yQ)(t.getText().getFill().getColor()),width:3}),scale:t.getText().getScale()})})(e.get("name"),i),a=[new Qt.Ay({fill:r?void 0:i.getFill(),stroke:r?void 0:o,image:r?n:t,text:!1===(0,_n.eG)(e,"showPointNames")?void 0:r,zIndex:i.getZIndex()})];e.setStyle(a)}if(i&&!(t(n)||n instanceof pr.A)){const t=[new Qt.Ay({fill:i.getFill(),stroke:o,image:null,text:null,zIndex:i.getZIndex()})];e.setStyle(t)}}_addRoutingStyle(e){const t=ii();e.setStyle(t)}_getColorByLayerId(e){const t=(0,gr.v6)(e);return void 0===this.#Q[t]&&(this.#Q[t]=this._nextColor()),[...this.#Q[t]]}_setBaseColorForLayer(e,t){e.setStyle(jn(t))}_addGeoJSONStyle(e){e.setStyle(En)}_addMarkerStyle(e){const{IconService:t}=r.z.inject("IconService"),n=Tn((n=>{const r=Fn(n);return r?(e=>{const n=e.getImage()?.getSrc(),r=e.getImage()?.getColor(),i=r||t.decodeColor(n),o=Ln(e.getImage()?.getScale()),a=e.getImage()?.getSize(),s=e.getImage()?.getAnchor(),c=e.getText()?.getText();return{symbolSrc:n,color:(0,en.Ob)(i||e.getText()?.getFill()?.getColor()),scale:o,text:c,anchor:a&&s?[s[0]/a[0],s[1]/a[1]]:null}})(r[0]):(e=>({text:e.get("name")}))(e)})(e));e.setStyle((()=>n))}_addTextStyle(e){const t=xn((()=>{const t=Fn(e);return t?(e=>{const t=e.getText()?.getFill().getColor(),n=e.getText()?.getText(),r=e.getText()?.getScale();return{color:Array.isArray(t)?(0,en.Ob)(t):t,scale:r,text:n}})(t[0]):(e=>({text:e.get("name")}))(e)})());e.setStyle((()=>t))}_addMeasureStyle(e,t){const{OverlayService:n}=r.z.inject("OverlayService");e.get((0,dn.LL)(un))||e.set((0,dn.LL)(un),new pn(e,t)),e.setStyle(kn),n.add(e,t,ai.MEASURE)}_nextColor(){const e=e=>si[e];return this.#Z===si.length?e((()=>(this.#Z=0,this.#Z))()):e((()=>this.#Z++)())}_detectStyleType(e){const t=e=>e.getKeys().some((e=>ci.includes(e)))?ai.GEOJSON:null,n=e=>{const t=e.getId(),n=Object.keys(ai).find((e=>{return n=ai[e],r=t,new RegExp("^draw_"+n+"_").test(r);var n,r}));if(n)return ai[n];const r=Object.keys(ai).find((e=>{return n=ai[e],r=t,new RegExp("^"+n+"_").test(r);var n,r}));return r?ai[r]:null},r=e=>{const t=e.get("type");return Object.values(ai).find((e=>e===t))??null};if(e)for(const i of[n,t,r]){const t=i(e);if(t)return t}return null}}tt.S.DRAW;class di{constructor(){this._pointCount=0,this._isSnapOnLastPoint=!1,this._isFinishOnFirstPoint=!1,this._sketch=null,this._map=null}_getLineCoordinates(e){return e instanceof Ie.Ay?e.getCoordinates()[0].slice(0,-1):e.getCoordinates()}_monitorProperties(e){const t=this._getLineCoordinates(e.getGeometry());if(this._pointCount!==t.length)this._pointCount=t.length;else if(t.length>1){const e=t[0],n=t[t.length-1],r=t[t.length-2],i=n[0]===e[0]&&n[1]===e[1];this._isFinishOnFirstPoint=!this._isSnapOnLastPoint&&i,this._isSnapOnLastPoint=n[0]===r[0]&&n[1]===r[1]}e.set((0,dn.LL)("finishOnFirstPoint"),this._isFinishOnFirstPoint)}activate(e,t,n=tt.S.DRAW+"_"){this._map=t,e!==this._sketch&&(e.setId(n+(new Date).getTime()),this._listener=e.on("change",(e=>this._monitorProperties(e.target))),this._pointCount=1,this._sketch=e)}deactivate(){(0,Ut.e)(this._listener),this._sketch.unset((0,dn.LL)("finishOnFirstPoint")),this._sketch=null,this._isFinishOnFirstPoint=!1,this._isSnapOnLastPoint=!1,this._pointCount=0}get active(){return this._sketch}get isActive(){return null!==this._sketch}get isSnapOnLastPoint(){return this._isSnapOnLastPoint}get isFinishOnFirstPoint(){return this._isFinishOnFirstPoint}get pointCount(){return this._pointCount}}const ui="measurement_layer";class gi extends wr.h{async register(e){(0,O.lB)(e,(e=>e.measurement.active),(e=>{e?(0,_t.VE)(ui,{constraints:{hidden:!0,alwaysTop:!0}}):(0,_t.e5)(ui)})),(0,O.lB)(e,(e=>e.tools.current),(e=>{e!==tt.S.MEASURE?(0,Ht.LU)():setTimeout((()=>(0,Ht.Yf)()))}),!1)}}const hi=()=>{(()=>{const{StoreService:e}=r.z.inject("StoreService");return e.getStore()})().dispatch({type:b,payload:!0})};var pi=n(39447),mi=n(82090);const _i=()=>{const{StoreService:e}=r.z.inject("StoreService");return e.getStore()},vi=e=>{e&&_i().dispatch({type:X,payload:e})};var yi=n(69600);const bi={geometryType:null,coordinate:null,azimuth:null,length:null,area:null};class Si extends Yt{constructor(){super(ui);const{TranslationService:e,MapService:t,EnvironmentService:n,StoreService:i,GeoResourceService:o,OverlayService:a,StyleService:s,FileStorageService:c}=r.z.inject("TranslationService","MapService","EnvironmentService","StoreService","GeoResourceService","OverlayService","StyleService","FileStorageService");this._translationService=e,this._mapService=t,this._environmentService=n,this._storeService=i,this._geoResourceService=o,this._overlayService=a,this._styleService=s,this._fileStorageService=c,this._vectorLayer=null,this._layerId=null,this._layerZIndex=null,this._draw=!1,this._storedContent=null,this._storeId=null,this._sketchHandler=new di,this._mapListeners=[],this._keyActionMapper=new mi.P(document).addForKeyUp("Delete",(()=>this._remove())).addForKeyUp("Escape",(()=>this._startNew())),this._lastPointerMoveEvent=null,this._lastInteractionStateType=null,this._measureState={type:null,snap:null,coordinate:null,pointCount:0,dragging:!1},this._helpTooltip=new Hn,this._helpTooltip.messageProvideFunction=tr,this._measureStateChangedListeners=[],this._drawingListeners=[],this._registeredObservers=[]}onActivate(e){const t=(e,t=[])=>this._translationService.translate(e,t);if(!this._storeService.getStore().getState().shared.termsOfUseAcknowledged&&!this._environmentService.isStandalone()&&!this._environmentService.isEmbedded()){const e=t("olMap_handler_termsOfUse",[t("global_terms_of_use")]);e&&(0,Oe.L)(e,Oe.A.INFO),hi()}const n=e=>e.getLayers().getArray().sort(((e,t)=>t.getZIndex()-e.getZIndex())).find((e=>this._fileStorageService.isAdminId(e.get("geoResourceId"))||this._fileStorageService.isFileId(e.get("geoResourceId")))),r=async(t,n)=>{if(n){const r=this._geoResourceService.byId(n.get("geoResourceId"));if(r){const i=await r.data,o=(new rr.Ay).readFeatures(i),a=t=>{const n=this._createMeasureGeometry(t.target),r=this._mapService.calcLength((0,we.qC)(n)?.getCoordinates());t.target.set((0,dn.LL)(we.tT),r),n.set((0,dn.LL)(we.tT),r),this._styleService.updateInternalFeatureStyle(t.target,e,{geometry:n},ai.MEASURE),this._setStatistic(t.target)};o.forEach((n=>{n.getGeometry().transform("EPSG:"+r.srid,"EPSG:"+this._mapService.getSrid()),t.getSource().addFeature(n),n.getId().startsWith(tt.S.MEASURE)&&n.set((0,dn.LL)(un),new pn(n,e)),this._styleService.removeInternalFeatureStyle(n,e),this._styleService.addInternalFeatureStyle(n,e,t),n.on("change",a)}));const s=!o.some((e=>"false"===(0,_n.eG)(e,"displayruler"))),c=o.some((e=>e.getId().startsWith(tt.S.MEASURE+"_")));(0,Ht.xy)(s);const l=n.get("id");this._layerId=l,this._layerZIndex=n.getZIndex(),(0,_t.e5)(l),c&&this._finish(),this._setSelection(this._storeService.getStore().getState().measurement.selection),this._updateStoreId(n.get("geoResourceId")),this._updateMeasureState()}}},i=()=>{const e=n(this._map),i=(()=>{const e=new Ft.A({wrapX:!0,useSpatialIndex:!1}),n=new Gt.A({source:e,style:kn});return n.label=t("olMap_handler_draw_layer_label"),n})(),o=()=>{i.getSource().getFeatures().forEach((e=>(e=>{["area","measurement"].forEach((t=>{const n=e.get((0,dn.LL)(t));n&&n.get((0,dn.LL)("manualPositioning"))&&(e.set((0,dn.LL)(t+"_position_x"),n.getPosition()[0]),e.set((0,dn.LL)(t+"_position_y"),n.getPosition()[1]))}))})(e)));const e=or(i,"EPSG:3857");this._storedContent=e??ir,this._save()},a=e=>{this._measureState.type===Vn.DRAW&&(0,Ht.td)([e.feature.getId()]),this._storedContent=or(i,"EPSG:3857"),this._save()},s=e=>{this._mapListeners.push(e.getSource().on("addfeature",a)),this._mapListeners.push(e.getSource().on("changefeature",(()=>{o()}))),this._mapListeners.push(e.getSource().on("removefeature",(()=>{o()})))};return r(i,e).finally((()=>{this._storedContent=or(i,"EPSG:3857"),s(i)})),i},o=e=>{const t=e.coordinate,n=e.dragging,r=e.pixel;if(this._sketchHandler.isActive||this._measureState.type===Vn.DRAW)return void this._updateMeasureState(t,r,n);const i=Xn(this._map,this._vectorLayer,r);(i.some((e=>!e.getId().startsWith(tt.S.MEASURE+"_")))?e=>{if((e=>e.some((e=>e.getId().startsWith(tt.S.DRAW+"_"))))(e)){const t=e.filter((e=>e.getId().startsWith(tt.S.DRAW+"_"))).map((e=>e.getId()));(0,pi.td)(t),(0,Er.i)(tt.S.DRAW)}}:e=>{if([Vn.MODIFY,Vn.SELECT].includes(this._measureState.type)){const i=e.map((e=>e.getId()));(0,Ht.td)(i),this._updateStatistic(),this._updateMeasureState(t,r,n)}})(i)},a=e=>{this._lastPointerMoveEvent=e;const t=e.coordinate,n=e.dragging,r=e.pixel;this._updateMeasureState(t,r,n)};if(!1===this._draw){this._map=e,this._mapContainer=e.getTarget(),this._vectorLayer=i();const t=this._vectorLayer.getSource();this._select=this._createSelect(),this._select.setActive(!1),this._modify=this._createModify(),this._modify.setActive(!1),this._draw=this._createDraw(t),this._snap=new jt.A({source:t,pixelTolerance:er()}),this._onMeasureStateChanged((e=>this._updateMeasurementMode(e))),this._environmentService.isTouch()||(this._helpTooltip.activate(this._map),this._onMeasureStateChanged((e=>{this._helpTooltip.notify(e),e.snap===Wn.VERTEX?this._mapContainer.classList.add("grab"):this._mapContainer.classList.remove("grab")}))),this._mapListeners.push(e.on(Gn.A.CLICK,o)),this._mapListeners.push(e.on(Gn.A.POINTERMOVE,a)),this._mapListeners.push(e.on(Gn.A.DBLCLICK,(()=>!1))),this._registeredObservers=this._register(this._storeService.getStore()),this._keyActionMapper.activate(),e.addInteraction(this._select),e.addInteraction(this._modify),e.addInteraction(this._draw),e.addInteraction(this._snap),this._storedContent=null}return this._updateMeasureState(),this._vectorLayer}onDeactivate(e){e.removeInteraction(this._draw),e.removeInteraction(this._modify),e.removeInteraction(this._snap),e.removeInteraction(this._select),this._helpTooltip.deactivate(),this._unreg(this._mapListeners),this._unreg(this._measureStateChangedListeners),this._unreg(this._drawingListeners),this._unsubscribe(this._registeredObservers),this._keyActionMapper.deactivate(),this._convertToPermanentLayer().finally((()=>{this._layerId=null,this._layerZIndex=null,this._storedContent=null,this._storeId=null})),this._vectorLayer.getSource().getFeatures().forEach((e=>this._overlayService.remove(e,this._map,ai.MEASURE))),(0,Ht.td)([]),(0,Ht.b4)(bi),this._draw=!1,this._modify=!1,this._select=!1,this._snap=!1,this._map=null}_unreg(e){(0,Ut.e)(e),e=[]}_unsubscribe(e){e.forEach((e=>e())),e.splice(0,e.length)}_setMeasureState(e){e!==this._measureState&&(this._measureState=e,this._measureStateChangedListeners.forEach((t=>t(e))))}_onMeasureStateChanged(e){this._measureStateChangedListeners.push(e)}_register(e){return[(0,O.lB)(e,(e=>e.measurement.finish),(()=>this._finish())),(0,O.lB)(e,(e=>e.measurement.reset),(()=>this._startNew())),(0,O.lB)(e,(e=>e.measurement.remove),(()=>this._remove())),(0,O.lB)(e,(e=>e.measurement.selection),(e=>this._setSelection(e))),(0,O.lB)(e,(e=>e.measurement.displayRuler),(e=>this._updateStyle(e))),(0,O.lB)(e,(e=>e.fileStorage.fileId),(e=>this._updateStoreId(e)))]}_remove(){if(this._draw&&this._draw.getActive()&&(this._draw.removeLastPoint(),1===this._sketchHandler.pointCount&&this._startNew(),this._lastPointerMoveEvent&&this._draw.handleEvent(this._lastPointerMoveEvent)),this._modify&&this._modify.getActive()){const e=e=>this._overlayService.remove(e,this._map,ai.MEASURE);Jn(this._select.getFeatures(),this._vectorLayer,e),this._setSelection([]),this._updateStatistic(),this._updateMeasureState()}}_finish(){this._draw.getActive()&&(this._sketchHandler.isActive?(this._draw.finishDrawing(),this._updateMeasureState()):this._activateModify(null))}_startNew(){this._draw.getActive()&&this._draw.abortDrawing(),this._draw.setActive(!0),(0,Ht.td)([]),(0,Ht.b4)(bi),this._modify.setActive(!1),this._helpTooltip.deactivate(),this._helpTooltip.activate(this._map),this._updateMeasureState()}_updateStyle(e){this._vectorLayer.getSource().getFeatures().forEach((t=>{t.set((0,dn.LL)("displayruler"),`${e}`);const n=this._createMeasureGeometry(t);this._styleService.updateInternalFeatureStyle(t,this._map,{geometry:n},ai.MEASURE)}))}_createDraw(e){const t=new Ot.Ay({source:e,type:"Polygon",minPoints:2,snapTolerance:er(),style:On(kn,this._getSketchStyleOptions()),wrapX:!0}),n=e=>{const t=e.feature.getGeometry();if(e.feature.get((0,dn.LL)("measurement")).getElement().static=!0,t instanceof Ie.Ay&&!this._sketchHandler.isFinishOnFirstPoint){const n=t.getCoordinates()[0].slice(0,-1);e.feature.setGeometry(new Me.A(n))}this._sketchHandler.deactivate(),this._unreg(this._drawingListeners)};return t.on("drawstart",(e=>{this._sketchHandler.activate(e.feature,this._map,tt.S.MEASURE+"_"),e.feature.set((0,dn.LL)(un),new pn(e.feature,this._map,(()=>!this._sketchHandler.isFinishOnFirstPoint))),e.feature.set((0,dn.LL)("displayruler"),`${this._storeService.getStore().getState().measurement.displayRuler}`),this._overlayService.add(this._sketchHandler.active,this._map,ai.MEASURE),this._drawingListeners.push(e.feature.on("change",(e=>{const t=e.target,n=this._createMeasureGeometry(t),r=n.get((0,dn.LL)(we.tT))?n.get((0,dn.LL)(we.tT)):this._mapService.calcLength((0,we.qC)(n)?.getCoordinates());r&&(t.set((0,dn.LL)("displayruler"),`${this._storeService.getStore().getState().measurement.displayRuler}`),t.set((0,dn.LL)(we.tT),r),t.getGeometry().set((0,dn.LL)(we.tT),r),n.set((0,dn.LL)(we.tT),r)),this._overlayService.update(e.target,this._map,ai.MEASURE,{geometry:n}),this._setStatistic(e.target)}))),this._drawingListeners.push(this._map.getView().on("change:resolution",(()=>{const e=this._createMeasureGeometry(this._sketchHandler.active);this._overlayService.update(this._sketchHandler.active,this._map,ai.MEASURE,{geometry:e})})))})),t.on("drawabort",(e=>this._overlayService.remove(e.feature,this._map,ai.MEASURE))),t.on("drawend",(e=>{n(e),this._styleService.addInternalFeatureStyle(e.feature,this._map,this._vectorLayer),this._activateModify(e.feature)})),t}_createSelect(){const e=new Pt.A(Qn(this._vectorLayer)),t=()=>this._map.getView().getResolution();return e.getFeatures().on("change:length",this._updateStatistic),e.getFeatures().on("add",(e=>{const n=e.element,r=Rn()(n,t());e.element.setStyle(r)})),e.getFeatures().on("remove",(e=>{const t=e.element,n=t.getStyle();n.pop(),t.setStyle(n)})),e}_createModify(){const e=new $t.A(qn(this._select.getFeatures()));return e.on("modifystart",(e=>{e.mapBrowserEvent.type!==Gn.A.SINGLECLICK&&this._mapContainer.classList.add("grabbing")})),e.on("modifyend",(e=>{e.mapBrowserEvent.type!==Gn.A.POINTERUP&&e.mapBrowserEvent.type!==Gn.A.CLICK||this._mapContainer.classList.remove("grabbing")})),e}_activateModify(e){if(this._draw.setActive(!1),this._modify.setActive(!0),this._modifyActivated=!0,e){e.set((0,dn.LL)(un),new pn(e,this._map));const t=t=>{const n=this._createMeasureGeometry(t.target),r=this._mapService.calcLength((0,we.qC)(n)?.getCoordinates());e.set((0,dn.LL)(we.tT),r),e.set((0,dn.LL)("displayruler"),`${this._storeService.getStore().getState().measurement.displayRuler}`),e.getGeometry().set((0,dn.LL)(we.tT),r),n.set((0,dn.LL)(we.tT),r),this._overlayService.update(t.target,this._map,ai.MEASURE,{geometry:n}),this._updateStatistic()};e.on("change",t)}}_setStatistic(e){const t=(0,we.GT)(e.getGeometry());if(this._sketchHandler.isFinishOnFirstPoint)(0,Ht.b4)(t);else{const n=this._createMeasureGeometry(e),r=(0,we.GT)(n);(0,Ht.b4)({...t,length:r.length})}}_updateStatistic(){const e=(e,t)=>{const n=(0,we.GT)(t.getGeometry());return e?{...e,length:e.length+n.length,area:e.area+n.area}:n};if(this._select){const n=1===(t=this._select.getFeatures().getArray()).length?(0,we.GT)(t[0].getGeometry()):t.length>1?{...t.reduce(e,bi),geometryType:yi.d.COLLECTION}:bi;(0,Ht.b4)(n)}var t}_updateMeasurementMode(e){this._lastInteractionStateType!==e.type&&e.type!==Vn.OVERLAY&&(this._lastInteractionStateType=e.type,(0,Ht.iY)(this._lastInteractionStateType))}_createMeasureGeometry(e){const t=e.get((0,dn.LL)(un));return t&&t.getCalculationStatus()===gn.ACTIVE?(e=>e.get((0,dn.LL)(un)).getGeometry())(e):(e=>{if(e.getGeometry()instanceof Ie.Ay){const t=e.getGeometry().getCoordinates()[0];if(!this._sketchHandler.isFinishOnFirstPoint&&this._sketchHandler.isActive)return new Me.A(t.slice(0,-1))}return e.getGeometry()})(e)}_getSketchStyleOptions(){return{LineString:(e,t)=>(e.get((0,dn.LL)(un))||(e.set((0,dn.LL)(un),new pn(e,this._map,(()=>!0))),e.on("change",(e=>e.target.set((0,dn.LL)("displayruler"),`${this._storeService.getStore().getState().measurement.displayRuler}`)))),kn(e,t))}}_updateMeasureState(e,t,n){const r={type:null,snap:null,coordinate:e,pointCount:this._sketchHandler.pointCount};t&&(r.snap=Kn(this._map,this._vectorLayer,t)),this._draw.getActive()&&(r.type=Vn.ACTIVE,this._sketchHandler.isActive&&(r.type=Vn.DRAW,this._sketchHandler.isFinishOnFirstPoint?r.snap=Wn.FIRSTPOINT:this._sketchHandler.isSnapOnLastPoint&&(r.snap=Wn.LASTPOINT))),this._modify.getActive()&&(r.type=0===this._select.getFeatures().getLength()?Vn.SELECT:Vn.MODIFY,r.geometryType=0===this._select.getFeatures().getLength()?null:this._select.getFeatures().item(0)?.getGeometry().getType()),ar(this._vectorLayer).find((e=>!0===e.get((0,dn.LL)("draggable"))))&&(r.type=Vn.OVERLAY);const i=ar(this._vectorLayer).find((e=>!0===e.get((0,dn.LL)("dragging"))));if(i&&(i.setOffset([0,0]),i.set((0,dn.LL)("manualPositioning"),!0),i.setPosition(e),i.get("feature").dispatchEvent("propertychange")),r.dragging=n,null==e&&null==t&&(this._measureState.type===Vn.MODIFY&&(r.type=Vn.SELECT),null==this._measureState.type)){const e=this._vectorLayer.getSource().getFeatures().length>0;r.type=e?Vn.SELECT:r.type}this._setMeasureState(r)}_updateStoreId(e){this._storeId=e}_setSelection(e){const t=0===e.length?()=>{this._select?.getFeatures().clear()}:e=>{e.forEach((e=>{const t=this._vectorLayer.getSource().getFeatureById(e),n=this._select.getFeatures().getArray().includes(t);t&&!n&&this._select.getFeatures().push(t)}))};this._select&&t(e)}async _save(){vi(this._storedContent)}async _convertToPermanentLayer(){const e=(()=>this._translationService.translate("olMap_handler_draw_layer_label"))();if(await this._save(),this._storedContent){const t=this._storeService.getStore().getState().fileStorage.fileId??this._storeId,n=(()=>this._geoResourceService.byId(t)||new lt.HA(t,e,lt.Vz.KML).setAttributionProvider(gt.Ve))();n.setSource(this._storedContent,4326),this._geoResourceService.addOrReplace(n);const r=this._layerId??`${t}_draw`;(0,_t.VE)(r,{zIndex:this._layerZIndex??(0,a.EC)().zIndex,geoResourceId:t,constraints:{metaData:!1}})}}}const fi=()=>[new Qt.Ay({fill:new Zt.A({color:[255,0,0,.1]}),stroke:new Wt.A({color:[255,0,0,.9],width:3}),image:new qt.A({radius:6,fill:new Zt.A({color:[255,0,0,.9]}),stroke:new Wt.A({color:[255,255,255,1],width:2})})})],wi=()=>[new Qt.Ay({})];var Mi=n(52957);const Ii="geolocation_layer";class Ai extends wr.h{constructor(){super(),this._firstTimeActivatingGeolocation=!0,this._geolocationWatcherId=null;const{TranslationService:e,EnvironmentService:t}=r.z.inject("TranslationService","EnvironmentService");this._translationService=e,this._environmentService=t}_handlePositionError(e){console.warn("Geolocation activation failed",e),e.code===e.PERMISSION_DENIED?((0,Mi.uc)(!0),alert(this._translationService.translate("global_geolocation_denied"))):alert(this._translationService.translate("global_geolocation_not_available"))}_watchPosition(){return navigator.geolocation.watchPosition((e=>this._handlePositionAndUpdateStore(e)),(e=>this._handlePositionError(e)),{maximumAge:1e4,enableHighAccuracy:!0,timeout:6e5})}_fit(e){const{MapService:t,CoordinateService:n}=r.z.inject("MapService","CoordinateService"),i=this._transformPositionTo3857(e),o=[...i,...i],a=n.transformExtent(o,t.getSrid(),t.getLocalProjectedSrid()),s=n.transformExtent(n.buffer(a,e.coords.accuracy),t.getLocalProjectedSrid(),t.getSrid());(0,Ur.BY)(s,{maxZoom:16})}_handlePositionAndUpdateStore(e){const{StoreService:t}=r.z.inject("StoreService");t.getStore().getState().geolocation.denied&&(0,Mi.uc)(!1);const n=this._transformPositionTo3857(e);(0,Mi.Kk)(n),(0,Mi.c_)(e.coords.accuracy),this._firstTimeActivatingGeolocation?(this._firstTimeActivatingGeolocation=!1,this._fit(e)):t.getStore().getState().geolocation.tracking&&(0,Ur.Uj)(n)}_transformPositionTo3857(e){const{CoordinateService:t}=r.z.inject("CoordinateService"),{coords:n}=e;return t.fromLonLat([n.longitude,n.latitude])}_activate(){(0,Mi.Wh)(!0),this._geolocationWatcherId=this._watchPosition()}_deactivate(){null!==this._geolocationWatcherId&&(navigator.geolocation.clearWatch(this._geolocationWatcherId),this._geolocationWatcherId=null)}async register(e){(0,O.lB)(e,(e=>e.geolocation.active),(e=>{e?(this._activate(),(0,_t.VE)(Ii,{constraints:{hidden:!0,alwaysTop:!0}})):(this._deactivate(),(0,_t.e5)(Ii))})),(0,O.lB)(e,(e=>e.pointer.beingDragged),((e,t)=>{t.geolocation.active&&e&&(0,Mi.Wh)(!1)})),"true"===this._environmentService.getQueryParams().get(xe.h.GEOLOCATION)&&setTimeout((()=>{(0,Mi.Yf)()}))}}class Li extends Yt{constructor(){super(Ii,{preventDefaultClickHandling:!1,preventDefaultContextClickHandling:!1});const{StoreService:e}=r.z.inject("StoreService");this._storeService=e,this._geolocationLayer=null,this._accuracyFeature=new nr.A,this._positionFeature=new nr.A,this._map=null}onActivate(e){if(null===this._geolocationLayer){const e=new Ft.A({wrapX:!1,features:[this._accuracyFeature,this._positionFeature]});this._geolocationLayer=new Gt.A({source:e})}return this._map=e,this._positionFeature.setStyle(fi),this._accuracyFeature.setStyle(fi),this._blinkPosition(this._positionFeature),this._unregister=this._register(this._storeService.getStore()),this._geolocationLayer}onDeactivate(e){this._positionFeature.setStyle(wi),this._accuracyFeature.setStyle(wi),this._geolocationLayer=null,this._map=null,this._unregister()}_register(e){return(0,O.lB)(e,(e=>e.geolocation),((e,t)=>{var n;(n=e).active&&!n.denied&&n.position&&n.accuracy?(this._positionFeature.setStyle(fi),this._accuracyFeature.setStyle(fi),this._positionFeature.setGeometry(new _r.A(e.position)),this._accuracyFeature.setGeometry(new Xt.A(e.position,e.accuracy)),this._map.renderSync(),t.pointer.beingDragged||this._blinkPosition(this._positionFeature)):(this._positionFeature.setStyle(wi),this._accuracyFeature.setStyle(wi))}))}_blinkPosition(e){const t=((e,t)=>{const r=Date.now();return i=>{if(t.getGeometry()){const e=(0,Bt.r2)(i),o=i.frameState,a=t.getGeometry().clone(),s=o.time-r,c=(s>=0?s:0)/1e3,l=24*(0,hr.vT)(c)+6,d=(0,hr.vT)(1-c),u=new Qt.Ay({image:new qt.A({radius:l,stroke:new Wt.A({color:"rgba(255, 0, 0, "+d+")",width:.25+d})})});if(e.setStyle(u),e.drawGeometry(a),s>1e3)return void(0,Ut.e)(n)}e.render()}})(this._map,e),n=this._geolocationLayer.on("postrender",t)}}var Ei=n(13333),Ti=n(11365);const xi=e=>{if((0,Ae.Kg)(e)){const t=e.split(";").map((e=>e.trim()));if(2===t.length&&t[1].length>0){const e=Number.parseInt(t[0]?.split("=")[1]);if(Number.isInteger(e))return{srid:e,wkt:t[1]}}}return null};class Di extends Yt{constructor(){super(et.$A,{preventDefaultClickHandling:!1,preventDefaultContextClickHandling:!1});const{StoreService:e,MapService:t}=r.z.inject("StoreService","MapService");this._storeService=e,this._mapService=t,this._unregister=()=>{},this._olMap=null,this._olLayer=null,this._animationListenerKeys=[]}onActivate(e){return this._olMap=e,this._olLayer=this._createLayer(),this._unregister=this._register(this._storeService.getStore(),this._olLayer.getSource()),this._olLayer}onDeactivate(e){this._unregister(),this._olMap=null,this._olLayer=null}_createLayer(){return new Gt.A({source:new Ft.A})}_toOlFeature(e){const{data:t,label:n}=e,r=t=>(t.setId(e.id),t.set("name",n),t);if((0,Ae.Xq)(t))return this._appendStyle(e,r(new nr.A(new _r.A(t))));switch(t.sourceType.name){case Yr.bu.EWKT:{const n=xi(t.data);if(n.srid!==this._mapService.getSrid())throw new Error("Unsupported SRID "+n.srid);return this._appendStyle(e,r((new Ei.A).readFeature(n.wkt)))}case Yr.bu.GEOJSON:return this._appendStyle(e,r((new Ti.A).readFeature(JSON.parse(t.data))));default:throw`SourceType "${t.sourceType.name}" is currently not supported`}}_animatePointFeature(e,t=this._olMap,n=this._olLayer){e.setStyle(fr);const r=((e,t)=>{const n={duration:1500,start:Date.now()};return r=>{const i=(0,Bt.r2)(r),o=r.frameState,a=t.getGeometry().clone(),s=o.time-n.start,c=(s>=0?s:0)/n.duration,l=50*(0,hr.vT)(c)+10,d=Math.max((0,_e.LI)((0,hr.a6)(1-c),1),0),u=(e,t,n)=>{const r=new Qt.Ay({image:new qt.A({radius:e,fill:new Zt.A({color:"rgba(9, 157, 221, "+.6*t+")"})})});return e>=21?[r,...u(e-10,t,n+1)]:[r]};u(l,d,0).forEach((e=>{i.setStyle(e),i.drawGeometry(a)}));const g=fr();i.setStyle(g[0]),i.drawGeometry(a),s>n.duration&&(n.start=Date.now()),e.render()}})(t,e),i=n.on("postrender",r);return this._animationListenerKeys.push(i),i}_appendStyle(e,t){const{data:n}=e;if((0,Ae.Xq)(n))switch(e.type){case Cr.p.MARKER:t.setStyle(vr);break;case Cr.p.MARKER_TMP:t.setStyle(yr);break;case Cr.p.QUERY_RUNNING:this._animatePointFeature(t);break;case Cr.p.QUERY_SUCCESS:t.setStyle(fr);break;case Cr.p.DEFAULT:t.setStyle(br);break;case Cr.p.DEFAULT_TMP:t.setStyle(Sr)}else switch(e.type){case Cr.p.DEFAULT:t.setStyle(br);break;case Cr.p.DEFAULT_TMP:t.setStyle(Sr)}return t}_register(e,t){return(0,O.lB)(e,(e=>e.highlight),(({features:e})=>{t.clear();for(let e=this._animationListenerKeys.length-1;e>=0;e--)(0,Ut.e)(this._animationListenerKeys[e]),this._animationListenerKeys.splice(e,1);t.addFeatures(e.map(this._toOlFeature,this).filter((e=>!!e)))}),!1)}}var Ci=n(39766),Ni=n(76203),ki=n(60942),zi=n(11078);class Ri{#q=[];#K=[];#X;#J;#ee;#te;#ne=!0;constructor(e,t,n,r=20){if(!(0,Ae.Et)(e)||e<=0)throw new Error('"interval" must be a number and > 0');if(this.#J=1e3*e,!(0,Ae.Et)(t)||t>1||t<0)throw new Error('"threshold" must be a number between 0 - 1');if(this.#X=t,!(0,Ae.Tn)(n))throw new Error('"onFailureFn" must be a function');if(this.#te=n,!(0,Ae.Et)(r)||r<=0)throw new Error('"minSampleSize" must be a number and > 0');this.#ee=r}indicateFailure(){this.#q.push((new Date).getTime()),this.#re()}indicateSuccess(){this.#K.push((new Date).getTime()),this.#re()}#re(){const e=(new Date).getTime()-this.#J;this.#q=this.#q.filter((t=>t>e)),this.#K=this.#K.filter((t=>t>e)),this.#q.length+this.#K.length>=this.#ee&&(this.#q.length/(this.#q.length+this.#K.length)>=this.#X?this.#ne&&(this.#te(),this.#ne=!1):this.#ne=!0)}get interval(){return this.#J/1e3}get threshold(){return this.#X}get minSampleSize(){return this.#ee}get onFailureFn(){return this.#te}}const ji=(e,t)=>Promise.reject(new ht.o("Unexpected network status",e,t?.status)),Oi=(e,t=null,n)=>{n=n??[2e3,2e3];const{HttpService:i,ConfigService:o,GeoResourceService:a}=r.z.inject("HttpService","ConfigService","GeoResourceService");return async(r,s)=>{const c=async n=>{try{const{username:r,password:o}=t,a=await i.get(n,{timeout:3e4,headers:new Headers({Authorization:`Basic ${btoa(`${r}:${o}`)}`})});return 200!==a.status?ji(e,a):URL.createObjectURL(await a.blob())}catch(t){throw new ht.o(t.message,e)}},l=async t=>{try{const n=await i.get(t,{timeout:3e4},{response:[a.getAuthResponseInterceptorForGeoResource(e)]});return 200!==n.status?ji(e,n):URL.createObjectURL(await n.blob())}catch(t){throw new ht.o(t.message,e)}},d=new URLSearchParams(s.split("?")[1]),u=parseInt(d.get("WIDTH")),g=parseInt(d.get("HEIGHT")),h=n[0]/u,p=n[1]/g;if(h>=1&&p>=1){const e=`${o.getValueAsPath("BACKEND_URL")}proxy/basicAuth/wms/map/?url=${encodeURIComponent(s)}`;r.getImage().src=t?await c(e):await l(s)}else{d.set("WIDTH",`${h>=1?u:Math.round(u*h)}`),d.set("HEIGHT",`${p>=1?g:Math.round(g*p)}`);const e=`${s.split("?")[0]}?${d.toString()}`,n=document.createElement("img");n.onload=()=>{const e=document.createElement("canvas");e.width=u,e.height=g,e.getContext("2d").drawImage(n,0,0,u,g),r.getImage().src=e.toDataURL(),URL.revokeObjectURL(n.src)},n.crossOrigin="anonymous",n.src=t?await c(`${o.getValueAsPath("BACKEND_URL")}proxy/basicAuth/wms/map/?url=${encodeURIComponent(e)}`):await l(e)}}},Pi=e=>new Ri(10,.5,(async()=>{throw new ht.o("Unexpected network status",e)})),$i=(e,t,n=Pi)=>{const{HttpService:i,GeoResourceService:o}=r.z.inject("HttpService","GeoResourceService"),a=n(e);return async(n,r)=>{r=t.get("timestamp")?r+"?t="+t.get("timestamp"):r;try{const t=async t=>{const r=await i.get(t,{timeout:1e4},{response:[o.getAuthResponseInterceptorForGeoResource(e)]});switch(r.status){case 200:return a.indicateSuccess(),URL.createObjectURL(await r.blob());case 400:n.setState(zi.A.ERROR);break;default:return Promise.reject()}},s=await t(r);s&&(n.getImage().src=s,n.getImage().onload=()=>{URL.revokeObjectURL(s)})}catch(e){n.setState(zi.A.ERROR),a.indicateFailure()}}},Fi=(e,t,n=null)=>{const{HttpService:i,GeoResourceService:o}=r.z.inject("HttpService","GeoResourceService");return async function(r,a,s,c,l){const d=`http://www.opengis.net/def/crs/EPSG/0/${s.getCode().split(":")[1]}`;try{const a=o.byId(e),u={f:"json"};u.crs=d,a.limit&&(u.limit=a.limit),a.hasFilter()||t.get("filter")?(a.hasFilter()&&(u.filter=a.filter),t.get("filter")&&(u.filter=t.get("filter"))):(u.bbox=`${r.join(",")}`,u["bbox-crs"]=d);const g=`${a.url}${a.url.endsWith("/")?"":"/"}collections/${a.collectionId}/items?${(0,Je.po)(u)}`,h=async(n,i)=>{try{switch(Ce(!0),n.status){case 200:{const e=await n.json();this.unset("incomplete_data",!0),this.unset("possible_incomplete_data",!0),(0,Ae.Et)(e.numberReturned)&&(0,Ae.Et)(e.numberMatched)?e.numberReturned<e.numberMatched?((0,_t.I7)(t.get("id"),{state:_t.lr.INCOMPLETE_DATA}),this.set("incomplete_data",!0)):(0,_t.I7)(t.get("id"),{state:_t.lr.OK}):(this.set("possible_incomplete_data",!0),(0,_t.I7)(t.get("id"),{state:_t.lr.OK}));const r=(new Ti.A).readFeatures(e).map((e=>((0,Ae.Kg)(e.getId())&&""===e.getId().trim()&&e.setId(void 0),e.getGeometry().transform("EPSG:"+a.srid,s),e)));i.addFeatures(r);const o={featureCount:r.length};(0,_t.kk)(t.get("id"),o),c(r);break}default:throw(0,_t.I7)(t.get("id"),{state:_t.lr.ERROR,props:{}}),this.removeLoadedExtent(r),l(),new ht.o("Unexpected network status",e,n?.status)}}finally{Ce(!1)}},p=async t=>{const r=n?await i.get(t,{timeout:15e3,headers:new Headers({Authorization:`Basic ${btoa(`${n.username}:${n.password}`)}`})}):await i.get(t,{timeout:15e3},{response:[o.getAuthResponseInterceptorForGeoResource(e)]});return h(r,this)};return(0,_t.I7)(t.get("id"),{state:_t.lr.LOADING}),await p(g)}catch(n){throw(0,_t.I7)(t.get("id"),{state:_t.lr.ERROR}),l(),new ht.o(n.message,e)}}};var Gi=n(99651);const Ui=e=>{if((0,Ae.q$)(e)){const{UrlService:t,ConfigService:n}=r.z.inject("UrlService","ConfigService");if((0,Je.w0)(e).startsWith("https://geoportal.bayern.de/ba-backend")){const t=(0,Je.eD)(e);return 4===t.length&&"icons"===t[1]?`${n.getValueAsPath("BACKEND_URL")}icons/${t[t.length-2]}/${t[t.length-1]}.png`:e}return(0,Je.w0)(e).startsWith(n.getValueAsPath("BACKEND_URL"))?e:t.proxifyInstant(e,!1)}return e},Yi=e=>{switch(e.sourceType){case lt.Vz.KML:return new rr.Ay({iconUrlFunction:Ui,showPointNames:e.showPointNames});case lt.Vz.GPX:return new Ci.A;case lt.Vz.GEOJSON:return new Ti.A;case lt.Vz.EWKT:return new Ei.A}throw new Error(e?.sourceType+" currently not supported")};class Hi{#ie;constructor(e=Fi){this._oafLoadFunctionProvider=e;const{BaaCredentialService:t}=r.z.inject("BaaCredentialService");this.#ie=t}createLayer(e,t,n){const{StyleService:i}=r.z.inject("StyleService"),{minZoom:o,maxZoom:a,opacity:s}=t,c=new Gt.A({id:e,geoResourceId:t.id,opacity:s,minZoom:o??void 0,maxZoom:a??void 0}),l=t instanceof lt.HA?this._vectorSourceForData(t):this._vectorSourceForOaf(t,c,n);return l.on("featuresloadend",(()=>{i.applyStyle(c,n,t)})),c.setSource(l),c.on("propertychange",(e=>{"style"===e.key&&c.get("style")!==e.oldValue&&i.applyStyle(c,n,t)})),i.applyStyle(c,n,t)}_vectorSourceForOaf(e,t,n){const r=new Ft.A({strategy:ki.Qk});switch(e.authenticationType){case lt.Mg.BAA:{const n=this.#ie.get(e.url);r.setLoader(this._oafLoadFunctionProvider(e.id,t,n));break}default:r.setLoader(this._oafLoadFunctionProvider(e.id,t))}t.on("propertychange",(e=>{"filter"===e.key&&t.get("filter")!==e.oldValue&&r.refresh()}));const i=(0,Gi.qr)(Hi.REFRESH_DEBOUNCE_DELAY_MS,(()=>{r.refresh()})),o=n.getView().on("change:resolution",(()=>{n.getLayers().getArray().includes(t)?(r.get("incomplete_data")||r.get("possible_incomplete_data"))&&i():this._unregisterOlListener(o)}));return r}_unregisterOlListener(e){(0,Ut.e)(e)}_vectorSourceForData(e){try{const{MapService:t}=r.z.inject("MapService"),n=t.getSrid(),i=new Ft.A,o=(t,r,i)=>t.readFeatures(r).filter((e=>!!e.getGeometry())).map((t=>((0,Ae.Kg)(t.getId())&&""===t.getId().trim()&&t.setId(void 0),t.set((0,dn.LL)("showPointNames"),e.showPointNames),t.getGeometry().transform("EPSG:"+i,"EPSG:"+n),t)));if(e.hasFeatures())e.features.forEach((t=>{const n=t.geometry.sourceType.name===Yr.bu.EWKT?xi(t.geometry.data).wkt:t.geometry.data,r=o(((e,t=!0)=>{switch(e.name){case Yr.bu.KML:return new rr.Ay({iconUrlFunction:Ui,showPointNames:t});case Yr.bu.GPX:return new Ci.A;case Yr.bu.GEOJSON:return new Ti.A;case Yr.bu.EWKT:return new Ei.A}throw new Error(e?.name+" currently not supported")})(t.geometry.sourceType,e.showPointNames),n,t.geometry.sourceType.srid);if(1===r.length){r[0].setId(t.id),r[0].set((0,dn.LL)("styleHint"),t.styleHint??null),r[0].set((0,dn.LL)("style"),t.style??null);for(const[e,n]of Object.entries(t.getProperties()))r[0].set(e,n)}i.addFeatures(r)}));else{const t=e.sourceType===lt.Vz.EWKT?xi(e.data).wkt:e.data,n=Yi(e);i.addFeatures(o(n,t,e.srid)),e.hasLabel()||e.sourceType!==lt.Vz.KML||setTimeout((()=>{e.setLabel(n.readName(t))}))}return e.isClustered?.()?new Ni.A({source:i,distance:e.clusterParams.distance,minDistance:e.clusterParams.minDistance}):i}catch(t){throw new ht.o("Data of VectorGeoResource could not be parsed",e.id,null,{cause:t})}}static get REFRESH_DEBOUNCE_DELAY_MS(){return 500}}var Bi=n(60764),Vi=n(68044),Wi=n(7852),Zi=n(84250),Qi=n(56758),qi=n(57115);class Ki extends Qi.A{constructor(){super({minZoom:0,origin:(0,fe.Py)(Xi),resolutions:Ji,tileSize:qi.R,extent:Xi})}}const Xi=[-46133.17,5048875.26857567,1206211.10142433,6301219.54],Ji=[4891.96981025128,2445.98490512564,1222.99245256282,611.49622628141,305.748113140705,152.874056570353,76.4370282851763,38.2185141425881,19.1092570712941,9.55462853564703,4.77731426782352,2.38865713391176,1.19432856695588,.597164283477939,.2985821417389695,.14929107086948476];var eo=n(24533);class to extends Qi.A{constructor(){super({minZoom:0,origin:(0,fe.Py)(no),resolutions:ro,tileSize:qi.R,extent:no})}}const no=[3925712,4875712,4974288,5924288],ro=[4096,2048,1024,512,256,128,64,32,16,8,4,2,1,.5,.25,.125];var io=n(10702);class oo extends io.A{constructor(e){super(e)}smoothRefresh(e){super.setKey(e)}}class ao extends Qi.A{constructor(){super({minZoom:0,origin:[-3803165.98427299,8805908.08284866],resolutions:co,tileSize:qi.R,extent:so})}}const so=[-10064887.341394627,8805908.08284866,-3803165.98427299,16319973.711394627],co=[4891.96981025128,2445.98490512564,1222.99245256282,611.49622628141,305.748113140705,152.874056570353,76.4370282851763,38.2185141425881,19.1092570712941,9.55462853564703,4.77731426782352,2.38865713391176,1.19432856695588,.597164283477939,.2985821417389695,.14929107086948476];class lo{constructor(e=Oi,t=$i){this._imageLoadFunctionProvider=e,this._tileLoadFunctionProvider=t}_registerUpdateIntervalHandler(e,t,n){const r=()=>{if((0,_n.SU)(n,e.get("id"))||(0,_n.rG)(n,e))switch(t.getType()){case lt.Fl.WMS:{const t=e.getSource().getParams();e.getSource().updateParams(t);break}case lt.Fl.VECTOR:case lt.Fl.OAF:e.getSource().refresh()}else clearInterval(e.getSource().get((0,dn.LL)("updateIntervalId")))},i=t=>{if(t>=60){const n=setInterval(r,1e3*t);e.getSource().set((0,dn.LL)("updateIntervalId"),n)}};return e.on("propertychange",(t=>{"updateInterval"===t.key&&e.get("updateInterval")&&e.get("updateInterval")!==t.oldValue&&(clearInterval(e.getSource().get((0,dn.LL)("updateIntervalId"))),i(e.get("updateInterval")))})),t.hasUpdateInterval()&&i(t.updateInterval),e}toOlLayer(e,t,n){const{GeoResourceService:i,VectorLayerService:o,RtVectorLayerService:a,BaaCredentialService:s}=r.z.inject("GeoResourceService","VectorLayerService","BaaCredentialService","RtVectorLayerService"),{minZoom:c,maxZoom:l,opacity:d}=t;if(t.authenticationType===lt.Mg.BAA&&t.url&&!s.get(t.url))throw new ht.o(`No credential available for GeoResource with id '${t.id}' and url '${t.url}'`,t.id);switch(t.getType()){case lt.Fl.FUTURE:return new Bi.A({id:e,geoResourceId:t.id,render:()=>{},properties:{placeholder:!0}});case lt.Fl.WMS:{const r=new eo.A({url:t.url,crossOrigin:"anonymous",ratio:1,params:{LAYERS:t.layers,FORMAT:t.format,VERSION:"1.1.1",...t.extraParams}});t.authenticationType===lt.Mg.BAA?r.setImageLoadFunction(this._imageLoadFunctionProvider(t.id,s.get(t.url),t.maxSize)):r.setImageLoadFunction(this._imageLoadFunctionProvider(t.id,null,t.maxSize));const i=new Vi.A({id:e,geoResourceId:t.id,source:r,opacity:d,minZoom:c??void 0,maxZoom:l??void 0});return this._registerUpdateIntervalHandler(i,t,n)}case lt.Fl.XYZ:{const n=new Wi.A({id:e,geoResourceId:t.id,opacity:d,minZoom:c??void 0,maxZoom:l??void 0,preload:t.timestamps.length>0?0:1}),r=()=>{const e={url:Array.isArray(t.urls)?void 0:t.urls,urls:Array.isArray(t.urls)?t.urls:void 0,tileLoadFunction:this._tileLoadFunctionProvider(t.id,n)};switch(t.tileGridId){case"adv_utm":return new oo({...e,tileGrid:new Ki,projection:new ce.MF({code:"EPSG:25832"})});case"eu25832":return new oo({...e,tileGrid:new ao,projection:new ce.MF({code:"EPSG:25832"})});case"bvv_gk4":return new oo({...e,tileGrid:new to,projection:new ce.MF({code:"EPSG:31468"})});default:return new oo({...e})}};return n.setSource(r()),n.on("propertychange",(e=>{"timestamp"===e.key&&n.get("timestamp")!==e.oldValue&&n.getSource().smoothRefresh(n.get("timestamp"))})),n}case lt.Fl.VECTOR:case lt.Fl.OAF:{const r=o.createLayer(e,t,n);return this._registerUpdateIntervalHandler(r,t,n)}case lt.Fl.RT_VECTOR:return a.createLayer(e,t,n);case lt.Fl.VT:return new Zi.sc({id:e,geoResourceId:t.id,opacity:d,minZoom:c??void 0,maxZoom:l??void 0,mapLibreOptions:{style:t.styleUrl}});case lt.Fl.AGGREGATE:{const r=new jr.A({id:e,opacity:d,layers:t.geoResourceIds.map((e=>this.toOlLayer(e,i.byId(e),n))),minZoom:c??void 0,maxZoom:l??void 0});return r.on("change:opacity",(e=>e.target.getLayers().forEach((t=>{t instanceof Zi.sc&&t.setOpacity(e.target.getOpacity())})))),r}}throw new Error(`GeoResource type "${t.getType().description}" currently not supported`)}}class uo{add(e,t,n){const r=this._getOverlayStyleByType(n);r&&r.add(e,t)}update(e,t,n,r={}){const i=this._getOverlayStyleByType(n);i&&i.update(e,t,r)}remove(e,t,n=null){const r=n?this._getOverlayStyleByType(n):new sr;r&&r.remove(e,t)}_getOverlayStyleByType(e){switch(e){case ai.MEASURE:return new ur;case ai.DEFAULT:return new sr;case ai.DRAW:case ai.MARKER:case ai.LINE:case ai.POINT:case ai.POLYGON:case ai.TEXT:return null;default:return console.warn("Could not provide a style for unknown style-type:",e),null}}}const go="draw_layer";class ho extends wr.h{async register(e){(0,O.lB)(e,(e=>e.draw.active),(e=>{e?(0,_t.VE)(go,{constraints:{hidden:!0,alwaysTop:!0}}):(0,_t.e5)(go)})),(0,O.lB)(e,(e=>e.tools.current),(e=>{e!==tt.S.DRAW?(0,pi.LU)():setTimeout((()=>(0,pi.Yf)()))}),!1)}}const po=e=>{const{TranslationService:t}=r.z.inject("TranslationService"),n=e=>t.translate(e);if(e.type===Vn.ACTIVE)return n("olMap_handler_draw_start");if(e.type===Vn.DRAW){const t=t=>e.pointCount>2?t+"<br/>"+n("olMap_handler_delete_last_point"):t;return e.snap===Wn.FIRSTPOINT?t(n("olMap_handler_measure_snap_first_point")):e.snap===Wn.LASTPOINT?t(n("olMap_handler_measure_snap_last_point")):t(n(e.geometryType&&"Polygon"===e.geometryType?"olMap_handler_measure_continue_polygon":"olMap_handler_draw_continue_line"))}return e.type===Vn.MODIFY?e.snap===Wn.VERTEX?e.geometryType&&"Polygon"===e.geometryType?n("olMap_handler_measure_modify_polygon_click_or_drag"):e.geometryType&&"LineString"===e.geometryType?n("olMap_handler_measure_modify_linestring_click_or_drag"):n("olMap_handler_measure_modify_click_or_drag"):e.snap===Wn.EDGE?n("olMap_handler_measure_modify_click_new_point"):n("olMap_handler_draw_modify_key_for_delete"):e.type===Vn.SELECT?n("olMap_handler_draw_select"):e.type===Vn.OVERLAY?n("olMap_handler_measure_modify_click_drag_overlay"):void 0},mo={symbolSrc:null,scale:mn.d.MEDIUM,color:"#FF0000",text:null},_o={geometryType:null,coordinate:null,azimuth:null,length:null,area:null};class vo extends Yt{constructor(){super(go);const{TranslationService:e,MapService:t,EnvironmentService:n,StoreService:i,GeoResourceService:o,OverlayService:a,StyleService:s,IconService:c,FileStorageService:l}=r.z.inject("TranslationService","MapService","EnvironmentService","StoreService","GeoResourceService","OverlayService","StyleService","IconService","FileStorageService");this._translationService=e,this._mapService=t,this._environmentService=n,this._storeService=i,this._geoResourceService=o,this._overlayService=a,this._styleService=s,this._iconService=c,this._fileStorageService=l,this._vectorLayer=null,this._layerId=null,this._draw=null,this._modify=null,this._snap=null,this._select=null,this._storedContent=null,this._storeId=null,this._sketchHandler=new di,this._mapListeners=[],this._drawingListeners=[],this._keyActionMapper=new mi.P(document).addForKeyUp("Delete",(()=>this._remove())).addForKeyUp("Escape",(()=>this._reset())),this._lastPointerMoveEvent=null,this._lastInteractionStateType=null,this._drawState={type:null,snap:null,coordinate:null,pointCount:0,dragging:!1},this._helpTooltip=new Hn,this._helpTooltip.messageProvideFunction=po,this._drawStateChangedListeners=[],this._registeredObservers=[]}onActivate(e){const t=(e,t=[])=>this._translationService.translate(e,t);if(!this._storeService.getStore().getState().shared.termsOfUseAcknowledged&&!this._environmentService.isStandalone()&&!this._environmentService.isEmbedded()){const e=t("olMap_handler_termsOfUse",[t("global_terms_of_use")]);e&&(0,Oe.L)(e,Oe.A.INFO),hi()}const n=e=>e.getLayers().getArray().sort(((e,t)=>t.getZIndex()-e.getZIndex())).find((e=>this._fileStorageService.isAdminId(e.get("geoResourceId"))||this._fileStorageService.isFileId(e.get("geoResourceId")))),r=async(t,n)=>{if(n){const r=this._geoResourceService.byId(n.get("geoResourceId"));if(r){const i=await r.data,o=(new rr.Ay).readFeatures(i),a=t=>{const n=t.target.getGeometry();(0,pi.Hy)((0,we.TV)(n)),this._styleService.updateInternalFeatureStyle(t.target,e),this._setStatistic(t.target)};o.forEach((n=>{n.getGeometry().transform("EPSG:"+r.srid,"EPSG:"+this._mapService.getSrid()),n.getId().startsWith(tt.S.MEASURE)&&n.set((0,dn.LL)(un),new pn(n,e)),this._styleService.removeInternalFeatureStyle(n,e),this._styleService.addInternalFeatureStyle(n,e,t),t.getSource().addFeature(n),n.on("change",a)}));const s=n.get("id");this._layerId=s,this._layerZIndex=n.getZIndex(),(0,_t.e5)(s),this._init(null),this._setSelection(this._storeService.getStore().getState().draw.selection),this._updateStoreId(n.get("geoResourceId"))}}},i=()=>{const e=(()=>{const e=new Ft.A({wrapX:!1}),n=new Gt.A({source:e});return n.label=t("olMap_handler_draw_layer_label"),n})(),i=()=>{const t=or(e,"EPSG:3857");this._storedContent=t??ir,this._save()},o=t=>{this._drawState.type===Vn.DRAW&&(0,pi.td)([t.feature.getId()]),this._storedContent=or(e,"EPSG:3857"),this._save()},a=e=>{this._mapListeners.push(e.getSource().on("addfeature",o)),this._mapListeners.push(e.getSource().on("changefeature",(()=>i()))),this._mapListeners.push(e.getSource().on("removefeature",(()=>i())))};if(this._storeService.getStore().getState().draw.createPermanentLayer){const t=n(this._map);r(e,t).finally((()=>{this._storedContent=or(e,"EPSG:3857"),a(e)}))}else a(e);return e},o=e=>{const t=e.coordinate,n=e.dragging,r=e.pixel;if(this._sketchHandler.isActive||this._drawState.type===Vn.DRAW)return void this._updateDrawState(t,r,n);const i=Xn(this._map,this._vectorLayer,r).slice(0,1);(i.some((e=>!e.getId().startsWith(tt.S.DRAW+"_")))?e=>{if((e=>e.some((e=>e.getId().startsWith(tt.S.MEASURE+"_"))))(e)){const t=e.filter((e=>e.getId().startsWith(tt.S.MEASURE+"_"))).map((e=>e.getId()));(0,Ht.td)(t),(0,Er.i)(tt.S.MEASURE)}}:e=>{if([Vn.MODIFY,Vn.SELECT].includes(this._drawState.type)){const t=e.map((e=>e.getId()));this._setSelection(t)}this._updateDrawState(t,r,n)})(i)},a=e=>{this._lastPointerMoveEvent=e;const t=e.coordinate,n=e.dragging,r=e.pixel;this._updateDrawState(t,r,n)};if(this._map=e,!this._vectorLayer){this._vectorLayer=i(),this._mapContainer=e.getTarget();const t=this._vectorLayer.getSource();this._select=this._createSelect(),this._modify=this._createModify(),this._select.setActive(!1),this._modify.setActive(!1),this._snap=new jt.A({source:t,pixelTolerance:er()}),this._onDrawStateChanged((e=>this._updateDrawMode(e))),this._environmentService.isTouch()||(this._helpTooltip.activate(this._map),this._onDrawStateChanged((e=>{this._helpTooltip.notify(e),e.snap===Wn.VERTEX?this._mapContainer.classList.add("grab"):this._mapContainer.classList.remove("grab")}))),this._mapListeners.push(e.on(Gn.A.CLICK,o)),this._mapListeners.push(e.on(Gn.A.POINTERMOVE,a)),this._mapListeners.push(e.on(Gn.A.DBLCLICK,(()=>!1)))}this._registeredObservers=this._register(this._storeService.getStore()),this._keyActionMapper.activate(),this._map.addInteraction(this._select),this._map.addInteraction(this._modify),this._map.addInteraction(this._snap);const s=this._storeService.getStore().getState().draw.type;return s&&this._init(s),this._storedContent=null,this._updateDrawState(),this._vectorLayer}onDeactivate(e){var t;this._unreg(this._mapListeners),this._unreg(this._drawingListeners),(0,pi.eC)(y.zR),(0,pi.ZR)(null),e.removeInteraction(this._modify),e.removeInteraction(this._snap),e.removeInteraction(this._select),(t=e).getInteractions().getArray().filter((e=>e instanceof Ot.Ay)).forEach((e=>t.removeInteraction(e))),this._helpTooltip.deactivate(),this._unreg(this._drawStateChangedListeners),this._unsubscribe(this._registeredObservers),this._keyActionMapper.deactivate(),(0,pi.td)([]),(0,pi.b4)(_o),this._saveAndOptionallyConvertToPermanentLayer().finally((()=>{this._layerId=null,this._layerZIndex=null,this._storedContent=null,this._storeId=null})),this._vectorLayer.getSource().getFeatures().forEach((e=>this._overlayService.remove(e,this._map))),this._draw=null,this._modify=!1,this._select=!1,this._snap=!1,this._vectorLayer=null,this._map=null}_unreg(e){(0,Ut.e)(e),e=[]}_unsubscribe(e){e.forEach((e=>e())),e=[]}_setDrawState(e){e!==this._drawState&&(this._drawState=e,this._drawStateChangedListeners.forEach((t=>t(e))))}_onDrawStateChanged(e){this._drawStateChangedListeners.push(e)}_register(e){return[(0,O.lB)(e,(e=>e.draw.type),(e=>this._init(e))),(0,O.lB)(e,(e=>e.draw.style),(()=>this._updateStyle())),(0,O.lB)(e,(e=>e.draw.finish),(()=>this._finish())),(0,O.lB)(e,(e=>e.draw.reset),(()=>this._reset())),(0,O.lB)(e,(e=>e.draw.remove),(()=>this._remove())),(0,O.lB)(e,(e=>e.draw.selection),(e=>this._setSelection(e))),(0,O.lB)(e,(e=>e.draw.description),(e=>this._updateDescription(e))),(0,O.lB)(e,(e=>e.fileStorage.fileId),(e=>this._updateStoreId(e)))]}_init(e){const t=this._getStyleOption();this._draw&&(this._draw.abortDrawing(),this._draw.setActive(!1),this._map.removeInteraction(this._draw)),this._select.getFeatures().clear(),this._updateStatistic(),this._draw=this._createDrawByType(e,t),this._modify.getActive()&&this._draw?this._modify.setActive(!1):null==this._draw&&this._modify.setActive(!0),this._draw&&(this._draw.on("drawstart",(t=>{this._sketchHandler.activate(t.feature,this._map,tt.S.DRAW+"_"+e+"_");const n=this._storeService.getStore().getState().draw.description;n&&this._sketchHandler.active.set("description",n);const r=this._getStyleFunctionByDrawType(e,this._getStyleOption());this._sketchHandler.active.setStyle(r),this._drawingListeners.push(t.feature.on("change",(e=>{const t=e.target.getGeometry();(0,pi.Hy)((0,we.TV)(t)),this._setStatistic(e.target)})))})),this._draw.on("drawend",(e=>{this._activateModify(e.feature),this._sketchHandler.deactivate(),this._unreg(this._drawingListeners)})),this._map.addInteraction(this._draw),this._draw.setActive(!0),this._updateDrawState())}_remove(){this._draw&&this._draw.getActive()&&((()=>{if(this._sketchHandler.isActive){const e=this._sketchHandler.active.getGeometry();return(0,we.TV)(e)}return!1})()?(this._draw.removeLastPoint(),this._updateDrawState()):this._startNew(),this._lastPointerMoveEvent&&this._draw.handleEvent(this._lastPointerMoveEvent)),this._modify&&this._modify.getActive()&&(Jn(this._select.getFeatures(),this._vectorLayer),this._setSelection([]),this._updateDrawState())}_finish(){this._sketchHandler.isActive?(this._draw.finishDrawing(),this._updateDrawState()):this._activateModify()}_startNew(){if(this._draw){this._draw.abortDrawing(),this._modify.setActive(!1),this._helpTooltip.deactivate();const e=this._storeService.getStore().getState().draw.type;this._init(e),this._helpTooltip.activate(this._map)}this._updateDrawState()}_reset(){this._draw&&(this._draw.abortDrawing(),this._modify.setActive(!1),(0,pi.td)([]),(0,pi.b4)(_o),this._helpTooltip.deactivate(),(0,pi.dv)(null)),this._updateDrawState()}_createDrawByType(e,t){if(null==e)return null;if(e===ai.MARKER&&!t.symbolSrc)return null;if(null==this._vectorLayer)return null;const n=this._vectorLayer.getSource(),r=er();switch(e){case ai.POINT:case ai.MARKER:case ai.TEXT:return new Ot.Ay({source:n,type:"Point",minPoints:1,snapTolerance:r,style:this._getStyleFunctionByDrawType(e,t),wrapX:!0});case ai.LINE:return new Ot.Ay({source:n,type:"LineString",snapTolerance:r,style:On(this._getStyleFunctionByDrawType("line",t)),wrapX:!0});case ai.POLYGON:return new Ot.Ay({source:n,type:"Polygon",minPoints:3,snapTolerance:r,style:On(this._getStyleFunctionByDrawType("polygon",t)),wrapX:!0});default:console.warn("unknown Drawtype: "+e)}}_createSelect(){const e=new Pt.A(Qn(this._vectorLayer));return e.getFeatures().on("add",(e=>{const t=e.element,n=Rn()(t);e.element.setStyle(n)})),e.getFeatures().on("remove",(e=>{const t=e.element,n=t.getStyle();n.pop(),t.setStyle(n)})),e}_createModify(){const e=new $t.A(qn(this._select.getFeatures()));return e.on("modifystart",(e=>{e.mapBrowserEvent.type!==Gn.A.SINGLECLICK&&this._mapContainer.classList.add("grabbing")})),e.on("modifyend",(e=>{e.mapBrowserEvent.type!==Gn.A.POINTERUP&&e.mapBrowserEvent.type!==Gn.A.CLICK||this._mapContainer.classList.remove("grabbing")})),e}_activateModify(e){this._draw&&(this._draw.setActive(!1),(0,pi.dv)(null)),this._modify.setActive(!0),this._setSelected(e),e&&e.on("change",(()=>this._updateStatistic()))}_setStatistic(e){(0,pi.b4)((0,we.GT)(e.getGeometry()))}_getStyleOption(){const e=()=>(()=>this._translationService.translate("olMap_handler_draw_new_text"))(),t=t=>{switch(t){case ai.TEXT:return e();case ai.MARKER:return"";default:return null}},n=this._storeService.getStore().getState().draw.style,r=this._storeService.getStore().getState().draw.type;if((0,O.aI)(n,y.zR)){const e=this._iconService.getDefault().getUrl((0,en.E2)(mo.color))||this._iconService.getDefault().base64;(0,pi.eC)({...mo,symbolSrc:e,text:t(r),anchor:this._iconService.getDefault().anchor})}else r!==ai.TEXT||(0,Ae.Kg)(n.text)?r!==ai.MARKER||(0,Ae.Kg)(n.text)||(0,pi.eC)({...n,text:""}):(0,pi.eC)({...n,text:e()});return this._storeService.getStore().getState().draw.style}_getStyleFunctionFrom(e){const t=$n(e);return null!=t?this._getStyleFunctionByDrawType(t,this._getStyleOption()):null}_getStyleFunctionByDrawType(e,t){switch(e){case ai.LINE:return((e=fn)=>{const t=e.color?(0,en.E2)(e.color):(0,en.E2)("#ff0000");return[new Qt.Ay({stroke:new Wt.A({color:t.concat([1]),width:3})})]})(t);case ai.POLYGON:return((e=fn)=>{const t=e.color?(0,en.E2)(e.color):(0,en.E2)("#ff0000");return[new Qt.Ay({stroke:new Wt.A({color:t.concat([1]),width:3}),fill:new Zt.A({color:t.concat([.4])})})]})(t);case ai.POINT:case ai.MARKER:return Tn(t);case ai.TEXT:return xn(t);default:return[new Qt.Ay({})]}}_updateStatistic(){if(this._select){const e=this._select.getFeatures().getArray()[0];(0,pi.b4)(e?(0,we.GT)(e.getGeometry()):_o)}}_updateDrawState(e,t,n){const r={type:null,snap:null,coordinate:e,pointCount:this._sketchHandler.pointCount};t&&(r.snap=Kn(this._map,this._vectorLayer,t)),this._draw&&(r.type=Vn.ACTIVE,this._sketchHandler.isActive&&(r.type=Vn.DRAW,r.geometryType=this._sketchHandler.active.getGeometry().getType(),this._sketchHandler.isFinishOnFirstPoint?r.snap=Wn.FIRSTPOINT:this._sketchHandler.isSnapOnLastPoint&&(r.snap=Wn.LASTPOINT))),this._modify.getActive()&&(r.type=0===this._select.getFeatures().getLength()?Vn.SELECT:Vn.MODIFY,r.geometryType=0===this._select.getFeatures().getLength()?null:this._select.getFeatures().item(0)?.getGeometry().getType()),r.dragging=n,null==e&&null==t&&this._drawState.type===Vn.MODIFY&&(r.type=Vn.SELECT),this._setDrawState(r)}_updateDrawMode(e){this._lastInteractionStateType!==e.type&&e.type!==Vn.OVERLAY&&(this._lastInteractionStateType=e.type,(0,pi.iY)(this._lastInteractionStateType))}_updateStyle(){if(this._drawState.type===Vn.ACTIVE||this._drawState.type===Vn.SELECT){const e=this._storeService.getStore().getState().draw.type;this._draw&&!this._draw.active&&this._init(e)}if(this._drawState.type===Vn.MODIFY&&this._select.getFeatures().getLength()>0){const e=this._select.getFeatures().item(0),t=this._getStyleFunctionFrom(e);e.setStyle([t[0],...e.getStyle().slice(1)]),this._setSelected(e)}if(this._drawState.type===Vn.DRAW&&this._sketchHandler.isActive){const e=this._getStyleFunctionFrom(this._sketchHandler.active);this._sketchHandler.active.setStyle(e)}null==this._drawState.type&&this._startNew()}_updateDescription(e){const t=()=>{this._sketchHandler.isActive&&this._sketchHandler.active.setProperties({description:e||null})},n=()=>{const t=this._select.getFeatures().item(0);t&&t.setProperties({description:e||null})};switch(this._drawState.type){case Vn.DRAW:t();break;case Vn.MODIFY:n()}}_updateStoreId(e){this._storeId=e}_setSelectedStyle(e){const t=this._getStyleOption(),n=Pn(e),r=(e=>{if(null==e)return null;const t=Fn(e);if(e.getStyle(),t){const e=t[0].getImage();if(e)return e.getSrc()}return null})(e),i=(e=>{if(null==e)return null;const t=Fn(e);if(e.getStyle(),t){const e=t[0].getText();if(e)return e.getText()}return null})(e),o=(e=>{if(null==e)return null;const t=Fn(e);if(e.getStyle(),t){const e=t[0],n=e?.getImage(),r=e?.getText();if(n)return Ln(n.getScale());if(r)return In(r.getScale())}return null})(e),a=n||t.color,s=r||t.symbolSrc,c=i||"",l=o||t.scale,d={...t,color:a,symbolSrc:s,text:c,scale:l},u={type:$n(e),style:d};(0,pi.ZR)(u),(0,pi.eC)(d)}_setSelectedDescription(e){(0,pi.Xo)((e=>(e?e.get("description"):null)||null)(e))}_setSelection(e=[]){const t=!(0,O.aI)(e,(()=>this._select?this._select.getFeatures().getArray()?.map((e=>e.getId())):null)());this._select&&t&&((1<=this._select.getFeatures().getLength()||0===e.length)&&this._setSelected(null),e.forEach((e=>{const t=this._vectorLayer.getSource().getFeatureById(e);this._setSelected(t)})))}_setSelected(e){return e?(t=>{const n=this._select.getFeatures().getArray().includes(e);return this._setSelectedStyle(t),this._setSelectedDescription(t),n||this._select.getFeatures().push(t),!0})(e):(()=>{this._select.getFeatures().clear(),(0,pi.ZR)(null),(0,pi.Xo)(null)})()}async _save(){vi(this._storedContent)}async _saveAndOptionallyConvertToPermanentLayer(){const e=(()=>this._translationService.translate("olMap_handler_draw_layer_label"))();if(await this._save(),this._storeService.getStore().getState().draw.createPermanentLayer&&this._storedContent){const t=this._storeService.getStore().getState().fileStorage.fileId??this._storeId,n=(()=>this._geoResourceService.byId(t)||new lt.HA(t,e,lt.Vz.KML).setAttributionProvider(gt.Ve))();n.setSource(this._storedContent,4326),this._geoResourceService.addOrReplace(n);const r=this._layerId??`${t}_draw`;(0,_t.VE)(r,{zIndex:this._layerZIndex??(0,a.EC)().zIndex,geoResourceId:t,constraints:{metaData:!1}})}}}var yo=n(78645);class bo{constructor(e){if(this.constructor===bo)throw new TypeError("Can not construct abstract class.");if(!e)throw new TypeError("Id of this handler must be defined.");this._id=e}get id(){return this._id}register(e){throw new TypeError("Please implement abstract method #register or do not call super.activate from child.")}}var So=n(40068),fo=n(84693),wo=n(30191),Mo=n(6683);const Io=(e,t)=>{if(!(e.get("name")||e.get("description")||e.get("desc")||e.getGeometry()))return null;const{MapService:n,SecurityService:i,GeoResourceService:o,TranslationService:a,ImportOafService:s}=r.z.inject("MapService","SecurityService","GeoResourceService","TranslationService","ImportOafService"),c=(0,we.GT)(e.getGeometry()),l=(0,we.qC)(e.getGeometry())?.getCoordinates()??[],d=(new rr.Ay).writeFeatures([e],{featureProjection:"EPSG:"+n.getSrid()}),u=o.byId(t.geoResourceId),g=s.getFilterCapabilitiesFromCache(u),h=e=>{e.currentTarget.classList.toggle("propshide")},p={propshide:e.get("description")||e.get("desc")};return{title:u?e.get("name")?`${i.sanitizeHtml(e.get("name"))} - ${u.label}`:`${u.label}`:`${i.sanitizeHtml(e.get("name")??"")}`,content:(()=>{const t=e.get("description")||e.get("desc"),n=(e=>{const t=Object.entries(e).filter((e=>!(0,dn.fP)(e[0]))).filter((e=>!dn.UW.includes(e[0]))).filter((e=>!dn.n5.includes(e[0])));return t.length?ke.qy`
					<button class="prop-header ba-list-item ba-list-item__header  ${(0,Mo.H)(p)}" @click="${h}">
						<span class="ba-list-item__text  ba-list-item__primary-text">${a.translate("olMap_handler_featureInfo_feature_properties")}</span>
						<span class="ba-list-item__after">
							<i class="icon icon-rotate-90 chevron "></i>
						</span>
					</button>
					<table id="props-table" class="props-table">
						<tbody>
							${t.map((e=>{const[t,n]=e;return ke.qy`<tr>
									<td>${r=t,g?.queryables?.find((e=>e.id===r))?.title??r}</td>
									<td>${(0,So._)(i.sanitizeHtml(n))}</td>
								</tr>`;var r}))}
						</tbody>
					</table>
				`:ke.s6})(e.getProperties()),r=ke.qy`
		</div>
			<ba-geometry-info .statistic=${c}></ba-geometry-info>
			<div class='chips__container'>
				<ba-profile-chip .coordinates=${l}></ba-profile-chip>
				<ba-export-vector-data-chip .exportData=${d}></ba-export-vector-data-chip>
				<ba-feature-info-collection-panel .configuration=${{feature:new wo.g(new fo.S(d,Yr.Y1.forKml()),e.getId().toString()),geoResourceId:u?.id??null}}></ba-feature-info-collection-panel>
			</div>`;return t?ke.qy`<div class="content">${(0,So._)(i.sanitizeHtml(t))} ${n} ${r}</div>`:ke.qy`${n} ${r} `})(),geometry:new fo.S((new Ti.A).writeGeometry(e.getGeometry()),Yr.Y1.forGeoJSON())}},Ao=e=>{const t=(e=>{const t=e=>`[${e.join(";")}]`;return void 0===e?`undef:${e}`:null===e?`null:${e}`:(0,Ae.Kg)(e)?e:(0,Ae.Gv)(e)?t(Object.values(e)):Array.isArray(e)?t(e):`num:${e}`})(e);let n=0;for(let e=0;e<t.length;e++)n=Math.imul(31,n)+t.charCodeAt(e)|0;return n};class Lo extends bo{#a;#n;#_;constructor(e=Io){super("Feature_Info_Handler");const{StoreService:t,TranslationService:n,GeoResourceService:i}=r.z.inject("StoreService","TranslationService","GeoResourceService");this._featureInfoProvider=e,this.#a=t,this.#n=n,this.#_=i}register(e){const t=`${(0,_e.Ds)()}`,n=e=>this.#n.translate(e),r=(e,t)=>(t.getId()||t.setId(`${Ao(t)}`),t),i=(e,t,n)=>e.forEachFeatureAtPixel(t,(e=>e.get("features")?1===e.get("features").length?r(0,e.get("features")[0]):null:r(0,e)),{layerFilter:e=>(this.#_.byId(e.get("geoResourceId"))?.queryable??!0)&&(n instanceof jr.A?n.getLayers().getArray().includes(e):e===n),hitTolerance:10})??null,o=e=>e.visible;(0,O.lB)(this.#a.getStore(),(e=>e.featureInfo.coordinate),((r,a)=>{(0,Lr.kf)(et.xf),(0,yo.Mr)(t);const s=[...a.layers.active].filter(o).map((t=>({olLayer:(0,_n.SU)(e,t.id),layerProperties:t}))).map((t=>{const{layerProperties:n,olLayer:o}=t;return{olFeature:i(e,e.getPixelFromCoordinate(r.payload),o),layerProperties:n}})).filter((e=>!!e.olFeature)).filter((e=>{const{layerProperties:t,olFeature:n}=e;return t.constraints.hidden?!!n.get("name"):n})).map((e=>this._featureInfoProvider(e.olFeature,e.layerProperties))).map((e=>e||{title:n("global_featureInfo_not_available"),content:""})).reverse();(0,yo.mj)(s),setTimeout((()=>{(0,yo.zN)(t)}),300)}))}}var Eo=n(56741);const To=new Qt.Ay({image:new qt.A({fill:new Zt.A({color:[255,128,0,0]}),radius:1})}),xo=()=>[new Qt.Ay({})],Do="mfp_layer";class Co extends wr.h{constructor(){super(),this._initialized=!1;const{TranslationService:e}=r.z.inject("TranslationService");this._translationService=e}async register(e){const{MfpService:t,EnvironmentService:n}=r.z.inject("MfpService","EnvironmentService"),i=async()=>{if(!this._initialized){try{const{layouts:e}=await t.init(),{id:n,scales:r,dpis:i}=e[0];return(0,Eo.iY)({id:n,dpi:i[0],scale:r[0]}),this._initialized=!0}catch(e){console.error("MfpCapabilities could not be fetched from backend",e),(0,Oe.L)(`${this._translationService.translate("global_mfpService_init_exception")}`,Oe.A.ERROR)}return!1}return!0};(0,O.lB)(e,(e=>e.tools.current),(async e=>{e!==tt.S.EXPORT?(0,Eo.LU)():await i()&&setTimeout((()=>{(0,Eo.Yf)()}))})),(0,O.lB)(e,(e=>e.mfp.active),(e=>{e?(0,_t.VE)(Do,{constraints:{hidden:!0,alwaysTop:!0}}):(0,_t.e5)(Do)})),(0,O.lB)(e,(e=>e.mfp.jobSpec),(async({payload:e})=>{if(e)try{const r=await t.createJob(e);r&&(n.getWindow().location=r)}catch(e){console.error("PDF generation was not successful.",e),(0,Oe.L)(`${this._translationService.translate("global_mfpService_createJob_exception")}`,Oe.A.ERROR)}finally{(0,Eo.mh)()}else t.cancelJob()})),(0,O.lB)(e,(e=>e.position.liveRotation),(e=>{(0,Eo.b8)(0===e)}))}}var No=n(89352),ko=n(57916),zo=n(70402);const Ro=Object.freeze({MISSING_GEORESOURCE:"missing_georesource",NOT_EXPORTABLE:"not_exportable",MAXIMUM_ENCODING_LIMIT_REACHED:"maximum_encoding_limit_reached"});class jo{constructor(){const{MapService:e,GeoResourceService:t,UrlService:n,ShareService:i,MfpService:o}=r.z.inject("MapService","GeoResourceService","UrlService","ShareService","MfpService");this._mapService=e,this._geoResourceService=t,this._urlService=n,this._shareService=i,this._mfpService=o,this._pageExtent=null,this._geometryEncodingFormat=new Ti.A,this._mapProjection=`EPSG:${this._mapService.getSrid()}`,this._encodingStyleId=0}async encode(e,t){if(this._initStyleId(),this._mfpProperties=t,this._mfpProjection=this._mfpProperties.targetSRID?`EPSG:${this._mfpProperties.targetSRID}`:`EPSG:${this._mapService.getLocalProjectedSrid()}`,null==(n=this._mfpProperties).layoutId||null==n.scale||0===n.scale||null==n.dpi)throw Error("Invalid or missing EncodingProperties");var n;const r=this._mfpProperties.pageCenter&&this._mfpProperties.pageCenter instanceof _r.A?this._mfpProperties.pageCenter.clone().transform(this._mapProjection,this._mfpProjection):new _r.A(e.getView().getCenter()).clone().transform(this._mapProjection,this._mfpProjection);this._pageExtent=this._mfpProperties.pageExtent?this._mfpProperties.pageExtent:e.getView().calculateExtent(e.getSize());const i=e.getLayers().getArray().sort(((e,t)=>e.getZIndex()-t.getZIndex())).filter((e=>e.getExtent()?(0,fe.HY)(e.getExtent(),this._pageExtent)&&e.getVisible():e.getVisible())),o=[],a=(e,t)=>{o.push({label:e,type:t})},s=i.flatMap((e=>this._encode(e,a))),c=this._getCopyrights(e,i),l=this._encodeOverlays(e.getOverlays().getArray()),d=this._mfpProperties.showGrid?this._encodeGridLayer(this._mfpProperties.scale):{},u=await this._generateShortUrl(),g=this._generateQrCode(u),h=[d,l,...s.reverse()].filter((e=>Object.hasOwn(e,"type")));return{specs:{layout:this._mfpProperties.layoutId,attributes:{map:{center:r.getCoordinates(),scale:this._mfpProperties.scale,projection:this._mfpProjection,dpi:this._mfpProperties.dpi,rotation:this._mfpProperties.rotation,layers:h},dataOwner:Array.from(new Set(c.map((e=>e.label)))).join(","),shortLink:u,qrcodeurl:g}},errors:o}}_initStyleId(){this._encodingStyleId=0}_getCopyrights(e,t){const n=e=>{if(!e)return e;const{grSubstitutions:t}=this._mfpService.getCapabilities();return Object.hasOwn(t,e.id)?this._geoResourceService.byId(t[e.id]):e},r=(i=t,i.flatMap((e=>e instanceof jr.A?e.getLayers().getArray():e))).flatMap((e=>n(this._geoResourceService.byId(e.get("geoResourceId")))));var i;return(0,zo.I)(r,(e=>{const t=this._mfpProperties.scale/39.37/72;return e.getView().getZoomForResolution(t)})(e))}_getSubstitutionLayerOptional(e){const{LayerService:t}=r.z.inject("LayerService"),{grSubstitutions:n}=this._mfpService.getCapabilities(),i=this._geoResourceService.byId(e.get("geoResourceId"));if(i){const r=Object.hasOwn(n,i.id)?this._geoResourceService.byId(n[i.id]):null;return r?((e,n)=>{const r=n.id??e.id,i=t.toOlLayer(`${r}_substitution`,e,null);return i?.setOpacity(n.getOpacity()),i})(r,e):e}return e}_encode(e,t,n=1){if(e instanceof jr.A)return this._encodeGroup(e,t);const r=this._getSubstitutionLayerOptional(e),i=e.get("id")===et.$A?{exportable:!0,getType:()=>lt.Fl.VECTOR}:this._geoResourceService.byId(r.get("geoResourceId"));if(!i)return t(`[${e.get("id")}]`,Ro.MISSING_GEORESOURCE),!1;if(!i.exportable)return t(i.label,Ro.NOT_EXPORTABLE),!1;switch(i.getType()){case lt.Fl.OAF:case lt.Fl.VECTOR:return this._encodeVector(r,n);case lt.Fl.XYZ:return this._encodeWMTS(r,n);case lt.Fl.WMS:return this._encodeWMS(r,i,n);case lt.Fl.VT:return console.warn(`VectorTiles are currently not supported by MFP. Missing substitution for GeoResource '${i.id}'.`),[];default:return!1}}_encodeGroup(e,t){const n=e.getLayers().getArray(),r=e.getOpacity();return n.map((e=>this._encode(e,t,r)))}_encodeWMTS(e,t){return(e=>{const n=this._mfpProjection,r=e.getSource(),{tileGrid:i,layer:o,baseURL:a,requestEncoding:s}=r instanceof ko.A?{tileGrid:(c=r).getTileGrid(),layer:c.getLayer(),baseURL:c.getUrls()[0],requestEncoding:c.getRequestEncoding()}:((e,t)=>{return{tileGrid:e.getTileGrid(),layer:t.get("geoResourceId"),baseURL:(n=e.getUrls()[0],n.replace("{z}","{TileMatrix}").replace("{x}","{TileCol}").replace("{y}","{TileRow}")),requestEncoding:"REST"};var n})(r,e);var c;return{opacity:1!==t?t:e.getOpacity(),type:"wmts",baseURL:a,layer:o,requestEncoding:s,matrices:jo.buildMatrixSets(i),matrixSet:n}})(e)}_encodeWMS(e,t,n){const r=e.getSource(),i=r.getParams(),o=i.LAYERS?.split(",")||[],a=null!=i.STYLES?i.STYLES.split(","):new Array(o.length).join(",").split(",");return{type:"wms",baseURL:r.getUrl&&r.getUrl(),imageFormat:t.format,layers:o,name:t.id,opacity:1!==n?n:e.getOpacity(),styles:a,customParams:{transparent:!0}}}_encodeVector(e,t){const n={MultiPolygon:[],Polygon:[],Circle:[],GeometryCollection:[],LineString:[],MultiLineString:[],MultiPoint:[],Point:[],...(r=e.getSource().getFeatures(),i=e=>e.getGeometry().getType(),r.reduce(((e,t)=>{const n=i(t);return e[n]=e[n]??[],e[n].push(t),e}),{}))};var r,i;const o=[...n.MultiPolygon,...n.Polygon,...n.Circle,...n.GeometryCollection,...n.LineString,...n.MultiLineString,...n.MultiPoint,...n.Point],a=e=>{const t=e.clone();return t.getGeometry().transform(this._mapProjection,this._mfpProjection),t},s=new Map,c=(0,we.Fl)(this._pageExtent).transform(this._mapProjection,this._mfpProjection).getExtent(),l=o.map((e=>a(e))).filter((e=>e.getGeometry().intersectsExtent(c))).reduce(((n,r)=>{const i=this._encodeFeature(r,e,s,t);return i?{features:[...n.features,...i.features]}:n}),{features:[]});return 0!==l.features.length&&{type:"geojson",geoJson:{features:l.features,type:"FeatureCollection"},name:e.get("id"),style:(e=>{const t={version:"2"};return(e=>(e.forEach((e=>{const{id:n,symbolizers:r}=e;t[`[_gx_style = ${n}]`]={symbolizers:r}})),t))(e)})(Array.from(s.values())),opacity:e.getOpacity()}}_encodeFeature(e,t,n,r,i=[]){const o={features:[]},a=this._mfpProperties.scale/39.37/72,s=()=>({id:this._encodingStyleId++}),c=i.length>0?i:((e,t,n)=>{const r=e.getStyle();if(null!=r&&"function"==typeof r){const t=e=>r(e,null);return null!=(0,_n.eG)(e,"measurement")?t(e):r(e,n)}if(null!=r&&r.length>0)return r;const i=t.getStyleFunction();return i?i(e,n):[]})(e,t,a),l=Array.isArray(c)?((e,t)=>e&&e.length>0?t?e[0]:e.find((e=>!(e.getGeometry&&"function"==typeof e.getGeometry())))??null:null)(c,i.length>0):c;if(!(l&&l instanceof Qt.Ay))return console.warn("cannot style feature",e),null;const d=(e=>(()=>{const t=e.getGeometry();return t instanceof Ie.Ay||t instanceof rn.A||t instanceof Me.A||t instanceof nn.A||t instanceof _r.A||t instanceof Jt.A})()?e:(()=>{const t=e.getGeometry();if(t instanceof Xt.A){const e=t.getCenter(),n=t.getRadius(),r=40,i=Math.PI*(1/r-.5),o=[];for(let t=0;t<r;++t){const a=i+2*t*Math.PI/r,s=e[0]+n*Math.cos(a),c=e[1]+n*Math.sin(a);o.push([s,c])}return o.push(o[0]),new nr.A(new Ie.Ay([o]))}})())(e);if(!d)return console.warn("feature not encodable",e),null;const u=1!==r?r:t.getOpacity(),g=(e=>n.has(e)?(()=>{const{id:t,symbolizers:r}=n.get(e),i=this._encodeGeometryType(d.getGeometry().getType());if(r.every((e=>e.type!==i))){const i={id:t,symbolizers:[...r,...this._encodeStyle(l,d.getGeometry(),this._mfpProperties.dpi)]};n.set(e,i)}return t})():(()=>{const t={...s(),symbolizers:this._encodeStyle(l,d.getGeometry(),this._mfpProperties.dpi)};return t.symbolizers.forEach((e=>{e.fillOpacity&&(e.fillOpacity*=u),e.strokeOpacity&&(e.strokeOpacity*=u),e.graphicOpacity&&(e.graphicOpacity*=u)})),n.set(e,t),t.id})())(l),h=Array.isArray(c)?c.reduce(((e,i)=>{if(i.getGeometry&&"function"==typeof i.getGeometry()){const a=i.getGeometry()(d);if(a){const s=a.clone();d.get((0,dn.LL)(un))&&s.transform(this._mapProjection,this._mfpProjection);const c=this._encodeFeature(new nr.A(s),t,n,r,[i]);return c?{features:[...e.features,...c.features]}:o}}return e}),o):{features:[]},p=this._geometryEncodingFormat.writeFeatureObject(d);return p.properties={_gx_style:g},{features:[p,...h.features]}}_encodeGeometryType(e){const t={MultiPoint:()=>"point",LineString:()=>"line",MultiPolygon:()=>"polygon",MultiLineString:()=>"line"};return Object.hasOwn(t,e)?t[e]():e.toLowerCase()}_encodeStyle(e,t,n){const i=e.getFill(),o=e.getStroke(),a=e.getText(),s=e.getImage(),c=t.getType(),l={type:this._encodeGeometryType(c),zIndex:e.getZIndex()?e.getZIndex():0};if(s&&"point"===l.type){const e=s.getScale();l.rotation=180*(s.getRotation()??0)/Math.PI;const t=e=>{const t=e.getSrc(),{IconService:n}=r.z.inject("IconService"),i=n.getIconResult(t),o=n.decodeColor(t);return{size:e.getSize(),anchor:e.getAnchor(),imageSrc:i?i.getUrl(o):e.getSrc().replace(/\.svg/,".png")}},i=e=>{const t=e.getStroke(),r=e.getRadius(),i=t?jo.adjustDistance(2*r,n)+jo.adjustDistance(t.getWidth()+1,n):jo.adjustDistance(2*r,n);return{fill:e.getFill(),stroke:t,radius:r,size:[i,i]}},o=s instanceof Kt.A?t(s):i(s);if(o.size){l.graphicWidth=jo.adjustDistance(o.size[0]*e||.1,n),l.graphicHeight=jo.adjustDistance(o.size[1]*e||.1,n);const t=o.fill?.getColor();if(t){const e=(0,No._j)(t);l.fillColor=(0,en.Ob)(e.slice(0,3)),l.fillOpacity=e[3]??1}}o.anchor&&(l.graphicXOffset=(o.size[0]/2-o.anchor[0])*e,l.graphicYOffset=(o.size[1]/2-o.anchor[1])*e),o.imageSrc&&(l.externalGraphic=o.imageSrc,l.graphicOpacity=1),o.radius&&(l.pointRadius=o.radius)}if(i){const e=(0,No._j)(i.getColor());l.fillColor=(0,en.Ob)(e.slice(0,3)),l.fillOpacity=e[3]??1}if(o){const e=(0,No._j)(o.getColor());l.strokeWidth=jo.adjustDistance(o.getWidth(),n),l.strokeColor=(0,en.Ob)(e.slice(0,3)),l.strokeOpacity=e[3]??1,l.strokeLinecap=o.getLineCap()??"round",l.strokeLineJoin=o.getLineJoin()??"round",o.getLineDash()&&(l.strokeDashstyle="dash")}if(l.fillOpacity=l.fillOpacity??0,l.strokeOpacity=l.strokeOpacity??0,a&&a.getText()){l.label=a.getText(),l.labelYOffset=a.getOffsetY()?jo.adjustDistance(-1*a.getOffsetY(),n):0,l.type="text";const e=e=>{switch(e){case"left":case"right":return e[0];default:return"c"}},t=e=>{switch(e){case"bottom":case"top":return e[0];default:return"m"}};if(l.labelAlign=e(a.getTextAlign())+t(a.getTextBaseline()),a.getFill()){const e=(0,No._j)(a.getFill().getColor());l.fontColor=(0,en.Ob)(e)}if(a.getFont()){const e=a.getFont().split(" "),t=a.getScale()??1,[r,i,...o]=e;l.fontFamily=o.join(" "),l.fontSize=t*jo.adjustDistance(parseInt(i),n),l.fontWeight=r}this._mfpProperties.rotation&&(l.labelRotation=(360-this._mfpProperties.rotation)%360)}return"text"===l.type&&l.externalGraphic?(e=>{const{label:t,labelXOffset:n,labelYOffset:r,labelAlign:i,fontFamily:o,fontSize:a,fontWeight:s,...c}=e;return[{...c,type:"point"},e]})(l):[l]}_encodeOverlays(e){const t=e=>{const t=e.getElement();if(t.tagName.toLowerCase()!==Un.OM.tag)return console.warn("cannot encode overlay element: No rule defined",t),null;const n=`.${Un.qP}`,r=(0,Nt.Ne)(t,n),i=r.length>0?r[0].innerText:"",o=e.getPosition(),a=new _r.A(o).transform(this._mapProjection,this._mfpProjection).getCoordinates(),s=Math.round(t.placement.offset[0]),c=-Math.round(t.placement.offset[1]),l=(e=>{const t={top:0,middle:.5,bottom:1,left:0,center:.5,right:1},n=e.split("-");return n&&2===n.length?{x:t[n[1]],y:t[n[0]]}:{x:.5,y:.5}})(t.placement.positioning);return{type:"Feature",properties:{type:t.type,label:i,labelXOffset:s,labelYOffset:c,labelAnchorPointX:l.x,labelAnchorPointY:l.y},geometry:{type:"Point",coordinates:[...a,0]}}},n=e.filter((e=>!e.getElement().style||"none"!==e.getElement().style.display)).map((e=>t(e))).filter((e=>null!==e));return 0===n.length?[]:{type:"geojson",name:"overlay",opacity:1,geoJson:{type:"FeatureCollection",features:n},style:{version:2,conflictResolution:!1,"[type='distance']":{symbolizers:[{type:"point",fillColor:"#ff0000",fillOpacity:1,strokeOpacity:0,graphicName:"circle",graphicOpacity:.4,pointRadius:3},{type:"text",label:"[label]",labelXOffset:"[labelXOffset]",labelYOffset:"[labelYOffset]",labelAnchorPointX:"[labelAnchorPointX]",labelAnchorPointY:"[labelAnchorPointY]",fontColor:"#ffffff",fontSize:10,fontFamily:"sans-serif",fontWeight:"bold",haloColor:"#ff0000",haloOpacity:1,haloRadius:1,strokeColor:"#ff0000"}]},"[type='distance-partition']":{symbolizers:[{type:"point",fillColor:"#ff0000",fillOpacity:1,strokeOpacity:1,strokeWidth:1.5,strokeColor:"#ffffff",graphicName:"circle",graphicOpacity:.4,pointRadius:2},{type:"text",label:"[label]",labelXOffset:"[labelXOffset]",labelYOffset:"[labelYOffset]",labelAnchorPointX:"[labelAnchorPointX]",labelAnchorPointY:"[labelAnchorPointY]",fontColor:"#000000",fontSize:8,fontFamily:"sans-serif",fontWeight:"normal",haloColor:"#ffffff",haloOpacity:1,haloRadius:2,strokeColor:"#ff0000"}]},"[type='area']":{symbolizers:[{type:"text",label:"[label]",labelAlign:"cm",fontColor:"#ffffff",fontSize:10,fontFamily:"sans-serif",fontWeight:"bold",haloColor:"#ff0000",haloOpacity:1,haloRadius:1,strokeColor:"#ff0000"}]}}}}_encodeGridLayer(e){const t=new Map([[2e6,1e5],[1e6,1e5],[5e5,5e4],[2e5,1e4],[1e5,5e3],[5e4,1e3],[25e3,1e3],[1e4,1e3],[5e3,500],[2500,200],[1250,100],[1e3,100],[500,50]]),n=t.has(e)?t.get(e):1e3;return{type:"grid",gridType:"lines",origin:[6e5,48e5],spacing:[n,n],renderAsSvg:!0,haloColor:"#f5f5f5",labelColor:"black",valueFormat:"##,#####.#",formatGroupingSeparator:" ",indent:10,haloRadius:2,font:{name:["Liberation Sans","Helvetica","Nimbus Sans L","Liberation Sans","FreeSans","Sans-serif"],size:8,style:"BOLD"}}}static adjustDistance(e,t){return null!=e?70*e/t:null}async _generateShortUrl(){const e=(0,Je.dR)(this._shareService.encodeState(),{[xe.h.TOOL_ID]:null});try{return await this._urlService.shorten(e)}catch(t){return console.warn("Could not shorten url: "+t),e}}_generateQrCode(e){try{return this._urlService.qrCode(e)}catch(e){console.warn("Could not generate qr-code url: "+e)}return null}static buildMatrixSets(e){const t=e.getResolutions(),n=e=>e/28e-5,r=(e,t)=>{const n=e.getTileCoordForCoordAndZ((0,fe.Py)(e.getExtent()),t),r=e.getTileCoordForCoordAndZ((0,fe.k_)(e.getExtent()),t);return[Math.abs(r[1]-n[1]),Math.abs(n[2]-r[2])]};return t.map(((t,i)=>{const o=e.getZForResolution(t),a=e.getTileSize(o);return{identifier:i.toString(),scaleDenominator:n(t),topLeftCorner:e.getOrigin(o),tileSize:[a,a],matrixSize:r(e,o)}}))}}class Oo extends Yt{constructor(){super(Do);const{StoreService:e,TranslationService:t,MapService:n,MfpService:i,Mfp3Encoder:o,ConfigService:a}=r.z.inject("StoreService","TranslationService","MapService","MfpService","Mfp3Encoder","ConfigService");this._storeService=e,this._translationService=t,this._mapService=n,this._mfpService=i,this._configService=a,this._encoder=o,this._mfpLayer=null,this._mapListener=null,this._mfpBoundaryFeature=new nr.A,this._forceRenderFeature=new nr.A,this._map=null,this._registeredObservers=[],this._pageSize=null,this._visibleViewport=null,this._mapProjection="EPSG:"+this._mapService.getSrid(),this._beingDragged=!1,this._previewDelayTime=1500,this._previewDelayTimeoutId=null,this._alreadyWarned=!1}onActivate(e){if(this._map=e,null===this._mfpLayer){const r=new Ft.A({wrapX:!1,features:[this._mfpBoundaryFeature,this._forceRenderFeature]});this._mfpLayer=new Gt.A({source:r}),(0,Eo.hF)(this._getOptimalScale(e));const i=this._storeService.getStore().getState().mfp.current;this._mfpLayer.on("prerender",(t=this._map,n=()=>this._getPixelCoordinates(),e=>{const{pixelCoordinates:r,supportedArea:i}=n(),o=((e,t,n)=>{const[r,i]=e.getSize();return{outer:[[0,0],[r,0],[r,i],[0,i],[0,0]].map((e=>(0,Bt.FY)(t,e))),inner:n.map((e=>(0,Bt.FY)(t,e)))}})(t,e,r);((e,t,n)=>{const{outer:r,inner:i}=t;if(e.save(),e.globalCompositeOperation="source-over",e.beginPath(),e.moveTo(r[0][0],r[0][1]),r.slice(1).forEach((t=>e.lineTo(t[0],t[1]))),e.closePath(),e.moveTo(i[0][0],i[0][1]),[...i].slice(1).forEach((t=>e.lineTo(t[0],t[1]))),e.closePath(),e.fillStyle="rgba(0, 5, 25, 0.75)",e.fill(),!n){e.beginPath();const t=[...i].reverse();e.moveTo(t[0][0],t[0][1]),t.slice(1).forEach((t=>e.lineTo(t[0],t[1]))),e.closePath(),e.fillStyle="rgba(150, 150, 150, 0.5)",e.fill()}})(e.context,o,i)})),this._mfpLayer.on("postrender",(e=>e.context.restore())),this._registeredObservers=this._register(this._storeService.getStore()),this._forceRenderFeature.setGeometry(new _r.A(this._map.getView().getCenter())),this._forceRenderFeature.setStyle(To),this._mapListener=this._map.on("precompose",(()=>this._updateForceRenderFeature())),this._updateMfpPage(i),this._delayedUpdateMfpPreview(this._getVisibleCenterPoint())}var t,n;return this._mfpLayer}onDeactivate(e){this._mfpBoundaryFeature.setStyle(xo),this._mfpBoundaryFeature.setGeometry(null),this._unregister(this._registeredObservers),(0,Ut.e)(this._mapListener),this._mapListener=null,this._mfpLayer=null,this._map=null,this._visibleViewport=null,this._alreadyWarned=!1}_register(e){return[(0,O.lB)(e,(e=>e.mfp.current),(e=>{this._updateMfpPage(e),this._updateMfpPreview(this._getVisibleCenterPoint())})),(0,O.lB)(e,(e=>e.mfp.jobRequest),(()=>this._encodeMap())),(0,O.lB)(e,(e=>e.position.center),(()=>this._updateMfpPreview(this._getVisibleCenterPoint()))),(0,O.lB)(e,(e=>e.position.liveZoom),(()=>this._beingDragged=!0)),(0,O.lB)(e,(e=>e.map.moveStart),(()=>{this._previewDelayTimeoutId||(this._beingDragged=!0)})),(0,O.lB)(e,(e=>e.map.moveEnd),(()=>{this._delayedUpdateMfpPreview(this._getVisibleCenterPoint())})),(0,O.lB)(e,(e=>e.pointer.beingDragged),(e=>{(e?()=>{this._beingDragged=e,this._previewDelayTimeoutId&&(clearTimeout(this._previewDelayTimeoutId),this._previewDelayTimeoutId=null)}:()=>{this._delayedUpdateMfpPreview(this._getVisibleCenterPoint())})()}))]}_unregister(e){e.forEach((e=>e())),e=[]}_updateMfpPage(e){const{id:t,scale:n}=e,r=this._mfpService.getLayoutById(t).mapSize;var i;this._mfpBoundaryFeature.setStyle((i=()=>this._getBeingDragged(),[new Qt.Ay({renderer:(e,t)=>{if(!i()){const r=t.feature.get("inPrintableArea")??!0,i=t.feature.get("inSupportedArea")??!0,o={strokeStyle:r?"rgba(9, 157, 220, 0.5)":"rgba(231, 79, 13, 0.8)",lineWidth:r?3:5},a=null!=(n=e)[0][0]&&null!=n[0][0][0]?e[0]:e;i&&((e,t,n)=>{e.beginPath(),e.moveTo(t[0][0],t[0][1]),[...t].slice(1).forEach((t=>e.lineTo(t[0],t[1]))),e.closePath(),e.lineWidth=n.lineWidth,e.strokeStyle=n.strokeStyle,e.stroke()})(t.context,a,o)}var n}})])),this._pageSize=(e=>{const t=e=>e/72*25.4/1e3*n;return{width:t(e.width),height:t(e.height)}})(r)}_updateForceRenderFeature(){const e=this._map.getView().getCenter(),t=this._forceRenderFeature.getGeometry().getCoordinates();e[0]===t[0]&&e[1]===t[1]||this._forceRenderFeature.setGeometry(new _r.A(this._map.getView().getCenter()))}_updateMfpPreview(e){e&&(this._getMfpProjection()===this._mapProjection?()=>{this._mfpBoundaryFeature.set("inPrintableArea",!0),this._mfpBoundaryFeature.set("inSupportedArea",!0),this._mfpBoundaryFeature.setGeometry(e)}:()=>{const{extent:t}=this._mfpService.getCapabilities(),n=this._storeService.getStore().getState().position.rotation,r=this._createPagePolygon(this._pageSize,e),i=this._toMfpBoundary(r,e,n),o=(0,fe.Ym)(t,e.getCoordinates()),a=(0,fe._N)(i.getExtent(),t);this._mfpBoundaryFeature.set("inPrintableArea",(0,fe.aI)(a,i.getExtent())),this._mfpBoundaryFeature.set("inSupportedArea",o),this._mfpBoundaryFeature.setGeometry(i),(0,Eo.tM)(o)})()}_delayedUpdateMfpPreview(e){const t=this._previewDelayTime,n=e=>this._translationService.translate(e);this._previewDelayTimeoutId&&(clearTimeout(this._previewDelayTimeoutId),this._previewDelayTimeoutId=null),this._previewDelayTimeoutId=setTimeout((()=>{this._beingDragged=!1,this._updateMfpPreview(e);const t=this._mfpBoundaryFeature.get("inPrintableArea"),r=this._mfpBoundaryFeature.get("inSupportedArea");!t&&r&&this._warnOnce(n("olMap_handler_mfp_distortion_warning")),this._previewDelayTimeoutId=null}),t)}_getPixelCoordinates(){const e=this._map.getView().getResolution(),t=this._getVisibleCenterPixel(),n=this._map.getCoordinateFromPixel(t),r=this._getAverageDeviationFromEquator(n),i=(t=>{const n=t=>t/e/r;return{width:n(t.width),height:n(t.height)}})(this._pageSize),o=(0,we.Ql)(t,i);return{pixelCoordinates:(0,we.Fl)(o).getCoordinates()[0],supportedArea:this._mfpBoundaryFeature.get("inSupportedArea")}}_createPagePolygon(e,t){const n=t.clone().transform(this._mapProjection,this._getMfpProjection()),r=(0,we.Ql)(n.getCoordinates(),e);return(0,we.Fl)(r)}_toMfpBoundary(e,t,n){const r=e.clone().transform(this._getMfpProjection(),this._mapProjection);return null!==n?(e=>{const r=(0,we.xQ)(e);return e.rotate(n-r,t.getCoordinates()),e})(r):r}_getBeingDragged(){return this._beingDragged}_getAverageDeviationFromEquator(e){const t=(0,ce.WP)(e);return Math.abs(Math.cos(t[1]*Math.PI/180))}_getOptimalScale(e){const t=(n=e.getSize(),r=this._mapService.getVisibleViewport(e.getTarget()),{width:n[0]-(r.left+r.right),height:n[1]-(r.bottom+r.top)});var n,r;const i=this._getAverageDeviationFromEquator(e.getView().getCenter()),o=e.getView().getResolution(),a=o*i*(t.width-100),s=o*i*(t.height-100),{id:c}=this._storeService.getStore().getState().mfp.current,l=this._mfpService.getLayoutById(c).mapSize,d=39.37*a*72/l.width,u=39.37*s*72/l.height,g=Math.min(d,u),h=[...this._mfpService.getLayoutById(c).scales].reverse();return(e=>{let t;return e.forEach((e=>{g>e&&(t=e)})),t})(h)||h[0]}_getVisibleCenterPixel(){const e=()=>(this._visibleViewport||(this._visibleViewport=this._mapService.getVisibleViewport(this._map.getTarget())),this._visibleViewport);return(()=>{const t=this._map.getSize(),n=e();return[t[0]/2+(n.left-n.right)/2,t[1]/2+(n.top-n.bottom)/2]})()}_getVisibleCenterPoint(){return new _r.A(this._map.getCoordinateFromPixel(this._getVisibleCenterPixel()))}_getMfpProjection(){return`EPSG:${this._mfpService.getCapabilities().srid}`}_warnOnce(e){this._alreadyWarned||((0,Oe.L)(e,Oe.A.WARN),this._alreadyWarned=!0)}async _encodeMap(){const{id:e,scale:t,dpi:n}=this._storeService.getStore().getState().mfp.current,r=180*(0,we.xQ)(this._mfpBoundaryFeature.getGeometry())/Math.PI,i=this._storeService.getStore().getState().mfp.showGrid,o=this._storeService.getStore().getState().mfp.gridSupported,a={layoutId:e,scale:t,rotation:r,dpi:n,pageCenter:this._getVisibleCenterPoint(),pageExtent:this._mfpBoundaryFeature?.getGeometry()?.getExtent(),showGrid:i&&o},s=await this._encoder.encode(this._map,a);if((new TextEncoder).encode(JSON.stringify(s.specs??"")).length<this._configService.getValue("MAX_MFP_SPEC_SIZE",1e7)){(0,Eo._1)(s.specs);const e=s.errors.filter((e=>e.type===Ro.NOT_EXPORTABLE||e.type===Ro.MAXIMUM_ENCODING_LIMIT_REACHED));(e.length>0?()=>this._notifyAboutEncodingErrors(e):()=>{})()}else(0,Oe.L)(this._translationService.translate("olMap_handler_mfp_encoder_max_specs_limit_reached"),Oe.A.WARN)}_notifyAboutEncodingErrors(e){const t=ke.qy`<div>
			<p style="color: var(--text3);">${(()=>this._translationService.translate("olMap_handler_mfp_encoder_layer_not_exportable"))()}</p>
			<ul style="margin-left:2em;">
				${e.map((e=>ke.qy`<li style="color: var(--text3);">${e.label}</li>`))}
			</ul>
		</div>`;(0,Oe.L)(t,Oe.A.WARN)}}var Po=n(38611);const $o=[];class Fo extends bo{#oe=!1;constructor(){super("Elevation_Profile_Handler");const{StoreService:e,ElevationService:t}=r.z.inject("StoreService","ElevationService");this._storeService=e,this._elevationService=t,this._mapListeners={select:[],modify:[]},this._map=null}register(e){(0,O.lB)(this._storeService.getStore(),(e=>e.tools.current),(e=>{this.#oe=Fo.SUPPORTED_TOOL_IDS.includes(e)}),!1),this._map=e;const t=e.getInteractions();t.on("add",(e=>{this.#oe&&(e.element instanceof Pt.A&&this._updateListener(Vn.SELECT,e.element),e.element instanceof $t.A&&this._updateListener(Vn.MODIFY,e.element))})),t.on("remove",(e=>{this.#oe&&(e.element instanceof Pt.A&&this._updateListener(Vn.SELECT,null),e.element instanceof $t.A&&this._updateListener(Vn.MODIFY,null))}))}_getCoordinates(e){if(1===e.getLength()){const t=e.getArray()[0];return(0,we.qC)(t.getGeometry())?.getCoordinates()??$o}return $o}_updateSelectCoordinates(e){const t=e.target,n=this._getCoordinates(t);n.length>1?this._elevationService.requestProfile(n):(0,Po.KZ)(null)}_updateModifyCoordinates(e){const t=e.features,n=this._getCoordinates(t);n.length>1&&this._elevationService.requestProfile(n)}_updateListener(e,t){const n=this._mapListeners[e];if(n.length>0&&(n.forEach((e=>(0,Ut.e)(e))),this._mapListeners[e]=[],(0,Po.KZ)(null)),t)switch(e){case Vn.SELECT:n.push(t.getFeatures().on("add",(e=>this._updateSelectCoordinates(e)))),n.push(t.getFeatures().on("remove",(e=>this._updateSelectCoordinates(e))));break;case Vn.MODIFY:n.push(t.on("modifyend",(e=>this._updateModifyCoordinates(e))))}}static get SUPPORTED_TOOL_IDS(){return[tt.S.DRAW,tt.S.MEASURE]}}class Go extends bo{#ae=!1;#a;#_;constructor(){super("SelectableFeature_Handler");const{StoreService:e,GeoResourceService:t}=r.z.inject("StoreService","GeoResourceService");this.#a=e,this.#_=t}register(e){(0,O.lB)(this.#a.getStore(),(e=>e.tools.current),(e=>{this.#ae=null===e}),!1),e.on("pointermove",(t=>{if(t.dragging||!this.#ae)return;const n=e.getEventPixel(t.originalEvent),r=e.forEachFeatureAtPixel(n,(e=>e),{layerFilter:e=>!!this.#_.byId(e.get("geoResourceId"))?.queryable});e.getTargetElement().style.cursor=r||this._getDataAtPixel(t.pixel,e)?"pointer":""}))}_getDataAtPixel(e,t){return t.getLayers().getArray().map((e=>e instanceof jr.A?e.getLayers().getArray():e)).flat().filter((e=>e.getVisible())).filter((e=>!!this.#_.byId(e.get("geoResourceId"))?.queryable)).some((t=>{const n=t.getData(e);return n&&n[3]>0}))}}const Uo=[80,443],Yo="websocket";class Ho{_addPortToUrl(e,t){const n=e.split(".");return n[n.length-1]=((e,t)=>{const r=e[e.length-1];if(-1!==r.indexOf("/")){const e=r.split("/");return e[0]=e[0]+":"+t,e.join("/")}return n[n.length-1]+":"+t})(n,t),n.join(".")}_getFeatureReader(e){const{MapService:t}=r.z.inject("MapService"),n=t.getSrid(),i=Yi(e);return e.sourceType===lt.Vz.EWKT?t=>{const r=xi(t);return i.readFeatures(r.wkt).filter((e=>!!e.getGeometry())).map((t=>(t.set((0,dn.LL)("showPointNames"),e.showPointNames),t.getGeometry().transform("EPSG:"+r.srid,"EPSG:"+n),t)))}:t=>i.readFeatures(t).filter((e=>!!e.getGeometry())).map((t=>(t.set((0,dn.LL)("showPointNames"),e.showPointNames),t.getGeometry().transform("EPSG:4326","EPSG:"+n),t)))}_processMessage(e,t,n){const r=t.getSource();r.clear();const i=n(e);r.addFeatures(i)}_centerViewOptionally(e,t,n){const r=e.getSource(),i=t.getView().calculateExtent(),o=r.getExtent(),a=n?Ur.BY:e=>(0,Ur.Uj)((0,fe.q1)(e));(0,fe.ms)(i,o)||a(o)}_startWebSocket(e,t,n,i){const{StyleService:o}=r.z.inject("StyleService"),a=this._getFeatureReader(e),s=new WebSocket(i?this._addPortToUrl(e.url,i):e.url);t.set(Yo,s);let c=!0;s.onmessage=r=>{const{data:i}=r;"keep-alive"!==i&&(this._processMessage(i,t,a),o.applyStyle(t,n,e),this._centerViewOptionally(t,n,c),c=!1)};const l=r=>{s.onmessage=void 0,t.unset(Yo),this._startWebSocket(e,t,n,r)};s.onclose=t=>{1006===t.code&&this._cascadingPorts(i,l,e.id)}}_closeWebSocket(e){const t=e.get(Yo);e.getSource().clear(),t.close(),e.unset(Yo)}_cascadingPorts(e,t,n){var r,i;(i=e??80,(r=Uo)&&r.indexOf(i)<r.length-1?()=>{t(((e,t=80)=>{const n=e[e.indexOf(t)+1];return 80===n?void 0:n})(Uo,e))}:()=>{throw new ht.o("Realtime-data cannot be displayed for technical reasons.",n)})()}createLayer(e,t,n){const{StoreService:i}=r.z.inject("StoreService"),{minZoom:o,maxZoom:a,opacity:s}=t,c=new Gt.A({id:e,geoResourceId:t.id,opacity:s,minZoom:o??void 0,maxZoom:a??void 0}),l=(e,t)=>e.find((e=>e.id===t)),d=(0,O.lB)(i.getStore(),(e=>e.layers.active),(r=>{const i=l(r,e),o=e=>e.visible&&!c.get(Yo)?()=>this._startWebSocket(t,c,n):!e.visible&&c.get(Yo)?()=>this._closeWebSocket(c):()=>{},a=()=>{this._closeWebSocket(c),d()},s=(e=>e?o(e):a)(i);s()})),u=new Ft.A;c.setSource(u);const g=l(i.getStore().getState().layers.active,e);return g?.visible&&this._startWebSocket(t,c,n),c}}const Bo="EPSG:3857";class Vo extends bo{constructor(){super("Overlay_Handler"),this._map=null}register(e){this._map=e,this._map.getView().on("change:center",(()=>this._updateOverlays()))}_updateOverlays(){const e=this._map.getOverlays().getArray().filter((e=>e.getElement()instanceof Un.OM));if(e.length>0){const t=this._map.getView().calculateExtent(this._map.getSize()),n=(0,ce.DI)(t,Bo,"EPSG:4326"),r=e=>-180>e?(e-e%360)/360:-180<e&&e<180?0:(e-e%360)/360,i=[r((0,fe.R)(n)[0]),r((0,fe.k_)(n)[0]),r((0,fe.Py)(n)[0]),r((0,fe.WU)(n)[0])],o=[Math.min(...i),Math.max(...i)];e.forEach((e=>this._updatePosition(e,t,o)))}}_updatePosition(e,t,n){const r=e.getPosition();if(r&&!(0,fe.Ym)(t,r)){const i=(0,ce.WP)(r,Bo),o=(e,t)=>{const n=[360*e+t[0],t[1]];return(0,ce.Rb)(n,Bo)},a=(e,t,n)=>{const[r,i]=e;for(let e=r-1;e<=i+1;e++){const r=o(e,t);if((0,fe.Ym)(n,r))return e}return null},s=a(n,i,t);if(null!==s){const t=o(s,i);e.setPosition(t)}}}}const Wo="layerSwipeHandler_layer",Zo="layerSwipeHandler_preRenderListenerKey",Qo="layerSwipeHandler_postRenderListenerKey";class qo extends bo{#a;#se=[];#O;_currentRatio;constructor(){super("Layer_Swipe_Handler");const{StoreService:e}=r.z.inject("StoreService");this.#a=e}_resetOlLayers(){this.#se=this.#se.filter((e=>(e.mapLibreMap?e.mapLibreMap.getContainer().style.clipPath="none":((0,Ut.e)(e.get(Zo)),(0,Ut.e)(e.get(Qo)),e.unset(Zo),e.unset(Qo)),e.unset(Wo),!1)))}_getAlignment(e){const t=(0,_n.rG)(this.#O,e)?.get("id")??e.get("id");return this.#a.getStore().getState().layers.active.filter((e=>e.id===t))[0]?.constraints.swipeAlignment??_t.E0.NOT_SET}_getPreRenderFn(){return e=>{const t=this._getAlignment(e.target);if(t===_t.E0.NOT_SET)return;const n=e.context,r=this.#O.getSize(),i=r[0]*(this._currentRatio/100),o=t===_t.E0.LEFT?{topLeft:(0,Bt.FY)(e,[0,r[1]]),topRight:(0,Bt.FY)(e,[i,r[1]]),bottomLeft:(0,Bt.FY)(e,[0,0]),bottomRight:(0,Bt.FY)(e,[i,0])}:{topLeft:(0,Bt.FY)(e,[i,0]),topRight:(0,Bt.FY)(e,[r[0],0]),bottomLeft:(0,Bt.FY)(e,[i,r[1]]),bottomRight:(0,Bt.FY)(e,r)};n.save(),n.beginPath(),n.moveTo(o.topLeft[0],o.topLeft[1]),n.lineTo(o.bottomLeft[0],o.bottomLeft[1]),n.lineTo(o.bottomRight[0],o.bottomRight[1]),n.lineTo(o.topRight[0],o.topRight[1]),n.closePath(),n.clip()}}_getPostRenderFn(){return e=>{e.context.restore()}}_updateOlLayers(e){const t=e=>{if(e.mapLibreMap){switch(this._getAlignment(e)){case _t.E0.LEFT:e.mapLibreMap.getContainer().style.clipPath=`polygon(0% 0%, ${this._currentRatio}% 0%, ${this._currentRatio}% 100%, 0% 100%)`;break;case _t.E0.RIGHT:e.mapLibreMap.getContainer().style.clipPath=`polygon(${this._currentRatio}% 0%, 100% 0%, 100% 100%, ${this._currentRatio}% 100%)`}e.get(Wo)||(e.set(Wo,!0),this.#se.push(e))}else e.get(Wo)||(e.set(Zo,e.on("prerender",this._getPreRenderFn())),e.set(Qo,e.on("postrender",this._getPostRenderFn())),e.set(Wo,!0),this.#se.push(e))};e.getLayers().forEach((e=>{e instanceof jr.A?e.getLayers().forEach((e=>{t(e)})):t(e)})),e.render()}register(e){this.#O=e,e.getLayers().on("add",(()=>{this.#a.getStore().getState().layerSwipe.active&&this._updateOlLayers(e)})),(0,O.lB)(this.#a.getStore(),(e=>e.layers.active),((t,n)=>{n.layerSwipe.active&&(this._resetOlLayers(),this._updateOlLayers(e))})),(0,O.lB)(this.#a.getStore(),(e=>e.layerSwipe.active),((t,n)=>{t?(this._currentRatio=n.layerSwipe.ratio,this._updateOlLayers(e)):this._resetOlLayers()})),(0,O.lB)(this.#a.getStore(),(e=>e.layerSwipe.ratio),((t,n)=>{n.layerSwipe.active&&(this._currentRatio=t,this._updateOlLayers(e))}))}}const Ko=Object.freeze({EQUALS:"equals",NOT_EQUALS:"not_equals",LIKE:"like",BETWEEN:"between",GREATER:"greater",GREATER_EQUALS:"greater_equals",LESS:"less",LESS_EQUALS:"less_equals"}),Xo=Object.freeze({COMPARISON_OPERATOR:"comparison_operator",BINARY_OPERATOR:"binary_operator",OPEN_BRACKET:"open_bracket",CLOSED_BRACKET:"closed_bracket",SYMBOL:"symbol",STRING:"string",NUMBER:"number",BOOLEAN:"boolean",DATE:"date",AND:"and",OR:"or",NOT:"not"}),Jo=Object.freeze([{regex:/\s+/,type:null},{regex:/\(/,type:Xo.OPEN_BRACKET,getValue:()=>"("},{regex:/\)/,type:Xo.CLOSED_BRACKET,getValue:()=>")"},{regex:/=/,type:Xo.BINARY_OPERATOR,getValue:()=>"=",operatorName:Ko.EQUALS},{regex:/<>/,type:Xo.BINARY_OPERATOR,getValue:()=>"<>",operatorName:Ko.NOT_EQUALS},{regex:/<=/,type:Xo.BINARY_OPERATOR,getValue:()=>"<=",operatorName:Ko.LESS_EQUALS},{regex:/>=/,type:Xo.BINARY_OPERATOR,getValue:()=>">=",operatorName:Ko.GREATER_EQUALS},{regex:/>/,type:Xo.BINARY_OPERATOR,getValue:()=>">",operatorName:Ko.GREATER},{regex:/</,type:Xo.BINARY_OPERATOR,getValue:()=>"<",operatorName:Ko.LESS},{regex:/\bLIKE\b/i,type:Xo.BINARY_OPERATOR,getValue:()=>"LIKE",operatorName:Ko.LIKE},{regex:/\bBETWEEN\b/i,type:Xo.COMPARISON_OPERATOR,getValue:()=>"BETWEEN",operatorName:Ko.BETWEEN},{regex:/\bNOT\b/i,type:Xo.NOT,getValue:()=>"NOT"},{regex:/\bAND\b/i,type:Xo.AND,getValue:()=>"AND"},{regex:/\bOR\b/i,type:Xo.OR,getValue:()=>"OR"},{regex:/(?<!\w)DATE\(\s*'[^']*'\s*\)(?!\w)/i,type:Xo.DATE,getValue:e=>/'[^']*'/.exec(e)[0].slice(1,-1)},{regex:/\b(false|true)\b/i,type:Xo.BOOLEAN,getValue:e=>"true"===e.toLowerCase()},{regex:/^-?[0-9]*\.?[0-9]+(?![\w.-])/,type:Xo.NUMBER,getValue:e=>Number(e)},{regex:/'[^']*'/,type:Xo.STRING,getValue:e=>e.slice(1,-1)},{regex:/\b[a-zA-Z_][a-zA-Z0-9_]*\b/,type:Xo.SYMBOL,getValue:e=>e}]);class ea{constructor(){}tokenize(e){let t=0,n="";const r=t=>{if(n=e.slice(t),!(t=>t<e.length)(t))return null;for(const e of Jo){const i=e.regex.exec(n),o=i?.[0]??null;if(null!==o&&0===n.indexOf(o))return null===e.type?r(t+o.length):{type:e.type,value:e.getValue(o),startsAt:t,endsAt:t+o.length,operatorName:e.operatorName??null}}throw new Error(`Unrecognized token at position ${t}: "${n}"`)},i=[];let o;for(;null!==(o=r(t));)t=o.endsAt,i.push(o);return i}}var ta=n(27842);class na{#ce;constructor(){this.#ce=new ea}parse(e,t){const n=[Xo.AND,Xo.OR],r=this.#ce.tokenize(e);if(0===r.length)return[];const i=e=>r[e],o=()=>{const e=r[0];return r.splice(0,1),e},a=()=>{const e=o();if(e.type!==Xo.SYMBOL)throw new Error(`Expected a symbol type but got "${e.type}".`);return e},s=()=>{const e=o();if(![Xo.STRING,Xo.NUMBER,Xo.BOOLEAN,Xo.DATE].includes(e.type))throw new Error(`Expected a literal type but got "${e.type}".`);return e},c=()=>{const e={symbol:a(),operator:o(),literal:s()};if(i(1).type===Xo.SYMBOL&&i(2).type===Xo.BINARY_OPERATOR){const t=o();if(t.type!==Xo.AND)throw new Error(`Expected "${Xo.AND}" but got "${t.type}".`);const n=a(),r=o(),i=s();if(e.symbol.value!==n.value)throw new Error(`Expected a symbol named "${e.symbol.value}" but got "${n.value}".`);const c=e.operator.value+r.value,l={...e.operator};if(">=<="===c)return l.value=">=<=",l.type=Xo.COMPARISON_OPERATOR,l.operatorName=ta.lW.BETWEEN,{symbol:e.symbol,operator:l,leftLiteral:e.literal,rightLiteral:i};throw new Error(`Can not parse Expression - Unsupported operator combination: "${e.operator.value}" and ${r.value}".`)}return e},l=()=>{const e=a(),t=o(),n=s(),r=o();if(r.type!==Xo.AND)throw new Error(`Expected "${Xo.AND}" but got "${r.type}".`);return{symbol:e,operator:t,leftLiteral:n,rightLiteral:s()}},d=()=>{const e=(()=>{const e=i(0);return e.type===Xo.NOT?(o(),o(),e):null})(),t=i(1);if(t.type===Xo.BINARY_OPERATOR)return{not:e,...c()};if(t.type===Xo.COMPARISON_OPERATOR)return{not:e,...l()};throw new Error(`Expected an operator type but got "${t.type}".`)},u=()=>{const e=[];for(;r.length>0;){let t=i(0);for(;r.length>0&&t.type!==Xo.OPEN_BRACKET&&t.type!==Xo.CLOSED_BRACKET;){if(n.includes(i(0).type)){o(),t=i(0);continue}const e=d();return o(),e}if(t.type===Xo.OPEN_BRACKET&&(o(),e.push(u())),t.type===Xo.CLOSED_BRACKET)return o(),e}return e[0]},g=e=>{let t=e.literal.value;return e.operator.operatorName===Ko.LIKE&&("%"===t.charAt(0)&&(t=t.slice(1)),"%"===t.charAt(t.length-1)&&(t=t.slice(0,-1))),t},h=e=>{const n=(r=e.symbol.value,t.find((e=>e.id===r)));var r;return void 0===n?null:e.operator.type===Xo.BINARY_OPERATOR?{...(0,ta.yb)(),operator:this._expressionToOafOperator(e),queryable:n,value:g(e)}:{...(0,ta.yb)(),operator:this._expressionToOafOperator(e),queryable:n,minValue:e.leftLiteral.value,maxValue:e.rightLiteral.value}};(()=>{let e=0;if(r[0].type!==Xo.OPEN_BRACKET||r[r.length-1].type!==Xo.CLOSED_BRACKET)throw new Error("CQL string must start with an opening bracket and end with a closing bracket.");for(const t of r)if(t.type===Xo.OPEN_BRACKET?e++:t.type===Xo.CLOSED_BRACKET&&e--,e<0)throw new Error("Closing bracket found without matching opening bracket.");if(0!==e)throw new Error("Brackets are not balanced. There are more opening brackets than closing brackets.")})();const p=u(),m=[];for(const e of p){const t=(0,ta.N7)();for(const n of e){const e=h(n);null!==e&&t.oafFilters.push(e)}m.push(t)}return m}_expressionToOafOperator=e=>{const t=e.operator.operatorName,n=null!==e.not?ta.lW.NOT:"";switch(t){case Ko.EQUALS:return(0,ta.bx)(n+ta.lW.EQUALS);case Ko.NOT_EQUALS:return(0,ta.bx)(n+ta.lW.NOT_EQUALS);case Ko.LIKE:{const t=e.literal.value,r="%"!==t.charAt(0),i="%"!==t.charAt(e.literal.value.length-1);return r||i?r?(0,ta.bx)(n+ta.lW.BEGINS_WITH):(0,ta.bx)(n+ta.lW.ENDS_WITH):(0,ta.bx)(n+ta.lW.CONTAINS)}case Ko.BETWEEN:return(0,ta.bx)(n+ta.lW.BETWEEN);case Ko.GREATER:return(0,ta.bx)(n+ta.lW.GREATER);case Ko.GREATER_EQUALS:return(0,ta.bx)(n+ta.lW.GREATER_EQUALS);case Ko.LESS:return(0,ta.bx)(n+ta.lW.LESS);case Ko.LESS_EQUALS:return(0,ta.bx)(n+ta.lW.LESS_EQUALS);default:throw new Error(`Can not convert operator with cql operator named "${t}".`)}}}const ra=async e=>{const{HttpService:t,ConfigService:n}=r.z.inject("HttpService","ConfigService"),i=n.getValueAsPath("BACKEND_URL")+"administration/info",o=await t.get(`${i}/${e[0]}/${e[1]}`);switch(o.status){case 200:{const{gemeinde:e,gemarkung:t,flstBezeichnung:n}=await o.json();return{community:e,district:t,parcel:n}}case 404:return null;default:throw new Error(`Administration could not be retrieved: Http-Status ${o.status}`)}};class ia{constructor(e,t,n,r=null,i=null,o=[],a=[],s={hue:null,icon:null}){this._id=e,this._label=t,this._description=n,this._defaultBaseGeoR=i,this._baseGeoRs=r,this._activatedGeoRs=o,this._selectedGeoRs=a,this._style={hue:null,icon:null,...s}}get id(){return this._id}get label(){return this._label}get description(){return this._description}get defaultBaseGeoR(){return this._defaultBaseGeoR}get baseGeoRs(){return this._baseGeoRs?{...this._baseGeoRs}:null}get selectedGeoRs(){return[...this._selectedGeoRs]}get activatedGeoRs(){return[...this._activatedGeoRs]}get style(){return this._style}}const oa=async()=>{const{HttpService:e,ConfigService:t}=r.z.inject("HttpService","ConfigService"),n=t.getValueAsPath("BACKEND_URL")+"topics",i=await e.get(`${n}`);if(i.ok){const e=[];return(await i.json()).forEach((t=>{let n=null;n=new ia(t.id,t.label,t.description,t.baseGeoRs,t.defaultBaseGeoR,t.activatedGeoRs,t.selectedGeoRs,t.style),n.id&&n.label?e.push(n):console.warn("Could not create topic")})),e}throw new Error("Topics could not be retrieved")},aa=["fallback0","fallback1"],sa=async e=>{const{HttpService:t,ConfigService:n}=r.z.inject("HttpService","ConfigService"),i=`${n.getValueAsPath("BACKEND_URL")}catalog/${e}`,o=await t.get(i);if(o.ok)return await o.json();throw new Error(`Catalog for '${e}' could not be loaded`)};class ca{constructor(e=sa){this._provider=e,this._cache=new Map}async byId(e){try{if(!this._cache.has(e)){const t=await this._provider(e);this._cache.set(e,t)}return this._cache.get(e)}catch(t){if(aa.includes(e))return this._newFallbackCatalog();throw new Error("Could not load catalog from provider",{cause:t})}}_newFallbackCatalog(){return[{label:"Subtopic 1",children:[{geoResourceId:"tpo"},{geoResourceId:vt},{label:"Suptopic 2",children:[{geoResourceId:yt}]}]},{geoResourceId:bt}]}}class la extends wr.h{constructor(){super();const{TranslationService:e}=r.z.inject("TranslationService");this._translationService=e,this._bottomSheetFilterUiUnsubscribeFn=null,this._bottomSheetSettingsUiUnsubscribeFn=null}_addLayersFromQueryParams(e){const{GeoResourceService:t}=r.z.inject("GeoResourceService"),n=((e,n,r,i,o,a,s)=>{const c=e.split(","),l=n?n.split(","):[],d=r?r.split(","):[],u=i?i.split(","):[],g=o?o.split(","):[],h=a?a.split(","):[],p=s?s.split(","):[],m=[];return c.map(((e,n)=>{if(e){const i=t.byId(e)??t.asyncById(e),o=`${e}_${r=e,m.push(r),m.filter((e=>e===r)).length-1}`;if(i){const e={id:o,geoResourceId:i.id,constraints:{}};return"false"===l[n]&&(e.visible=!1),isFinite(d[n])&&d[n]>=0&&d[n]<=1&&(e.opacity=parseFloat(d[n])),u[n]&&i.timestamps.includes(u[n])&&(e.timestamp=u[n]),Object.values(_t.E0).includes(g[n])&&(e.constraints.swipeAlignment=g[n]),(0,Ae.fd)(h[n])&&(e.style={baseColor:h[n]}),(0,Ae.Kg)(p[n])&&p[n].length&&(e.constraints.filter=p[n]),e}}var r})).filter((e=>!!e))})(e.get(xe.h.LAYER),e.get(xe.h.LAYER_VISIBILITY),e.get(xe.h.LAYER_OPACITY),e.get(xe.h.LAYER_TIMESTAMP),e.get(xe.h.LAYER_SWIPE_ALIGNMENT),e.get(xe.h.LAYER_STYLE),e.get(xe.h.LAYER_FILTER)),i=parseInt(e.get(xe.h.ZOOM_TO_EXTENT)),o=(0,Ae.Et)(i)?i:-1;(0,_t.m6)(n,!0),n.forEach(((e,t)=>{t===o&&setTimeout((()=>{(0,Ur.bx)(e.id)}))}))}_addLayersFromConfig(){const{GeoResourceService:e,TopicsService:t,StoreService:n}=r.z.inject("GeoResourceService","TopicsService","StoreService"),i=(()=>{const{topics:{current:e}}=n.getStore().getState(),{defaultBaseGeoR:r}=t.byId(e)||t.default();return this._replaceForRetinaDisplays(r)})(),o=e.all(),a=o.filter((e=>e.id===i));0===a.length&&a.push(o[0]),(0,_t.VE)(a[0].id)}async _init(e){const{GeoResourceService:t,EnvironmentService:n}=r.z.inject("GeoResourceService","EnvironmentService"),i=n.getQueryParams();await t.init(),(0,_t.ux)(),i.has(xe.h.LAYER)?this._addLayersFromQueryParams(i):this._addLayersFromConfig(),n.isEmbeddedAsWC()&&(0,O.lB)(e,(e=>e.wcAttribute.changed),(()=>{this._addLayersFromQueryParams(n.getQueryParams())})),(0,O.lB)(e,(e=>e.layers.activeFilterUI),(t=>{this._bottomSheetFilterUiUnsubscribeFn?.(),t?(this._bottomSheetFilterUiUnsubscribeFn=(0,O.lB)(e,(e=>e.bottomSheet.active),(e=>{e.includes(N.RR)||(0,_t.Yz)()})),(0,Ir.j)(ke.qy`<ba-oaf-mask .layerId=${t}></ba-oaf-mask>`,N.RR)):(0,Ir.D)(N.RR)})),(0,O.lB)(e,(e=>e.layers.activeSettingsUI),(t=>{this._bottomSheetSettingsUiUnsubscribeFn?.(),t?(this._bottomSheetSettingsUiUnsubscribeFn=(0,O.lB)(e,(e=>e.bottomSheet.active),(e=>{e.includes(N.Yx)||(0,_t.rs)()})),(0,Ir.j)(ke.qy`<ba-layer-settings .layerId=${t}></ba-layer-settings>`,N.Yx)):(0,Ir.D)(N.Yx)})),(0,O.lB)(e,(e=>e.layers.removed),((e,t)=>{e.payload.includes(t.layers.activeFilterUI)&&(0,_t.Yz)(),e.payload.includes(t.layers.activeSettingsUI)&&(0,_t.rs)()}))}_replaceForRetinaDisplays(e){const{EnvironmentService:t,TopicsService:n,StoreService:i}=r.z.inject("EnvironmentService","TopicsService","StoreService");if(t.isRetinaDisplay()){const{topics:{current:t}}=i.getStore().getState(),r=n.byId(t)?.baseGeoRs??n.default()?.baseGeoRs,{raster:o,vector:a}=r;if(Array.isArray(o)&&Array.isArray(a)&&0===o.indexOf(e))return a[0]}return e}async register(e){return await this._init(e)}}class da extends wr.h{_setPositionFromQueryParams(e){const{CoordinateService:t,MapService:n}=r.z.inject("CoordinateService","MapService"),i=(o=e.get(xe.h.ZOOM))&&isFinite(o)?parseFloat(o):null;var o;const a=(e=>{if(e){const r=e.split(",");if(2===r.length&&isFinite(r[0])&&isFinite(r[1])){const e=r.map((e=>parseFloat(e)));return t.transform(e,(e=>Math.abs(e[0])<=180&&Math.abs(e[1])<=90?4326:n.getLocalProjectedSrid())(e),n.getSrid())}}return null})(e.get(xe.h.CENTER)),s=((c=e.get(xe.h.ROTATION))&&isFinite(c)?parseFloat(c):null)??0;var c;(0,Ae.Xq)(a)||(0,Ae.Et)(i)?(0,Ur.uj)({zoom:i??Math.round(n.getMaxZoomLevel()-n.getMaxZoomLevel()/2),center:a??t.getCenter(n.getDefaultMapExtent()),rotation:s}):this._setPositionFromConfig(s)}_setPositionFromConfig(e){const{MapService:t}=r.z.inject("MapService");setTimeout((()=>{(0,Ur.BY)(t.getDefaultMapExtent(),{useVisibleViewport:!1}),(0,Ur.bg)(e)}))}_init(e){const{EnvironmentService:t}=r.z.inject("EnvironmentService"),n=t.getQueryParams();this._setPositionFromQueryParams(n),t.isEmbeddedAsWC()&&(0,O.lB)(e,(e=>e.wcAttribute.changed),(()=>{this._setPositionFromQueryParams(t.getQueryParams())}))}async register(e){this._init(e)}}var ua=n(74975),ga=n(8649);class ha extends wr.h{_addTopicFromQueryParams(e){const{TopicsService:t}=r.z.inject("TopicsService"),n=e.get(xe.h.TOPIC);n&&t.byId(n)&&((0,ua.i)(n),(0,ga.p)(ga.q.CATALOG_0))}async _init(){const{TopicsService:e,EnvironmentService:t}=r.z.inject("TopicsService","EnvironmentService"),n=t.getQueryParams();await e.init(),(0,ua.u)(),this._addTopicFromQueryParams(n)}async register(e){const t=await this._init();return(0,O.lB)(e,(e=>e.topicsContentPanel.index),(e=>{e===ga.q.TOPICS&&(0,ua.i)(null)})),t}}class pa extends wr.h{_updateStore(e,t,n){var i;i=[...new Set([...t,...e.filter((e=>e.observer?.topics.includes(n.topics.current))),...(()=>{const t=n.layers.active.map((e=>e.geoResourceId));return[...e.filter((e=>{const n=e.observer?.geoResources.filter((e=>e.startsWith("!")))??[];return!(!t.length||!n.length)&&0===n.filter((e=>t.includes(e.split("!")[1]))).length})),...e.filter((e=>t.some((t=>e.observer?.geoResources.includes(t)))))]})()])],Array.isArray(i)&&(()=>{const{StoreService:e}=r.z.inject("StoreService");return e.getStore()})().dispatch({type:z,payload:i})}_findPermanentAndQueryParamChips(e){const{EnvironmentService:t}=r.z.inject("EnvironmentService");return[...e.filter((e=>e.permanent)),...(e=>{const n=t.getQueryParams().get(xe.h.CHIP_ID)??[];return e.filter((e=>n===e.id))})(e)]}async register(e){try{const{ChipsConfigurationService:t}=r.z.inject("ChipsConfigurationService"),n=await t.all(),i=this._findPermanentAndQueryParamChips(n);this._updateStore(n,i,e.getState()),(0,O.lB)(e,(e=>e.layers),((e,t)=>this._updateStore(n,i,t))),(0,O.lB)(e,(e=>e.topics),((e,t)=>this._updateStore(n,i,t)))}catch(e){console.error("Chips configuration is not available.",e)}}}const ma=Object.freeze({LOCATION:Symbol.for("location"),GEORESOURCE:Symbol.for("georesource"),CADASTRAL_PARCEL:Symbol.for("cadastral_parcel")});class _a{constructor(e,t=e){if(this.constructor===_a)throw new TypeError("Can not construct abstract class.");this._checkDefined(e,"label"),this._label=e,this._labelFormatted=t}_checkDefined(e,t){if(!e)throw new TypeError(t+" must not be undefined")}get label(){return this._label}get labelFormatted(){return this._labelFormatted}getType(){throw new TypeError("Please implement abstract method #getType or do not call super.getType from child.")}}const va=Object.freeze({Forest:"forest",Waters:"waters",Mountain:"mountain",School:"school",Street:"street",Hut:"hut",Landscape:"landscape"});class ya extends _a{#c;#le;constructor(e,t,n=null,r=null){super(e,t),this._center=n,this._extent=r}get center(){return this._center}get extent(){return this._extent}get id(){return this.#c||this.setId(Ao(this).toString()),this.#c}get category(){return this.#le??null}setId(e){return(0,Ae.Kg)(e)&&(this.#c=e),this}setCategory(e){return this.#le=e,this}getType(){return ma.LOCATION}}class ba extends _a{#c;constructor(e,t,n=null,r=null,i=null){super(e,t),this._center=n,this._extent=r,this._geometry=i}get center(){return this._center}get extent(){return this._extent}get geometry(){return this._geometry}get id(){return this.#c||this.setId(Ao(this).toString()),this.#c}setId(e){return(0,Ae.Kg)(e)&&(this.#c=e),this}getType(){return ma.CADASTRAL_PARCEL}}class Sa extends _a{constructor(e,t,n){super(t,n),this._geoResourceId=e}get geoResourceId(){return this._geoResourceId}getType(){return ma.GEORESOURCE}}const fa=e=>e.replace(/(<([^>]+)>)/gi,""),wa=async e=>{const{HttpService:t,ConfigService:n}=r.z.inject("HttpService","ConfigService"),i=n.getValueAsPath("BACKEND_URL")+"search/type/georesource/searchText",o=await t.get(`${i}/${encodeURIComponent(e.replace(/\//g," "))}`);if(o.ok)return(await o.json()).map((e=>new Sa(e.id,fa(e.attrs.label),e.attrs.label)));throw new Error("SearchResults for GeoResources could not be retrieved")},Ma=async e=>{const{HttpService:t,ConfigService:n}=r.z.inject("HttpService","ConfigService"),i=n.getValueAsPath("BACKEND_URL")+"search/type/location/searchText",o={term:e},a=await t.post(i,JSON.stringify(o),ze.z.JSON);if(a.ok)return(await a.json()).map((e=>new ya(fa(e.attrs.label),e.attrs.label,e.attrs.coordinate,e.attrs.extent??null).setId(Ao(e).toString()).setCategory((e=>{switch(e){case"fliessgewaesser":case"see":return va.Waters;case"schule":return va.School;case"wald":return va.Forest;case"berg":return va.Mountain;case"huette":return va.Hut;case"strasse_platz":return va.Street;case"flurname":return va.Landscape}return null})(e.attrs.type))));throw new Error("SearchResults for locations could not be retrieved")},Ia=async e=>{const{HttpService:t,ConfigService:n}=r.z.inject("HttpService","ConfigService"),i=n.getValueAsPath("BACKEND_URL")+"search/type/cp/searchText",o=await t.get(`${i}/${encodeURIComponent(e.replace(/\//g," "))}`);if(o.ok)return(await o.json()).map((e=>new ba(fa(e.attrs.label),e.attrs.label,e.attrs.coordinate,e.attrs.extent?e.attrs.extent:null,e.attrs.ewkt?new fo.S(e.attrs.ewkt,new Yr.Y1(Yr.bu.EWKT,null,3857)):null).setId(Ao(e).toString())));throw new Error("SearchResults for cadastral parcels could not be retrieved")};var Aa=n(96057);class La extends wr.h{async register(){const{EnvironmentService:e}=r.z.inject("EnvironmentService"),t=e.getWindow(),n=t.matchMedia(p.rf),i=e=>{(0,Aa.sL)(e.matches)};n.addEventListener("change",i),i(n);const o=t.matchMedia(p.SO),a=e=>{(0,Aa.ZD)(e.matches)};o.addEventListener("change",a),a(o),t.matchMedia(p.KC).addEventListener("change",(e=>{(0,Aa.qi)(e.matches)})),a(o)}}class Ea extends wr.h{async register(e){let t=!1;const n=`${(0,_e.Ds)()}`,{EnvironmentService:i}=r.z.inject("EnvironmentService"),o=()=>{i.isTouch()?((0,Lr.kf)(n),t&&(0,Ir.D)(N.Px)):(0,Tr.Z_)()};(0,O.lB)(e,(e=>e.pointer.contextClick),(({payload:e})=>{const{coordinate:r,screenCoordinate:o}=e,a=ke.qy`<ba-map-context-menu-content .coordinate=${r}></ba-map-context-menu-content>`;i.isTouch()?((0,Lr.kf)(n),(0,Lr.lX)({id:n,data:r,type:Cr.p.QUERY_SUCCESS}),(0,Ir.j)(a,N.Px),t=!0):(0,Tr.jA)([o[0],o[1]],a)})),(0,O.lB)(e,(e=>e.pointer.click),o),(0,O.lB)(e,(e=>e.map.moveStart),o),(0,O.lB)(e,(e=>e.bottomSheet.active),(e=>{e.includes(N.Px)&&(t=!1)})),(0,O.lB)(e,(e=>e.tools.current),(()=>(0,Lr.kf)(n)))}}class Ta extends wr.h{constructor(){super();const{FeatureInfoService:e,MapService:t,TranslationService:n,GeoResourceService:i}=r.z.inject("FeatureInfoService","MapService","TranslationService","GeoResourceService");this._featureInfoService=e,this._mapService=t,this._translationService=n,this._geoResourceService=i}async register(e){(0,O.lB)(e,(e=>e.pointer.click),(async(e,t)=>{if(!t.featureInfo.querying){const{payload:{coordinate:n}}=e;(0,yo.E7)(n);const r=this._mapService.calcResolution(t.position.zoom,n),i=e=>e.visible&&!e.constraints.hidden;[...t.layers.active].filter(i).forEach((async e=>{const t=this._geoResourceService.byId(e.geoResourceId),i=`${(0,_e.Ds)()}`;try{(0,yo.Mr)(i);const t=await this._featureInfoService.get(e.geoResourceId,n,r,e.timestamp);t&&(0,yo.mj)({...t})}catch(e){console.error(e),(0,Oe.L)(`${t.label}: ${this._translationService.translate("global_featureInfoService_exception")}`,Oe.A.ERROR)}finally{(0,yo.zN)(i)}}))}})),(0,O.lB)(e,(e=>e.tools.current),(e=>{e&&(0,yo.pT)()}))}}var xa=n(19593);class Da extends wr.h{constructor(){super(),this._previousTab=null,this._open=null}_init(){const{EnvironmentService:e}=r.z.inject("EnvironmentService"),t=e.getQueryParams(),n=parseInt(t.get(xe.h.MENU_ID),10);(0,Ae.Et)(n)&&Object.values(Dr.K).includes(n)&&n!==Dr.K.ROUTING?(0,xr.sI)(n):(0,xr.sI)(Da.DEFAULT_TAB_ID);const i=t.get(xe.h.CATALOG_NODE_IDS);i&&(0,xa.yE)(i.split(",")),setTimeout((()=>{(0,xr.fh)()}),Da.FOCUS_SEARCHFIELD_DELAY_MS)}async register(e){this._init(),this._open=e.getState().mainMenu.open,this._previousTab=e.getState().mainMenu.tab,(0,O.lB)(e,(e=>e.featureInfo.querying),((e,t)=>{!e&&t.featureInfo.current.length>0&&((0,xr.sI)(Dr.K.FEATUREINFO),(0,xr.ho)())})),(0,O.lB)(e,(e=>e.featureInfo.aborted),((e,t)=>{t.mainMenu.tab===Dr.K.FEATUREINFO&&(this._open||(0,xr.VN)(),(0,xr.sI)(this._previousTab===Dr.K.FEATUREINFO?Da.DEFAULT_TAB_ID:this._previousTab))})),(0,O.lB)(e,(e=>e.search.query),(({payload:e})=>{e&&((0,xr.sI)(Dr.K.SEARCH),(0,xr.ho)())}),!1),(0,O.lB)(e,(e=>e.mainMenu.tab),((e,t)=>{e===Dr.K.FEATUREINFO||e===Dr.K.ROUTING?this._open=t.mainMenu.open:this._previousTab=e}),!1),(0,O.lB)(e,(e=>e.tools.current),((e,t)=>{e!==tt.S.ROUTING&&t.mainMenu.tab===Dr.K.ROUTING&&((0,xr.sI)(this._previousTab),t.media.portrait&&(0,xr.VN)()),t.media.portrait||e===tt.S.ROUTING&&((0,xr.sI)(Dr.K.ROUTING),(0,xr.ho)())}),!1),(0,O.lB)(e,(e=>e.media.portrait),((e,t)=>{e||t.mainMenu.tab!==Dr.K.ROUTING&&t.mainMenu.tab!==Dr.K.FEATUREINFO||(0,xr.ho)()}),!1)}static get DEFAULT_TAB_ID(){return Dr.K.MAPS}static get FOCUS_SEARCHFIELD_DELAY_MS(){return 0}}var Ca=n(78659);class Na extends wr.h{async register(e){(0,O.lB)(e,(e=>e.mainMenu.tab),(t=>{t!==Dr.K.FEATUREINFO&&t!==Dr.K.ROUTING||e.getState().media.portrait||((0,Ca.sm)(t),(0,Ca.ho)())}),!1)}}const ka=(e,t)=>{throw new Error(`FeatureInfoResult for '${e}' could not be loaded: ${t}`)},za=async(e,t,n,i)=>{const{GeoResourceService:o}=r.z.inject("GeoResourceService"),a=o.byId(e);if(a)return a instanceof lt.He?(async(e,t,n)=>{const i=e.id,{HttpService:o,ConfigService:a,GeoResourceService:s,BaaCredentialService:c}=r.z.inject("HttpService","ConfigService","GeoResourceService","BaaCredentialService"),l={urlOrId:i,easting:t[0],northing:t[1],srid:3857,resolution:n,...(e=>e.authenticationType===lt.Mg.BAA?c.get(e.url)??ka(i,"No credentials available"):{})(e)},d=a.getValueAsPath("BACKEND_URL")+`getFeature/${(0,Ae.q$)(i)?"url":i}`,u=await o.post(d,JSON.stringify(l),ze.z.JSON,{timeout:1e4},{response:e.authenticationType===lt.Mg.BAA||(0,Ae.q$)(i)?[]:[s.getAuthResponseInterceptorForGeoResource(i)]});switch(u.status){case 200:{const{title:t,content:n}=await u.json();return{content:n,title:t||e.label}}case 204:return null}ka(i,`Http-Status ${u.status}`)})(a,t,n):a.hasTimestamps()?(async(e,t,n)=>{const i=e.id,{HttpService:o,ConfigService:a,StoreService:s}=r.z.inject("HttpService","ConfigService","StoreService"),c=s.getStore().getState().position.zoom,l={geoResourceId:i,easting:t[0],northing:t[1],zoom:Math.round(c),year:n},d=a.getValueAsPath("BACKEND_URL")+"timetravel",u=await o.post(d,JSON.stringify(l),ze.z.JSON,{timeout:1e4});switch(u.status){case 200:{const{title:e,content:t,geometry:n}=await u.json();return{content:t,title:e,geometry:n?new fo.S(n,Yr.Y1.forGeoJSON()):null}}case 204:return null}ka(i,`Http-Status ${u.status}`)})(a,t,i):null;ka(e,`No GeoResource found with id "${e}"`)};var Ra=n(60034);const ja=(e,t,n)=>ke.qy`<ba-auth-password-credential-panel
		.url=${e}
		.authenticate=${t}
		.onClose=${n}
	></ba-auth-password-credential-panel>`,Oa=async(e,t=ja)=>{const{HttpService:n,ConfigService:i,BaaCredentialService:o,ProjectionService:a}=r.z.inject("HttpService","ConfigService","BaaCredentialService","ProjectionService"),s=i.getValueAsPath("BACKEND_URL")+"sourceType",c=async(e,t=null)=>{const r={url:e,username:t?.username,password:t?.password};return await n.post(s,JSON.stringify(r),ze.z.JSON)},l=async(e,t)=>{switch(e.status){case 200:{const{name:n,version:r,srid:i}=await e.json(),o=e=>{switch(e){case"KML":return Yr.bu.KML;case"GPX":return Yr.bu.GPX;case"GeoJSON":return Yr.bu.GEOJSON;case"WMS":return Yr.bu.WMS;case"EWKT":return Yr.bu.EWKT;case"OAF":return Yr.bu.OAF}},s=o(n);return s?i&&!a.getProjections().includes(i)?new Yr.t8(Yr.$I.UNSUPPORTED_SRID):new Yr.t8(t?Yr.$I.BAA_AUTHENTICATED:Yr.$I.OK,new Yr.Y1(s,r,i)):new Yr.t8(Yr.$I.UNSUPPORTED_TYPE)}case 204:return new Yr.t8(Yr.$I.UNSUPPORTED_TYPE);case 401:return new Yr.t8(Yr.$I.RESTRICTED)}return new Yr.t8(Yr.$I.OTHER)},d=o.get(e),u=await c(e,d);return 401===u.status?new Promise((n=>{const{StoreService:i,TranslationService:a}=r.z.inject("StoreService","TranslationService"),s=(0,O.lB)(i.getStore(),(e=>e.modal),(e=>(({active:e})=>{e||d(null)})(e))),d=async(t,r)=>{s(),(0,Ne.Oo)(),t&&r?(o.addOrReplace(e,t),n(await l(r,!0))):n(await l(u))};(0,Ne.qf)(a.translate("global_import_authenticationModal_title"),t(e,(async(e,t)=>{const n=await c(t,e);return 401!==n.status&&n}),d))})):await l(u,!!d)},Pa=e=>{const{ProjectionService:t}=r.z.inject("ProjectionService");if(new Blob([e]).size>=Yr.FQ)return new Yr.t8(Yr.$I.MAX_SIZE_EXCEEDED);if(e.includes("<kml")&&e.includes("</kml>"))return new Yr.t8(Yr.$I.OK,new Yr.Y1(Yr.bu.KML,null,4326));if(e.includes("<gpx")&&e.includes("</gpx>"))return new Yr.t8(Yr.$I.OK,new Yr.Y1(Yr.bu.GPX,null,4326));const n=xi(e);if(n)return t.getProjections().includes(n.srid)?new Yr.t8(Yr.$I.OK,new Yr.Y1(Yr.bu.EWKT,null,n.srid)):new Yr.t8(Yr.$I.UNSUPPORTED_SRID);try{const t=["FeatureCollection","Point","LineString","Polygon","MultiPoint","MultiLineString","MultiPolygon"],{type:n}=JSON.parse(e);if(t.includes(n))return new Yr.t8(Yr.$I.OK,new Yr.Y1(Yr.bu.GEOJSON,null,4326))}catch{}return new Yr.t8(Yr.$I.UNSUPPORTED_TYPE)},$a=e=>{switch(e){case ze.z.KML:return new Yr.t8(Yr.$I.OK,new Yr.Y1(Yr.bu.KML));case ze.z.GPX:return new Yr.t8(Yr.$I.OK,new Yr.Y1(Yr.bu.GPX));case ze.z.GeoJSON:return new Yr.t8(Yr.$I.OK,new Yr.Y1(Yr.bu.GEOJSON))}return new Yr.t8(Yr.$I.UNSUPPORTED_TYPE)};class Fa extends wr.h{constructor(){super();const{ImportVectorDataService:e,TranslationService:t}=r.z.inject("ImportVectorDataService","TranslationService");this._importVectorDataService=e,this._translationService=t}async register(e){(0,O.lB)(e,(e=>e.import.latest),(async e=>{const{payload:{url:t,data:n,sourceType:r}}=e,i=t?this._importVectorDataService.forUrl(t,{sourceType:r}):this._importVectorDataService.forData(n,{sourceType:r},!0);if(i){const{id:e}=i;(0,xr.sI)(Dr.K.MAPS),setTimeout((()=>{(0,_t.VE)(e),(0,Ur.bx)(e)}),500)}else(0,Oe.L)(this._translationService.translate("global_import_data_failed"),Oe.A.ERROR)}))}}var Ga=n(99418);const Ua=["form","fieldset","input","datalist","button","select","option","optgroup","textarea","output","keygen","script","noscript","dialog"];Ga.A.addHook("afterSanitizeAttributes",(e=>{"target"in e&&(e.setAttribute("target","_blank"),e.setAttribute("rel","noopener noreferrer"))}));const Ya=e=>Ga.A.sanitize(e,{USE_PROFILES:{html:!0,svg:!0},FORBID_TAGS:Ua,FORBID_ATTR:["style"]}),Ha=["image/webp","image/png","image/gif","image/jpeg","image/svg+xml"],Ba=async(e,t)=>{const{isAuthenticated:n}=t,{HttpService:i,ConfigService:o,MapService:a}=r.z.inject("HttpService","ConfigService","MapService"),s=o.getValueAsPath("BACKEND_URL")+"wms/getCapabilities",c=n?{url:e,...(e=>{const{BaaCredentialService:t}=r.z.inject("BaaCredentialService"),n=t.get(e);return n?{username:n.username,password:n.password}:(()=>{throw new Error(`Import of WMS failed. Credential for '${e}' not found.`)})()})(e)}:{url:e},l=await i.post(s,JSON.stringify(c),ze.z.JSON);switch(l.status){case 200:return d=await l.json(),d.layers?.filter((e=>{return t=e,n=a.getSrid(),t.referenceSystems.some((e=>e.code===n));var t,n})).filter((e=>!t.layers.length||t.layers.includes(e.name))).map(((n,r)=>((n,r,i)=>{const o=(e=>{const t=[...Array.isArray(e)?e:[]].filter((e=>Ha.includes(e))).sort(((e,t)=>Ha.indexOf(e)-Ha.indexOf(t)));return t.length<1&&console.warn(`No supported media type found. Valid media types are: ${Ha}`),t})(r.formatsGetMap);return o.length>0?new lt.He(t.ids[i]??`${e}||${n.name}||${n.title}`,n.title,`${r.onlineResourceGetMap}`,`${n.name}`,o[0]).setAuthenticationType((s=t.isAuthenticated,s?lt.Mg.BAA:null)).setQueryable(n.queryable).setExtraParams((e=>e.maxHeight&&e.maxWidth?{maxHeight:e.maxHeight,maxWidth:e.maxWidth}:{})(r)).setExportable(n.referenceSystems.map((e=>e.code)).includes(a.getLocalProjectedSrid())):null;var s})(n,d,r))).filter((e=>!!e))??[];case 404:return[];default:throw new Error(`GeoResource for '${e}' could not be loaded: Http-Status ${l.status}`)}var d};var Va=n(20083);class Wa extends wr.h{async register(){const{EnvironmentService:e,SecurityService:t}=r.z.inject("EnvironmentService","SecurityService"),n=e.getQueryParams().get(xe.h.QUERY);n&&(0,Va.N)(t.sanitizeHtml(n))}}class Za extends wr.h{#s;#i;#de=(0,Gi.qr)(Za.DEBOUNCED_DELAY_MS,(()=>this._updateHistory()));constructor(){super();const{EnvironmentService:e,ShareService:t}=r.z.inject("EnvironmentService","ShareService");this.#s=e,this.#i=t}async register(e){if(this.#s.isEmbedded()){if(this.#s.isEmbeddedAsWC()){const t=()=>{this._updateWcAttributes()};(0,O.lB)(e,(e=>e.stateForEncoding.changed),t)}}else{const t=()=>{this.#de()};(0,O.lB)(e,(e=>e.stateForEncoding.changed),t)}}_updateHistory(){const e=this.#i.encodeState();this.#s.getWindow().history.replaceState(null,"",e)}_updateWcAttributes(){const e=this.#i.getParameters({includeHiddenGeoResources:!0}),t=[...e.keys()];this.#s.getWindow().document.querySelector(De.P.tag).getAttributeNames().filter((e=>Object.values(xe.h).includes(e))).forEach((e=>{t.includes(e)||this.#s.getWindow().document.querySelector(De.P.tag).removeAttribute(e)}));for(const[t,n]of e.entries())(0,O.aI)(this.#s.getWindow().document.querySelector(De.P.tag).getAttribute(t),n)||this.#s.getWindow().document.querySelector(De.P.tag).setAttribute(t,n)}static get DEBOUNCED_DELAY_MS(){return 200}}const Qa=async()=>{const{HttpService:e,ConfigService:t}=r.z.inject("HttpService","ConfigService"),n=t.getValueAsPath("BACKEND_URL")+"print/info",i=await e.get(n);if(200===i.status)return await i.json();throw new Error(`MfpCapabilties could not be loaded: Http-Status ${i.status}`)},qa=async(e,t,n)=>{const{HttpService:i,ConfigService:o}=r.z.inject("HttpService","ConfigService"),a=`${o.getValueAsPath("BACKEND_URL")}print/create/${t}`;try{const t=await i.fetch(a,{method:"POST",mode:qe.DEFAULT_REQUEST_MODE,body:JSON.stringify(e),headers:{"Content-Type":ze.z.JSON},timeout:4e4},n);if(200===t.status)return await t.json();throw new Error(`Mfp spec could not be posted: Http-Status ${t.status}`)}catch(e){if(e instanceof DOMException)return null;throw e}},Ka=async()=>{const{HttpService:e,ConfigService:t}=r.z.inject("HttpService","ConfigService"),n=t.getValueAsPath("BACKEND_URL")+"chips",i=await e.get(n);if(200===i.status)return await i.json();throw new Error(`Chips configuration could not be fetched: Http-Status ${i.status}`)};var Xa=n(84078);const Ja=()=>(on.A.defs("EPSG:25832","+proj=utm +zone=32 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +axis=neu"),on.A.defs("EPSG:25833","+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +axis=neu"),on.A.defs("EPSG:31468","+proj=tmerc +lat_0=0 +lon_0=12 +k=1 +x_0=4500000 +y_0=0 +ellps=bessel +datum=potsdam +units=m +no_defs"),(0,Xa.kz)(on.A),[25832,25833,31468]);class es extends wr.h{constructor(){super(),this._bottomSheetUnsubscribeFn=null}async register(e){(0,O.lB)(e,(e=>e.elevationProfile.active),(t=>{if(this._bottomSheetUnsubscribeFn?.(),t){this._bottomSheetUnsubscribeFn=(0,O.lB)(e,(e=>e.bottomSheet.active),(e=>(e=>{e||(0,Po.Er)()})(e.includes(ts))));const t=ke.qy`<ba-elevation-profile></ba-elevation-profile>`,n="elevation-profile";(0,Ir.j)(ke.qy`<ba-lazy-load .chunkName=${n} .content=${t}></ba-lazy-load>`,ts)}}),!1),(0,O.lB)(e,(e=>e.draw.active),(e=>e?null:(0,Ir.D)(ts))),(0,O.lB)(e,(e=>e.measurement.active),(e=>e?null:(0,Ir.D)(ts))),(0,O.lB)(e,(e=>e.featureInfo.current),(()=>{(0,Po.KZ)(null)}))}}const ts="elevationProfile",ns=async e=>{const{HttpService:t,ConfigService:n}=r.z.inject("HttpService","ConfigService"),i=n.getValueAsPath("BACKEND_URL")+"dem/elevation",o=await t.get(`${i}/${e[0]}/${e[1]}`);if(200===o.status)return(await o.json()).z;throw new Error(`Elevation could not be retrieved: Http-Status ${o.status}`)},rs=async e=>{const{HttpService:t,ConfigService:n,CoordinateService:i,MapService:o}=r.z.inject("HttpService","ConfigService","CoordinateService","MapService"),a=i.toCoordinate(e),s=o.calcLength(a),c=i.simplify(a,Ee.ELEVATION_PROFILE),l=n.getValueAsPath("BACKEND_URL")+"dem/profile",d={coords:c.map((e=>({e:e[0],n:e[1]})))},u=await t.post(l,JSON.stringify(d),ze.z.JSON);if(200===u.status)return((e,t)=>{const{stats:n,...r}=e;return{...r,stats:{...n,linearDistance:t}}})(await u.json(),s);throw new Error(`Profile could not be fetched: Http-Status ${u.status}`)},is=e=>JSON.parse(JSON.stringify(e));var os=n(59834);class as extends wr.h{constructor(){super();const{EnvironmentService:e,ShareService:t}=r.z.inject("EnvironmentService","ShareService");this._environmentService=e,this._shareService=t}async register(e){if(this._environmentService.isEmbedded()&&this._hasParentSameOrigin()){const t=()=>{this._updateAttribute()};(0,O.lB)(e,(e=>e.stateForEncoding.changed),t)}}_updateAttribute(){const e=this._findIframe();if(e){const t=this._shareService.encodeState({},[os.g.EMBED]);e.setAttribute(Nt.oO,t)}}_findIframe(){return(0,Nt.Ne)(this._getDocument(),`iframe[${Nt.oO}]`)[0]}_getDocument(){return this._environmentService.getWindow().parent.document}_hasParentSameOrigin(){try{this._getDocument()}catch{return!1}return!0}}class ss extends wr.h{constructor(){super();const{ShareService:e}=r.z.inject("ShareService");this._shareService=e,this._currentEncodedState=null}async register(e){const t=()=>{this._updateStore()};(0,O.lB)(e,(e=>e.position.zoom),t),(0,O.lB)(e,(e=>e.position.center),t),(0,O.lB)(e,(e=>e.position.rotation),t),(0,O.lB)(e,(e=>e.layers.active),t),(0,O.lB)(e,(e=>e.routing.waypoints),t),(0,O.lB)(e,(e=>e.routing.categoryId),t),(0,O.lB)(e,(e=>e.tools.current),t),(0,O.lB)(e,(e=>e.topics.current),t),(0,O.lB)(e,(e=>e.catalog.openNodes),t),(0,O.lB)(e,(e=>e.mainMenu.tab),t),(0,O.lB)(e,(e=>e.layerSwipe.ratio),t),setTimeout(t,0)}_updateStore(){const e=this._shareService.encodeState();this._currentEncodedState!==e&&((()=>{const{StoreService:e}=r.z.inject("StoreService");return e.getStore()})().dispatch({type:P,payload:new O.MD(null)}),this._currentEncodedState=e)}}class cs extends wr.h{constructor(){super();const{TranslationService:e,GeoResourceService:t}=r.z.inject("TranslationService","GeoResourceService");this._translationService=e,this._geoResourceService=t}async register(e){const t=()=>{const t=e.getState(),{layers:{active:n}}=t,r=n.filter((e=>!e.constraints.hidden)).map((e=>this._geoResourceService.byId(e.geoResourceId))).filter((e=>e.hidden)).filter((e=>![zr,kr].includes(e.id))).map((e=>e.label));if(r.length){const e=ke.qy`<div>
					<p style="color: var(--text3);">${this._translationService.translate("global_share_unsupported_geoResource_warning")}</p>
					<ul style="margin-left:2em;">
						${r.map((e=>ke.qy`<li style="color: var(--text3);">${e}</li>`))}
					</ul>
				</div>`;(0,Oe.L)(e,Oe.A.WARN)}};(0,O.lB)(e,(e=>e.tools.current),(e=>{e===tt.S.SHARE&&t()}),!1)}}var ls=n(14075);const ds=()=>{const{StoreService:e}=r.z.inject("StoreService");return e.getStore()},us=()=>{ds().dispatch({type:G,payload:null})};class gs extends wr.h{async register(e){(0,O.lB)(e,(e=>e.featureInfo.querying),((e,t)=>{const{featureInfo:{current:n}}=t;var r;e||(0===n.length?us():(r=ke.qy`<ba-feature-info-iframe-panel></ba-feature-info-iframe-panel>`,ds().dispatch({type:G,payload:r})))})),(0,O.lB)(e,(e=>e.featureInfo.aborted),(()=>{us()}))}}class hs extends wr.h{async register(e){const{EnvironmentService:t}=r.z.inject("EnvironmentService"),n=t.getQueryParams(),i=n.get(xe.h.TOOL_ID),o=[this._fileStorageHandler,this._routingHandler,this._defaultHandler];if(i)for(const t of o)if(t.apply(this,[i,n,e]))break;t.isEmbeddedAsWC()&&(0,O.lB)(e,(e=>e.wcAttribute.changed),(()=>{const e=t.getQueryParams().get(xe.h.TOOL_ID)??null;e?tt.o.includes(e)&&(0,Er.i)(e):(0,Er.i)(null)}))}_fileStorageHandler(e,t){const{FileStorageService:n}=r.z.inject("FileStorageService");if(t.has(xe.h.LAYER)){const r=t.get(xe.h.LAYER).split(","),i=r.find((e=>n.isAdminId(e))),o=r.find((e=>n.isFileId(e)));if(i)return this._setToolActiveAfterGeoResourceIsLoaded(i,e),!0;if(o&&[tt.S.DRAW,tt.S.MEASURE].includes(e))return this._setToolActiveAfterGeoResourceIsLoaded(o,e),!0}return!1}_routingHandler(e,t,n){return!!t.has(xe.h.ROUTE_WAYPOINTS)&&((0,O.sY)(n,(e=>e.routing.route),(()=>{(0,Er.i)(e)})),!0)}_defaultHandler(e){const{EnvironmentService:t}=r.z.inject("EnvironmentService");return(!t.isEmbedded()&&Object.values(tt.S).includes(e)||t.isEmbedded()&&tt.o.includes(e))&&(0,Er.i)(e),!0}_setToolActiveAfterGeoResourceIsLoaded(e,t){const{GeoResourceService:n}=r.z.inject("GeoResourceService"),i=n.byId(e);i&&(i instanceof lt.fX?i.onResolve((()=>{(0,Er.i)(t)})):(0,Er.i)(t))}}class ps extends wr.h{constructor(){super();const{EnvironmentService:e}=r.z.inject("EnvironmentService");this._environmentService=e}async register(e){this._environmentService.isEmbedded()&&(0,O.lB)(e,(e=>e.fileStorage.fileId),(e=>this._updateAttribute(e??null)))}_updateAttribute(e){this._findIframe()?.setAttribute(Nt.W,e||"")}_findIframe(){return(0,Nt.Ne)(this._getDocument(),`iframe[${Nt.W}]`)[0]}_getDocument(){return this._environmentService.getWindow().parent.document}}class ms extends wr.h{async register(e){const{EnvironmentService:t,GeoResourceService:n}=r.z.inject("EnvironmentService","GeoResourceService");if(!t.isEmbedded()){const t=e=>{e.returnValue="string",e.preventDefault()},r=e=>t(e),i=e=>{this._getTools().includes(e)?window.addEventListener("beforeunload",r):window.removeEventListener("beforeunload",r)};(0,O.lB)(e,(e=>e.tools.current),i,!1);const o=n=>{e.getState().tools.current!==tt.S.EXPORT&&t(n)},a=e=>{e.map((e=>n.resolve(n.byId(e.geoResourceId)))).flat().map((e=>e?.localData??!1)).some((e=>!0===e))?window.addEventListener("beforeunload",o):window.removeEventListener("beforeunload",o)};(0,O.lB)(e,(e=>e.layers.active),a,!1)}}_getTools(){return[tt.S.DRAW,tt.S.MEASURE,tt.S.ROUTING]}}const _s={unknown:["other","track_other","path_other","footway_other"],path:["path_grade3","path_grade4","path_grade5"],track:["track_grade2","track_grade3","track_grade4","track_grade5"],footway:["footway_grade2","footway_grade3","pedestrian","cycleway","path_grade1","path_grade2"],street:["track_grade1","residential","unclassified","tertiary","service"],mainstreet:["secondary","primary","motorway"]},vs=e=>{for(const t in _s)if(_s[t].indexOf(e)>-1)return t;return null},ys=()=>{const{ConfigService:e}=r.z.inject("ConfigService"),t=e.getValue("DEFAULT_LANG"),n={unknown:{...fs,label:"de"===t?"Unbekannt":"Unknown"},path:{id:1,color:"rgb(139,71,38)",label:"de"===t?"Pfad":"Path"},track:{id:2,color:"rgb(238,213,183)",label:"de"===t?"Wald-, Feldweg":"Track"},footway:{id:3,color:"rgb(205,183,158)",label:"de"===t?"Rad-, Fußweg":"Cycle, footway"},street:{id:4,color:"rgb(190,190,190)",label:"de"===t?"Nebenstraße":"Street"},mainstreet:{id:5,color:"rgb(255,193,7)",label:"de"===t?"Hauptstraße":"Mainstreet"}};return{surface:{unknown:{...ws,label:"de"===t?"Unbekannt":"Unknown"},ground:{id:100,color:"rgb(139,71,38)",label:"de"===t?"gewachsen, naturbelassen":"ground"},compacted:{id:200,color:"rgb(238,213,183)",label:"de"===t?"befestigt":"compacted"},other:{id:201,color:"rgb(238,213,183)",label:"de"===t?"befestigt":"compacted"},asphalt:{id:300,color:"rgb(190,190,190)",label:"de"===t?"asphaltiert":"asphalt"},paved:{id:400,color:"rgb(195,195,195)",label:"de"===t?"Straßenbelag":"paved"}},road:n}},bs=async(e,t)=>{const{HttpService:n,ConfigService:i,CoordinateService:o}=r.z.inject("HttpService","ConfigService","CoordinateService"),a={vehicle:e,points:t.map((e=>o.toLonLat(e)))},s=await n.post(`${i.getValueAsPath("BACKEND_URL")}routing/route`,JSON.stringify(a),ze.z.JSON);switch(s.status){case 200:return await s.json();case 400:throw new Error(`A route could not be retrieved: Http-Status ${s.status}`,{cause:Ar.kD.Improper_Waypoints});case 500:throw new Error(`A route could not be retrieved: Http-Status ${s.status}`,{cause:Ar.kD.Technical_Error});default:throw new Error(`A route could not be retrieved: Http-Status ${s.status}`)}},Ss=async()=>{const{ConfigService:e}=r.z.inject("ConfigService"),t=e.getValue("DEFAULT_LANG");return[{id:"bvv-hike",label:"de"===t?"Wandern (Freizeitwege)":"Hiking (BVV Freizeitwege)",description:"de"===t?"möglichst auf offiziellen Wanderwegen":'use "BVV Freizeitwege" tracks where possible',style:{routeColor:"red",routeBorderColor:"white",color:"red",icon:'<path d="M8.182 0c-0.884 0-1.6 0.716-1.6 1.6v0c0 0.884 0.716 1.6 1.6 1.6v0c0.884 0 1.6-0.716 1.6-1.6v0c0-0.884-0.716-1.6-1.6-1.6v0zM6.501 3.514l0.001 0.007-1.36 4.72c-0.16 0.64 0.080 1.279 0.56 1.679l2.080 1.689c0.416 0.338 0.484 0.787 0.484 0.787l0.045 3.604h1.54v-2.936c0-0.683-0.048-1.040-0.173-1.584-0.124-0.543-0.635-1.087-0.635-1.087l-1.453-1.764 0.754-2.67c0.12 0.092 0.21 0.165 0.237 0.195 0.108 0.125 0.653 0.715 1.166 0.994 0.512 0.28 1.166 0.141 1.166 0.141l2.275-0.719c0.232-0.112 0.414-0.35 0.414-0.607 0-0 0-0 0-0 0-0.34-0.272-0.616-0.609-0.623l-0.001-0v-1.34h-0.663v1.457c-0.565 0.125-1.62 0.353-1.79 0.356-0.188 0.002-0.34-0.168-0.515-0.352-0.15-0.158-0.521-0.49-0.697-0.658-0.167-0.16-0.901-0.636-1.112-0.735-0.368-0.172-1.714-0.554-1.714-0.554zM5.563 3.534c-1.15-0.086-2.3 0.607-2.678 1.741l-0.431 1.44c-0.216 0.648 0.215 1.368 0.863 1.584 0.72 0.216 1.368-0.146 1.584-0.865l1.152-3.815c-0.143-0.042-0.31-0.072-0.481-0.085l-0.009-0.001zM12.993 7.174l-0.655 0.191-0.010 8.635h0.665v-8.826zM5.499 10.384l-2.038 5.616h1.68l1.615-4.531-1.257-1.084z"></path>'},subcategories:[{id:"hike",label:"de"===t?"Wandern (schnellste Route)":"Hiking (fastest route)",description:"de"===t?"schnellste Route":"fastest route",style:{routeColor:"red",routeBorderColor:"white"},subcategories:[]}]},{id:"bvv-bike",label:"de"===t?"Fahrrad (Freizeitwege)":"Bicycle (BVV Freizeitwege)",description:"de"===t?"möglichst auf offiziellen Freizeitwegen":'use "BVV Freizeitwege" tracks where possible',style:{routeColor:"green",routeBorderColor:"white",routeZindex:2,color:"green",icon:'<path d="M14.243 7.395a.783.783 0 00-.784-.783h-.002V6.61h-2.045s-.215.012-.473-.315C8.97 3.851 8.653 3.378 8.022 3.378h-.394c-.63 0-1.104.473-3.39 2.76-.867.867-.788 1.97.079 2.522l2.403 1.414-.012 3.41-.002.05v.093h.004a.836.836 0 00.831.742c.43 0 .784-.325.83-.742h.001v-.003a.888.888 0 00.005-.09.845.845 0 00-.005-.09v-3.6c0-.556-.448-.934-.513-1.012-.034-.042-.459-.47-.839-.852l1.71-1.527 1.183 1.261c.271.304.631.473 1.025.473h2.553a.792.792 0 00.75-.793zm-2.335-6.361a1.64 1.64 0 00-.244-.37 2.228 2.228 0 00-.52-.44c-.213-.12-.415-.215-.89-.223-.465-.008-.62.059-.82.112-.43.114-1.06.438-1.14.547-.082.109-.06.172.061.275.042.037.107.077.174.114a1.57 1.57 0 00-.19.752 1.577 1.577 0 103.082-.468c.15-.017.388-.051.454-.11.074-.066.076-.088.033-.189zm1.066 8.68l.14.877a2.31 2.31 0 11-1.165.044l.32 2.07a.342.342 0 00.345.335.341.341 0 00.337-.41l-.663-4.133h-.67l.201 1.299a3.166 3.166 0 00-2.358 3.05A3.163 3.163 0 0012.614 16a3.163 3.163 0 003.154-3.153 3.164 3.164 0 00-2.794-3.133zM10.189 8.31L8.632 9.55c.025.091.041.189.041.292v.55l2.348-1.894h-.148a1.323 1.323 0 01-.684-.19zm-5.273 1.926l.355-.687-.572-.336-1.857 3.544a.33.33 0 00-.03.066c-.06.176.039.369.22.43.18.06.373-.033.433-.208l1.062-2.055a2.31 2.31 0 11-1.056-.431l.409-.781a3.134 3.134 0 00-.727-.085A3.163 3.163 0 000 12.846 3.163 3.163 0 003.153 16a3.163 3.163 0 003.154-3.154 3.156 3.156 0 00-1.39-2.61z"/>'},subcategories:[{id:"bike",label:"de"===t?"Fahrrad (schnellste Route)":"Bicycle (fastest route)",description:"de"===t?"schnellste Route":"fastest route",style:{routeColor:"green",routeBorderColor:"white",routeZindex:1,color:"green"},subcategories:[]},{id:"bayernnetz-bike",label:"de"===t?"Fahrrad (Bayernnetz)":"Bicycle (Bayernnetz)",description:"de"===t?"möglichst auf Bayernnetz":'use "Bayernnetz" tracks where possible',style:{routeColor:"blue",routeBorderColor:"white",routeZindex:0,color:"blue"},subcategories:[]}]},{id:"bvv-mtb",label:"de"===t?"Mountainbike (Freizeitwege)":"Mountain bike (Freizeitwege)",description:"de"===t?"möglichst auf offiziellen Freizeitwegen":'use "BVV Freizeitwege" tracks where possible',style:{routeColor:"SpringGreen",routeBorderColor:"white",color:"SpringGreen",icon:'<path d="M8.687 0c-.254.006-.383.047-.538.08-.442.09-1.096.381-1.184.485-.088.104-.068.168.048.278.097.09.312.205.386.244-.127.225-.2.485-.2.76 0 .87.717 1.573 1.601 1.573s1.6-.704 1.6-1.572c0-.165-.025-.324-.073-.473.103-.014.2-.034.24-.066.077-.062.08-.083.043-.186a1.626 1.626 0 00-.229-.38 2.248 2.248 0 00-.503-.465c-.21-.131-.41-.236-.89-.269A3.572 3.572 0 008.686 0zM3.524 2.053a2.267 2.267 0 00-1.714.81L.764 4.117c-.402.549-.406 1.335.152 1.73.558.475 1.279.399 1.761-.15L5.09 2.72l-.159-.158a2.184 2.184 0 00-1.407-.51zm2.674.566a.917.917 0 00-.758.409c-.8.865-2 2.28-2.64 3.066-.72.865-.4 2.202.72 2.516l1.722.489 1.701.482 1.07 3.072a.67.67 0 00.664.52c.375 0 .678-.29.678-.647a.633.633 0 00-.02-.156l-.004-.01a.628.628 0 00-.024-.07L8 8.456 5.36 7.16l1.818-2.184 1.52 1.122 2.981.264a.677.646 0 00.01 0l.018.002a.677.646 0 00.045.002.677.646 0 00.677-.647.677.646 0 00-.585-.64v-.006l-2.268-.216L6.879 2.87a1.062 1.062 0 00-.681-.252zm3.441 3.938L8.396 8.335a.37.37 0 00-.035.046l.28.814 1.755-2.557zm.863.093l.583 1.196A3.138 3.138 0 009.6 10.497c0 1.73 1.44 3.144 3.2 3.144 1.76 0 3.2-1.415 3.2-3.144 0-1.73-1.44-3.146-3.2-3.146a3.232 3.232 0 00-.741.086l.575 1.18a1.878 1.878 0 01.166-.008c1.04 0 1.92.865 1.92 1.888 0 1.022-.88 1.886-1.92 1.886s-1.92-.864-1.92-1.886c0-.602.305-1.149.768-1.497l.806 1.652a.348.348 0 00.433.22.34.34 0 00.237-.42.328.329 0 00-.029-.068l-1.802-3.65zM4.758 9.337l-1.77 3.322a.323.323 0 00-.031.065.34.34 0 00.223.429.348.348 0 00.44-.207l.804-1.53c.422.35.696.87.696 1.44 0 1.021-.88 1.886-1.92 1.886s-1.92-.865-1.92-1.887.88-1.887 1.92-1.887c.09 0 .18.007.267.02l.613-1.156a3.227 3.227 0 00-.88-.122c-1.76 0-3.2 1.415-3.2 3.145S1.44 16 3.2 16c1.76 0 3.2-1.415 3.2-3.145 0-1.065-.546-2.01-1.376-2.58l.394-.75z"/>'},subcategories:[{id:"mtb",label:"de"===t?"Mountainbike":"Mountain bike",description:"de"===t?"schnellste Route":"fastest route",style:{routeColor:"SpringGreen",routeBorderColor:"white"},subcategories:[]}]},{id:"racingbike",label:"de"===t?"Rennrad":"Racing bike",description:"de"===t?"schnellste Route":"fastest route",style:{routeColor:"fuchsia",routeBorderColor:"white",color:"fuchsia",icon:'<path d="M11.938.712c-.262.005-.395.048-.554.08-.456.094-1.13.39-1.221.495-.09.106-.054.286.066.397.08.074.248.182.353.248a1.6 1.6 0 00-.102.557 1.6 1.6 0 001.6 1.6 1.6 1.6 0 001.599-1.6 1.6 1.6 0 00-.048-.379c.106-.014.204-.035.245-.066.08-.063.084-.085.045-.19a1.654 1.654 0 00-.236-.387 2.303 2.303 0 00-.52-.472c-.216-.134-.422-.24-.917-.274a3.705 3.705 0 00-.31-.009zM8.78 2.336c-.64 0-1.774.521-4.567 2.35-.88.88-.8 2 .08 2.56l.463.272.934.55 1.082.636v3.537h.002a.772.772 0 101.543.057.773.773 0 00-.003-.065v-3.7a1.427 1.427 0 00-.432-1.016l-.82-.797 2.2-1.19.588 1.213c.24.32.521.736 1.268.736l2.822-.144a.744.744 0 100-1.487l-2.325.021c-.503.057-.9-1.896-1.758-2.97-.096-.12-.199-.23-.308-.325 0 0-.295-.238-.769-.238zm.793 4.731l-.992.74c.058.145.1.32.105.525l.003.257 1.312-.996c-.163-.136-.28-.3-.388-.444zm2.468.76l-.697.036.204.676a3.21 3.21 0 00-2.038 2.979c0 1.76 1.44 3.199 3.199 3.199s3.198-1.44 3.198-3.2A3.208 3.208 0 0012.73 8.32l.175.568a2.639 2.639 0 11-1.194.189l.758 2.51a.346.346 0 00.394.288.346.346 0 00.3-.388.333.333 0 00-.019-.071zm-7.43.062L2.8 11.39a.33.33 0 00-.031.067c-.06.179.04.374.223.436a.346.346 0 00.44-.21l1.198-2.32a2.639 2.639 0 11-1.126-.454l.268-.52a3.179 3.179 0 00-.664-.07 3.208 3.208 0 00-3.199 3.2c0 1.758 1.44 3.198 3.2 3.198 1.758 0 3.198-1.44 3.198-3.199a3.202 3.202 0 00-1.42-2.654l.317-.613z"/>'},subcategories:[]}]},fs={id:0,color:"#eee",image:"repeating-linear-gradient(45deg,#eee 0px,#eee 7px, #999 8px, #999 10px, #eee 11px)",bordercolor:"#999",label:"Unknown"},ws={id:0,color:"#eee",image:"repeating-linear-gradient(45deg,gray 25%, transparent 25%,transparent 50%, gray 50%, gray 55%, transparent 55%, transparent)",bordercolor:"#999",label:"Unknown"},Ms=()=>{const{StoreService:e}=r.z.inject("StoreService");return e.getStore()},Is=()=>{Ms().dispatch({type:B,payload:{signedIn:!0,byUser:!0}})},As=e=>{Ms().dispatch({type:B,payload:{signedIn:!1,byUser:e}})};class Ls extends wr.h{#n;#_;#ue;#ge;#s;constructor(){super();const{TranslationService:e,GeoResourceService:t,EnvironmentService:n}=r.z.inject("TranslationService","GeoResourceService","EnvironmentService");this.#n=e,this.#_=t,this.#s=n}async register(){const e=(e,t=[])=>this.#n.translate(e,t),t=t=>{if(t instanceof ht.o){const n=this.#_.byId(t.geoResourceId);n?.authenticationType&&(0,_t.Nr)(t.geoResourceId);const r=n?.label??t.geoResourceId;switch(t.httpStatus){case 401:(0,Oe.L)(`${e("global_geoResource_not_available",[r,e("global_geoResource_unauthorized")])}`,Oe.A.WARN);break;case 403:(0,Oe.L)(`${e("global_geoResource_not_available",[r,e("global_geoResource_forbidden")])}`,Oe.A.WARN);break;default:(0,Oe.L)(`${e("global_geoResource_not_available",[r])}`,Oe.A.WARN)}}else this.#s.isEmbeddedAsWC()||this._emitThrottledGenericNotification()};this.#ue=e=>{t(e.error)},this.#ge=e=>{t(e.reason)},window.addEventListener("error",this.#ue),window.addEventListener("unhandledrejection",this.#ge)}_emitThrottledGenericNotification(){const e=(e,t=[])=>this.#n.translate(e,t);Es((()=>(0,Oe.L)(`${e("global_generic_exception")}`,Oe.A.ERROR)))}_unregisterListeners(){window.removeEventListener("error",this.#ue),window.removeEventListener("unhandledrejection",this.#ge)}static get THROTTLE_NOTIFICATION_DELAY_MS(){return 3e3}}const Es=(0,Gi.v6)(Ls.THROTTLE_NOTIFICATION_DELAY_MS,(e=>e()));class Ts extends wr.h{#s;#v;#y;#_;constructor(){super();const{EnvironmentService:e,AuthService:t,ConfigService:n,GeoResourceService:i}=r.z.inject("EnvironmentService","AuthService","ConfigService","GeoResourceService");this.#s=e,this.#v=t,this.#y=n,this.#_=i}async register(e){if(!this.#s.isStandalone())try{await this.#v.init()}catch(e){throw new Error(`A requested endpoint of the backend is not available. Is the backend running and properly configured (current BACKEND_URL=${this.#y.getValue("BACKEND_URL")})?`,{cause:e})}(0,O.lB)(e,(e=>e.auth.signedIn),((e,t)=>{!e&&t.auth.byUser&&t.layers.active.forEach((e=>{this.#_.isAllowed(e.geoResourceId)||(0,_t.e5)(e.id)}))}))}}class xs extends wr.h{async register(){const{EnvironmentService:e}=r.z.inject("EnvironmentService");e.isEmbeddedAsWC()&&setTimeout((()=>{new MutationObserver((e=>this._updateWcStore(e))).observe(document.querySelector(De.P.tag),{attributes:!0,childList:!1,subtree:!1})}))}_updateWcStore(e){for(const n of e)"attributes"===n.type&&Object.values(xe.h).includes(n.attributeName)&&(t=n.attributeName,(()=>{const{StoreService:e}=r.z.inject("StoreService");return e.getStore()})().dispatch({type:Z,payload:new O.MD(t)}));var t}}const Ds=new class{#he={};isAdminId(e){return!!e&&e.startsWith("a_")}isFileId(e){return!!e&&e.startsWith("f_")}async getFileId(e){if(this.isFileId(e))return e;if(this.isAdminId(e))return e.replace("a_","f_");throw new Error("FileId could not be retrieved: "+e)}async get(e){const t=e?.split("f_")[1];if(this.#he[t])return this.#he[t];throw new Error("File could not be loaded: "+e)}async save(e,t,n){if(e&&this.isFileId(e))throw new Error("Saving a file by its FileId is currently not supported");if(n===dt.KML){if(e)return this.#he[e?.split("a_")[1]]=t,{adminId:e,fileId:e.replace("a_","f_")};const n=`tmp_${(0,_e.Ds)()}`;return this.#he[n]=t,{adminId:`a_${n}`,fileId:`f_${n}`}}throw new Error("Content-Type "+n+" currently not supported")}};class Cs extends wr.h{#s;#pe;#m;#n;constructor(){super();const{EnvironmentService:e,FileStorageService:t,SourceTypeService:n,TranslationService:i}=r.z.inject("EnvironmentService","FileStorageService","SourceTypeService","TranslationService");this.#s=e,this.#pe=t,this.#m=n,this.#n=i}async register(e){const t=this.#s.getQueryParams();if(t.has(xe.h.LAYER)){const e=t.get(xe.h.LAYER).split(",").reverse().find((e=>this.#pe.isAdminId(e)));e&&((e,t)=>{(0,Ae.Kg)(e)&&(0,Ae.Kg)(t)&&_i().dispatch({type:K,payload:{adminId:e,fileId:t}})})(e,await this.#pe.getFileId(e))}const n=(0,Gi.qr)(Cs.Debounce_Delay_Ms,((e,t)=>this._saveData(e,t)));(0,O.lB)(e,(e=>e.fileStorage.data),((e,t)=>{t.fileStorage.fileId?n(t.fileStorage.adminId,e):this._saveData(t.fileStorage.adminId,e)}))}async _saveData(e,t){const n=e=>this.#n.translate(e),r=this.#m.forData(t);if(r.status!==Yr.$I.OK)throw new Error(`Unexpected source type status: ${r.status}`);if(r.sourceType.name!==Yr.bu.KML)throw new Error(`Unsupported source type: ${r.sourceType.name}`);try{const n=await this.#pe.save(e,t,dt.KML);e?(i={success:!0,created:(new Date).getTime(),lastSaved:(new Date).getTime()},o=n.fileId,i&&o&&_i().dispatch({type:ee,payload:{latest:new O.MD({...i}),fileId:o}})):((e,t,n)=>{e&&t&&n&&_i().dispatch({type:te,payload:{latest:new O.MD({...e}),adminId:t,fileId:n}})})({success:!0,created:(new Date).getTime(),lastSaved:(new Date).getTime()},n.adminId,n.fileId)}catch(e){console.error(e),(0,Oe.L)(n("global_fileStorageService_exception"),Oe.A.ERROR),(e=>{e&&_i().dispatch({type:J,payload:new O.MD({...e})})})({success:!1,created:null,lastSaved:null})}var i,o}static get Debounce_Delay_Ms(){return 2e3}}var Ns=n(1001);class ks extends wr.h{#me=null;#s;#_e=null;constructor(){super();const{EnvironmentService:e}=r.z.inject("EnvironmentService");this.#s=e,this._bottomSheetUnsubscribeFn=null,this._closedByUser=!1}async register(e){if(!this.#s.isEmbedded()){const t=e=>e.filter((e=>e.visible)).filter((e=>e.timestamp)),n=e=>{const n=new Set(t(e).map((e=>e.timestamp))),r=new Set(t(e).map((e=>e.geoResourceId)));1===n.size&&1===r.size?(this.#me=[...r][0],clearTimeout(this.#_e),this._closedByUser?(0,Ns.sZ)([...n][0]):(0,Ns.IX)([...n][0])):this.#_e=setTimeout((()=>{this.#me=null,(0,Ns.YE)()}),ks.SLIDER_CLOSE_DELAY_MS)},r=(e,n)=>{this.#me&&t(n.layers.active).filter((e=>e.geoResourceId===this.#me)).forEach((t=>(0,_t.I7)(t.id,{timestamp:e})))},i=(t,n)=>{t&&this.#me?((0,Ir.j)(ke.qy`<ba-time-travel-slider
							.timestamp=${n.timeTravel.timestamp}
							.geoResourceId=${this.#me}
						></ba-time-travel-slider>`,zs),this._bottomSheetUnsubscribeFn=(0,O.lB)(e,(e=>e.bottomSheet.active),(e=>{e.includes(zs)||((0,Ns.YE)(),this._bottomSheetUnsubscribeFn(),this._closedByUser=!0)}))):((0,Ir.D)(zs),(0,Ns.YE)()),this._closedByUser=!1};(0,O.lB)(e,(e=>e.layers.active),(e=>n(e))),(0,O.lB)(e,(e=>e.timeTravel.timestamp),((e,t)=>r(e,t))),(0,O.lB)(e,(e=>e.timeTravel.active),((e,t)=>i(e,t)))}}static get SLIDER_CLOSE_DELAY_MS(){return 200}}const zs="timeTravel";var Rs=n(4046),js=n(15337);class Os extends wr.h{async register(e){const{EnvironmentService:t}=r.z.inject("EnvironmentService"),n=t.getQueryParams(),i=parseFloat(n.get(xe.h.SWIPE_RATIO));(0,Ae.Et)(i)&&(0,js.pv)(100*i),(0,O.lB)(e,(e=>e.tools.current),((e,t)=>{e!==tt.S.COMPARE?(0,js.LU)():setTimeout((()=>{t.layers.active.length>0&&t.layers.active[t.layers.active.length-1].constraints.swipeAlignment===_t.E0.NOT_SET&&(0,_t.I7)(t.layers.active[t.layers.active.length-1].id,{swipeAlignment:_t.E0.LEFT}),(0,js.Yf)()}))}),!1)}}var Ps=n(68514);const $s=async e=>{const{HttpService:t,ConfigService:n,BaaCredentialService:i}=r.z.inject("HttpService","ConfigService","BaaCredentialService"),o=n.getValueAsPath("BACKEND_URL")+"oaf/getFilterCapabilities",a=e.authenticationType===lt.Mg.BAA?{url:e.url,collectionId:e.collectionId,...(e=>{const t=i.get(e);return t?{username:t.username,password:t.password}:(()=>{throw new Error(`Fetching of filter capabilities failed. Credential for '${e}' not found`)})()})(e.url)}:{url:e.url,collectionId:e.collectionId},s=await t.post(o,JSON.stringify(a),ze.z.JSON,{timeout:2e4});if(200===s.status)return await s.json();throw new Error(`Filter capabilities for '${e.url}' could not be loaded: Http-Status ${s.status}`)},Fs=async(e,t)=>{const{isAuthenticated:n}=t,{HttpService:i,ConfigService:o,ProjectionService:a,BaaCredentialService:s}=r.z.inject("HttpService","ConfigService","ProjectionService","BaaCredentialService"),c=o.getValueAsPath("BACKEND_URL")+"oaf/getCollections",l=n?{url:e,...(e=>{const t=s.get(e);return t?{username:t.username,password:t.password}:(()=>{throw new Error(`Import of OAF service failed. Credential for '${e}' not found`)})()})(e)}:{url:e},d=await i.post(c,JSON.stringify(l),ze.z.JSON);switch(d.status){case 200:return(await d.json()).filter((e=>a.getProjections().includes(e.srid))).filter((e=>!t.collections.length||t.collections.includes(e.id))).map(((e,n)=>((e,n)=>{const r=e.url.split("collections")[0];return new lt.uv(t.ids[n]??`${r}||${e.id}`,e.title,r,e.id,e.srid).setLimit(e.totalNumberOfItems).setAuthenticationType(t.isAuthenticated?lt.Mg.BAA:null)})(e,n)));case 404:return[];default:throw new Error(`GeoResource for '${e}' could not be loaded: Http-Status ${d.status}`)}};r.z.registerSingleton("ProjectionService",new class{constructor(e=Ja){this._supportedSrids=[4326,3857,...e()]}getProjections(){return[...this._supportedSrids]}}).registerSingleton("AuthService",new class{constructor(e=Pe,t=$e,n=Fe){this._singInProvider=e,this._singOutProvider=t,this._initialAuthStatusProvider=n,this._roles=[]}async init(){const e=await this._initialAuthStatusProvider();e.length>0&&(this._roles=[...e],Is())}getRoles(){return[...this._roles]}isSignedIn(){return this._roles.length>0}async signIn(e=null){if(!this.isSignedIn()){const t=await this._singInProvider(e);return t.length>0&&(this._roles=[...t],Is(),!0)}return!0}async signOut(){if(this.isSignedIn()){const e=await this._singOutProvider();return e&&(this._roles=[],As(!0)),e}return!0}invalidate(){return!!this.isSignedIn()&&(this._roles=[],As(!1),!0)}}).registerSingleton("ConfigService",new class{constructor(){this._properties=new Map,this._properties.set("RUNTIME_MODE",window?.ba_externalConfigProperties?.NODE_ENV??"production"),this._properties.set("SOFTWARE_VERSION","4.5"),this._properties.set("SOFTWARE_INFO",window?.ba_externalConfigProperties?.SOFTWARE_INFO??"MISSING_ENV_VAR".SOFTWARE_INFO),this._properties.set("DEFAULT_LANG",window?.ba_externalConfigProperties?.DEFAULT_LANG??"MISSING_ENV_VAR".DEFAULT_LANG??"en"),this._properties.set("PROXY_URL",window?.ba_externalConfigProperties?.PROXY_URL??"MISSING_ENV_VAR".PROXY_URL),this._properties.set("BACKEND_URL",window?.ba_externalConfigProperties?.BACKEND_URL??"MISSING_ENV_VAR".BACKEND_URL),this._properties.set("FRONTEND_URL",window?.ba_externalConfigProperties?.FRONTEND_URL??"MISSING_ENV_VAR".FRONTEND_URL??`${location.protocol}//${location.host}${location.pathname}`),this._properties.set("SHORTENING_SERVICE_URL",window?.ba_externalConfigProperties?.SHORTENING_SERVICE_URL??"MISSING_ENV_VAR".SHORTENING_SERVICE_URL),this._properties.forEach(((e,t)=>{void 0===e&&console.warn("No config property found for "+t+". This is likely because the .env file is missing or you have to append this key to the .env file.")}))}_trailingSlash(e,t){if(e)return e=e.trim(),t?e.endsWith("/")?e:e+"/":e.replace(/\/$/,"")}getValue(e,t){return this._properties.get(e)??t??(()=>{throw new Error(`No value found for '${e}'`)})()}getValueAsPath(e,t){return this._trailingSlash(this.getValue(e,t),!0)}hasKey(e){return!!this._properties.get(e)}}).register("HttpService",class extends Xe{#y;#s;constructor(){super();const{ConfigService:e,EnvironmentService:t}=r.z.inject("ConfigService","EnvironmentService");this.#y=e,this.#s=t}async fetch(e,t={},n=new AbortController,r=Qe){if(this.#s.isStandalone())return super.fetch(e,t,n,r);const i=e.trim().startsWith(this.#y.getValueAsPath("BACKEND_URL"))?{credentials:"include",...t}:{...t};return super.fetch(e,i,n,{response:[...r.response,Ve()]})}}).register("EnvironmentService",class{constructor(e=window){this._window=e;const{ConfigService:t}=r.z.inject("ConfigService");this._configService=t}getQueryParams(){if(this.isEmbeddedAsWC()){const e=this._window.document.querySelector(De.P.tag),t=e.getAttributeNames(),n=new URLSearchParams;return t.filter((e=>Object.values(xe.h).includes(e))).forEach((t=>{n.set(t,e.getAttribute(t))})),n}return new URLSearchParams(this._window.location.search)}getWindow(){return this._window}isTouch(){return this._window.matchMedia("(pointer:coarse)").matches}isMouse(){return this._window.matchMedia("(pointer:fine)").matches&&this._window.matchMedia("(hover:hover)").matches}isMouseWithTouchSupport(){return this._window.matchMedia("(any-pointer:coarse)").matches&&this._window.matchMedia("(pointer:fine)").matches}isRetinaDisplay(){const e=this._window,t=e.matchMedia&&e.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 1.5), only screen and (min--moz-device-pixel-ratio: 1.5), only screen and (-o-min-device-pixel-ratio: 3/2), only screen and (min-device-pixel-ratio: 1.5), only screen and (min-resolution: 192dpi), only screen and (min-resolution: 1.5dppx)");return(t&&t.matches)??e.devicePixelRatio>1}isEmbedded(){return this.isEmbeddedAsIframe()||this.isEmbeddedAsWC()}isEmbeddedAsIframe(){return/(\/embed[/]?(index.html)?|embed.html)$/.test(this._window.location.pathname)}isEmbeddedAsWC(){return!!this._window.customElements.get(De.P.tag)}isStandalone(){return!this._configService.getValue("BACKEND_URL",!1)}}).registerSingleton("TranslationService",new class{constructor(){const{ConfigService:e,EnvironmentService:t}=r.z.inject("ConfigService","EnvironmentService");this._environmentService=t,this._language=e.getValue("DEFAULT_LANG"),this._providers=new Map,this._translations=new Map}register(e,t){if(this._providers.has(e))throw new Error("Provider "+e+" already registered");this._providers.set(e,t),this._load(t)}_load(e){Object.entries(e(this._language)).forEach((([e,t])=>{if(this._translations.has(e))throw new Error("Key "+e+" already registered");this._translations.set(e,t)}))}reload(e){this._language=e,this._translations.clear(),this._providers.forEach((e=>{this._load(e)}))}translate(e,t=[],n=!1){return this._translations.has(e)?this._filter((0,Ae.Tn)(this._translations.get(e))?this._translations.get(e)(t):this._translations.get(e)):(n||console.warn("No value found for "+this._language+"."+e),e)}getMap(){return new Map(this._translations)}_filter(e){return this._environmentService.isStandalone()?e.replace("BayernAtlas","bav4"):e}}).register("CoordinateService",Te).register("MapService",class{constructor(e=zt){const{CoordinateService:t}=r.z.inject("CoordinateService");this._coordinateService=t,this._definitions=e()}getSrid(){return this._definitions.srid}getCoordinateRepresentations(e=[]){const t=this._coordinateService.toCoordinate((0,Ae._2)(e)?[e]:[...e]);return this.getLocalProjectedSridExtent()&&0!==t.length?t.find((e=>!this._coordinateService.containsCoordinate(this.getLocalProjectedSridExtent(),e)))?this._definitions.globalCoordinateRepresentations:this._definitions.localProjectedCoordinateRepresentations(t[0]):this._definitions.globalCoordinateRepresentations}getLocalProjectedSrid(){return this._definitions.localProjectedSrid}getLocalProjectedSridExtent(e=this.getSrid()){switch(e){case 3857:return this._coordinateService.fromLonLatExtent(this._definitions.localProjectedSridExtent);case 4326:return this._definitions.localProjectedSridExtent}throw new Error("Unsupported SRID "+e)}getDefaultMapExtent(e=this.getSrid()){switch(e){case 3857:return this._definitions.defaultExtent;case 4326:return this._coordinateService.toLonLatExtent(this._definitions.defaultExtent)}throw new Error("Unsupported SRID "+e)}getMinZoomLevel(){return this._definitions.minZoomLevel}getMaxZoomLevel(){return this._definitions.maxZoomLevel}getMinimalRotation(){return.3}calcResolution(e,t=null,n=this.getSrid(),r=256){if(3857===n){if(!t)throw new Error(`Parameter 'coordinateInMapProjection' must not be Null when using SRID ${n}`);return(0,Ct.b3)(this._coordinateService.toLonLat(t)[1],e,r)}throw new Error(`Unsupported SRID ${n}`)}getScaleLineContainer(){const e=document.querySelector("ba-footer")?.shadowRoot.querySelector(".scale");return e??null}getVisibleViewport(e){const t=(0,Nt.Ne)(document,`[${Nt.Sm}]`),n=kt(e,t),r=e.getBoundingClientRect();return{top:n.top-r.top,right:r.right-n.right,bottom:r.bottom-n.bottom,left:n.left-r.left}}calcLength(e){if(!this.getLocalProjectedSridExtent()||e.find((e=>!this._coordinateService.containsCoordinate(this.getLocalProjectedSridExtent(),e)))){const t=e.map((e=>this._coordinateService.toLonLat(e)));return this._coordinateService.getLength(t,!0)}const t=e.map((e=>this._coordinateService.transform(e,this.getSrid(),this.getLocalProjectedSrid())));return this._coordinateService.getLength(t,!1)}calcArea(e){if(!this.getLocalProjectedSridExtent()||e[0].find((e=>!this._coordinateService.containsCoordinate(this.getLocalProjectedSridExtent(),e)))){const t=e.map((e=>e.map((e=>this._coordinateService.toLonLat(e)))));return this._coordinateService.getArea(t,!0)}const t=e.map((e=>e.map((e=>this._coordinateService.transform(e,this.getSrid(),this.getLocalProjectedSrid())))));return this._coordinateService.getArea(t,!1)}}).registerSingleton("StoreService",new class{constructor(){const e=(0,i.HY)({map:M.J5,pointer:A.yp,position:o.aJ,mainMenu:(0,E.po)(),navigationRail:(0,T.bP)(),tools:v.Q9,modal:_.iT,layers:a.KH,mapContextMenu:L.Jm,measurement:I.Vy,draw:y.BE,shared:f,geolocation:w.rS,topics:s.Fn,network:d,search:u.JT,topicsContentPanel:m.ak,highlight:g.hs,notifications:h.qn,featureInfo:x.Vj,media:(0,p.TN)(),import:D.iu,mfp:C.uR,bottomSheet:N.j2,elevationProfile:k.Tk,chips:j,stateForEncoding:F,iframeContainer:Y,routing:H.Rb,auth:W,wcAttribute:q,fileStorage:re,timeTravel:ie.QN,layerSwipe:oe.OC,catalog:ae.eq,featureCollection:se.z8});this._store=(0,i.y$)(e),r.z.onReady((async()=>{const{GlobalErrorPlugin:e,AuthPlugin:t,LayersPlugin:n,TopicsPlugin:i,ChipsPlugin:o,GeolocationPlugin:a,MeasurementPlugin:s,DrawPlugin:c,RoutingPlugin:l,PositionPlugin:d,ContextClickPlugin:u,HighlightPlugin:g,MediaPlugin:h,FeatureInfoPlugin:p,MainMenuPlugin:m,NavigationRailPlugin:_,ImportPlugin:v,SearchPlugin:y,ExportMfpPlugin:b,ElevationProfilePlugin:S,IframeStatePlugin:f,IframeContainerPlugin:w,SharePlugin:M,ToolsPlugin:I,FileStoragePlugin:A,BeforeUnloadPlugin:L,IframeGeometryIdPlugin:E,ObserveWcAttributesPlugin:T,EncodeStatePlugin:x,TimeTravelPlugin:D,ComparePlugin:C,FeatureCollectionPlugin:N,ObserveStateForEncodingPlugin:k}=r.z.inject("GlobalErrorPlugin","AuthPlugin","TopicsPlugin","ChipsPlugin","LayersPlugin","GeolocationPlugin","MeasurementPlugin","DrawPlugin","RoutingPlugin","PositionPlugin","ContextClickPlugin","HighlightPlugin","MediaPlugin","FeatureInfoPlugin","MainMenuPlugin","NavigationRailPlugin","ImportPlugin","SearchPlugin","ExportMfpPlugin","ElevationProfilePlugin","IframeStatePlugin","IframeContainerPlugin","SharePlugin","ToolsPlugin","FileStoragePlugin","BeforeUnloadPlugin","IframeGeometryIdPlugin","ObserveWcAttributesPlugin","EncodeStatePlugin","TimeTravelPlugin","ComparePlugin","FeatureCollectionPlugin","ObserveStateForEncodingPlugin");setTimeout((async()=>{await e.register(this._store),await t.register(this._store),await h.register(this._store),await i.register(this._store),await o.register(this._store),await D.register(this._store),await C.register(this._store),await N.register(this._store),await n.register(this._store),await d.register(this._store),await s.register(this._store),await c.register(this._store),await l.register(this._store),await a.register(this._store),await u.register(this._store),await g.register(this._store),await p.register(this._store),await m.register(this._store),await _.register(this._store),await v.register(this._store),await y.register(this._store),await b.register(this._store),await S.register(this._store),await f.register(this._store),await w.register(this._store),await M.register(this._store),await I.register(this._store),await A.register(this._store),await L.register(this._store),await E.register(this._store),await T.register(this._store),await x.register(this._store),await k.register(this._store)}))}))}getStore(){return this._store}}).registerSingleton("GeoResourceService",new St).registerSingleton("TopicsService",new class{constructor(e=oa){this._provider=e;const{ConfigService:t,EnvironmentService:n}=r.z.inject("ConfigService","EnvironmentService");this._configService=t,this._environmentService=n,this._topics=null}async init(){if(!this._topics)try{this._topics=await this._provider()}catch(e){if(this._topics=[],!this._environmentService.isStandalone())throw new Error("No topics available",{cause:e});this._topics.push(...this._newFallbackTopics()),console.warn("Topics could not be fetched from backend. Using fallback topics ...")}return this._topics}all(){return this._topics?this._topics:(console.warn("TopicsService not yet initialized"),[])}byId(e){return this._topics?this._topics.find((t=>t.id===e))||null:(console.warn("TopicsService not yet initialized"),null)}default(){return this.byId(this._configService.getValue("DEFAULT_TOPIC_ID","ba"))||this.all()[0]||null}_newFallbackTopics(){const[e,t]=aa;return[new ia(e,"Topic 1","This is a fallback topic...",{raster:["tpo","tpo_mono"],vector:["bmde_vector","bmde_vector_relief"]},"tpo",[],[],{hue:300,icon:"<path d='M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z'/>"}),new ia(t,"Topic 2","This is another fallback topic...",{raster:["tpo","tpo_mono"]},"tpo",[],[],{hue:250,icon:"<path d='M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z'/>"})]}}).registerSingleton("ElevationService",new class{#ve={};#s;constructor(e=ns,t=rs){this._elevationProvider=e,this._profileProvider=t;const{EnvironmentService:n}=r.z.inject("EnvironmentService");this.#s=n}async getElevation(e){if(!(0,Ae._2)(e))throw new TypeError("Parameter 'coordinate3857' must be a CoordinateLike type");try{return await this._elevationProvider(e)}catch(e){if(this.#s.isStandalone())return console.warn("Could not fetch an elevation from backend. Returning a mocked value ..."),this._createMockElevation();throw new Error("Could not load an elevation from provider",{cause:e})}}async _prepareProfile(e,t){if(this.#ve[e])return is(this.#ve[e]);Object.keys(this.#ve).forEach((e=>delete this.#ve[e]));try{const n=await this._profileProvider(t);return this.#ve[e]=n,is(n)}catch(e){if(this.#s.isStandalone())return console.warn("Could not fetch an elevation profile from backend. Returning a mocked profile ..."),this._createMockElevationProfile(t);throw new Error("Could not load an elevation profile from provider",{cause:e})}}fetchProfile(e){return this.#ve[e]?is(this.#ve[e]):null}async requestProfile(e){if(!Array.isArray(e)||e.length<2)throw new TypeError("Parameter 'coordinates3857' must be an array containing at least two coordinates");e.forEach((e=>{if(!(0,Ae._2)(e))throw new TypeError("Parameter 'coordinates3857' contains invalid coordinates")}));const t=`${Ao(e)}`,n=await this._prepareProfile(t,e);return(0,Po.KZ)(`${t}`),n}_createMockElevation(){return Math.round(500+100*Math.random())}_createMockElevationProfile(e){return{elevations:e.map(((e,t)=>({dist:100*t,z:500+100*Math.random(),e:e[0],n:e[1]}))),stats:{sumUp:0,sumDown:0,verticalHeight:0,highestPoint:0,lowestPoint:0,linearDistance:0},attrs:[],refSystem:"refSystem"}}}).register("SearchResultService",class{constructor(e=Ma,t=wa,n=Ia){this._locationResultProvider=e,this._georesourceResultProvider=t,this._cadastralParcelResultProvider=n;const{EnvironmentService:i,SourceTypeService:o,ImportVectorDataService:a,ImportWmsService:s,ImportOafService:c}=r.z.inject("EnvironmentService","SourceTypeService","ImportVectorDataService","ImportWmsService","ImportOafService");this._environmentService=i,this._sourceTypeService=o,this._importVectorDataService=a,this._importWmsService=s,this._importOafService=c}_mapSourceTypeToLabel(e){if(e)switch(e.name){case Yr.bu.GEOJSON:return"GeoJSON Import";case Yr.bu.GPX:return"GPX Import";case Yr.bu.KML:return"KML Import";case Yr.bu.EWKT:return"EWKT Import"}return null}async _getGeoResourcesForUrl(e){const{status:t,sourceType:n}=await this._sourceTypeService.forUrl(e);if(t===Yr.$I.OK||t===Yr.$I.BAA_AUTHENTICATED)switch(n.name){case Yr.bu.GEOJSON:case Yr.bu.GPX:case Yr.bu.KML:case Yr.bu.EWKT:{const t=this._importVectorDataService.forUrl(e,{sourceType:n});return t?[new Sa(t.id,this._mapSourceTypeToLabel(n))]:[]}case Yr.bu.WMS:{const r=await this._importWmsService.forUrl(e,{sourceType:n,isAuthenticated:t===Yr.$I.BAA_AUTHENTICATED});return r.length?r.map((e=>new Sa(e.id,e.label))):[]}case Yr.bu.OAF:{const r=await this._importOafService.forUrl(e,{sourceType:n,isAuthenticated:t===Yr.$I.BAA_AUTHENTICATED});return r.length?r.map((e=>new Sa(e.id,e.label))):[]}}return[]}async geoResourcesByTerm(e){if(this._environmentService.isStandalone())return this._newFallbackGeoResourceSearchResults();if((0,Ae.q$)(e))return this._getGeoResourcesForUrl(e);{const{status:t,sourceType:n}=this._sourceTypeService.forData(e);if(t===Yr.$I.OK){const t=this._importVectorDataService.forData(e,{sourceType:n});if(t)return[new Sa(t.id,this._mapSourceTypeToLabel(n))]}else if(e.length<140)return this._georesourceResultProvider(e)}return[]}async locationsByTerm(e){return this._environmentService.isStandalone()?this._newFallbackLocationSearchResults():!(0,Ae.q$)(e)&&e.length<140?this._locationResultProvider(e):[]}async cadastralParcelsByTerm(e){return this._environmentService.isStandalone()?this._newFallbackCadastralParcelSearchResults():!(0,Ae.q$)(e)&&e.length<140?this._cadastralParcelResultProvider(e):[]}_newFallbackGeoResourceSearchResults(){return[new Sa("atkis","Base Map 1"),new Sa("atkis_sw","Base Map 2")]}_newFallbackLocationSearchResults(){return[new ya("Landeshauptstadt München","Landeshauptstadt <b>München</b>",[1284841.153957037,6132811.135477452],[1265550.466246523,6117691.209423095,1304131.841667551,6147931.061531809]),new ya("Alexandrastraße 4 80538 München, Altstadt-Lehel","<b>Alexandrastraße</b> <b>4</b> 80538 München , Altstadt-Lehel",[1290240.0895689954,6130449.47786758])]}_newFallbackCadastralParcelSearchResults(){return[]}}).register("ShareService",nt).register("UnitsService",class{constructor(e=at,t=ct,n=st){this._distanceUnitsProvider=e,this._areaUnitsProvider=t,this._angleUnitsProvider=n}formatDistance(e,t=2){return this._distanceUnitsProvider(e??0)}formatArea(e,t=2){return this._areaUnitsProvider(e??0)}formatAngle(e,t=2){return this._angleUnitsProvider(e??0)}}).register("FileSaveService",class{saveAs(e,t,n=null){if(!e||!t)throw Error("content and mimeType must be specified");const r=new Blob([e],{type:t}),i=this._getFileName(n,t),o=window.URL.createObjectURL(r);try{const e=document.createElement("a");e.href=o,e.download=i,e.click()}finally{window.URL.revokeObjectURL(o)}}_getFileName(e,t){const n=(new Date).toISOString().slice(0,19).replace(/[-T:]/g,""),r=e??`bayernatlas_${n}`,i=this._getFileExtensionFrom(t);return i?`${r}.${i}`:r}_getFileExtensionFrom(e){switch(e){case ze.z.GPX:return"gpx";case ze.z.GeoJSON:return"geojson";case ze.z.JSON:return"json";case ze.z.KML:return"kml";case ze.z.TEXT_PLAIN:return"txt";case ze.z.TEXT_HTML:return"html"}return null}}).registerFactory("FileStorageService",(()=>{const{EnvironmentService:e}=r.z.inject("EnvironmentService");return e.isEmbeddedAsWC()||e.isStandalone()?Ds:new ut})).register("UrlService",class{constructor(e=Mt,t=ft,n=wt){const{HttpService:i}=r.z.inject("HttpService");this._httpService=i,this._proxifyUrlProvider=t,this._urlShorteningProvider=e,this._qrCodeUrlProvider=n}proxifyInstant(e,t=!0){if(!(0,Ae.q$)(e)){if(t)throw new TypeError("Parameter 'url' must represent an URL");return e}return this._proxifyUrlProvider(e)}async proxify(e,t=!0){if(!(0,Ae.q$)(e)){if(t)throw new TypeError("Parameter 'url' must represent an URL");return e}return await this.isCorsEnabled(e)?e:this._proxifyUrlProvider(e)}async isCorsEnabled(e){if(!(0,Ae.q$)(e))throw new TypeError("Parameter 'url' must represent an URL");return(await this._httpService.head(e,{timeout:1500})).ok}async shorten(e){if(!(0,Ae.q$)(e))throw new TypeError("Parameter 'url' must represent an URL");return this._urlShorteningProvider(e)}qrCode(e){if(!(0,Ae.q$)(e))throw new TypeError("Parameter 'url' must represent an URL");return this._qrCodeUrlProvider(e)}}).registerSingleton("IconService",new class{constructor(e=It,t=At,n=Lt){this._iconProvider=e,this._iconColorProvider=t,this._iconUrlFactoryProvider=n,this._default=this._createDefault(),this._icons=null,this._load()}_createDefault(){const e=this._iconUrlFactoryProvider(Tt);return new Dt(Tt,xt,(e=>e===Tt||!!e?.endsWith(`/${Tt}`)),e)}async _load(){try{const e=e=>e.id===Tt,t=await this._iconProvider(),n=t.findIndex(e);this._icons=n<0?[this._default,...t]:[t[n],...t.filter((t=>!e(t)))]}catch(e){this._icons=[this._default,new Dt("triangle-stroked",'<svg id="triangle-stroked" xmlns="http://www.w3.org/2000/svg" width="34.0" height="34.0" viewBox="0.0 0.0 48.0 48.0" fill="rgb(255,255,255)">\x3c!-- SIL OFL 1.1 --\x3e<path d="M25.59375,10.578125Q25.0625,9.65625,24.0,9.65625Q22.9375,9.65625,22.40625,10.578125L7.203125,35.625Q7.0,36.015625,7.0,36.546875Q7.0,38.34375,8.796875,38.34375L39.203125,38.34375Q41.0,38.34375,41.0,36.546875Q41.0,36.015625,40.796875,35.625L25.59375,10.578125ZM24.0,15.03125L36.15625,34.75L11.84375,34.75L24.0,15.03125Z" /></svg>'),new Dt("triangle",'<svg id="triangle" xmlns="http://www.w3.org/2000/svg" width="34.0" height="34.0" viewBox="0.0 0.0 48.0 48.0" fill="rgb(255,255,255)">\x3c!-- SIL OFL 1.1 --\x3e<path d="M25.59375,10.578125Q25.0625,9.65625,24.0,9.65625Q22.9375,9.65625,22.40625,10.578125L7.203125,35.625Q7.0,36.015625,7.0,36.546875Q7.0,38.34375,8.796875,38.34375L39.203125,38.34375Q41.0,38.34375,41.0,36.546875Q41.0,36.015625,40.796875,35.625L25.59375,10.578125Z" /></svg>'),new Dt("square-stroked",'<svg id="square-stroked" xmlns="http://www.w3.org/2000/svg" width="34.0" height="34.0" viewBox="0.0 0.0 48.0 48.0" fill="rgb(255,255,255)">\x3c!-- SIL OFL 1.1 --\x3e<path d="M9.0,7.0Q8.125,7.0,7.5625,7.5625Q7.0,8.125,7.0,8.984375L7.0,39.0Q7.0,39.875,7.5625,40.4375Q8.125,41.0,9.0,41.0L39.015625,41.0Q39.875,41.0,40.4375,40.4375Q41.0,39.875,41.0,39.0L41.0,8.984375Q41.0,8.125,40.4375,7.5625Q39.875,7.0,39.015625,7.0L9.0,7.0ZM10.984375,10.984375L37.015625,10.984375L37.015625,37.015625L10.984375,37.015625L10.984375,10.984375Z" /></svg>'),new Dt("square",'<svg id="square" xmlns="http://www.w3.org/2000/svg" width="34.0" height="34.0" viewBox="0.0 0.0 48.0 48.0" fill="rgb(255,255,255)">\x3c!-- SIL OFL 1.1 --\x3e<path d="M9.0,7.0L39.015625,7.0Q39.875,7.0,40.4375,7.5625Q41.0,8.125,41.0,8.984375L41.0,39.0Q41.0,39.875,40.4375,40.4375Q39.875,41.0,39.015625,41.0L9.0,41.0Q8.125,41.0,7.5625,40.4375Q7.0,39.875,7.0,39.0L7.0,8.984375Q7.0,8.125,7.5625,7.5625Q8.125,7.0,9.0,7.0Z" /></svg>'),new Dt("rt_start",xt,(e=>"rt_start"===e),null,!1),new Dt("rt_destination",xt,(e=>"rt_destination"===e),null,!1),new Dt("rt_intermediate",xt,(e=>"rt_intermediate"===e),null,!1),new Dt("highlight_marker",xt,(e=>"highlight_marker"===e),null,!1),new Dt("highlight_default",xt,(e=>"highlight_default"===e),null,!1),new Dt("highlight_marker_tmp",xt,(e=>"highlight_marker_tmp"===e),null,!1),new Dt("highlight_default_tmp",xt,(e=>"highlight_default_tmp"===e),null,!1)],console.warn("Icons could not be fetched from backend. Using fallback icons ...")}return this._icons}async all(){return null===this._icons?await this._load():this._icons}getIconResult(e){return e===this._default.base64?this._icons.find((e=>e.matches(Tt))):this.isLocal(e)?(e=>this._icons.find((t=>t.base64===e))??null)(e):(e=>this._icons.find((t=>t.matches(e)))??null)(e)}decodeColor(e){return this._iconColorProvider(e)}isLocal(e){return!!e?.startsWith(Et)}getDefault(){return this._default}}).register("AdministrationService",class{constructor(e=ra){this._administrationProvider=e}async getAdministration(e){if(!(0,Ae.Xq)(e))throw new TypeError("Parameter 'coordinate3857' must be a coordinate");try{return await this._administrationProvider(e)}catch(e){throw new Error("Could not load administration from provider",{cause:e})}}}).register("FeatureInfoService",class{constructor(e=za){this._featureInfoProvider=e;const{GeoResourceService:t}=r.z.inject("GeoResourceService");this._geoResourceService=t}async get(e,t,n,r){if(this._geoResourceService.byId(e)?.queryable)try{return await this._featureInfoProvider(e,t,n,r)}catch(e){throw new Error(`Could not load a FeatureInfoResult from provider: ${e}`)}return null}}).registerSingleton("GeoResourceInfoService",new Ra.N).register("ImportVectorDataService",class{constructor(){const{HttpService:e,GeoResourceService:t,UrlService:n,SourceTypeService:i}=r.z.inject("HttpService","GeoResourceService","UrlService","SourceTypeService");this._httpService=e,this._geoResourceService=t,this._urlService=n,this._sourceTypeService=i}_newDefaultImportVectorDataOptions(){return{id:(0,_e.Ds)().toString(),label:null,sourceType:null}}forUrl(e,t={}){const{id:n,label:r,sourceType:i}={...this._newDefaultImportVectorDataOptions(),...t,id:t.id??e};if(i&&!this._mapSourceTypeToVectorSourceType(i))return console.warn(`SourceType '${i}' for '${e}' is not supported`),null;const o=new lt.fX(n,(async t=>{const n=this._urlService.proxifyInstant(e),i=await this._httpService.get(n);if(i.ok){const n=await i.text(),o=this._sourceTypeService.forData(n).sourceType,a=this._mapSourceTypeToVectorSourceType(o);if(o)return new lt.HA(t,r,a).setSource(n,o.srid??4326).setAttributionProvider((0,gt.hM)(e));throw new ht.o(`GeoResource for '${e}' could not be loaded: SourceType could not be detected`,t)}throw new ht.o(`GeoResource for '${e}' could not be loaded`,t,i.status)}));return this._geoResourceService.addOrReplace(o)}forData(e,t,n=!1){const{id:r,label:i,sourceType:o}={...this._newDefaultImportVectorDataOptions(),...t},a=o??this._sourceTypeService.forData(e).sourceType,s=this._mapSourceTypeToVectorSourceType(a);if(a){const t=new lt.HA(r,i,s).setSource(e,a.srid??4326).setAttributionProvider(gt.Ve).markAsLocalData(n).setHidden(!0);return this._geoResourceService.addOrReplace(t)}return console.warn(`SourceType for '${r}' could not be detected`),null}_mapSourceTypeToVectorSourceType(e){if(e)if(e instanceof Yr.Y1)switch(e.name){case Yr.bu.KML:return lt.Vz.KML;case Yr.bu.GPX:return lt.Vz.GPX;case Yr.bu.GEOJSON:return lt.Vz.GEOJSON;case Yr.bu.EWKT:return lt.Vz.EWKT}else if(Object.entries(lt.Vz).map((e=>e[1])).includes(e))return e;return null}}).register("ExportVectorDataService",class{constructor(){const{SourceTypeService:e,ProjectionService:t}=r.z.inject("SourceTypeService","ProjectionService");this._sourceTypeService=e,this._projectionService=t}forGeoResource(e,t){const n=e.data;if(n)return this._forData(n,e.sourceType,t);throw Error(`GeoResource '${e.id}' is empty`)}forData(e,t){const n=this._sourceTypeService.forData(e),r=n.sourceType;if(n.status===Yr.$I.OK)return this._forData(e,r,t);throw new Error(`Unexpected SourceTypeResultStatus: ${n.status}`)}_forData(e,t,n){const r=t.name!==n.name,i=t.srid!==n.srid;if(!r&&!i)return e;const o=this._getReader(t)(e),a=i?this._transform(o,t.srid,n.srid):o;return this._getWriter(n)(a)}_getReader(e){return e.name===Yr.bu.EWKT?this._getEwktReader():t=>this._getFormat(e.name).readFeatures(t)}_getWriter(e){const t=t=>this._getFormat(e.name).writeFeatures(t);switch(e.name){case Yr.bu.EWKT:return this._getEwktWriter(e.srid??4326);case Yr.bu.GPX:return this._getGpxWriter();default:return t}}_getFormat(e){switch(e){case Yr.bu.KML:return new rr.Ay;case Yr.bu.GEOJSON:return new Ti.A;case Yr.bu.GPX:return new Ci.A;default:throw Error(`Format-provider for ${e} is missing.`)}}_transform(e,t,n){if(this._projectionService.getProjections().includes(n))return e.map((e=>{const r=e.clone();return r.setId(e.getId()),r.getGeometry().setProperties(e.getGeometry().getProperties()),r.getGeometry().transform(`EPSG:${t}`,`EPSG:${n}`),r}));throw new Error("Unsupported SRID: "+n)}_getEwktReader(){return e=>{const t=xi(e),n=new Ei.A;if(t)return n.readFeatures(t.wkt);throw Error("Cannot parse data as EWKT")}}_getEwktWriter(e){return t=>{const n=new Ei.A;return`SRID=${e};${n.writeFeatures(t)}`}}_getGpxWriter(){return e=>(new Ci.A).writeFeatures(e.map((e=>(e=>{const t=e.getGeometry();if(t instanceof rn.A){const e=t.getPolygons().map((e=>e.getLinearRings().map((e=>e.getCoordinates()))));return new nr.A(new nn.A(e))}if(t instanceof Ie.Ay){const e=t.getLinearRings().map((e=>e.getCoordinates()));return new nr.A(new nn.A(e))}if(t instanceof Me.A){const e=t.getCoordinates();return new nr.A(new nn.A([e]))}return e})(e))))}}).register("ImportWmsService",class{constructor(e=Ba){const{GeoResourceService:t}=r.z.inject("GeoResourceService");this._geoResourceService=t,this._geoResourceService=t,this._wmsCapabilitiesProvider=e}_newDefaultImportWmsOptions(){return{isAuthenticated:!1,sourceType:new Yr.Y1(Yr.bu.WMS,"1.1.1"),layers:[],ids:[]}}async forUrl(e,t={}){const n={...this._newDefaultImportWmsOptions(),...t};return(await this._wmsCapabilitiesProvider(e,n)).map((t=>t.setAttributionProvider((0,gt.hM)(e)))).map((e=>this._geoResourceService.addOrReplace(e)))}}).registerSingleton("ImportOafService",new class{#ye=new Map;constructor(e=Fs,t=$s){const{GeoResourceService:n}=r.z.inject("GeoResourceService");this._geoResourceService=n,this._geoResourceService=n,this._oafGeoResourceProvider=e,this._oafFilterCapabilitiesProvider=t}_newDefaultImportOafOptions(){return{isAuthenticated:!1,collections:[],ids:[]}}async forUrl(e,t={}){const n={...this._newDefaultImportOafOptions(),...t};return(await this._oafGeoResourceProvider(e,n)).map((t=>t.setAttributionProvider((0,gt.hM)(e)))).map((e=>this._geoResourceService.addOrReplace(e)))}async getFilterCapabilities(e){if(e instanceof lt.uv){for(const[e,{created:t}]of this.#ye)Date.now()-t>=6e5&&this.#ye.delete(e);if(this.#ye.has(e.id))return this.#ye.get(e.id).data;const t=await this._oafFilterCapabilitiesProvider(e);return t&&this.#ye.set(e.id,{created:(new Date).getTime(),data:t}),t}return null}getFilterCapabilitiesFromCache(e,t=!0){if(e instanceof lt.uv){if(this.#ye.has(e.id))return this.#ye.get(e.id).data;t&&this._oafFilterCapabilitiesProvider(e).then((t=>{t&&this.#ye.set(e.id,{created:(new Date).getTime(),data:t})})).catch((e=>{console.warn(e)}))}return null}}).registerSingleton("SourceTypeService",new class{constructor(e=Oa,t=Pa,n=$a){this._urlSourceTypeProvider=e,this._dataSourceTypeProvider=t,this._mediaSourceTypeProvider=n,this._promiseQueue=new Re}async forUrl(e){if(!(0,Ae.q$)(e))throw new TypeError("Parameter <url> must represent an Http URL");return await this._promiseQueue.add((()=>this._urlSourceTypeProvider(e)))}forData(e){if(!(0,Ae.Kg)(e))throw new TypeError("Parameter <data> must be a String");return this._dataSourceTypeProvider(e)}toGeometry(e){const t=this.forData(e);return t.status===Yr.$I.OK?new fo.S(e,t.sourceType):null}async forBlob(e){if(!(e instanceof Blob))throw new TypeError("Parameter <blob> must be an instance of Blob");const t=await e.text();return this._dataSourceTypeProvider(t)}}).register("Mfp3Encoder",jo).registerSingleton("SecurityService",new class{constructor(e=Ya){this._sanitizeHtmlProvider=e}sanitizeHtml(e){return this._sanitizeHtmlProvider(e)}}).registerSingleton("BaaCredentialService",new class{constructor(){this._credentials=new Map}get(e){if((0,Ae.q$)(e)){const t=this._credentials.get((0,Je.w0)(e));return t?JSON.parse(atob(t)):null}return null}addOrReplace(e,t){return!!((0,Ae.q$)(e)&&t?.username&&t?.password)&&(this._credentials.set((0,Je.w0)(e),btoa(JSON.stringify({...t}))),!0)}}).registerSingleton("MfpService",new class{constructor(e=Qa,t=qa){const{EnvironmentService:n}=r.z.inject("EnvironmentService");this._environmentService=n,this._abortController=null,this._mfpCapabilities=null,this._mfpCapabilitiesProvider=e,this._createMfpSpecProvider=t,this._urlId="0"}async init(){if(!this._mfpCapabilities)try{const{urlId:e,layouts:t,grSubstitutions:n,srid:r,extent:i}=await this._mfpCapabilitiesProvider();this._mfpCapabilities={layouts:t,grSubstitutions:n,srid:r,extent:i},this._urlId=e}catch(e){if(!this._environmentService.isStandalone())throw e;this._mfpCapabilities=this._newFallbackCapabilities(),console.warn("MfpCapabilities could not be fetched from backend. Using fallback capabilities ...")}return this._mfpCapabilities}getCapabilities(){return this._mfpCapabilities?this._mfpCapabilities:null}getLayoutById(e){return this._mfpCapabilities?.layouts?.find((t=>t.id===e))??null}async createJob(e){this._abortController=new AbortController;try{const t=await this._createMfpSpecProvider(e,this._urlId,this._abortController);if(t){const{downloadURL:e}=t;return e}return null}catch(e){if(this._environmentService.isStandalone())return console.warn("No backend available, simulating Pdf request..."),await(0,Gi.yy)(2500),"https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf";throw new Error("Pdf request was not successful",{cause:e})}finally{this._abortController=null}}cancelJob(){this._abortController?.abort()}_newFallbackCapabilities(){return{srid:3857,extent:[667916.9447596414,4865942.279503176,1558472.8711058302,7558415.656081782],grSubstitutions:{},layouts:[{id:"a4_landscape",urlId:0,mapSize:{width:785,height:475},dpis:[72,120,200],scales:[2e6,1e6,5e5,2e5,1e5,5e4,25e3,1e4,5e3,2500,1250,1e3,500]},{id:"a4_portrait",urlId:0,mapSize:{width:539,height:722},dpis:[72,120,200],scales:[2e6,1e6,5e5,2e5,1e5,5e4,25e3,1e4,5e3,2500,1250,1e3,500]}]}}}).registerSingleton("ChipsConfigurationService",new class{constructor(e=Ka){this._provider=e,this._configurations=null;const{EnvironmentService:t}=r.z.inject("EnvironmentService");this._environmentService=t}async all(){if(!this._configurations)try{this._configurations=await this._provider()}catch(e){if(this._configurations=[],!this._environmentService.isStandalone())throw e;this._configurations.push(...this._newFallbackConfiguration()),console.warn("Chips configuration could not be fetched from backend. Using fallback configuration ...")}return this._configurations}_newFallbackConfiguration(){return[{id:"gh",title:"Fork me",href:"https://github.com/ldbv-by/bav4/",permanent:!0,target:"external",observer:{geoResources:[],topics:[]},style:{colorLight:"var(--primary-color)",backgroundColorLight:"var(--primary-bg-color)",colorDark:"var(--primary-color)",backgroundColorDark:"var(--primary-bg-color)",icon:'<path d="m 8.06415,0.2995526 c -4.260197,0 -7.70415223,3.4693444 -7.70415223,7.7613964 0,3.430867 2.20666073,6.335023 5.26788413,7.362895 0.3827318,0.07727 0.5229249,-0.167002 0.5229249,-0.372481 0,-0.179933 -0.012616,-0.796688 -0.012616,-1.439305 -2.1431086,0.462685 -2.5893925,-0.925211 -2.5893925,-0.925211 -0.3444112,-0.899506 -0.8547202,-1.13069 -0.8547202,-1.13069 -0.7014384,-0.475459 0.051094,-0.475459 0.051094,-0.475459 0.7780792,0.05141 1.186358,0.796688 1.186358,0.796688 0.6886649,1.1821 1.7983821,0.848097 2.2448237,0.64246 0.06371,-0.501163 0.2679279,-0.848097 0.4847619,-1.040804 -1.7092829,-0.179933 -3.5076649,-0.848097 -3.5076649,-3.8293681 0,-0.8480967 0.3059331,-1.5419653 0.7906951,-2.0816063 -0.076484,-0.1927064 -0.3444113,-0.9895518 0.076641,-2.0560597 0,0 0.6505021,-0.2056375 2.1172463,0.7966877 A 7.4070501,7.4070501 0 0 1 8.0641496,4.0516488 c 0.6505021,0 1.3136194,0.090045 1.9259593,0.2570468 1.4669011,-1.0023252 2.1174031,-0.7966877 2.1174031,-0.7966877 0.421052,1.0665079 0.152967,1.8633533 0.07648,2.0560597 0.497535,0.539641 0.790853,1.2335096 0.790853,2.0816063 0,2.9812711 -1.798381,3.6365041 -3.5204379,3.8293681 0.2807011,0.244116 0.5229254,0.706642 0.5229254,1.439147 0,1.040804 -0.012621,1.876127 -0.012621,2.133016 0,0.205637 0.1403505,0.449911 0.5229245,0.372798 3.061224,-1.028189 5.267885,-3.932187 5.267885,-7.363054 0.01262,-4.292052 -3.443952,-7.7613964 -7.6913753,-7.7613964 z" />'}},{id:"web_vektor_relief",title:"Web Vektor Relief",href:"bmde_vector_relief",permanent:!1,target:"internal",observer:{geoResources:[],topics:[aa[1]]},style:{colorLight:"var(--primary-color)",backgroundColorLight:"var(--primary-bg-color)",colorDark:"var(--primary-color)",backgroundColorDark:"var(--primary-bg-color)",icon:'<path d="M2.5 8a5.5 5.5 0 0 1 8.25-4.764.5.5 0 0 0 .5-.866A6.5 6.5 0 1 0 14.5 8a.5.5 0 0 0-1 0 5.5 5.5 0 1 1-11 0"/><path d="M15.354 3.354a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0z"/>'}},{id:"smart_mapping",title:"Smart Mapping",href:"https://dev.adv-smart.de/index_en.html",permanent:!1,target:"external",observer:{geoResources:[yt,bt],topics:[]},style:{colorLight:"var(--primary-color)",backgroundColorLight:"var(--primary-bg-color)",colorDark:"var(--primary-color)",backgroundColorDark:"var(--primary-bg-color)",icon:'<path d="M8.5 6.5a.5.5 0 0 0-1 0v3.793L6.354 9.146a.5.5 0 1 0-.708.708l2 2a.5.5 0 0 0 .708 0l2-2a.5.5 0 0 0-.708-.708L8.5 10.293V6.5z"/><path d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5v2z"/>'}},{id:"brradl22",title:"Topic 2",href:"https://www.geodaten.bayern.de/bayernatlas-info/brradl22/index.html",permanent:!1,target:"modal",observer:{geoResources:[],topics:[aa[1]]},style:{colorLight:"var(--primary-color)",backgroundColorLight:"var(--primary-bg-color)",colorDark:"var(--primary-color)",backgroundColorDark:"var(--primary-bg-color)",icon:"<path d='M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z'/>"}}]}}).registerSingleton("FeedbackService",new ls.n1).registerSingleton("RoutingService",new class{constructor(e=Ss,t=bs,n=ys,i=vs){this._categoriesProvider=e,this._chartItemsStylesProvider=n,this._osmRoadTypeMapper=i,this._routeProvider=t;const{ElevationService:o}=r.z.inject("ElevationService");this._elevationService=o,this._categories=null}async init(){return this._categories||(this._categories=await this._categoriesProvider()),this._categories}getCategories(){return this._categories??[]}getCategoryById(e){return this._categories?.map((e=>[e,e.subcategories])).flat(2).find((t=>t.id===e))??null}getRoadTypeStyles(){return this._chartItemsStylesProvider().road?{unknown:fs,...this._chartItemsStylesProvider().road}:{unknown:fs}}getSurfaceTypeStyles(){return this._chartItemsStylesProvider().surface?{unknown:ws,...this._chartItemsStylesProvider().surface}:{unknown:ws}}mapRoadTypesToCatalogId(e){const t=e=>({absolute:e.absolute,relative:e.relative,segments:e.segments}),n={};return Object.keys(e).forEach((r=>{const i=this._osmRoadTypeMapper(r);var o,a;i?n[i]=n[i]?(o=n[i],a=e[r],{...o,absolute:o.absolute+a.absolute,relative:o.relative+a.relative,segments:o.segments.concat(a.segments)}):t(e[r]):n[r]=t(e[r])})),n}getParent(e){return this.getCategoryById(e)?this.getAlternativeCategoryIds(e).map((e=>this.getCategoryById(e))).find((e=>e.subcategories.length>0))?.id??e:null}getAlternativeCategoryIds(e){const t=this.getCategories().filter((t=>t.id===e))[0]??this.getCategories().filter((t=>t.subcategories.filter((t=>t.id===e)).length>0))[0];if(t){const n=t.subcategories.map((e=>e.id)),r=[t.id].concat(n);return r.splice(r.indexOf(e),1),r}return[]}async calculateRoute(e,t){if(!Array.isArray(t)||t.length<2)throw new TypeError("Parameter 'coordinates3857' must be an array containing at least two coordinates");if(t.forEach((e=>{if(!(0,Ae.Xq)(e))throw new TypeError("Parameter 'coordinates3857' contains invalid coordinates")})),!Array.isArray(e)||e.length<1)throw new TypeError("Parameter 'categories' must be an array containing at least one category");return this._routeProvider(e,t)}}).register("PredefinedConfigurationService",Rs.G).registerSingleton("GlobalErrorPlugin",new Ls).registerSingleton("AuthPlugin",new Ts).registerSingleton("DrawPlugin",new ho).registerSingleton("RoutingPlugin",new Rr).registerSingleton("TopicsPlugin",new ha).registerSingleton("ChipsPlugin",new pa).registerSingleton("LayersPlugin",new la).registerSingleton("PositionPlugin",new da).registerSingleton("HighlightPlugin",new et.k3).registerSingleton("MediaPlugin",new La).registerSingleton("MeasurementPlugin",new gi).registerSingleton("GeolocationPlugin",new Ai).registerSingleton("ContextClickPlugin",new Ea).registerSingleton("FeatureInfoPlugin",new Ta).registerSingleton("MainMenuPlugin",new Da).registerSingleton("NavigationRailPlugin",new Na).registerSingleton("ImportPlugin",new Fa).registerSingleton("SearchPlugin",new Wa).registerSingleton("ExportMfpPlugin",new Co).registerSingleton("ElevationProfilePlugin",new es).registerSingleton("IframeStatePlugin",new as).registerSingleton("IframeContainerPlugin",new gs).registerSingleton("SharePlugin",new cs).registerSingleton("ToolsPlugin",new hs).registerSingleton("FileStoragePlugin",new Cs).registerSingleton("BeforeUnloadPlugin",new ms).registerSingleton("IframeGeometryIdPlugin",new ps).registerSingleton("ObserveWcAttributesPlugin",new xs).registerSingleton("EncodeStatePlugin",new Za).registerSingleton("TimeTravelPlugin",new ks).registerSingleton("ComparePlugin",new Os).registerSingleton("FeatureCollectionPlugin",new Ps.KP).registerSingleton("ObserveStateForEncodingPlugin",new ss).registerModule((e=>{e.registerSingleton("StyleService",new li).register("OlMeasurementHandler",Si).register("OlDrawHandler",vo).register("OlGeolocationHandler",Li).register("OlHighlightLayerHandler",Di).register("VectorLayerService",Hi).register("RtVectorLayerService",Ho).register("LayerService",lo).register("OverlayService",uo).register("OlFeatureInfoHandler",Lo).register("OlElevationProfileHandler",Fo).register("OlOverlayMapHandler",Vo).register("OlMfpHandler",Oo).register("OlRoutingHandler",ri).register("OlSelectableFeatureHandler",Go).register("OlLayerSwipeHandler",qo)})).registerModule((e=>{e.registerSingleton("CatalogService",new ca)})).registerModule((e=>{e.register("OafMaskParserService",na)})).ready()},71912:(e,t,n)=>{var r=n(31601),i=n(76314)(r);i.push([e.id,".icon {\n\tmask-size: cover;\n\t-webkit-mask-size: cover;\n\tcursor: pointer;\n\tdisplay: inline-block;\n\theight: var(--size);\n\twidth: var(--size);\n}\n\n.icon.disabled {\n\tfilter: brightness(0.8);\n\tcursor: not-allowed;\n}\n\n.icon:active {\n\ttransform: scale(1.15);\n}\n\n.icon.disabled:hover {\n\ttransform: none;\n}\n\n.icon.disabled:active {\n\ttransform: none;\n}\n\n.anchor {\n\tdisplay: inline-block;\n\tbackground: transparent;\n\tborder: none;\n\tborder-radius: var(--radius);\n\theight: var(--size);\n\twidth: var(--size);\n}\n",""]),e.exports=i},72145:(e,t,n)=>{"use strict";n.d(t,{D:()=>s,j:()=>a});var r=n(61263),i=n(18410);const o=()=>{const{StoreService:e}=i.z.inject("StoreService");return e.getStore()},a=(e,t=r.gn)=>{o().dispatch({type:r.TR,payload:{id:t,content:e}})},s=(e=r.gn)=>{o().dispatch({type:r.TR,payload:{id:e,content:null}})}},72157:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxZW0iIGhlaWdodD0iMWVtIiBmaWxsPSJjdXJyZW50Q29sb3IiIGNsYXNzPSJiaSBiaS1kYXNoLWNpcmNsZS1maWxsIiB2aWV3Qm94PSIwIDAgMTYgMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTE2IDhBOCA4IDAgMSAxIDAgOGE4IDggMCAwIDEgMTYgME00IDcuNWEuNS41IDAgMCAwIDAgMWg4YS41LjUgMCAwIDAgMC0xeiIvPjwvc3ZnPgo="},73469:(e,t,n)=>{"use strict";n.d(t,{Gq:()=>o,Hp:()=>i,bP:()=>a});var r=n(38903);const i="navigationRail/open",o="navigationRail/visitedTabIds",a=(e=window)=>{const t={open:!!e.matchMedia("(orientation: landscape)").matches,visitedTabIds:[r.K.FEATUREINFO,r.K.ROUTING]};return(e=t,n)=>((e,t)=>{const{type:n,payload:r}=t;switch(n){case i:return{...e,open:r};case o:return{...e,visitedTabIds:[...new Set([...e.visitedTabIds,r])]}}return e})(e,n)}},74048:(e,t,n)=>{var r=n(31601),i=n(76314),o=n(4417),a=n(44004),s=i(r),c=o(a);s.push([e.id,`.attribution-container {\n\tfont-size: 0.8rem;\n\tbackground-color: color(from var(--primary-bg-color) srgb r g b / 0.9);\n\tpadding: 0.4em 2em 0.4em 1em;\n\ttext-overflow: ellipsis;\n\tdisplay: inline-block;\n\toverflow: hidden;\n\twidth: 25em;\n\twhite-space: nowrap;\n\tvertical-align: middle;\n\tposition: relative;\n}\n.attribution-container.isembedded:not(.isopen) {\n\twidth: 13.5em;\n}\n.attribution-link {\n\tfont-size: 0.8rem;\n\tcolor: var(--text4);\n\tmargin-left: 0.2em;\n}\n.attribution-link:hover,\n.attribution-link:focus {\n\ttext-decoration: underline;\n}\n.collapse-button {\n\tpadding: 0.4em 1em;\n\tposition: absolute;\n\ttop: 0;\n\tright: 0;\n\tdisplay: none;\n\tcursor: pointer;\n}\n.chevron {\n\tposition: relative;\n\tmask: url(${c});\n\t-webkit-mask-image: url(${c});\n\tmask-image: url(${c});\n}\n.icon {\n\tbackground: var(--primary-color);\n\tmask-size: cover;\n\t-webkit-mask-size: cover;\n\tdisplay: inline-block;\n\theight: 16px;\n\twidth: 10px;\n\ttransform: rotate(270deg);\n}\n.isopen {\n\twhite-space: unset;\n\toverflow: hidden;\n\tpadding: 0.4em 1em;\n\twidth: 25em;\n\tmax-width: 100vw;\n}\n.isopen .attribution {\n\tdisplay: block;\n\tmargin: 0.5em;\n}\n.isopen.attribution-container {\n\tbackground-color: var(--primary-bg-color);\n}\n.isopen .icon {\n\t-moz-transform: rotate(90deg);\n\t-webkit-transform: rotate(90deg);\n\ttransform: rotate(90deg);\n}\n.isopen .collapse-button {\n\tpadding: 0.5em 1em;\n\tmargin: 0;\n\tposition: absolute;\n\ttop: 0;\n\tright: 0;\n}\n\n.attribution-container:focus-within {\n\twhite-space: unset;\n\toverflow: hidden;\n\tpadding: 0.4em 1em;\n\tmax-width: 100vw;\n\tbackground-color: var(--primary-bg-color);\n\twidth: 25em !important;\n}\n.attribution-container:focus-within .attribution {\n\tdisplay: block;\n\tmargin: 0.5em;\n}\n\n.attribution-container:focus-within .icon {\n\t-moz-transform: rotate(90deg);\n\t-webkit-transform: rotate(90deg);\n\ttransform: rotate(90deg);\n}\n.attribution-container:focus-within .collapse-button {\n\tpadding: 0.5em 1em;\n\tmargin: 0;\n\tposition: absolute;\n\ttop: 0;\n\tright: 0;\n}\n\n.is-collapse {\n\tdisplay: block;\n}\n\n.attribution-link:focus-visible {\n\toverflow: visible;\n\toutline-offset: 0.2em;\n\toutline: 0.2em solid var(--secondary-color);\n\ttext-decoration: underline;\n}\n`,""]),e.exports=s},74336:(e,t,n)=>{var r=n(31601),i=n(76314)(r);i.push([e.id,":root,\n:host {\n\t--map-interaction-container-bottom: 2.8em;\n}\n.map-interaction-button-container {\n\tposition: fixed;\n\tz-index: var(--z-mapbuttons);\n\tbottom: var(--map-interaction-container-bottom);\n\twidth: 100%;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tpointer-events: none;\n\trow-gap: 0.5em;\n\tcolumn-gap: 0.3em;\n\ttransition: all var(--animation-duration-large-open) var(--animation-easing-open);\n}\n.is-portrait.map-interaction-button-container {\n\tflex-direction: column;\n}\nba-button {\n\tbackground: var(--text3);\n\tborder-radius: 2em;\n\toverflow: hidden;\n\twidth: 16em;\n\tpointer-events: all;\n\ttransition: all var(--animation-duration-large-open) var(--animation-easing-open);\n}\nba-button::part(button) {\n\tbackground-color: var(--info-color);\n\tfont-size: 0.8rem;\n}\nba-button::part(icon) {\n\ttop: 0.2em;\n}\n\n.is-landscape.is-open-navigationRail ba-button.ui-center {\n\tmargin-left: 5em;\n}\n\n.is-landscape.is-ope ba-button.ui-center {\n\tmargin-left: 28em;\n}\n\n.is-landscape.is-open.is-open-navigationRail ba-button.ui-center {\n\tmargin-left: 33em;\n}\n",""]),e.exports=i},74488:(e,t,n)=>{var r=n(31601),i=n(76314),o=n(4417),a=n(44004),s=n(29355),c=n(55973),l=i(r),d=o(a),u=o(s),g=o(c);l.push([e.id,`/* CSS classes for all ContentPanel implementations */\n.ba-list-item {\n\tdisplay: flex;\n\ttext-decoration: none;\n\tbackground: transparent;\n\tborder: 0;\n\twidth: 100%;\n\ttext-align: left;\n}\n.ba-list-item:focus-visible {\n\tbox-shadow: Inset 0 0 0 0.2em var(--primary-color-lighter);\n}\n.ba-list-item:hover {\n\tbackground: var(--header-background-color);\n}\n.ba-list-item span {\n\toverflow-wrap: anywhere;\n}\n.ba-list-item > * {\n\tpadding-top: 0.8em;\n\tpadding-bottom: 0.8em;\n}\n.ba-list-item > *:first-child {\n\tpadding-left: 1.5em;\n}\n.ba-list-item > *:last-child {\n\tpadding-right: 1.5em;\n}\n.ba-list-item__pre {\n\tdisplay: flex;\n\tmargin: 0 1em 0 0;\n}\n.ba-list-item__after {\n\tdisplay: flex;\n\tpadding-left: 1.5em;\n\tposition: relative;\n\tbackground: transparent;\n\tborder: 0;\n\talign-items: center;\n}\n.ba-list-item__image {\n\theight: 4em;\n\twidth: 8em;\n\tmin-width: 8em;\n\tbackground: var(--secondary-bg-color);\n\tbackground-position: center;\n\tbackground-repeat: no-repeat;\n\tbackground-size: cover;\n}\n.ba-list-item__icon {\n\theight: 3em;\n\twidth: 3em;\n\tborder-radius: 2em;\n\tbackground: var(--secondary-bg-color);\n\tbackground-position: center;\n\tbackground-repeat: no-repeat;\n\tbackground-size: cover;\n}\n.ba-list-item__text {\n\tflex-grow: 1;\n}\n.ba-list-item__main-text {\n\tfont-size: 1.7rem;\n}\n.ba-list-item__primary-text {\n\tdisplay: block;\n\tfont-size: 1rem;\n\tfont-weight: bold;\n}\n.ba-list-item__secondary-text {\n\tfont-size: 0.95rem;\n\tcolor: var(--text2);\n}\n/* icon */\n.icon {\n\tbackground: var(--primary-color);\n\t-webkit-mask-repeat: no-repeat;\n\tcursor: pointer;\n\tdisplay: inline-block;\n\theight: 1em;\n\twidth: 0.625em;\n}\n.icon-rotate-90 {\n\t-moz-transform: rotate(90deg);\n\t-webkit-transform: rotate(90deg);\n\ttransform: rotate(90deg);\n\ttransition: all var(--animation-duration-large-open) var(--animation-easing-open);\n}\n.iconexpand {\n\t-moz-transform: rotate(270deg);\n\t-webkit-transform: rotate(270deg);\n\ttransform: rotate(270deg);\n}\n.icon-primary {\n\tbackground: var(--primary-color);\n}\n.icon-secondary {\n\tbackground: var(--text2);\n}\n.chevron {\n\tposition: relative;\n\tmask: url(${d});\n\t-webkit-mask-image: url(${d});\n\tmask-image: url(${d});\n}\n.close {\n\tposition: relative;\n\tmask: url(${u});\n\t-webkit-mask-image: url(${u});\n\tmask-image: url(${u});\n\twidth: 1em;\n}\n.info {\n\tposition: relative;\n\tmask: url(${g});\n\t-webkit-mask-image: url(${g});\n\tmask-image: url(${g});\n\ttransition: all var(--animation-duration-small-open) var(--animation-easing-linear);\n\tmargin-right: 0.2em;\n\tbackground: var(--primary-color);\n}\n\n.ba-icon-button {\n\tbackground: transparent;\n\tborder: none;\n}\n\n.ba-icon-button:focus .icon {\n\tbackground: #fff;\n}\n.ba-icon-button:hover .icon {\n\tbackground: #fff;\n}\n.icon-background {\n\theight: 0;\n\twidth: 0;\n\tleft: 1.7em;\n\ttop: 1em;\n\tmargin: 0.3em;\n\tbackground-color: var(--secondary-bg-color);\n\tborder-radius: 2.5em;\n\tposition: absolute;\n\ttransition: all var(--animation-duration-medium-open) var(--animation-easing-linear);\n\ttransform: translate(-50%, -50%);\n\tdisplay: inline-block;\n}\n.ba-icon-button:hover .icon-background {\n\theight: 2em;\n\twidth: 2em;\n\tbackground-color: var(--primary-color);\n}\n.ba-icon-button:focus .icon-background {\n\theight: 2em;\n\twidth: 2em;\n\tbackground-color: var(--primary-color);\n\tbox-shadow: 0 0 0 0.2em var(--primary-color-lighter);\n}\n.arrow {\n\twidth: 0;\n\theight: 0;\n\tborder-width: 0.5em;\n\tborder-style: solid;\n\topacity: 0.2;\n\tmargin: auto;\n}\n.arrow-right {\n\tborder-color: transparent transparent transparent var(--text2);\n\tmargin-right: -50%;\n}\n.arrow-left {\n\tborder-color: transparent var(--text2) transparent transparent;\n}\n/* header  */\n.ba-list-item__header:hover {\n\tbackground: none;\n}\n.ba-list-item__sub-header {\n\topacity: 0.8;\n\tmargin-left: 1.5em;\n}\n.ba-list-item__sub-header .ba-list-item__text {\n\tpadding-left: 0;\n\tfont-size: 0.9rem;\n}\n.ba-list-item__sub-header:hover {\n\tbackground: none;\n}\n/* section */\n.ba-section {\n\tborder-left: 0.3em solid var(--primary-bg-color);\n}\n.ba-section .ba-list-item > *:first-child {\n\tpadding-left: 1.2em;\n}\n.ba-section:hover .ba-list-item__header .ba-list-item__text {\n\tcolor: var(--secondary-color);\n}\n.ba-section:hover {\n\tborder-left: 0.3em solid var(--secondary-color);\n}\n/* collapse */\n.collapse-content {\n\tdisplay: grid;\n\tgrid-template-rows: 1fr;\n\ttransition: grid-template-rows var(--animation-duration-medium-open);\n}\n\n.collapse-content > div {\n\toverflow: hidden;\n}\n\n.iscollapse {\n\tgrid-template-rows: 0fr;\n}\n\n/* helper */\n.vertical-center {\n\tmargin: auto;\n}\n.divider {\n\tborder-bottom: 1px solid var(--header-background-color);\n}\n.sub-divider {\n\tborder-bottom: 1px dotted var(--header-background-color);\n}\n.separator {\n\tborder-left: 1px dotted var(--header-background-color);\n}\n`,""]),e.exports=l},74975:(e,t,n)=>{"use strict";n.d(t,{i:()=>a,u:()=>s});var r=n(38297),i=n(18410);const o=()=>{const{StoreService:e}=i.z.inject("StoreService");return e.getStore()},a=e=>{o().dispatch({type:r.Vv,payload:e})},s=()=>{o().dispatch({type:r.Mq,payload:!0})}},75488:(e,t,n)=>{"use strict";n.d(t,{JE:()=>m,OM:()=>I,qP:()=>_});var r=n(36752),i=n(40068),o=n(99293),a=n.n(o),s=n(6683),c=n(18410),l=n(16800),d=n(34142),u=n(42376),g=n(70915),h=n(99990),p=n(51456);const m={TEXT:"text",AREA:"area",DISTANCE:"distance",DISTANCE_PARTITION:"distance-partition",HELP:"help"},_="ba-overlay",v="update_value",y="update_overlay_type",b="update_draggable",S="update_floating",f="update_geometry_revision",w="update_placement",M={sector:"init",positioning:"top-center",offset:[0,-25]};class I extends h.T{#be;#e;#l;constructor(){super({value:null,floating:!0,overlayType:m.TEXT,draggable:!1,placement:M,geometryRevision:null,position:null});const{UnitsService:e,MapService:t}=c.z.inject("UnitsService","MapService");this.#be=e,this.#e=t,this.#l=null}update(e,t,n){const r=(e,t)=>{switch(e){case m.AREA:return this.#l instanceof d.Ay?this.#l.getInteriorPoint().getCoordinates().slice(0,-1):(0,g.q1)(this.#l.getExtent());case m.DISTANCE_PARTITION:return(0,l.CG)(this.#l,t);case m.DISTANCE:case m.HELP:case m.TEXT:default:return this.#l.getLastCoordinate()}};switch(e){case v:return{...n,value:t};case y:return{...n,overlayType:t};case b:return{...n,draggable:t};case S:return{...n,floating:t};case f:return{...n,position:r(n.overlayType,n.value),geometryRevision:t};case w:return{...n,placement:t}}}createView(e){const{overlayType:t,floating:n,draggable:o,placement:c}=e,l=this.#Se(e),d={help:t===m.HELP,area:t===m.AREA,distance:t===m.DISTANCE,partition:t===m.DISTANCE_PARTITION,static:!n&&t!==m.HELP,floating:n&&t!==m.HELP,draggable:o,top:"top"===c.sector,right:"right"===c.sector,bottom:"bottom"===c.sector,left:"left"===c.sector,init:"init"===c.sector};return d[_]=!0,r.qy`
			<style>
				${a()}
			</style>
			<div class="${(0,s.H)(d)}">${l?(0,i._)(l):r.s6}</div>
		`}#Se(e){const{overlayType:t,value:n}=e,r=this.#l,i=()=>{const e=this.#fe(r)*n,t=this.#be.formatDistance((0,u.LI)(Math.round(e),-1),0);return`${t.localizedValue} ${t.unit}`},o=()=>{if((0,l.Q5)(r)){const e=this.#be.formatAngle((0,l.nT)(r)),t=this.#be.formatDistance(this.#fe(r),2);return`${e.localizedValue}${e.unit}/${t.localizedValue} ${t.unit}`}if(r){const e=this.#be.formatDistance(this.#fe(r),2);return`${e.localizedValue} ${e.unit}`}return""},a=()=>{if(r instanceof d.Ay){const e=this.#be.formatArea(this.#e.calcArea(r.getCoordinates()),2);return`${e.localizedValue} ${e.unit}`}return""};switch(t){case m.AREA:return a();case m.DISTANCE:return o();case m.DISTANCE_PARTITION:return r?i():"";case m.HELP:case m.TEXT:default:return n}}static get tag(){return"ba-map-overlay"}#fe=e=>e.get((0,p.LL)(l.tT))??0;set placement(e){this.signal(w,e)}get placement(){return this.getModel().placement}set value(e){this.signal(v,e)}get value(){return this.getModel().value}set type(e){this.signal(y,e)}get type(){return this.getModel().overlayType}set isDraggable(e){this.signal(b,e)}get isDraggable(){return this.getModel().draggable}set static(e){this.signal(S,!e)}get static(){return!this.getModel().floating}set geometry(e){this.#l=e,this.signal(f,this.#l?.getRevision())}get geometry(){return this.#l}get position(){return this.getModel().position}}},78314:(e,t,n)=>{"use strict";n.d(t,{o:()=>i});class r extends Error{constructor(e,t={}){super(e,t),this.name=this.constructor.name}}class i extends r{constructor(e,t,n=null,r={}){super(e,r),this.geoResourceId=t,this.httpStatus=n}}},78424:(e,t,n)=>{"use strict";var r=n(18410);const{TranslationService:i}=r.z.inject("TranslationService");i.register("global",(e=>{switch(e){case"en":return{global_app_name:"BayernAtlas",global_generic_exception:"Something got wrong. See the console output for more information...",global_mfpService_init_exception:"PDF export currently not available",global_mfpService_createJob_exception:"PDF generation was not successful",global_featureInfoService_exception:"FeatureInfo could not be retrieved",global_geolocation_denied:'The acquisition of the position failed because your browser settings does not allow it. Allow your browser / this website to use your location. Deactivate the "private" mode of your browser.',global_geolocation_not_available:"The acquisition of the position failed",global_import_data_failed:"Importing data failed",global_import_unsupported_sourceType:"Source type could not be detected or is not supported",global_import_authenticationModal_title:"Authentication",global_locally_imported_dataset_copyright_label:"Dataset and/or style provided by third party",global_share_unsupported_geoResource_warning:"The following layers won't be shared:",global_privacy_policy_url:"https://geoportal.bayern.de/geoportalbayern/seiten/datenschutz.html",global_marker_symbol_label:"Marker",global_featureInfo_not_available:"FeatureInfo is not available",global_routingService_init_exception:"Routing currently not available",global_geoResource_not_available:e=>`Failed to add a layer for the GeoResource "${e[0]}"${e[1]?` (${e[1]})`:""}`,global_geoResource_unauthorized:"401 - Unauthorized",global_geoResource_forbidden:"403 - Forbidden",global_signOut_success:"Signed out successfully",global_fileStorageService_exception:"The data could not be stored",global_cr_global_wgs84:"Lat, Lon",global_terms_of_use:"https://www.ldbv.bayern.de/mam/ldbv/dateien/nutzungsbedingungen_geoportal_bayernatlas_bayernatlasplus.pdf",global_featureCollection_layer_label:"My temporary collection",global_featureCollection_add_feature_notification:"Object was added to “My temporary collection”",global_featureCollection_remove_feature_notification:"Object has been removed from “My temporary collection”",global_featureCollection_add_feature:"Add to collection",global_featureCollection_remove_feature:"Remove from collection",global_featureCollection_add_feature_title:"Add this object to “My temporary collection”",global_featureCollection_remove_feature_title:"Remove this object from “My temporary collection”"};case"de":return{global_app_name:"BayernAtlas",global_generic_exception:"Leider ist etwas schiefgegangen. Weitere Informationen sind in der Konsole des Browsers zu finden...",global_mfpService_init_exception:"PDF Export derzeit leider nicht möglich",global_mfpService_createJob_exception:"PDF konnte nicht erstellt werden",global_featureInfoService_exception:"FeatureInfo Abfrage schlug fehl",global_geolocation_denied:'Es ist keine Standortanzeige möglich, da Ihre Browsereinstellungen dies nicht zulassen. Erlauben Sie die Standortbestimmung und deaktivieren Sie den "Privat" Modus des Browsers.',global_geolocation_not_available:"Es ist keine Standortanzeige möglich",global_import_data_failed:"Import der Daten schlug fehl",global_import_unsupported_sourceType:"Daten-Typ konnte nicht erkannt werden oder wird nicht unterstützt",global_import_authenticationModal_title:"Anmeldung",global_locally_imported_dataset_copyright_label:"Mit Darstellung durch den Anwender",global_share_unsupported_geoResource_warning:"Folgende Ebenen werden nicht geteilt:",global_privacy_policy_url:"https://geoportal.bayern.de/geoportalbayern/seiten/datenschutz.html",global_marker_symbol_label:"Markierung",global_featureInfo_not_available:"FeatureInfo ist nicht verfügbar",global_routingService_init_exception:"Die Routing-Funktion steht derzeit leider nicht zur Verfügung",global_geoResource_not_available:e=>`Es konnte keine Ebene für die GeoRessource "${e[0]}" geladen werden${e[1]?` (${e[1]})`:""}`,global_geoResource_unauthorized:"401 - Fehlende Berechtigung",global_geoResource_forbidden:"403 - Zugriff nicht erlaubt",global_signOut_success:"Sie haben sich erfolgreich abgemeldet",global_fileStorageService_exception:"Die Daten konnten nicht gespeichert werden",global_cr_global_wgs84:"Breite, Länge",global_terms_of_use:"https://www.ldbv.bayern.de/mam/ldbv/dateien/nutzungsbedingungen_geoportal_bayernatlas_bayernatlasplus.pdf",global_featureCollection_layer_label:"Meine temporäre Sammlung",global_featureCollection_add_feature_notification:'Objekt wurde zu "Meine temporäre Sammlung" hinzugefügt',global_featureCollection_remove_feature_notification:'Objekt wurde aus "Meine temporäre Sammlung" entfernt',global_featureCollection_add_feature:"Zur Sammlung hinzufügen",global_featureCollection_remove_feature:"Aus Sammlung entfernen",global_featureCollection_add_feature_title:'Dieses Objekt zu "Meine temporäre Sammlung" hinzufügen',global_featureCollection_remove_feature_title:'Dieses Objekt aus "Meine temporäre Sammlung" entfernen'};default:return{}}}))},78612:(e,t,n)=>{var r=n(31601),i=n(76314)(r);i.push([e.id,".context-menu {\n\t--mouse-x: 0;\n\t--mouse-y: 0;\n\tposition: fixed;\n\tmargin: 0;\n\tleft: 0;\n\ttop: 0;\n\tbackground-color: var(--primary-bg-color);\n\tborder: 3px solid var(--primary-bg-color);\n\tdisplay: block;\n\tbox-shadow: 0px 0px 4px rgb(0 0 0 / 50%);\n\tz-index: calc(var(--z-footer) - 5);\n}\n/* sector: */\n/* 0-1 */\n/* 3-2\t */\n/* 100% when used inside a translate, yields the current element width !!*/\n\n.sector-0 {\n\ttransform: translateX(calc(var(--mouse-x))) translateY(calc(var(--mouse-y)));\n}\n.sector-0:after {\n\tcontent: '';\n\tposition: absolute;\n\tborder-top: 20px solid transparent;\n\tborder-left: 20px solid var(--primary-bg-color);\n\tborder-bottom: 3px solid var(--primary-bg-color);\n\ttop: -23px;\n\tleft: -3px;\n}\n.sector-0:before {\n\tcontent: '';\n\tposition: absolute;\n\tborder-top: 20px solid transparent;\n\tborder-left: 20px solid lightgray;\n\ttop: -24px;\n\tleft: -2px;\n\tbox-shadow: -3px 2px 2px rgb(0 0 0 / 15%);\n\tz-index: -1;\n}\n.sector-1 {\n\ttransform: translateX(calc(var(--mouse-x) - 100%)) translateY(calc(var(--mouse-y)));\n}\n.sector-1:after {\n\tcontent: '';\n\tposition: absolute;\n\tborder-top: 20px solid transparent;\n\tborder-right: 20px solid var(--primary-bg-color);\n\tborder-bottom: 3px solid var(--primary-bg-color);\n\ttop: -23px;\n\tright: -3px;\n}\n.sector-1:before {\n\tcontent: '';\n\tposition: absolute;\n\tborder-top: 20px solid transparent;\n\tborder-right: 20px solid lightgray;\n\ttop: -24px;\n\tright: -2px;\n\tbox-shadow: 3px 2px 2px rgb(0 0 0 / 15%);\n\tz-index: 0;\n}\n.sector-2 {\n\ttransform: translateX(calc(var(--mouse-x) - 100%)) translateY(calc(var(--mouse-y) - 100%));\n}\n.sector-2:after {\n\tcontent: '';\n\tposition: absolute;\n\tborder-bottom: 20px solid transparent;\n\tborder-right: 20px solid var(--primary-bg-color);\n\tborder-top: 3px solid var(--primary-bg-color);\n\tbottom: -23px;\n\tright: -3px;\n}\n.sector-2:before {\n\tcontent: '';\n\tposition: absolute;\n\tborder-bottom: 20px solid transparent;\n\tborder-right: 20px solid lightgray;\n\tbottom: -24px;\n\tright: -2px;\n\tbox-shadow: 3px -1px 2px rgb(0 0 0 / 15%);\n\tz-index: 0;\n}\n.sector-3 {\n\ttransform: translateX(calc(var(--mouse-x))) translateY(calc(var(--mouse-y) - 100%));\n}\n.sector-3:after {\n\tcontent: '';\n\tposition: absolute;\n\tborder-bottom: 20px solid transparent;\n\tborder-left: 20px solid var(--primary-bg-color);\n\tborder-top: 3px solid var(--primary-bg-color);\n\tbottom: -23px;\n\tleft: -3px;\n}\n.sector-3:before {\n\tcontent: '';\n\tposition: absolute;\n\tborder-bottom: 20px solid transparent;\n\tborder-left: 20px solid lightgray;\n\tbottom: -24px;\n\tleft: -2px;\n\tbox-shadow: -3px -1px 2px rgb(0 0 0 / 15%);\n\tz-index: 0;\n}\n.header {\n\tbackground-color: var(--primary-bg-color);\n\tcolor: var(--text1);\n\tpadding: 0.8em 1.5em;\n\tfont-weight: bold;\n\tdisplay: flex;\n}\n.close-icon {\n\tposition: absolute;\n\tright: 0;\n\ttop: 0;\n\theight: 2.2em;\n\twidth: 2.2em;\n\tborder-radius: 3em;\n\tpadding: 0.3em;\n}\n.close-icon:hover {\n\tbackground: var(--header-background-color);\n}\n",""]),e.exports=i},78645:(e,t,n)=>{"use strict";n.d(t,{E7:()=>c,Mr:()=>d,mj:()=>s,pT:()=>l,zN:()=>u});var r=n(31507),i=n(18410),o=n(47518);const a=()=>{const{StoreService:e}=i.z.inject("StoreService");return e.getStore()},s=e=>{const t=Array.isArray(e)?[...e]:[e];a().dispatch({type:r.NX,payload:t})},c=e=>{a().dispatch({type:r.zy,payload:new o.MD(e)})},l=()=>{a().dispatch({type:r.Hz,payload:new o.MD})},d=e=>{a().dispatch({type:r.i_,payload:e})},u=e=>{a().dispatch({type:r.mC,payload:e})}},78659:(e,t,n)=>{"use strict";n.d(t,{ho:()=>a,sm:()=>s});var r=n(73469),i=n(18410);const o=()=>{const{StoreService:e}=i.z.inject("StoreService");return e.getStore()},a=()=>{o().dispatch({type:r.Hp,payload:!0})},s=e=>{o().dispatch({type:r.Gq,payload:e})}},79071:(e,t,n)=>{"use strict";n.d(t,{LN:()=>o,RW:()=>a,Vy:()=>l,Wn:()=>s,Y2:()=>i,kR:()=>r});const r="measurement/active",i="measurement/statistic",o="measurement/mode",a="measurement/displayRuler",s="measurement/selection",c={active:!1,statistic:{geometryType:null,coordinate:null,azimuth:null,length:null,area:null},mode:null,displayRuler:!0,selection:[],finish:null,reset:null,remove:null},l=(e=c,t)=>{const{type:n,payload:l}=t;switch(n){case r:return{...e,active:l};case i:return{...e,statistic:l};case o:return{...e,mode:l};case a:return{...e,displayRuler:l};case s:return{...e,selection:[...l]};case"measurement/finish":return{...e,finish:l};case"measurement/reset":return{...e,reset:l};case"measurement/remove":return{...e,remove:l}}return e}},79340:(e,t,n)=>{"use strict";var r=n(18410);const{TranslationService:i}=r.z.inject("TranslationService");i.register("spinnerProvider",(e=>{switch(e){case"en":return{commons_spinner_text:"Loading"};case"de":return{commons_spinner_text:"Wird geladen"};default:return{}}})),i.register("valueSelectProvider",(e=>{switch(e){case"en":return{commons_valueSelect_icon_hint:"Click to select value"};case"de":return{commons_valueSelect_icon_hint:"Klicken zum Auswählen"};default:return{}}}));var o=n(36752),a=n(2718),s=n.n(a),c=n(6683),l=n(99990),d=n(34844);const u="update_disabled",g="update_label",h="update_type",p="update_icon",m="update_title";class _ extends l.T{#we=()=>{};constructor(){super({disabled:!1,label:"label",icon:null,type:"secondary",title:null})}onInitialize(){this.setAttribute(d.QE,"")}update(e,t,n){switch(e){case u:return{...n,disabled:t};case g:return{...n,label:t};case h:return{...n,type:t};case p:return{...n,icon:t};case m:return{...n,title:t}}}createView(e){const{disabled:t,label:n,icon:r,type:i,title:a}=e,l={primary:"primary"===i,loading:"loading"===i,secondary:"secondary"===i,disabled:t,iconbutton:r},d=`.icon {\n\t\t\tmask : url("${r}");\n\t\t\t-webkit-mask-image : url("${r}");\n\t\t\tmask-size: cover;\n\t\t\t-webkit-mask-size: cover;\n\t\t}`;return o.qy`
			<style>
				${s()}
			</style>
			${r?o.qy`<style>
						${d}
					</style>`:o.s6}
			<button class="button ${(0,c.H)(l)}" title=${a} aria-label=${a} ?disabled=${t} @click=${()=>{this.#we()}} part="button">
				${r?o.qy`<span class="icon" part="icon"></span>`:o.s6} ${n}
			</button>
		`}static get tag(){return"ba-button"}set disabled(e){this.signal(u,e)}get disabled(){return this.getModel().disabled}set type(e){this.signal(h,e)}get type(){return this.getModel().type}set label(e){this.signal(g,e)}get label(){return this.getModel().label}set title(e){this.signal(m,e)}get title(){return this.getModel().title}set icon(e){this.signal(p,e)}get icon(){return this.getModel().icon}set onClick(e){this.#we=e}get onClick(){return this.#we}}window.customElements.get(_.tag)||window.customElements.define(_.tag,_);var v=n(83076),y=n.n(v);const b="update_label",S="update_title",f="update_icon",w="update_size",M="update_color",I="update_background";class A extends l.T{constructor(){super({label:"",title:"",icon:null,size:.8,color:"var(--text1)",background:"var(--secondary-bg-color)"})}update(e,t,n){switch(e){case b:return{...n,label:t};case S:return{...n,title:t};case f:return{...n,icon:t};case w:return{...n,size:t};case M:return{...n,color:t};case I:return{...n,background:t}}}createView(e){const{color:t,background:n,icon:r,label:i,size:a,title:s}=e,c=`.badge {\n\t\t\t--size: ${a}rem; \n\t\t\tbackground: ${n}; \n\t\t\tcolor: ${t}; \n\t\t\tfont-size: var(--size);\n\t\t}`,l=r?`.icon {\n\t\t\tmask : url("${r}");\n\t\t\t-webkit-mask-image : url("${r}");\n\t\t\tbackground: ${t}; \n\t\t\theight:var(--size);\n\t\t\twidth:var(--size);\n\t\t\tmask-size: cover;\n\t\t}`:"";return o.qy`
			<style>
				${y()}
				${c}
				${l}
			</style>
			<span class="badge" part="badge" title=${s}>
				${r?o.qy`<span class="icon"></span>`:o.s6}
				<span class="text">${i}</span>
			</span>
		`}static get tag(){return"ba-badge"}set label(e){this.signal(b,e)}get label(){return this.getModel().label}set title(e){this.signal(S,e)}get title(){return this.getModel().title}set icon(e){this.signal(f,e)}get icon(){return this.getModel().icon}set color(e){this.signal(M,e)}get color(){return this.getModel().color}set background(e){this.signal(I,e)}get background(){return this.getModel().background}set size(e){this.signal(w,e)}get size(){return this.getModel().size}}window.customElements.get(A.tag)||window.customElements.define(A.tag,A);var L=n(44430),E=n.n(L),T=n(28353);const x="update_disabled",D="update_checked",C="update_checked_propagate",N="update_indeterminate",k="update_title",z=(e,t,n=null)=>parseInt(window.getComputedStyle(e,n).getPropertyValue(t)),R=e=>{};class j extends l.T{#Me={};#Ie=R;#Ae=!1;#Le=!1;#Ee=null;constructor(){super({checked:!1,indeterminate:!1,disabled:!1,title:""})}onInitialize(){this.setAttribute(d.QE,"")}update(e,t,n){const r=e=>(e!==n.checked&&(this.dispatchEvent(new CustomEvent("toggle",{detail:{checked:e}})),this.#Ie(e)),e);switch(e){case C:return{...n,checked:r(t),indeterminate:!1};case D:return{...n,checked:t,indeterminate:!1};case N:return{...n,indeterminate:t};case x:return{...n,disabled:t};case k:return{...n,title:t}}}onAfterRender(e){if(e){const e=this.shadowRoot.querySelector("input"),t=z(e,"width","::before"),n=z(e,"padding-left")+z(e,"padding-right"),r=z(e,"width");this.#Me={thumbSize:t,padding:n,bounds:{lower:0,middle:(r-n)/4,upper:r-t/2-n}}}}createView(e){const{checked:t,indeterminate:n,disabled:r,title:i}=e,a=()=>{this._finishPointerAction()},s=e=>{e.target.style.setProperty("--thumb-position",this._calculateThumbPosition(e)),this.#Le=!0};return o.qy`
			<style>
				${E()}
			</style>

			<label title="${i}" for="baSwitch" @click=${e=>{const t=e.target,n=t.querySelector("input");this.#Ae||!t.classList.contains("ba-switch")||n.disabled||(this.signal(C,!n.checked),e.preventDefault())}} class="ba-switch  ${r?"cursor-disabled":""}">
				<slot name="before"></slot>
				<input
					@change=${e=>{const t=e.target.checked;this.signal(C,t)}}
					@pointerdown=${e=>{e.target.disabled||(this.#Ee=new AbortController,e.target.addEventListener("pointermove",s,{signal:this.#Ee.signal}),window.addEventListener("pointerup",a,{once:!0}),e.target.style.setProperty("--thumb-transition-duration","0s"),e.target.style.setProperty("--thumb-position",this._calculateThumbPosition(e)))}}
					@pointerup=${a}
					@pointercancel=${()=>{this._finishPointerAction()}}
					@click=${e=>{this.#Ae&&(e.preventDefault(),e.stopPropagation())}}
					@keydown=${e=>{const t=e.target;t.disabled||" "===e.key&&(this.signal(C,!t.checked),e.preventDefault(),e.stopPropagation())}}
					id="baSwitch"
					type="checkbox"
					role="switch"
					.checked=${t}
					.indeterminate=${n}
					.disabled=${r}
					tabindex="0"
				/>
				<slot name="after"></slot>
				<slot></slot>
			</label>
		`}_finishPointerAction(){if(!this.#Ee)return;const e=this.shadowRoot.querySelector("input");e.checked=this.#Le?this._determineChecked(e):!e.checked,e.style.removeProperty("--thumb-transition-duration"),e.style.removeProperty("--thumb-position"),this.#Ee.abort(),this.#Ee=null,this.#Le=!1,this.signal(C,e.checked),this._padRelease()}_calculateThumbPosition(e){const{thumbSize:t,bounds:n,padding:r}=this.#Me,i=-1===z(e.target,"--isLTR")?-1*e.target.clientWidth+t+r:0,o=((e,t,n)=>{const r=Math.round(e-t/2);return r<n.lower?0:r>n.upper?n.upper:r})(e.offsetX,t,n);return`${i+o}px`}_padRelease(){this.#Ae=!0,setTimeout((()=>{this.#Ae=!1}),300)}_determineChecked(e){const{bounds:t}=this.#Me;return parseInt(e.style.getPropertyValue("--thumb-position"))>=t.middle}set indeterminate(e){this.signal(N,e)}get indeterminate(){return this.getModel().indeterminate}set title(e){this.signal(k,e)}get title(){return this.getModel().title}set disabled(e){this.signal(x,e)}get disabled(){return this.getModel().disabled}set checked(e){this.signal(D,e)}get checked(){return this.getModel().checked}set onToggle(e){this.#Ie=e&&(0,T.Tn)(e)?e:R}get onToggle(){return this.#Ie}static get tag(){return"ba-switch"}click(){this._root.querySelector(".ba-switch").click()}}window.customElements.get(j.tag)||window.customElements.define(j.tag,j);var O=n(42508),P=n.n(O);const $="update_disabled",F="update_checked",G="update_title",U="update_type";class Y extends l.T{constructor(){super({checked:!1,disabled:!1,title:"",type:"check"})}onInitialize(){this._onToggle=()=>{},this.addEventListener("click",(e=>{this._click(),e.stopPropagation()})),this.addEventListener("keydown",(e=>{"Enter"!==e.key&&" "!==e.key||(this._click(),e.preventDefault(),e.stopPropagation())})),this.setAttribute(d.QE,"")}update(e,t,n){switch(e){case F:return{...n,checked:t};case $:return{...n,disabled:t};case G:return{...n,title:t};case U:return{...n,type:t}}}createView(e){const{title:t,disabled:n,checked:r,type:i}=e,a={check:"check"===i,eye:"eye"===i};return o.qy`
			<style>
				${P()}
			</style>
			<input @change=${e=>{const t=e.target.checked;this.signal(F,t),this.dispatchEvent(new CustomEvent("toggle",{detail:{checked:t}})),this._onToggle(e)}} class="input" id="cbx" type="checkbox" style="display: none;" ?disabled=${n} .checked=${r} />
			<label title="${t}" class="ba-checkbox ${(0,c.H)(a)}">
				<span part="checkbox-background"> ${(()=>{switch(i){case"eye":return o.qy`<svg width="100%" height="100%" viewBox="0 0 16 16">
						<path d="M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0" />
						<path d="M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8m8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7" />
					</svg>`;case"check":return o.qy`<svg width="100%" height="100%" viewbox="0 0 12 9"><polyline points="1 5 4 8 11 1"></polyline></svg>`}})()} </span>
				<span>
					<slot></slot>
				</span>
			</label>
		`}static get tag(){return"ba-checkbox"}_click(){this._root.querySelector("#cbx").click()}set title(e){this.signal(G,e)}get title(){return this.getModel().title}set disabled(e){this.signal($,e)}get disabled(){return this.getModel().disabled}set checked(e){this.signal(F,e)}get checked(){return this.getModel().checked}set type(e){this.signal(U,e)}get type(){return this.getModel().type}set onToggle(e){this._onToggle=e}get onToggle(){return this._onToggle}}window.customElements.get(Y.tag)||window.customElements.define(Y.tag,Y);var H=n(85356),B=n.n(H);const V="update_disabled",W="update_icon",Z="update_size",Q="update_color",q="update_hover",K="update_title";class X extends l.T{constructor(){super({disabled:!1,icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmktYXJyb3ctdXAtY2lyY2xlLWZpbGwiIHZpZXdCb3g9IjAgMCAxNiAxNiI+PCEtLU1JVCBMaWNlbnNlLS0+CiAgPHBhdGggZD0iTTE2IDhBOCA4IDAgMSAwIDAgOGE4IDggMCAwIDAgMTYgMHptLTcuNSAzLjVhLjUuNSAwIDAgMS0xIDBWNS43MDdMNS4zNTQgNy44NTRhLjUuNSAwIDEgMS0uNzA4LS43MDhsMy0zYS41LjUgMCAwIDEgLjcwOCAwbDMgM2EuNS41IDAgMCAxLS43MDguNzA4TDguNSA1LjcwN1YxMS41eiIvPgo8L3N2Zz4=",title:"",size:2,color:"var(--primary-color)",color_hover:"var(--primary-color)"}),this._onClick=()=>{}}update(e,t,n){switch(e){case V:return{...n,disabled:t};case W:return{...n,icon:t};case K:return{...n,title:t};case Z:return{...n,size:t};case Q:return{...n,color:t};case q:return{...n,color_hover:t}}}onInitialize(){this.getRenderTarget().addEventListener("click",(e=>{this.getModel().disabled?e.stopPropagation():this._onClick()})),this.setAttribute(d.QE,"")}createView(e){const{size:t,color:n,color_hover:r,icon:i,disabled:a,title:s}=e,l=`.icon {\n\t\t\t--size: ${t}em; \n\t\t\tbackground: ${n}; \n\t\t}`,d=r?`.anchor:hover .icon{\n\t\t\ttransform: scale(1.1);\n\t\t\tbackground: ${r}; \n\t\t}`:"",u=i?`.icon-custom {\n\t\t\tmask : url("${i}");\n\t\t\t-webkit-mask-image : url("${i}");\n\t\t}`:"",g=`.anchor {\n\t\t\t--radius: ${t/2}em;\n\t\t\t--size: ${t}em;\n\t\t}`,h=r!==n?`.anchor:focus-visible  .icon{\n\t\t\ttransform: scale(1.1);\n\t\t\tbackground: ${r};\n\t\t}\n\t\t.anchor:focus-visible {\n\t\t\tbackground: ${n};\t\t\t\n\t\t\tbox-shadow: 0 0 0 .2em var(--primary-color-lighter);\n\t\t}\n\t\t`:"",p={disabled:a};return o.qy`
			<style>
				${l}
				${d}
				${u}
				${B()}
				${g}
				${h}
			</style>
			<button part="button" class="anchor" aria-label=${s} title=${s}>
				<span part="icon" class="icon icon-custom ${(0,c.H)(p)}"></span>
			</button>
		`}static get tag(){return"ba-icon"}set onClick(e){this._onClick=e}get onClick(){return this._onClick}set disabled(e){this.signal(V,e)}get disabled(){return this.getModel().disabled}set icon(e){this.signal(W,e)}get icon(){return this.getModel().icon}set size(e){this.signal(Z,e)}get size(){return this.getModel().size}set color(e){this.signal(Q,e)}get color(){return this.getModel().color}set color_hover(e){this.signal(q,e)}get color_hover(){return this.getModel().color_hover}set title(e){this.signal(K,e)}get title(){return this.getModel().title}}window.customElements.get(X.tag)||window.customElements.define(X.tag,X);var J=n(47644),ee=n.n(J);const te="update_label";class ne extends l.T{constructor(){super({label:null});const{TranslationService:e}=r.z.inject("TranslationService");this._translationService=e}onInitialize(){this.setAttribute(d.QE,"")}update(e,t,n){if(e===te)return{...n,label:t}}createView(e){const{label:t}=e,n=t||(()=>this._translationService.translate("commons_spinner_text"))();return o.qy`
			<style>
				${ee()}
			</style>
			<span class="loading">${n}</span>
		`}static get tag(){return"ba-spinner"}set label(e){this.signal(te,e)}get label(){return this.getModel().label}}window.customElements.get(ne.tag)||window.customElements.define(ne.tag,ne);var re=n(34919);window.customElements.get(re.o.tag)||window.customElements.define(re.o.tag,re.o);const ie="update_loaded";class oe extends l.T{#Te;#xe;constructor(){super({loaded:!1})}onInitialize(){this.#xe&&n(92662)(`./${this.#xe}`).then((()=>{this.signal(ie,!0)}))}update(e,t,n){if(e===ie)return{...n,loaded:t}}createView(e){const{loaded:t}=e;return t?o.qy`${this.#Te}`:o.qy`<ba-spinner></ba-spinner>`}set content(e){this.#Te=e}set chunkName(e){this.#xe=e}static get tag(){return"ba-lazy-load"}}window.customElements.get(oe.tag)||window.customElements.define(oe.tag,oe);var ae=n(65304),se=n.n(ae);const ce="update_title",le="update_values",de="update_selected",ue="update_is_collapsed",ge="update_isportrait_value",he=o.qy`<div class="valueselect__container">
	<select .disabled="true"></select>
</div>`;class pe extends l.T{constructor(){super({title:"",values:[],selected:null,isCollapsed:!0,portrait:!1});const{TranslationService:e,EnvironmentService:t}=r.z.inject("TranslationService","EnvironmentService");this._translationService=e,this._environmentService=t,this._onSelect=e=>{}}onInitialize(){this.observe((e=>e.media.portrait),(e=>this.signal(ge,e)))}update(e,t,n){switch(e){case ce:return{...n,title:t};case le:return{...n,values:t};case de:return{...n,selected:t};case ue:return{...n,isCollapsed:t};case ge:return{...n,portrait:t}}}createView(e){return 0===e.values.length?he:this._environmentService.isTouch()?this.#De(e):this.#Ce(e)}#Ce(e){const{portrait:t,selected:n}=e,r=e=>this._translationService.translate(e),i={iscollapsed:e.isCollapsed};return o.qy`
			<style>
				${se()}
			</style>
			<div class="valueselect__container ${t?"is-portrait":"is-landscape"}">
				<div class="values_header">
					<button id="symbol-value" data-test-id class="valueselect__toggle-button" @click=${()=>{this.signal(ue,!e.isCollapsed)}} .title=${e.title}>${n}</button>
				</div>
				<div class="ba_values_container ${(0,c.H)(i)}">
					<div class="grid">
						${(()=>{const t=t=>{const n=e.values.find((e=>t.currentTarget.id==="value_"+e));this.signal(de,n),this.dispatchEvent(new CustomEvent("select",{detail:{selected:n}})),this._onSelect(n),this.signal(ue,!e.isCollapsed)};return e.values.map((n=>(n=>{const i={isselected:e.selected===n};return o.qy` <div
					id="value_${n}"
					class="ba_value_item ${(0,c.H)(i)}"
					title=${r("commons_valueSelect_icon_hint")}
					@click=${t}
				>
					${n}
				</div>`})(n)))})()}
						<div></div>
					</div>
				</div>
			</div>
		`}#De(e){const{portrait:t,selected:n}=e;return(()=>o.qy`<div class="valueselect__container ${t?"is-portrait":"is-landscape"}">
				<select @change="${e=>{const t=e.target,n=t.options[t.selectedIndex].value;this.signal(de,n),this.dispatchEvent(new CustomEvent("select",{detail:{selected:n}})),this._onSelect(n)}}">
					${e.values.map((e=>o.qy` <option value="${e}" ?selected=${n===e}>${e}</option>`))}
				</select>
			</div>`)()}static get tag(){return"ba-value-select"}set title(e){this.signal(ce,e)}get title(){return this.getModel().title}set values(e){this.signal(le,e)}get values(){return this.getModel().values}set selected(e){this.signal(de,e)}get selected(){return this.getModel().selected}set onSelect(e){this._onSelect=e}get onSelect(){return this._onSelect}}window.customElements.get(pe.tag)||window.customElements.define(pe.tag,pe);var me=n(68990),_e=n.n(me),ve=n(82090);const ye="update_placeholder",be="update_options",Se="update_selected",fe="update_search",we="update_max_entries",Me="update_show_caret",Ie="update_is_responsive",Ae="update_dropdown_header";class Le extends l.T{#Ne;#ke;#ze;#Re=()=>{this.#Ne||this.#je()};#Oe=e=>{};#Pe=e=>{};constructor(){super({placeholder:"Search...",maxEntries:10,selected:null,search:"",options:[],filteredOptions:[],showCaret:!0,isResponsive:!1,dropdownHeader:null}),this.#ke=new ve.P(document),this.#Ne=!1,this.#ze=!1}onInitialize(){this.observeModel("search",(()=>this.#$e())),this.observeModel("selected",(()=>this.#Fe()))}onAfterRender(e){const{isResponsive:t}=this.getModel();e&&!t&&this._setInputWidth()}_setInputWidth(){const e=this.shadowRoot.querySelector(".dropdown"),t=this.shadowRoot.querySelector("#search-input"),n=e.getBoundingClientRect();t.style.width=n.width+"px",e.style.minWidth=n.width+"px"}onDisconnect(){document.removeEventListener("click",this.#Re),this.#ke.deactivate()}update(e,t,n){switch(e){case Ae:return{...n,dropdownHeader:t};case ye:return{...n,placeholder:t};case Se:{const e=(0,T.Et)(t)?n.filteredOptions[Math.max(t,0)]:t;return this._updateOptionsFiltering({...n,selected:e,search:e})}case be:return this._updateOptionsFiltering({...n,options:[...t]});case fe:return this._updateOptionsFiltering({...n,search:t??""});case we:return{...n,maxEntries:t};case Me:return{...n,showCaret:t};case Ie:return{...n,isResponsive:t}}}createView(e){const{search:t,showCaret:n,placeholder:r,filteredOptions:i,maxEntries:a,dropdownHeader:s,isResponsive:c}=e,l=e=>{this.#Ge(e.currentTarget)},d=e=>{e.currentTarget.classList.remove("hovered")},u=e=>{e.stopPropagation(),this.#Ge(e.currentTarget),this.#Ue()};return o.qy`
			<style>
				${c?o.qy` :host { width: 100%; } `:o.qy` :host { --searchable-select-min-width: 7em; --searchable-select-max-with: 20em; } `}
				${_e()}
			</style>
			<div class="searchable-select" @pointerenter=${()=>{this.#Ne=!0}} @pointerleave=${()=>{this.#Ne=!1}} @click=${()=>{this._showDropdown(document.documentElement.clientHeight,c)}}>
				<div class="search-input-container">
					<input id="search-input" type="text" autocomplete="off" .placeholder=${r} .value=${t} @input=${e=>{this.signal(fe,e.currentTarget.value),this._showDropdown(document.documentElement.clientHeight,c)}} />
					${n?o.qy`<div id="search-input-toggler" @click=${e=>{e.stopPropagation(),null!==this.shadowRoot.querySelector(".dropdown.visible")?this.#je():this._showDropdown(document.documentElement.clientHeight,c)}}>
								<span class="caret-fill-down"></span>
							</div> `:o.s6}
				</div>

				<div class="dropdown hidden">
					${null!==s?o.qy`<div class="dropdown-header">${s}</div>`:o.s6}

					<div class="dropdown-content">
						${i.slice(0,a).map(((e,t)=>o.qy`<div
									class="option"
									@click=${u}
									@pointerenter=${l}
									@pointerleave=${d}
									.value=${t}
								>
									<span>${e}</span>
								</div>`))}
					</div>
				</div>
			</div>
		`}#Ge(e){this.shadowRoot.querySelectorAll(".option.hovered").forEach((e=>e.classList.remove("hovered"))),e.classList.add("hovered")}_updateOptionsFiltering(e){const t=e.options,n=e.search??"",r=n.toUpperCase(),i=[];for(const e of t)e.toUpperCase().indexOf(r)>-1&&i.push(e);return{...e,filteredOptions:i,search:n}}#Ye(){const e=this.shadowRoot.querySelector(".dropdown");e.classList.remove("visible"),e.classList.add("hidden"),this.#ke.deactivate(),document.removeEventListener("click",this.#Re)}_showDropdown(e,t){const n=this.shadowRoot.querySelector(".dropdown"),r=this.shadowRoot.querySelector(".searchable-select"),i=r.getBoundingClientRect();n.classList.add("visible"),n.classList.remove("hidden"),t&&(n.style.width=i.width+"px");const o=0>e-(n.clientHeight+i.y+i.height),a=i.height+"px";o?(n.style.marginBottom=a,n.style.removeProperty("margin-top"),r.classList.add("fold-up")):(n.style.marginTop=a,n.style.removeProperty("margin-bottom"),r.classList.remove("fold-up")),document.removeEventListener("click",this.#Re),this.#ke.deactivate(),this.#ke.addForKeyUp("Escape",(()=>this.#je())).addForKeyUp("Enter",(()=>this.#Ue())).addForKeyUp("ArrowUp",(()=>this._hoverNextOption(!0))).addForKeyUp("ArrowDown",(()=>this._hoverNextOption())),this.#ke.activate(),document.addEventListener("click",this.#Re),Array.from(this.shadowRoot.querySelectorAll(".option")).forEach((e=>e.classList.remove("hovered")))}#je(){this.#Ye(),this.#ze?this.signal(Se,this.search):this.signal(fe,this.selected)}#Ue(){const e=this.shadowRoot.querySelector(".option.hovered");e?this.signal(Se,e.value):this.#ze?this.signal(Se,this.search):this.signal(fe,this.selected),this.#Ye()}#$e(){const{filteredOptions:e}=this.getModel(),t={filteredOptions:e};this.dispatchEvent(new CustomEvent("change",{detail:t})),this.#Oe(t)}#Fe(){const{selected:e}=this.getModel(),t={selected:e};this.dispatchEvent(new CustomEvent("select",{detail:t})),this.#Pe(t)}_hoverNextOption(e=!1){const t=Array.from(this.shadowRoot.querySelectorAll(".option")),n=this.shadowRoot.querySelector(".option.hovered");let r=0;if(!(t.length<1)){if(n){const i=t.indexOf(n),o=()=>i>0?i-1:t.length-1,a=()=>i<t.length-1?i+1:0;n.classList.remove("hovered"),r=e?o():a()}t[r].classList.add("hovered")}}get allowFreeText(){return this.#ze}set allowFreeText(e){this.#ze=!0===e}get dropdownHeader(){return this.getModel().dropdownHeader}set dropdownHeader(e){this.signal(Ae,e)}get placeholder(){return this.getModel().placeholder}set placeholder(e){this.signal(ye,e)}get selected(){return this.getModel().selected}set selected(e){this.signal(Se,e)}get search(){return this.getModel().search}set search(e){this.signal(fe,e)}get options(){return this.getModel().options}set options(e){null==e&&(e=[]),this.signal(be,e)}get maxEntries(){return this.getModel().maxEntries}set maxEntries(e){this.signal(we,e)}set onChange(e){this.#Oe=e}set onSelect(e){this.#Pe=e}set showCaret(e){this.signal(Me,!0===e)}set isResponsive(e){this.signal(Ie,!0===e)}get hasPointer(){return this.#Ne}static get tag(){return"ba-searchable-select"}}window.customElements.get(Le.tag)||window.customElements.define(Le.tag,Le);var Ee=n(67806),Te=n.n(Ee);class xe extends l.T{#He=null;constructor(){super()}onInitialize(){this.setAttribute(d.QE,"")}createView(){const e=e=>{this.#He=e.target.value,this.dispatchEvent(new CustomEvent("colorChanged",{detail:{color:this.#He}}))};return o.qy`<style>
				${Te()}
			</style>
			<div class="color-row">
				<button class="color red" value="#FF0000" @click=${e}></button>
				<button class="color yellow" value="#FFFF00" @click=${e}></button>
				<button class="color lime" value="#00FF00" @click=${e}></button>
				<button class="color aqua" value="#00FFFF" @click=${e}></button>
				<button class="color blue" value="#0000FF" @click=${e}></button>
				<button class="color fuchsia mr" value="#FF00FF" @click=${e}></button>
				<button class="color white" value="#FFFFFF" @click=${e}></button>
				<button class="color grey" value="#808080" @click=${e}></button>
			</div>
			<div class="color-row">
				<button class="color maroon" value="#800000" @click=${e}></button>
				<button class="color olive" value="#808000" @click=${e}></button>
				<button class="color green" value="#008000" @click=${e}></button>
				<button class="color teal" value="#008080" @click=${e}></button>
				<button class="color navy" value="#000080" @click=${e}></button>
				<button class="color purple mr" value="#800080" @click=${e}></button>
				<button class="color silver" value="#C0C0C0" @click=${e}></button>
				<button class="color black" value="#000000" @click=${e}></button>
			</div> `}static get tag(){return"ba-color-palette"}}window.customElements.get(xe.tag)||window.customElements.define(xe.tag,xe)},79545:(e,t,n)=>{"use strict";n.d(t,{i:()=>o});var r=n(48471),i=n(18410);const o=e=>{(()=>{const{StoreService:e}=i.z.inject("StoreService");return e.getStore()})().dispatch({type:r.sy,payload:e})}},80009:(e,t,n)=>{"use strict";n.d(t,{X:()=>l,c:()=>c});var r=n(18410),i=n(47518),o=n(6727);const a={url:null,data:null,sourceType:null},s=()=>{const{StoreService:e}=r.z.inject("StoreService");return e.getStore()},c=(e,t)=>{s().dispatch({type:o.pI,payload:new i.MD({...a,url:e,sourceType:t})})},l=(e,t)=>{s().dispatch({type:o.pI,payload:new i.MD({...a,data:e,sourceType:t})})}},80943:(e,t,n)=>{"use strict";n.d(t,{Tc:()=>r,kD:()=>i,p2:()=>a,to:()=>o});const r=Object.freeze({Ok:200,Start_Destination_Missing:900,Destination_Missing:901,Start_Missing:902}),i=Object.freeze({Technical_Error:0,Improper_Waypoints:1}),o=Object.freeze({START_OR_DESTINATION:0,START:1,DESTINATION:2,INTERMEDIATE:3,EXISTING_START_OR_DESTINATION:4,EXISTING_INTERMEDIATE:5}),a=Object.freeze({HINT:0,WARNING:1})},81576:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PHBhdGggZmlsbD0ibm9uZSIgZD0iTTAgMGgyNHYyNEgweiIvPjxwYXRoIGQ9Ik0yMC45NCAxMUE4Ljk5NCA4Ljk5NCAwIDAgMCAxMyAzLjA2VjFoLTJ2Mi4wNkE4Ljk5NCA4Ljk5NCAwIDAgMCAzLjA2IDExSDF2MmgyLjA2QTguOTk0IDguOTk0IDAgMCAwIDExIDIwLjk0VjIzaDJ2LTIuMDZBOC45OTQgOC45OTQgMCAwIDAgMjAuOTQgMTNIMjN2LTJ6TTEyIDE5Yy0zLjg3IDAtNy0zLjEzLTctN3MzLjEzLTcgNy03IDcgMy4xMyA3IDctMy4xMyA3LTcgNyIvPjwvc3ZnPjwhLS1NSVQgTGljZW5zZS0tPgo="},81706:(e,t,n)=>{var r=n(31601),i=n(76314)(r);i.push([e.id,".button {\n\tcursor: pointer;\n\tpadding: 0.8em 1em;\n\tbackground: transparent;\n\tborder: none;\n\tfont-weight: bold;\n\ttransition: all var(--animation-duration-medium-open) var(--animation-easing-linear);\n\tcolor: var(--primary-color);\n\twidth: 100%;\n}\n.primary {\n\tbackground-color: var(--primary-color);\n\tcolor: var(--text3);\n\topacity: 0.8;\n}\n.secondary {\n\tbackground-color: var(--primary-bg-color);\n\tcolor: var(--primary-color);\n}\n.primary.button:focus-visible {\n\topacity: 1;\n}\n.secondary.button:focus-visible {\n\tbackground: var(--primary-color);\n\tcolor: var(--text3);\n}\n.primary.disabled {\n\topacity: 0.7;\n\tcursor: not-allowed;\n\tcolor: var(--text1);\n\tbackground: var(--secondary-bg-color);\n}\n.secondary.disabled {\n\topacity: 0.7;\n\tcursor: not-allowed;\n\tcolor: var(--text1);\n}\n.loading {\n\tborder: none;\n\toutline: none;\n\tposition: relative;\n\tbackground-color: var(--primary-color);\n\tcolor: var(--text3);\n\tfont-size: 1rem;\n\tfont-family: 'Poppins', sans-serif;\n\toverflow: hidden;\n}\n.loading::before {\n\tcontent: '';\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 150%;\n\theight: 100%;\n\tbackground: repeating-linear-gradient(60deg, transparent, transparent 0.75rem, rgba(255, 255, 255, 0.15) 0.75rem, rgba(255, 255, 255, 0.15) 1.5rem);\n\tanimation: load 0.8s infinite linear;\n}\n.secondary.button:focus-visible,\n.primary.button:focus-visible,\n.loading.button:focus-visible {\n\tbox-shadow: 0 0 0 0.2em var(--primary-color-lighter);\n}\n.primary.button:hover:enabled {\n\topacity: 1;\n}\n.secondary.button:hover:enabled {\n\tbackground: var(--primary-color);\n\tcolor: var(--text3);\n}\n@keyframes load {\n\t0% {\n\t\ttransform: translateX(0);\n\t}\n\t100% {\n\t\ttransform: translateX(-1.75rem);\n\t}\n}\n.icon {\n\theight: 1em;\n\twidth: 1em;\n\tdisplay: flex;\n\tfont-size: 1.7rem;\n\tposition: absolute;\n\tleft: 0.4em;\n\ttop: 0.3em;\n\ttransition: all var(--animation-duration-medium-open) var(--animation-easing-linear);\n}\n.primary .icon {\n\tbackground: var(--text3);\n}\n.loading .icon {\n\tbackground: var(--text3);\n}\n.secondary .icon {\n\tbackground: var(--primary-color);\n}\n.primary.disabled .icon {\n\tbackground: var(--text1);\n}\n.secondary.disabled .icon {\n\tbackground: var(--text1) !important;\n}\n.iconbutton {\n\tpadding-left: 3em;\n\tposition: relative;\n}\n.secondary:hover .icon,\n.secondary:focus-visible .icon {\n\tbackground: var(--text3);\n}\n",""]),e.exports=i},82090:(e,t,n)=>{"use strict";n.d(t,{P:()=>o});var r=n(28353);const i=()=>{};class o{constructor(e){this._document=e,this._mapping={keyup:{},keydown:{}},this._keyUpListener=e=>this._onKeyUp(e),this._keyDownListener=e=>this._onKeyDown(e)}activate(){document.addEventListener("keyup",this._keyUpListener),document.addEventListener("keydown",this._keyDownListener)}deactivate(){document.removeEventListener("keyup",this._keyUpListener),document.removeEventListener("keydown",this._keyDownListener)}addForKeyUp(e,t){return this._add(e,"keyup",t),this}addForKeyDown(e,t){return this._add(e,"keydown",t),this}_add(e,t,n){if(!(0,r.Kg)(e))throw new TypeError("keyCode must be a string");if("function"!=typeof n)throw new TypeError("action must be a function");this._mapping[t]={...this._mapping[t],[e]:n}}_isInputElement(e){return/^(input|textarea)$/i.test(e.nodeName)}_onKeyUp(e){(this._isInputElement(e.target)?i:this._mapToAction(e.key,"keyup"))(e)}_onKeyDown(e){(this._isInputElement(e.target)?i:this._mapToAction(e.key,"keydown"))(e)}_mapToAction(e,t){return this._mapping[t][e]?this._mapping[t][e]:i}}},82494:(e,t,n)=>{"use strict";n.d(t,{w:()=>h});var r=n(36752),i=n(18410),o=n(9923),a=n.n(o),s=n(99990),c=n(6683),l=n(14731);const d="update_isOpen_tabIndex",u="update_isPortrait_hasMinWidth",g="update_isOpen_NavigationRail";class h extends s.T{constructor(){super({isOpen:!1,isPortrait:!1,hasMinWidth:!1,isOpenNavigationRail:!1});const{EnvironmentService:e}=i.z.inject("EnvironmentService");this._environmentService=e}onInitialize(){this.observe((e=>e.mainMenu),(e=>this.signal(d,{isOpen:e.open}))),this.observe((e=>e.media),(e=>this.signal(u,{isPortrait:e.portrait,hasMinWidth:e.minWidth}))),this.observe((e=>e.navigationRail),(e=>this.signal(g,{isOpenNavigationRail:e.open})))}update(e,t,n){switch(e){case d:case u:case g:return{...n,...t}}}onWindowLoad(){this._root.querySelector(".preload")?.classList.remove("preload")}createView(e){const{isOpen:t,isOpenNavigationRail:n,isPortrait:i,hasMinWidth:o}=e,s={"is-open":t&&!i&&!this._environmentService.isEmbedded(),"is-open-navigationRail":n&&!i&&!this._environmentService.isEmbedded(),"is-desktop":o,"is-tablet":!o,"is-portrait":i,"is-landscape":!i,"is-embedded":this._environmentService.isEmbedded()};return r.qy`
			<style>
				${a()}
			</style>
			<div class="preload">
				<div class="${(0,c.H)(s)}">
					<div class="footer">
						<div>
							<div class="scale" part="scale"></div>
							${(()=>i||this._environmentService.isEmbedded()?l.s:r.qy`<ba-base-layer-container></ba-base-layer-container> `)()}
							<ba-attribution-info></ba-attribution-info>
						</div>
						<div class="content">${r.qy`
				<ba-privacy-policy></ba-privacy-policy>
				<ba-map-info></ba-map-info>
			`}</div>
					</div>
				</div>
			</div>
		`}static get tag(){return"ba-footer"}}},83076:(e,t,n)=>{var r=n(36e3);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},83120:(e,t,n)=>{"use strict";var r=n(18410);const{TranslationService:i}=r.z.inject("TranslationService");i.register("notificationsProvider",(e=>{switch(e){case"en":return{notifications_item_info:"Info",notifications_item_warn:"Warning",notifications_item_error:"Error"};case"de":return{notifications_item_info:"Info",notifications_item_warn:"Warnung",notifications_item_error:"Fehler"};default:return{}}}));var o=n(36752),a=n(64935),s=n(16575),c=n.n(s),l=n(99990),d=n(61263);const u="update_notifications",g="update_bottom_sheet",h="update_remove_notification";class p extends l.T{constructor(){super({notifications:[],interactionBottomSheet:null,bottomSheet:null,autocloseTime:5e3,lastNotification:null})}onInitialize(){this.observe((e=>e.notifications.latest),(e=>{e&&this.signal(u,e)})),this.observe((e=>e.bottomSheet),(e=>{this.signal(g,e)}))}update(e,t,n){const r=e=>e.data.find((e=>e.content&&e.id===d.Px))??null,i=e=>e.data.find((e=>e.content&&e.id!==d.Px))??null;switch(e){case u:return{...n,notifications:[{...t.payload,id:t.id}].concat(n.notifications),lastNotification:t};case g:return{...n,interactionBottomSheet:r(t),bottomSheet:i(t)};case h:return{...n,notifications:n.notifications.filter((e=>e.id!==t.id))};case"update_autoclose_time":return{...n,autocloseTime:t}}}createView(e){const{notifications:t,interactionBottomSheet:n,bottomSheet:r,autocloseTime:i}=e;return 0===t.length&&null==r&&null==n?o.s6:o.qy` <style>
						${c()}
					</style>
					<div class="stackable-content-notification-panel">${(0,a.u)(t,(e=>e.id),((e,t)=>{const n={...e,index:t,autocloseTime:i};return o.qy`<ba-notification-item
				.content=${n}
				.onClose=${e=>this.signal(h,e)}
			></ba-notification-item>`}))}</div>
					<div class="stackable-content-sheet-panel">${(e=>e?o.qy`<ba-bottom-sheet
						class="interaction-bottomsheet"
						.id=${e.id}
						.content=${e.content}
					></ba-bottom-sheet>`:o.s6)(n)}${(e=>e?o.qy`<ba-bottom-sheet .id=${e.id} .content=${e.content}></ba-bottom-sheet>`:o.s6)(r)}</div>`}static get tag(){return"ba-notification-panel"}}var m=n(52608),_=n(6683),v=n(2277),y=n(87093),b=n.n(y),S=n(28353);const f={content:null,level:null,autocloseTime:0},w="update_notification";class M extends l.T{constructor(){super({notification:f,autocloseTimeoutId:null});const{TranslationService:e,SecurityService:t}=r.z.inject("TranslationService","SecurityService");this._translationService=e,this._securityService=t,this._onClose=()=>{}}update(e,t,n){if(e===w)return{...n,notification:t,autocloseTimeoutId:t.autocloseTime>0?(()=>setTimeout((()=>this._hide()),t.autocloseTime))():null}}createView(e){const{notification:t}=e,n={notification_info:t.level===v.A.INFO,notification_warn:t.level===v.A.WARN,notification_error:t.level===v.A.ERROR},r=t.content?(0,S.Kg)(t.content)?this._securityService.sanitizeHtml(t.content):t.content:null;return r?o.qy` <style>
						${b()}
					</style>
					<div @click=${()=>this._hide()} class="notification_item  ${(0,_.H)(n)}" title="${(e=>this._translationService.translate(e))((e=>{switch(e){case v.A.INFO:return"notifications_item_info";case v.A.WARN:return"notifications_item_warn";case v.A.ERROR:return"notifications_item_error";default:return""}})(t.level))}">
						<div class="notification_content">${r}</div>
					</div>`:o.s6}_hide(){const{notification:e,autocloseTimeoutId:t}=this.getModel(),n=this.shadowRoot.querySelector(".notification_item");n.classList.add("notification_item_hide"),n.addEventListener("animationend",(()=>{this.onClose(e),clearTimeout(t)}))}static get tag(){return"ba-notification-item"}set content(e){const t={...f,...e};this.signal(w,t)}set onClose(e){this._onClose=e}get onClose(){return this._onClose}}window.customElements.get(p.tag)||window.customElements.define(p.tag,p),window.customElements.get(m.X.tag)||window.customElements.define(m.X.tag,m.X),window.customElements.get(M.tag)||window.customElements.define(M.tag,M)},83241:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmktZ2VvLWFsdCI+PHBhdGggZD0iTTEyLjE2NiA4Ljk0Yy0uNTI0IDEuMDYyLTEuMjM0IDIuMTItMS45NiAzLjA3QTMyIDMyIDAgMCAxIDggMTQuNThhMzIgMzIgMCAwIDEtMi4yMDYtMi41N2MtLjcyNi0uOTUtMS40MzYtMi4wMDgtMS45Ni0zLjA3QzMuMzA0IDcuODY3IDMgNi44NjIgMyA2YTUgNSAwIDAgMSAxMCAwYzAgLjg2Mi0uMzA1IDEuODY3LS44MzQgMi45NE04IDE2czYtNS42ODYgNi0xMEE2IDYgMCAwIDAgMiA2YzAgNC4zMTQgNiAxMCA2IDEwIi8+PHBhdGggZD0iTTggOGEyIDIgMCAxIDEgMC00IDIgMiAwIDAgMSAwIDRtMCAxYTMgMyAwIDEgMCAwLTYgMyAzIDAgMCAwIDAgNiIvPjxwYXRoIGQ9Ik04IDBhNiA2IDAgMCAwLTYgNmMwIDQuMzE0IDYgMTAgNiAxMHM2LTUuNjg2IDYtMTBhNiA2IDAgMCAwLTYtNm0tLjAzMyAzLjc2NEEyLjM3MyAyLjQwNyAwIDAgMSAxMC4zNCA2LjE3YTIuMzczIDIuNDA3IDAgMCAxLTIuMzczIDIuNDA2QTIuMzczIDIuNDA3IDAgMCAxIDUuNTk0IDYuMTdhMi4zNzMgMi40MDcgMCAwIDEgMi4zNzMtMi40MDYiIHN0eWxlPSJvcGFjaXR5Oi4yO2ZpbGw6I2YwZjtmaWxsLW9wYWNpdHk6MSIvPjwvc3ZnPjwhLS1NSVQgTGljZW5zZS0tPgo="},83245:(e,t,n)=>{"use strict";n.d(t,{BY:()=>S,CI:()=>g,FA:()=>p,Uj:()=>v,bg:()=>h,bx:()=>f,e1:()=>_,eP:()=>d,oi:()=>m,sQ:()=>y,uj:()=>u});var r=n(93003),i=n(18410),o=n(47518),a=n(99887);const s=()=>{const{StoreService:e}=i.z.inject("StoreService");return e.getStore()},c=()=>{const{MapService:e}=i.z.inject("MapService");return e},l=e=>e>c().getMaxZoomLevel()?c().getMaxZoomLevel():e<c().getMinZoomLevel()?c().getMinZoomLevel():(0,a.qL)(e),d=e=>{const{zoom:t,center:n}=e;s().dispatch({type:r.H5,payload:{center:(0,a.OB)(n),zoom:l(t)}})},u=e=>{const{zoom:t,center:n,rotation:i}=e;s().dispatch({type:r.gg,payload:{zoom:l(t),center:(0,a.OB)(n),rotation:(0,a.FW)(i)}})},g=e=>{s().dispatch({type:r.Qf,payload:l(e)})},h=e=>{s().dispatch({type:r.Qt,payload:(0,a.FW)(e)})},p=e=>{s().dispatch({type:r.ZW,payload:(0,a.FW)(e)})},m=()=>{const{position:{zoom:e}}=s().getState();s().dispatch({type:r.NK,payload:l(e+1)})},_=()=>{const{position:{zoom:e}}=s().getState();s().dispatch({type:r.NK,payload:l(e-1)})},v=e=>{s().dispatch({type:r.dN,payload:(0,a.OB)(e)})},y=e=>{s().dispatch({type:r.E_,payload:(0,a.OB)(e)})},b={useVisibleViewport:!0},S=(e,t={})=>{const n={...b,...t};s().dispatch({type:r.fS,payload:new o.MD({extent:e,options:n})})},f=(e,t={})=>{const n={...b,...t};s().dispatch({type:r.zt,payload:new o.MD({id:e,options:n})})}},83739:(e,t,n)=>{"use strict";n.d(t,{NH:()=>a,Zg:()=>s,kR:()=>r,nz:()=>i,rS:()=>l,rg:()=>o});const r="geolocation/active",i="geolocation/denied",o="geolocation/tracking",a="geolocation/accuracy",s="geolocation/position",c={active:!1,denied:!1,tracking:!1,accuracy:null,position:null},l=(e=c,t)=>{const{type:n,payload:l}=t;switch(n){case r:return{...e,active:l};case i:return{...e,denied:l};case s:return{...e,position:l};case a:return{...e,accuracy:l};case o:return{...e,tracking:l}}return e}},83850:(e,t,n)=>{var r=n(31601),i=n(76314),o=n(4417),a=n(1826),s=i(r),c=o(a);s.push([e.id,`.searchable-select {\n\tdisplay: flex;\n\tcursor: pointer;\n\twidth: inherit;\n}\n\n.fold-up {\n\talign-items: self-end;\n}\n\n.hidden {\n\toverflow: hidden;\n\theight: 1px;\n\tz-index: -1 !important;\n}\n\n.visible {\n\tdisplay: block;\n}\n\n.option {\n\tbackground-color: var(--primary-bg-color);\n\tborder-bottom: 1px dotted var(--header-background-color);\n\tmin-height: 1.25em;\n\tpadding: 0.5em 1em;\n}\n\n.option.hovered,\n.option.hovered:hover {\n\tbackground-color: var(--header-background-color);\n}\n\n.caret-fill-down {\n\tdisplay: block;\n\tmask: url(${c});\n\t-webkit-mask: url(${c});\n\tmask-size: contain;\n\tbackground-color: var(--primary-color);\n\twidth: 0.8em;\n\theight: 0.8em;\n\tposition: relative;\n\ttop: 0.5em;\n\tborder: none;\n}\n\n.search-input-container {\n\tdisplay: flex;\n\tflex-direction: row;\n\tborder-bottom: 1px solid var(--text1);\n\twidth: inherit;\n\n\tinput {\n\t\tpadding: 0.2em 0 0.5em 0.5em;\n\t\tborder: none;\n\t\tmin-width: var(--searchable-select-min-width);\n\t\tmax-width: var(--searchable-select-max-with);\n\t}\n\n\t#search-input-toggler {\n\t\tpadding: 0.2em 0.5em;\n\t\tbackground-color: var(--primary-bg-color);\n\t}\n}\n\n.dropdown {\n\t/* width is controlled in js to fit parent container's width (see _showDropdown(viewportHeight)) */\n\tposition: absolute;\n\tz-index: var(--z-mapbuttons);\n\tmin-width: var(--searchable-select-min-width);\n\tmax-width: var(--searchable-select-max-with);\n\tbox-shadow: 0px 0px 4px rgba(0, 0, 0, 0.5);\n\t.dropdown-header {\n\t\tcursor: default;\n\t\tbackground-color: var(--secondary-color);\n\t\tcolor: var(--text3);\n\t\theight: 2.5em;\n\t\tpadding: 0.6em;\n\t}\n}\n`,""]),e.exports=s},84459:(e,t,n)=>{var r=n(60359);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},84518:(e,t,n)=>{var r=n(31601),i=n(76314)(r);i.push([e.id,".container {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tmax-width: 33vw;\n\tmin-width: 30em;\n\tfont-size: 0.9rem;\n\toverflow: hidden;\n\tz-index: calc(var(--z-header) + 30);\n\tmargin-bottom: 0.5em;\n\tbox-shadow: 0 2px 4px rgb(0 0 0 / 50%);\n}\n",""]),e.exports=i},84693:(e,t,n)=>{"use strict";n.d(t,{S:()=>o});var r=n(28353),i=n(39400);class o{#Be;#Ve;constructor(e,t){if(!(t instanceof i.Y1))throw new Error("<sourceType> must be a SourceType");if(t&&!o.SupportedVectorSourceTypes.includes(t.name))throw new Error(`Unsupported source type: ${t.name.toString()}`);if(!(0,r.Kg)(e)&&t.name!==i.bu.GEOJSON)throw new Error("<data> must be a String");this.#Be=(0,r.Kg)(e)?e:JSON.stringify(e),this.#Ve=t}get data(){return this.#Be}get sourceType(){return this.#Ve}static get SupportedVectorSourceTypes(){return Object.freeze([i.bu.EWKT,i.bu.GEOJSON,i.bu.GPX,i.bu.KML])}}},85029:(e,t,n)=>{"use strict";var r=n(18410);const{TranslationService:i}=r.z.inject("TranslationService");i.register("iframeProvider",(e=>{switch(e){case"en":return{iframe_non_embedded_hint:"The BayernAtlas Iframe API must be used in an iframe.",iframe_generator_width:"Width",iframe_generator_height:"Height",iframe_generator_clipboard_success:"The HTML code was copied to the clipboard",iframe_generator_clipboard_error:'"Copy to clipboard" is not available',iframe_generator_toggle_label:"Responsive width",iframe_generator_toggle_text:"The map adjusts to the width of your container.",iframe_generator_toggle_title:"Embedded map will expand to fit the width of its container.",iframe_generator_copy_icon:"Copy to clipboard",iframe_activate_map_button:"Activate map",iframe_activate_map_button_title:"Activate map interaction",iframe_view_larger_map_chip:"View in BayernAtlas",iframe_drawTool_label:"Drawing",iframe_drawTool_enable:"Enable the drawing tool",iframe_drawTool_disable:"Disable the drawing tool",iframe_drawTool_symbol:"Point",iframe_drawTool_line:"Line",iframe_drawTool_polygon:"Polygon",iframe_drawTool_cancel:"Cancel",iframe_drawTool_finish:"Finish",iframe_drawTool_delete_point:"Remove point",iframe_drawTool_delete_drawing:"Remove drawing",iframe_drawTool_cancel_title:"Cancel drawing",iframe_drawTool_finish_title:"Finish drawing"};case"de":return{iframe_non_embedded_hint:"Die BayernAtlas Iframe API muss über ein Inlineframe-Element eingebunden werden.",iframe_generator_width:"Breite",iframe_generator_height:"Höhe",iframe_generator_clipboard_success:"Der HTML Code wurde in die Zwischenablage kopiert",iframe_generator_clipboard_error:'"In die Zwischenablage kopieren" steht nicht zur Verfügung',iframe_generator_toggle_label:"Responsive Breite",iframe_generator_toggle_text:"Die Karte passt sich der Breite Ihres Containers an.",iframe_generator_toggle_title:"Eingebettete Karte wird sich erweitern, um sich der Breite Ihres Containers anzupassen.",iframe_generator_copy_icon:"In die Zwischenablage kopieren",iframe_activate_map_button:"Karte aktivieren",iframe_activate_map_button_title:"Karteninteraktion aktivieren",iframe_view_larger_map_chip:"Im BayernAtlas ansehen",iframe_drawTool_label:"Zeichnen",iframe_drawTool_enable:"Zeichnen aktivieren",iframe_drawTool_disable:"Zeichnen deaktivieren",iframe_drawTool_symbol:"Punkt",iframe_drawTool_line:"Linie",iframe_drawTool_polygon:"Polygon",iframe_drawTool_cancel:"Abbrechen",iframe_drawTool_finish:"Fertig",iframe_drawTool_delete_point:"letzten Punkt löschen",iframe_drawTool_delete_drawing:"Zeichnung löschen",iframe_drawTool_cancel_title:"Zeichnung abbrechen",iframe_drawTool_finish_title:"Zeichnung fertigstellen"};default:return{}}}));var o=n(36752),a=n(2277),s=n(99990),c=n(59834),l=n(35558),d=n(96462),u=n.n(d),g=n(34844),h=n(40781),p=n(19366);const m="update_size_width",_="update_size_height",v="update_auto_width",y="update_preview_url",b="update_isPortrait",S="100",f=250,w=2e3;class M extends s.T{#n;#i;#We;constructor(){super({size:[800,600],autoWidth:!1,previewUrl:null,isPortrait:!1});const{TranslationService:e,ShareService:t}=r.z.inject("TranslationService","ShareService");this.#n=e,this.#i=t,this.#We=null}onInitialize(){this.observe((e=>e.media),(e=>this.signal(b,{isPortrait:e.portrait})))}update(e,t,n){switch(e){case m:return{...n,size:[t,n.size[1]]};case _:return{...n,size:[n.size[0],t]};case v:return{...n,autoWidth:t};case y:return{...n,previewUrl:t};case b:return{...n,...t}}}onAfterRender(e){if(e){const e=this.shadowRoot.querySelector("iframe"),t={attributes:!0,childList:!1,subtree:!1};this.#We=new MutationObserver((e=>this.#Ze(e))),this.#We.observe(e,t);const{isPortrait:n}=this.getModel();n&&(this.signal(m,250),this.signal(_,250))}}onDisconnect(){this.#We?.disconnect(),this.#We=null}createView(e){const t=e=>this.#n.translate(e),{size:n,autoWidth:r,previewUrl:i}=e,[a,s]=n,c=e=>f<=e&&e<=w,l=r?S:a;return o.qy`
		<style>${u()}</style>		
        <div class='container'>
			<div class='iframe__controls'>
				<div class='iframe__controls-section'>					
					<div class="iframe__container">							
						<label for="iframe_height" class="control-label">${t("iframe_generator_height")}</label>			
						<input type="range" id="iframe_slider_height" step=10 min=${f} max=${w} .value=${s} @input=${e=>{this.signal(_,parseInt(e.target.value))}}>
						<div class='iframe__input ba-form-element '>
							<input type="number" id="iframe_height" min=${f} max=${w} .value=${s} @input=${e=>{const t=parseInt(e.target.value);c(t)&&this.signal(_,t)}}></input>
							<i class="bar"></i>
							<span>
								 px		
							</span>
							</div>
					</div>
					${r?o.qy` <div class="iframe__container iframe__container-width">
						<label for="iframe_width" class="control-label">${t("iframe_generator_width")}</label>
						<div class="iframe__input ">
							<div class="iframe__input width_placeholder">${S}</div>
							<span class="width_placeholder-sub"> % </span>
						</div>
					</div>`:o.qy`
					<div class="iframe__container iframe__container-width">		
						<label for="iframe_width" class="control-label">${t("iframe_generator_width")}</label>							
						<input type="range" id="iframe_slider_width" step=10 min=${f} max=${w} .value=${a} @input=${e=>{this.signal(m,parseInt(e.target.value))}}>
						<div class='iframe__input ba-form-element'>
							<input type="number" id="iframe_width" max=${w} .value=${a} min=${f} @input=${e=>{const t=parseInt(e.target.value);c(t)&&this.signal(m,t)}}></input>
							<i class="bar"></i>
							<span>
								px		
							</span>
						</div>
					</div>`}
					<div  class="iframe__container">
						<div class='iframe__toggle'>
							<div class='iframe__toggle_text'>${t("iframe_generator_toggle_label")}
							</div>
						</div>
						<ba-switch 
							id='toggleAutoWidth'  
							class='iframe__toggle_sub-text' 
							.title=${t("iframe_generator_toggle_title")}  
							@toggle=${e=>{this.signal(v,e.detail.checked)}}>
							<span slot="before">${t("iframe_generator_toggle_text")}</span>
						</ba-switch>
					</div>					
					<div class='iframe__controls-section'>
						<div class='iframe__code'>${this.#Qe(l,s,i)}
						</div>
					</div>
				</div>
			</div>
			<div class='iframe__preview'>${this.#qe(l,s)}
			</div>
		</div>
        `}#Ze(e){for(const t of e)"attributes"===t.type&&t.attributeName===g.oO&&this.signal(y,(0,p.dR)(t.target.getAttribute(g.oO),this.#Ke()))}#Ke(){const e={};return e[h.h.EC_MAP_ACTIVATION]=!0,e[h.h.EC_LINK_TO_APP]=!0,e}#qe(e,t){const n=this.#i.encodeState(this.#Ke(),[c.g.EMBED]);return o.qy` <div class="iframe__content">
			<iframe
				data-iframe-encoded-state
				src=${n}
				width=${e===S?S+"%":e+"px"}
				height=${t+"px"}
				loading="lazy"
				referrerpolicy="no-referrer-when-downgrade"
			></iframe>
		</div>`}#Qe(e,t,n){const r=()=>`<iframe src=${n||this.#i.encodeState(this.#Ke(),[c.g.EMBED])} width='${e===S?S+"%":e+"px"}' height='${t+"px"}' loading='lazy' frameborder='0' style='border:0' role='application'></iframe>`;return o.qy`<textarea class="iframe__code_string" id="iframe_code" name="iframe_code" .value=${r()} readonly></textarea>
			<ba-icon
				class="iframe__copy_icon"
				id="iframe_code_copy"
				.icon="${l}"
				.title=${(()=>this.#n.translate("iframe_generator_copy_icon"))()}
				.size=${2}
				@click=${async()=>this.#Xe(r())}
			>
			</ba-icon>`}async#Xe(e){try{await this.#i.copyToClipboard(e),(0,a.L)(`${this.#n.translate("iframe_generator_clipboard_success")}`,a.A.INFO)}catch(e){console.warn("Clipboard API not available"),(0,a.L)(`${this.#n.translate("iframe_generator_clipboard_error")}`,a.A.WARN)}}static get tag(){return"ba-iframe-generator"}}class I extends s.T{constructor(){super();const{EnvironmentService:e,TranslationService:t}=r.z.inject("EnvironmentService","TranslationService");this._environmentService=e,this._translationService=t}onWindowLoad(){this._environmentService.isEmbeddedAsIframe()&&this._environmentService.getWindow().location===this._environmentService.getWindow().parent.location&&(document.body.innerHTML=`<div style="text-align: center; color:#099dda; padding: 20px">${(e=>this._translationService.translate(e))("iframe_non_embedded_hint")}</div>`)}isRenderingSkipped(){return!0}static get tag(){return"ba-nonembedded-hint"}}var A=n(82494),L=n(69716),E=n(16438),T=n.n(E);class x extends s.T{constructor(){super();const{EnvironmentService:e,TranslationService:t}=r.z.inject("EnvironmentService","TranslationService");this._environmentService=e,this._translationService=t}_addInertAttr(){const e=(0,g.Ne)(document.querySelector(L._.tag)??this,"#ol-map");e[0]&&e[0].setAttribute("inert","")}_removeInertAttr(){const e=(0,g.Ne)(document.querySelector(L._.tag)??this,"#ol-map");e[0]&&(e[0].removeAttribute("inert"),e[0].focus())}onInitialize(){if(this._isVisible()){const e=()=>`\n\t\t\t\tbody *:not(\n\t\t\t\t${x.tag},\n\t\t\t\t${L._.tag},\n\t\t\t\t${A.w.tag}\n\t\t\t\t),${A.w.tag}::part(scale) {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\t\t\n\t\t\t\t\t\n\t\t\t\tba-footer{\n\t\t\t\t\t--z-mapbuttons: calc(var(--z-disableall) + 1);\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t`;if(!document.getElementById(x.STYLE_ID)){const t=document.createElement("style");t.innerHTML=e(),t.id=x.STYLE_ID,document.head.appendChild(t)}this._addInertAttr()}}createView(){const e=e=>this._translationService.translate(e);return o.qy`
			<style>
				${T()}
			</style>
			<div id="background" class="active-map__background">
				<div class="active-map__button">
					<ba-button
						.type=${"primary"}
						.label=${e("iframe_activate_map_button")}
						.title=${e("iframe_activate_map_button_title")}
						@click=${()=>{document.getElementById(x.STYLE_ID).remove(),this.shadowRoot.getElementById("background").classList.add("hide"),this._removeInertAttr()}}
					></ba-button>
				</div>
			</div>
		`}isRenderingSkipped(){return!this._isVisible()}_isVisible(){return!!this._environmentService.getQueryParams().get(h.h.EC_MAP_ACTIVATION)&&"false"!==this._environmentService.getQueryParams().get(h.h.EC_MAP_ACTIVATION)}static get tag(){return"ba-activate-map-button"}static get STYLE_ID(){return"activate_map_commons_kkfjrutmfjhwwww"}}const D="data:image/svg+xml;base64,PCEtLUdlbmVyYXRlZCBieSBJY29Nb29uLmlvLS0+PCEtLU1JVCBMaWNlbnNlLS0+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiI+PHBhdGggZD0iTTQuMzQzLS4wMSAyLjMwNSAyLjM2NS43NSAyLjM4NmwuNDIgMi4xNjUuNzc4LS43OTkgMi4yMDcgMS4wOTMuMTg5IDEuODQ5Ljk2Ny45NDYuMTA1IDEuNTc2LTEuNzAyIDEuMzQ1LjM3OCAyLjkyMS0xLjQ1LjcxNSAxLjgyNyAxLjU0NC43NTgtMS41ODYgMS44MDcuODYyIDMuNzYyLTEuNTEzIDIuNDUxIDEuMTgyLTEuMDU1LTMuMDI0IDIuMjQtMS4zNDIuMDIxLS44MDkgMS4xMTQtLjAyMVY4LjMxM2wtMi43MzItMi4wNDktMS4zNDUtMi4wNy4xNjgtMS4xOTgtMS41NTUtMS44MDdIOC45ODlMOC4zNjkuMzkgNy43NyAxLjM5OWwtLjk2Ny0uMjk0LS44MTkuNzE1eiIvPjwvc3ZnPgo=";var C=n(25373),N=n.n(C);const k="update_state_for_encoding";class z extends s.T{#Je;constructor(){super({href:""});const{EnvironmentService:e,TranslationService:t,ShareService:n}=r.z.inject("EnvironmentService","TranslationService","ShareService");this._translationService=t,this._environmentService=e,this._shareService=n}onInitialize(){this.#Je=this._environmentService.getQueryParams().get(h.h.EC_LINK_TO_APP)&&"false"!==this._environmentService.getQueryParams().get(h.h.EC_LINK_TO_APP),this.observe((e=>e.stateForEncoding.changed),(()=>{const e=this._shareService.encodeState();this.signal(k,e)}))}update(e,t,n){if(e===k)return{...n,href:t}}createView(e){if(this.#Je&&this._environmentService.isEmbedded()){const{href:t}=e,n=e=>this._translationService.translate(e),r=`.chips__icon {\t\n\t\t\t\tmask-size:cover;\n\t\t\t\tmask : url("${D}");\t\t\t\n\t\t\t\t-webkit-mask-image : url("${D}");\t\t\t\n\t\t\t\t-webkit-mask-size:cover;\t\t\t\n\t\t\t}`;return o.qy` <style>
					${r}
						${N()}
				</style>
				<a class="chips__button" aria-label="${n("iframe_view_larger_map_chip")}" href=${t} target="_blank">
					<span class="chips__icon"></span>
					<span class="chips__button-text">${n("iframe_view_larger_map_chip")}</span>
				</a>`}return o.s6}static get tag(){return"ba-view-larger-map-chip"}}var R=n(6683),j=n(64935),O=n(39447);const P="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmkteC1sZyI+PHBhdGggZD0iTTEuMjkzIDEuMjkzYTEgMSAwIDAgMSAxLjQxNCAwTDggNi41ODZsNS4yOTMtNS4yOTNhMSAxIDAgMSAxIDEuNDE0IDEuNDE0TDkuNDE0IDhsNS4yOTMgNS4yOTNhMSAxIDAgMCAxLTEuNDE0IDEuNDE0TDggOS40MTRsLTUuMjkzIDUuMjkzYTEgMSAwIDAgMS0xLjQxNC0xLjQxNEw2LjU4NiA4IDEuMjkzIDIuNzA3YTEgMSAwIDAgMSAwLTEuNDE0Ii8+PC9zdmc+Cg==";var $=n(47963),F=n.n($),G=n(79545),U=n(65394);const Y="update",H="update_tools",B="update_visible_tools";class V extends s.T{#et=!0;constructor(){super({active:!1,type:null,mode:null,validGeometry:null,tools:null});const{TranslationService:e,EnvironmentService:t}=r.z.inject("TranslationService","EnvironmentService");this._translationService=e,this._environmentService=t,this.signal(H,this._buildTools())}onInitialize(){const e=this._environmentService.getQueryParams().get(h.h.EC_DRAW_TOOL);this.#et=!e,this.signal(B,e?e.split(",").map((e=>e.toLowerCase())):[]),this.observe((e=>e.draw),(e=>this.signal(Y,e)))}update(e,t,n){const r=(e,t)=>e.map((e=>({...e,active:e.name===t})));switch(e){case Y:return{...n,active:!!t.active&&t.active,type:t.type?t.type:null,mode:t.mode?t.mode:null,validGeometry:t.validGeometry?t.validGeometry:null,tools:r(n.tools,t.type)};case H:return{...n,tools:t};case B:return{...n,tools:(i=n.tools,o=t,a=o,i.some((e=>a.includes(e.name)))?i.map((e=>({...e,visible:o.includes(e.name)}))):i)}}var i,o,a}isRenderingSkipped(){return this.#et}createView(e){const{active:t,tools:n}=e;this._showActive(n);const r=e=>this._translationService.translate(e),i=this._getIcons(e);return this._environmentService.isEmbedded()?o.qy`
			<style>
				${F()}
			</style>
			<div class="draw-tool">
				<div class="draw-tool__content ${t?"draw-tool__enable":"draw-tool__disable"}">
					<div class="draw-tool__toggle">
						<ba-button
							class="draw-tool__enable-button"
							.type=${"primary"}
							.icon=${"data:image/svg+xml;base64,PCEtLUdlbmVyYXRlZCBieSBJY29Nb29uLmlvLS0+PCEtLU1JVCBMaWNlbnNlLS0+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDI0IiBoZWlnaHQ9IjEwMjQiPjxwYXRoIGZpbGw9IiMwOTlkZGMiIGQ9Im00Mi41MjggOTcwLjAzMyAxMjEuNTQ1LTMwNi40MjlMODAzLjk0MSA1OC4yNjdsMTkzLjgwMSAxNzIuNzY1LTYzNi43OSA2MTIuODU0eiIgb3BhY2l0eT0iLjIiLz48cGF0aCBmaWxsPSIjMDk5ZGRhIiBkPSJNNzkwLjg4OCAzMS42NDRjLTYuNDA2IDAtMTIuMjE5IDIuNDc4LTE2LjM4IDYuNTc5bC02MTkuNTIgNjEwLjU2MmMtMi4yMTMgMi4yMjgtNC4wMiA0LjY5OS01LjE4MSA3LjU2TDI2LjA0MiA5NjEuNDE0Yy0xLjA5NiAyLjYxLTEuNjggNS42MjUtMS42OCA4LjU0MSAwIDEyLjM4NCAxMC4xNjQgMjIuNDAxIDIyLjk2MiAyMi40MDEgMy4wNjggMCA1Ljk2OC0uNTM3IDguNC0xLjUzOWwuMTQxLS4xNDUgMzA4LjI5MS0xMjEuMzhhNy44IDcuOCAwIDAgMSAxLjYyNC0uODIxbC4wNTYtLjAxOWEyMy4zIDIzLjMgMCAwIDAgNy41Ni00Ljg5OXYuMTQ1bDYxOS42NjEtNjEwLjU2M2M0LjE5OS00LjEzNyA2LjU3OS05LjYwOCA2LjU3OS0xNS44MjJzLTIuNDMxLTExLjg2OS02LjU3OS0xNS45Nkw4MDcuMTI5IDM4LjIyN2MtNC4yMTItNC4xNS05LjgzMy02LjU3OS0xNi4yNDItNi41Nzl6bS0uNTU2IDU3LjU0M2E4LjA1IDguMDUgMCAwIDEgNi4yOTkgMi4zNzhsLjAwMS4wMDFMOTM4LjU5OCAyMzEuNTdhOC4wNSA4LjA1IDAgMCAxIDIuMzIyIDUuNjcxYzAgMi4yOC0uOTQ1IDQuMzQxLTIuNDY0IDUuODA4bC0uMDAyLjAwMi04MC4wODIgNzguODIyYy0xLjQ1MSAxLjM5Ni0zLjQyNSAyLjI1NC01LjYwMSAyLjI1NHMtNC4xNS0uODYxLTUuNjAzLTIuMjU3bC4wMDIuMDAyLTE0Mi4xMDEtMTM5Ljg2NmMtMS40NzctMS40NjYtMi4zOTMtMy40OTYtMi4zOTMtNS43MzlzLjkxNi00LjI3NiAyLjM5My01LjczOGwuMDAxLS4wMDEgODAuMjIzLTc4Ljk2M2E4LjA1IDguMDUgMCAwIDEgNS4wMS0yLjM3N3pNNjY2LjI4NSAyMTEuMjY5YTguMDUgOC4wNSAwIDAgMSA2LjE1OSAyLjM3OGwuMDAxLjAwMSAxNDIuMTA0IDE0MC4wMDRjMS40NzcgMS40NjYgMi4zOTMgMy40OTYgMi4zOTMgNS43MzlzLS45MTYgNC4yNzYtMi4zOTMgNS43MzhsLS4wMDEuMDAxLTQwMi42NTQgMzk2Ljc3M2E4LjA1IDguMDUgMCAwIDEtNS41OTQgMi4zNzloLTE4LjI0OWE4LjA3NiA4LjA3NiAwIDAgMS04LjA3Ny04LjA3N3YtLjA0My4wMDItMzAuNTIyYzAtMTIuNDI4LTEwLjAyMy0yMi40MDEtMjIuODIxLTIyLjQwMWgtMzEuMTIxYTguMDc2IDguMDc2IDAgMCAxLTguMDc3LTguMDc3di0uMDQzLjAwMi0zMC41MjJjMC0xMi40MjgtMTAuMDIzLTIyLjQwMS0yMi44MjEtMjIuNDAxaC0zMC45ODNhOC4wNzYgOC4wNzYgMCAwIDEtOC4wNzctOC4wNzd2LS4wNDMuMDAyLTE3LjkyMmE4LjA1IDguMDUgMCAwIDEgMi41MTYtNS43MzVsLjAwNC0uMDA0IDQwMi42NTMtMzk2Ljc3M2E4LjA1IDguMDUgMCAwIDEgNS4wMS0yLjM3N2wuMDMtLjAwMnpNMjA0LjI3IDY2Ny4xMjVhOC4wOCA4LjA4IDAgMCAxIDcuMTE4IDQuNDM0bC4wMjIuMDQ1LjE0MS4yNzljLjA4NS4xNzcuMTc5LjQwOC4yNjQuNjQ2bC4wMTkuMDU2YzMuMjc1IDguNDMxIDExLjM5NiAxNC40MjEgMjEuMjgyIDE0LjQyMWgzMS4xMjFhOC4wNzYgOC4wNzYgMCAwIDEgOC4wNzcgOC4wNzd2LjA0MS0uMDAyIDMwLjUyMmMwIDEyLjQyOCAxMC4wMjMgMjIuNDAxIDIyLjgyMSAyMi40MDFoMzAuOTgzYTguMDc2IDguMDc2IDAgMCAxIDguMDc3IDguMDc3di4wNDMtLjAwMiAzMC41MjJjMCA5LjU1NyA1Ljk3NCAxNy42NjMgMTQuODQxIDIxIDMuMTIzIDEuMTY2IDUuMzA4IDQuMTIxIDUuMzA4IDcuNTg5YTguMDUgOC4wNSAwIDAgMS0yLjM2NyA1LjcxM2wtNi41NzkgNi41NzlhOC4xIDguMSAwIDAgMS0yLjc0NCAxLjgwMWwtLjA1NS4wMi0yMzYuNzQ3IDkzLjI0M2E4IDggMCAwIDEtMi45MDEuNTM5IDguMDc2IDguMDc2IDAgMCAxLTguMDc3LTguMDc3YzAtMS4xMTguMjI3LTIuMTg1LjYzNy0zLjE1MmwtLjAyMS4wNTIgOTQuNjQ0LTIzMy4yNDdhOC4xIDguMSAwIDAgMSAxLjY4NC0yLjY2NWw2LjU3NS02LjU3NWE4LjA2IDguMDYgMCAwIDEgNS44ODgtMi4zNzloLS4wMDh6Ii8+PC9zdmc+Cg=="}
							.label=${r("iframe_drawTool_enable")}
							@click=${()=>(0,G.i)(U.S.DRAW)}
						></ba-button>
						<ba-icon id="close-icon" class='tool-container__close-button draw-tool__disable-button' .icon='${P}' .size=${1.6} .color=${"var(--text2)"} .color_hover=${"var(--text2)"} @click=${()=>(0,G.i)(null)}>						
					</div>
					<div class="draw-tool-container">
						<div class="ba-tool-container__title">${r("iframe_drawTool_label")}</div>
						<div class="draw-tool__buttons">
							${(0,j.u)(n.filter((e=>e.visible)),(e=>e.id),(e=>(e=>{const n={"is-active":e.active,"is-enabled":t};return o.qy`
				<button
					id=${e.name+"-button"}
					data-test-id
					class="draw-tool__button ${(0,R.H)(n)}"
					?disabled=${!t}
					title=${e.title}
					@click=${()=>{e.active?e.deactivate():e.activate()}}
				>
					<div class="draw-tool__background"></div>
					<div class="draw-tool__icon ${e.icon}"></div>
					<div class="draw-tool__button-text">${e.title}</div>
				</button>
			`})(e)))}
						</div>
						<div class="draw-tool__actions">${i}</div>
					</div>
				</div>
			</div>
		`:o.s6}_buildTools(){const e=e=>this._translationService.translate(e);return[{id:1,name:"point",active:!1,title:e("iframe_drawTool_symbol"),icon:"symbol",visible:!0,activate:()=>(0,O.dv)("point"),deactivate:()=>(0,O.cL)()},{id:2,name:"line",active:!1,title:e("iframe_drawTool_line"),icon:"line",visible:!0,activate:()=>(0,O.dv)("line"),deactivate:()=>(0,O.cL)()},{id:3,name:"polygon",active:!1,title:e("iframe_drawTool_polygon"),icon:"polygon",visible:!0,activate:()=>(0,O.dv)("polygon"),deactivate:()=>(0,O.cL)()}]}_getActiveTool(e){return e.tools.find((e=>e.active))}_showActive(e){e.forEach((e=>{const t=this._root.querySelector(`#${e.name}-button`);t&&(e.active?t.classList.add("is-active"):t.classList.remove("is-active"))}))}_getIcons(e){const t=e=>this._translationService.translate(e),{mode:n,validGeometry:r}=e,i=this._getActiveTool(e),a=i?i.name:"noTool",s=["draw","modify"].includes(n),c="draw"===n&&["polygon","line"].includes(a)&&r;return(()=>{const e={finish:{id:"finish",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmktY2hlY2stbGciPjwhLS1NSVQgTGljZW5zZS0tPjxwYXRoIGQ9Ik0xMy40ODUgMS40MzFhMS40NzMgMS40NzMgMCAwIDEgMi4xMDQgMi4wNjJsLTcuODQgOS44MDFhMS40NzMgMS40NzMgMCAwIDEtMi4xMi4wNEwuNDMxIDguMTM4YTEuNDczIDEuNDczIDAgMCAxIDIuMDg0LTIuMDgzbDQuMTExIDQuMTEyIDYuODItOC42OS4wNC0uMDQ1eiIvPjwvc3ZnPgo=",label:t("iframe_drawTool_finish"),title:t("iframe_drawTool_finish_title"),onClick:()=>(0,O.O9)(),disabled:"draw"!==n},cancel:{id:"cancel",icon:P,label:t("iframe_drawTool_cancel"),title:t("iframe_drawTool_cancel_title"),onClick:()=>(0,O.cL)(),disabled:"draw"!==n},undo:{id:"undo",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmktYXJyb3ctY291bnRlcmNsb2Nrd2lzZSI+PCEtLU1JVCBMaWNlbnNlLS0+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNOCAzYTUgNSAwIDEgMS00LjU0NiAyLjkxNC41LjUgMCAwIDAtLjkwOC0uNDE3QTYgNiAwIDEgMCA4IDJ6Ii8+PHBhdGggZD0iTTggNC40NjZWLjUzNGEuMjUuMjUgMCAwIDAtLjQxLS4xOTJMNS4yMyAyLjMwOGEuMjUuMjUgMCAwIDAgMCAuMzg0bDIuMzYgMS45NjZBLjI1LjI1IDAgMCAwIDggNC40NjYiLz48L3N2Zz4K",label:t("iframe_drawTool_delete_point"),title:null,onClick:()=>(0,O.TF)(),disabled:!s},remove:{id:"remove",icon:P,label:t("iframe_drawTool_delete_drawing"),title:null,onClick:()=>(0,O.TF)(),disabled:!s}};return[r?e.finish:e.cancel,c?e.undo:e.remove]})().map((e=>((e,t,n,r,i)=>{const a={"is-disabled":i};return o.qy`<ba-button
				id=${e+"_icon"}
				class=${(0,R.H)(a)}
				.title=${n??""}
				.label=${t}
				.disabled=${i}
				@click=${r}
			></ba-button>`})(e.id,e.label,e.title,e.onClick,e.disabled)))}static get tag(){return"ba-draw-tool"}}var W=n(63690),Z=n.n(W);const Q="update_modal_data";class q extends s.T{constructor(){super({content:null,active:!1});const{EnvironmentService:e}=r.z.inject("EnvironmentService");this._environmentService=e}onInitialize(){this.observe((e=>e.iframeContainer),(e=>this.signal(Q,e)))}update(e,t,n){if(e===Q)return{...n,content:t.content,active:t.active}}createView(e){const{active:t,content:n}=e;return t?o.qy`
				<style>
					${Z()}
				</style>
				<div class="container">${n}</div>
			`:o.s6}isRenderingSkipped(){return!this._environmentService.isEmbedded()}static get tag(){return"ba-iframe-container"}}window.customElements.get(M.tag)||window.customElements.define(M.tag,M),window.customElements.get(I.tag)||window.customElements.define(I.tag,I),window.customElements.get(x.tag)||window.customElements.define(x.tag,x),window.customElements.get(z.tag)||window.customElements.define(z.tag,z),window.customElements.get(V.tag)||window.customElements.define(V.tag,V),window.customElements.get(q.tag)||window.customElements.define(q.tag,q)},85099:(e,t,n)=>{var r=n(31601),i=n(76314)(r);i.push([e.id,".dropzone {\n\tz-index: -1;\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: none;\n\tbackground-color: black;\n\topacity: 0.7;\n\tborder: 5px dashed #ccc;\n\tjustify-content: center;\n\talign-items: center;\n\tfont-weight: bold;\n\tfont-size: 3rem;\n}\n\n.is_active {\n\tdisplay: flex;\n\tz-index: var(--z-dragndrop);\n}\n",""]),e.exports=i},85114:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMzAuNCIgaGVpZ2h0PSIyMjcuMiI+PGVsbGlwc2UgY3g9IjExNC4xNzgiIGN5PSIxMTUuOTA4IiByeD0iNTguMzg2IiByeT0iNTcuMjM5IiBzdHlsZT0ib3BhY2l0eTouMTU1O2ZpbGw6IzM1OTljMztmaWxsLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6MTUuNzE2MztwYWludC1vcmRlcjpzdHJva2UgZmlsbCBtYXJrZXJzIi8+PGVsbGlwc2UgY3g9IjExMy43OCIgY3k9IjExNS4xMzEiIHJ4PSI3Ni4wMTQiIHJ5PSI3NC41MiIgc3R5bGU9Im9wYWNpdHk6LjE1NTtmaWxsOiMzNTk5YzM7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlLXdpZHRoOjIwLjQ2MTQ7cGFpbnQtb3JkZXI6c3Ryb2tlIGZpbGwgbWFya2VycyIvPjxlbGxpcHNlIGN4PSIxMTMuNjcyIiBjeT0iMTE1LjUwNSIgcng9IjkyLjk2NCIgcnk9IjkxLjEzNyIgc3R5bGU9Im9wYWNpdHk6LjE1NTtmaWxsOiMzNTk5YzM7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlLXdpZHRoOjI1LjAyMzk7cGFpbnQtb3JkZXI6c3Ryb2tlIGZpbGwgbWFya2VycyIvPjxjaXJjbGUgY3g9IjExMy42NzYiIGN5PSIxMTMuODI4IiByPSI0MC4zMjciIHN0eWxlPSJmaWxsOiNmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjEuMzQ2MTk7c3Ryb2tlLWxpbmVjYXA6c3F1YXJlO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxO3BhaW50LW9yZGVyOnN0cm9rZSBmaWxsIG1hcmtlcnMiLz48Y2lyY2xlIGN4PSIxMTMuOTU1IiBjeT0iMTE0LjE5NCIgcj0iMzQuNjUzIiBzdHlsZT0iZmlsbDojMzY5ZGM5O2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoxLjE1Njg7c3Ryb2tlLWxpbmVjYXA6c3F1YXJlO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxO3BhaW50LW9yZGVyOnN0cm9rZSBmaWxsIG1hcmtlcnMiLz48cGF0aCBkPSJNOC41IDQuNDY2VjEuNzVhMS43NSAxLjc1IDAgMSAwLTMuNSAwdjUuMzRsLTEuMi4yNGExLjUgMS41IDAgMCAwLTEuMTk2IDEuNjM2bC4zNDUgMy4xMDZhMi41IDIuNSAwIDAgMCAuNDA1IDEuMTFsMS40MzMgMi4xNUExLjUgMS41IDAgMCAwIDYuMDM1IDE2aDYuMzg1YTEuNSAxLjUgMCAwIDAgMS4zMDItLjc1NmwxLjM5NS0yLjQ0MWEzLjUgMy41IDAgMCAwIC40NDQtMS4zODlsLjI3MS0yLjcxNWEyIDIgMCAwIDAtMS45OS0yLjE5OWgtLjU4MWE1IDUgMCAwIDAtLjE5NS0uMjQ4Yy0uMTkxLS4yMjktLjUxLS41NjgtLjg4LS43MTYtLjM2NC0uMTQ2LS44NDYtLjEzMi0xLjE1OC0uMTA4bC0uMTMyLjAxMmExLjI2IDEuMjYgMCAwIDAtLjU2LS42NDIgMi42IDIuNiAwIDAgMC0uNzM4LS4yODhjLS4zMS0uMDYyLS43MzktLjA1OC0xLjA1LS4wNDZaIiBzdHlsZT0iZmlsbDojZmZmIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4Mi4zNzQgMTE3LjU4KXNjYWxlKDQuOTk2MzMpIi8+PHBhdGggZD0iTTYuNzUgMWEuNzUuNzUgMCAwIDEgLjc1Ljc1VjhhLjUuNSAwIDAgMCAxIDBWNS40NjdsLjA4Ni0uMDA0Yy4zMTctLjAxMi42MzctLjAwOC44MTYuMDI3LjEzNC4wMjcuMjk0LjA5Ni40NDguMTgyLjA3Ny4wNDIuMTUuMTQ3LjE1LjMxNFY4YS41LjUgMCAxIDAgMSAwVjYuNDM1bC4xMDYtLjAxYy4zMTYtLjAyNC41ODQtLjAxLjcwOC4wNC4xMTguMDQ2LjMuMjA3LjQ4Ni40My4wODEuMDk2LjE1LjE5LjIuMjU5VjguNWEuNS41IDAgMCAwIDEgMHYtMWguMzQyYTEgMSAwIDAgMSAuOTk1IDEuMWwtLjI3MSAyLjcxNWEyLjUgMi41IDAgMCAxLS4zMTcuOTkxbC0xLjM5NSAyLjQ0MmEuNS41IDAgMCAxLS40MzQuMjUySDYuMDM1YS41LjUgMCAwIDEtLjQxNi0uMjIzbC0xLjQzMy0yLjE1YTEuNSAxLjUgMCAwIDEtLjI0My0uNjY2bC0uMzQ1LTMuMTA1YS41LjUgMCAwIDEgLjM5OS0uNTQ2TDUgOC4xMVY5YS41LjUgMCAwIDAgMSAwVjEuNzVBLjc1Ljc1IDAgMCAxIDYuNzUgMU04LjUgNC40NjZWMS43NWExLjc1IDEuNzUgMCAxIDAtMy41IDB2NS4zNGwtMS4yLjI0YTEuNSAxLjUgMCAwIDAtMS4xOTYgMS42MzZsLjM0NSAzLjEwNmEyLjUgMi41IDAgMCAwIC40MDUgMS4xMWwxLjQzMyAyLjE1QTEuNSAxLjUgMCAwIDAgNi4wMzUgMTZoNi4zODVhMS41IDEuNSAwIDAgMCAxLjMwMi0uNzU2bDEuMzk1LTIuNDQxYTMuNSAzLjUgMCAwIDAgLjQ0NC0xLjM4OWwuMjcxLTIuNzE1YTIgMiAwIDAgMC0xLjk5LTIuMTk5aC0uNTgxYTUgNSAwIDAgMC0uMTk1LS4yNDhjLS4xOTEtLjIyOS0uNTEtLjU2OC0uODgtLjcxNi0uMzY0LS4xNDYtLjg0Ni0uMTMyLTEuMTU4LS4xMDhsLS4xMzIuMDEyYTEuMjYgMS4yNiAwIDAgMC0uNTYtLjY0MiAyLjYgMi42IDAgMCAwLS43MzgtLjI4OGMtLjMxLS4wNjItLjczOS0uMDU4LTEuMDUtLjA0NlptMi4wOTQgMi4wMjUiIHN0eWxlPSJmaWxsOmN1cnJlbnRDb2xvciIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzguNDM0IDExMi43OTQpc2NhbGUoNS41MTc2NikiLz48L3N2Zz48IS0tTUlUIExpY2Vuc2UtLT4K"},85356:(e,t,n)=>{var r=n(71912);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},85919:(e,t,n)=>{"use strict";n.d(t,{S:()=>c});var r=n(36752),i=n(99990),o=n(26492),a=n.n(o);const s="update_disabled";class c extends i.T{constructor(e={}){if(super({...e,active:!1}),this.constructor===c)throw new TypeError("Can not construct abstract class.")}update(e,t,n){if(e===s)return{...n,active:t}}defaultCss(){return r.qy`
			${super.defaultCss()}
			<style>
				${a()}
			</style>
		`}setActive(e){this.signal(s,e)}isActive(){return this.getModel().active}}},86407:(e,t,n)=>{"use strict";n.d(t,{ak:()=>o,wt:()=>r});const r="topics/topicsContentPane/index",i={index:0},o=(e=i,t)=>{const{type:n,payload:o}=t;return n===r?{...e,index:o}:e}},86731:(e,t,n)=>{"use strict";n.d(t,{iT:()=>o,k7:()=>r});const r="modal/open-close",i={data:null,active:!1,currentStep:0,steps:1},o=(e=i,t)=>{const{type:n,payload:o}=t;switch(n){case r:return{...e,data:o,active:!!o,currentStep:o?e.currentStep:0,steps:o?o.options.steps:1};case"modal/incrementStep":return{...e,currentStep:e.currentStep<e.steps-1?e.currentStep+1:e.steps-1};case"modal/decrementStep":return{...e,currentStep:e.currentStep>0?e.currentStep-1:0}}return e}},87037:(e,t,n)=>{"use strict";var r=n(18410);const{TranslationService:i}=r.z.inject("TranslationService");i.register("uiThemeProvider",(e=>{switch(e){case"en":return{uiTheme_toggle_tooltip_dark:"Disable contrast mode",uiTheme_toggle_tooltip_light:"Enable contrast mode"};case"de":return{uiTheme_toggle_tooltip_dark:"Kontrastmodus deaktivieren",uiTheme_toggle_tooltip_light:"Kontrastmodus aktivieren"};default:return{}}}));var o=n(99990);class a extends o.T{#s;constructor(){super();const{EnvironmentService:e}=r.z.inject("EnvironmentService");this.#s=e}onInitialize(){this.observe((e=>e.media.darkSchema),(e=>this.#tt(e)))}#tt(e){const t=e?"dark-theme":"light-theme",n=e?"light-theme":"dark-theme";this.#s.getWindow().document.body.classList.add(t),this.#s.getWindow().document.body.classList.remove(n)}isRenderingSkipped(){return!0}static get tag(){return"ba-theme-provider"}}window.customElements.get(a.tag)||window.customElements.define(a.tag,a)},87093:(e,t,n)=>{var r=n(38745);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},87542:(e,t,n)=>{var r=n(31826);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},88016:(e,t,n)=>{var r=n(31601),i=n(76314)(r);i.push([e.id,".content {\n\tlist-style-type: none;\n\tmargin: 0;\n\tfont-size: 1rem;\n\tpadding: 0.3em 0 0.6em 0;\n}\n\n.content li {\n\tpadding-bottom: 0.3em;\n\tdisplay: flex;\n\tjustify-content: flex-start;\n}\n\n.content li .label {\n\tmin-width: 7em;\n\tmargin: auto;\n}\n\n.content li .coordinate {\n\tflex-grow: 4;\n\tmargin: auto;\n}\n\n.content li .icon {\n\tpadding-left: 1em;\n\tmargin: auto;\n}\n\n.content .single_row {\n\tdisplay: flex;\n\tfont-size: 0.8rem;\n}\n\n.content .single_row .label {\n\tmin-width: 7em;\n\tmargin: auto;\n}\n\n.content .single_row select {\n\twidth: 6em;\n\tmargin: auto;\n\tmargin-right: 1em;\n}\n.content .single_row .coordinate {\n\tflex-grow: 4;\n\tmargin: auto;\n}\n\n.content .single_row .icon {\n\tpadding-left: 1em;\n\tmargin: auto;\n}\n\n.select-cr {\n\tfont-size: 0.8rem;\n}\n",""]),e.exports=i},89707:(e,t,n)=>{"use strict";n.d(t,{E0:()=>s,EI:()=>h,Ek:()=>y,I7:()=>d,Nr:()=>_,VE:()=>g,Yz:()=>b,e5:()=>p,kk:()=>u,lr:()=>c,m6:()=>m,rs:()=>S,ux:()=>v});var r=n(14629),i=n(18410),o=n(94447),a=n(28353);const s=Object.freeze({NOT_SET:"b",LEFT:"l",RIGHT:"r"}),c=Object.freeze({OK:"ok",LOADING:"loading",INCOMPLETE_DATA:"incomplete_data",ERROR:"error"}),l=()=>{const{StoreService:e}=i.z.inject("StoreService");return e.getStore()},d=(e,t={})=>{const{swipeAlignment:n,hidden:i,alwaysTop:o,filter:s,updateInterval:c,...d}=t,u={};i&&(u.hidden=i),o&&(u.alwaysTop=o),n&&(u.swipeAlignment=n),((0,a.Kg)(s)||null===s)&&(u.filter=s),((0,a.Et)(c)||null===c)&&(u.updateInterval=c),l().dispatch({type:r.MJ,payload:{id:e,properties:d,constraints:u}})},u=(e,t,n=!1)=>{l().dispatch({type:r.z_,payload:{id:e,props:t,replace:n}})},g=(e,t={})=>{l().dispatch({type:r.dN,payload:{id:e,properties:t}})},h=(e,t={})=>{l().getState().layers.active.some((n=>n.geoResourceId===(t.geoResourceId??e)))||g(e,t)},p=e=>{l().dispatch({type:r.ZS,payload:e})},m=(e=[],t=!1)=>{l().dispatch({type:r.Qw,payload:{layerOptions:[...e],restoreHiddenLayers:t}})},_=e=>{l().getState().layers.active.forEach((t=>{t.geoResourceId===e&&p(t.id)}))},v=()=>{l().dispatch({type:r.mg,payload:!0})},y=e=>{l().dispatch({type:r.bW,payload:e instanceof o.q9?e.id:e})},b=()=>{l().dispatch({type:r.Gw,payload:null})},S=()=>{l().dispatch({type:r.zQ,payload:null})}},90061:(e,t,n)=>{var r=n(60025);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},90374:(e,t,n)=>{var r=n(53290);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},90996:(e,t,n)=>{var r=n(66032);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},91875:(e,t,n)=>{"use strict";n.d(t,{qn:()=>o,th:()=>r});const r="notification/added",i={latest:null},o=(e=i,t)=>{const{type:n,payload:o}=t;return n===r?{...e,latest:o}:e}},92327:(e,t,n)=>{"use strict";n.d(t,{Lz:()=>i,OC:()=>a,kR:()=>r});const r="layerSwipe/active",i="layerSwipe/ratio",o={active:!1,ratio:50},a=(e=o,t)=>{const{type:n,payload:a}=t;switch(n){case r:return{...e,active:a};case i:return{...e,ratio:a}}return e}},92474:(e,t,n)=>{var r=n(31601),i=n(76314)(r);i.push([e.id,".active-map__background {\n\tdisplay: flex;\n\talign-items: flex-end;\n\tjustify-content: center;\n\tposition: absolute;\n\theight: 100%;\n\twidth: 100%;\n\tz-index: var(--z-disableall);\n}\n.active-map__button {\n\topacity: 0;\n\tbackground: var(--text3);\n\ttransition: all var(--animation-duration-medium-open) var(--animation-easing-linear);\n\tborder-radius: 0;\n\tmargin: 2em;\n\twidth: 100%;\n}\n.active-map__background:hover .active-map__button {\n\topacity: 1;\n}\n.active-map__background:focus-within .active-map__button {\n\topacity: 1;\n}\nba-button::part(button):focus-visible {\n\toutline-offset: 0.2em;\n\toutline: 0.2em solid var(--secondary-color);\n}\nba-button::part(button):focus {\n\tbox-shadow: 0 0 0 0.2em var(--primary-color-lighter);\n}\n",""]),e.exports=i},92662:(e,t,n)=>{var r={"./elevation-profile":[23973,349,212],"./elevation-profile.js":[23973,349,212],"./public-web-component":[35479,591],"./public-web-component.js":[35479,591],"./routing":[67133,349,91],"./routing.js":[67133,349,91]};function i(e){if(!n.o(r,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],i=t[0];return Promise.all(t.slice(1).map(n.e)).then((()=>n(i)))}i.keys=()=>Object.keys(r),i.id=92662,e.exports=i},93003:(e,t,n)=>{"use strict";n.d(t,{E_:()=>s,H5:()=>c,NK:()=>i,Qf:()=>o,Qt:()=>d,ZW:()=>u,aJ:()=>_,dN:()=>a,fS:()=>g,gg:()=>l,zt:()=>h});var r=n(47518);const i="position/zoom",o="position/live_zoom",a="position/center",s="position/live_center",c="position/zoom_center",l="position/zoom_center_rotation",d="position/rotation",u="position/live_rotation",g="position/fit",h="position/fit_layer",p=[1288239.2412306187,6130212.561641981],m={zoom:12,liveZoom:12,center:p,liveCenter:p,rotation:0,liveRotation:0,fitRequest:new r.MD(null),fitLayerRequest:new r.MD(null)},_=(e=m,t)=>{const{type:n,payload:r}=t;switch(n){case i:return{...e,zoom:r};case o:return{...e,liveZoom:r};case"position/zoom_rotation":{const{zoom:t,rotation:n}=r;return{...e,zoom:t,rotation:n}}case a:return{...e,center:r};case s:return{...e,liveCenter:r};case"position/center_rotation":{const{center:t,rotation:n}=r;return{...e,center:t,rotation:n}}case c:{const{zoom:t,center:n}=r;return{...e,zoom:t,center:n}}case l:{const{zoom:t,center:n,rotation:i}=r;return{...e,zoom:t,center:n,rotation:i}}case d:return{...e,rotation:r};case u:return{...e,liveRotation:r};case g:return{...e,fitRequest:r};case h:return{...e,fitLayerRequest:r}}return e}},93062:(e,t,n)=>{var r=n(95266);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},93863:(e,t,n)=>{var r=n(31601),i=n(76314),o=n(4417),a=n(40555),s=n(11177),c=n(83241),l=i(r),d=o(a),u=o(s),g=o(c);l.push([e.id,`.draw-tool {\n\tposition: absolute;\n\tz-index: var(--z-header);\n\ttop: 0;\n\tright: 0;\n\tbackground: var(--primary-bg-color);\n\tbox-shadow: 0 2px 4px rgb(0 0 0 / 50%);\n\tmargin: 0.2em;\n}\n\n.draw-tool__content {\n\tdisplay: flex;\n\tjustify-content: center;\n\tbackground: var(--primary-bg-color);\n\tflex-direction: column;\n}\n\n.draw-tool__actions {\n\tdisplay: flex;\n\tborder-top: 1px solid var(--header-background-color);\n\tmargin-top: 0.5em;\n}\n\n.draw-tool__buttons {\n\tfont-size: 1.2rem;\n\tdisplay: flex;\n\tjustify-content: center;\n\tbackground: var(--primary-bg-color);\n\tmargin: 0 0 1em 0;\n}\n\n.draw-tool__buttons > button {\n\tposition: relative;\n\tbackground: transparent;\n\tcursor: pointer;\n\ttransition: all var(--animation-duration-medium-open) var(--animation-easing-linear);\n\tcolor: rgba(255, 255, 255, 0.8);\n\tpadding: 0 0.5em;\n\tborder: 0;\n\tborder-right: 1px dotted var(--header-background-color);\n\tfont-size: 1.2rem;\n}\n\n.draw-tool__buttons > button:last-child {\n\tborder-right: none;\n}\n\n.is-disabled {\n\tdisplay: none;\n}\n\n.draw-tool__background {\n\theight: 0em;\n\twidth: 0em;\n\tborder-radius: 2.5em;\n\tposition: absolute;\n\ttransition: all var(--animation-duration-medium-open) var(--animation-easing-linear);\n\tleft: 2.3em;\n\ttransform: translate(-50%, -50%);\n\ttop: 1.8em;\n}\n\n.is-active .draw-tool__background {\n\theight: 3.4em;\n\twidth: 3.4em;\n\tbackground-color: var(--primary-color) !important;\n\tbox-shadow:\n\t\t0 1px 2px rgba(0, 0, 0, 0.5),\n\t\t0 0 0 0.2em var(--primary-color-lighter);\n}\n\n.draw-tool__icon {\n\tbackground: var(--primary-color);\n\t-webkit-mask-size: cover;\n\tmask-size: cover;\n\theight: 2em;\n\twidth: 2em;\n\ttransition: all var(--animation-duration-medium-open) var(--animation-easing-linear);\n\tmargin: 0.8em 0.8em;\n\tposition: absolute;\n}\n\n.is-active .draw-tool__icon {\n\tbackground: var(--text3);\n}\n\n.draw-tool__button:hover:not(.disabled-tool__button) .draw-tool__background {\n\theight: 3.4em;\n\twidth: 3.4em;\n\tbackground-color: var(--secondary-color);\n}\n\n.draw-tool__button:hover:not(.disabled-tool__button) .draw-tool__icon {\n\tbackground: var(--text3);\n}\n\n.draw-tool__button:focus-visible:not(.disabled-tool__button) .draw-tool__background {\n\theight: 3.4em;\n\twidth: 3.4em;\n\tbackground-color: var(--secondary-color);\n\tbox-shadow:\n\t\t0 1px 2px rgba(0, 0, 0, 0.5),\n\t\t0 0 0 0.2em var(--primary-color-lighter);\n}\n\n.draw-tool__button:focus-visible {\n\tbox-shadow: none;\n}\n\n.draw-tool__button:focus-visible:not(.disabled-tool__button) .draw-tool__icon {\n\tbackground: var(--text3);\n}\n\n.draw-tool__button-text {\n\tfont-size: 0.8rem;\n\tcolor: var(--text1);\n\tmargin: 5.5em 0.3em 0.5em 0.3em;\n\tuser-select: none;\n\ttext-align: center;\n\tmin-width: 5em;\n}\n\n.line {\n\tmask-image: url(${d});\n\t-webkit-mask-image: url(${d});\n}\n\n.polygon {\n\tmask-image: url(${u});\n\t-webkit-mask-image: url(${u});\n}\n\n.symbol {\n\tmask-image: url(${g});\n\t-webkit-mask-image: url(${g});\n}\n\n.draw-tool-container {\n\tmin-width: 20em;\n}\n\n.draw-tool__enable .draw-tool-container {\n\tdisplay: block;\n}\n.draw-tool__disable .draw-tool-container {\n\tdisplay: none;\n}\n.tool-container__close-button {\n\tmargin: 0;\n\twidth: 3em;\n\theight: 3em;\n\tborder-radius: 1.5em;\n\tborder: 0;\n\tbackground: var(--primary-bg-color);\n\tfont-weight: bold;\n\tcursor: pointer;\n\tdisplay: block;\n\tpadding: 0.7em;\n\tposition: absolute;\n\tright: 0;\n\ttop: 0;\n}\n.tool-container__close-button:hover {\n\tbackground: var(--header-background-color);\n}\n.ba-tool-container__title {\n\tpadding: 0.8em 1.5em;\n\tfont-weight: bold;\n}\n.draw-tool__enable .draw-tool__enable-button {\n\tdisplay: none;\n}\n\n.draw-tool__disable .draw-tool__disable-button {\n\tdisplay: none;\n}\n`,""]),e.exports=l},94447:(e,t,n)=>{"use strict";n.d(t,{DJ:()=>b,Fl:()=>c,H5:()=>v,HA:()=>_,He:()=>g,Mg:()=>l,Vz:()=>p,X5:()=>h,fX:()=>u,q9:()=>d,sH:()=>f,u8:()=>S,uv:()=>y});var r=n(18410),i=n(51207),o=n(63103),a=n(28353),s=n(32551);const c=Object.freeze({WMS:Symbol.for("wms"),XYZ:Symbol.for("xyz"),VECTOR:Symbol.for("vector"),OAF:Symbol.for("oaf"),RT_VECTOR:Symbol.for("rtvector"),VT:Symbol.for("vt"),AGGREGATE:Symbol.for("aggregate"),FUTURE:Symbol.for("future")}),l=Object.freeze({BAA:"baa",APPLICATION:"application"});class d{constructor(e,t=null){if(this.constructor===d)throw new TypeError("Can not construct abstract class.");this.checkDefined(e,"id"),this._id=e,this._label=t,this._opacity=1,this._hidden=!1,this._minZoom=null,this._maxZoom=null,this._attribution=null,this._attributionProvider=i.l6,this._authenticationType=null,this._queryable=!0,this._exportable=!0,this._authRoles=[],this._timestamps=[],this._updateInterval=null}checkDefined(e,t){if(!e)throw new TypeError(t+" must not be undefined")}get id(){return this._id}get label(){return this._label}get opacity(){return this._opacity}get minZoom(){return this._minZoom}get maxZoom(){return this._maxZoom}get hidden(){return this._hidden}get attribution(){return this._attribution}get authenticationType(){return this._authenticationType}get queryable(){return this._queryable}get exportable(){return this._exportable}get timestamps(){return[...this._timestamps]}get updateInterval(){return this._updateInterval}get authRoles(){return[...this._authRoles]}get attributionProvider(){return this._attributionProvider}setLabel(e){return this._label=e,this}setOpacity(e){return this._opacity=e,this}setMinZoom(e){return this._minZoom=e,this}setMaxZoom(e){return this._maxZoom=e,this}setHidden(e){return this._hidden=e,this}setAttribution(e){return this._attribution=e,this}setAttributionProvider(e){return this._attributionProvider=e,this}setAuthenticationType(e){return this._authenticationType=e,this}setQueryable(e){return this._queryable=e,this}setExportable(e){return this._exportable=e,this}setTimestamps(e){return e&&(this._timestamps=[...e]),this}setUpdateInterval(e){return this.isUpdatableByInterval()&&(this._updateInterval=e),this}setAuthRoles(e){return e&&(this._authRoles=[...e],e.length>0&&this.setAuthenticationType(l.APPLICATION)),this}hasLabel(){return!!this._label}hasTimestamps(){return this._timestamps.length>0}hasUpdateInterval(){return!!this._updateInterval}isUpdatableByInterval(){return!1}isStylable(){return!1}isExternal(){return(0,a.oq)(this.id)}getAttribution(e=0){if(this._attributionProvider){const t=this._attributionProvider(this,e);return Array.isArray(t)?t.length>0?t:null:t?[t]:null}throw new Error("No attribution provider found")}getType(){throw new TypeError("Please implement abstract method #getType or do not call super.getType from child.")}copyPropertiesFrom(e){return this.setLabel(e.label).setOpacity(e.opacity).setMinZoom(e.minZoom).setMaxZoom(e.maxZoom).setHidden(e.hidden).setAttribution(e.attribution).setAttributionProvider(e.attributionProvider).setQueryable(e.queryable).setExportable(e.exportable).setTimestamps(e.timestamps).setUpdateInterval(e.updateInterval).setAuthRoles(e.authRoles).setAuthenticationType(e.authenticationType)}}class u extends d{constructor(e,t,n=null){super(e,n),this._loader=t,this._onResolve=[],this._onReject=[]}onResolve(e){return this._onResolve.push(e),this}onReject(e){return this._onReject.push(e),this}getType(){return c.FUTURE}async get(){try{const{GeoResourceService:e}=r.z.inject("GeoResourceService"),t=await this._loader(this.id),n=e.addOrReplace(t);return this._onResolve.forEach((e=>e(n,this))),n}catch(e){throw this._onReject.forEach((e=>e(this))),e}}}class g extends d{constructor(e,t,n,r,i){super(e,t),this._url=n,this._layers=r,this._format=i,this._extraParams={},this._maxSize=null}get url(){return this._url}get layers(){return this._layers}get format(){return this._format}get extraParams(){return{...this._extraParams}}get maxSize(){return this._maxSize?[...this._maxSize]:null}setExtraParams(e){return e&&(this._extraParams={...e}),this}setMaxSize(e){return e&&(this._maxSize=[...e]),this}isUpdatableByInterval(){return!0}getType(){return c.WMS}}class h extends d{constructor(e,t,n){super(e,t),this._urls=n,this._tileGridId=null}get urls(){return this._urls}get tileGridId(){return this._tileGridId}setTileGridId(e){return this._tileGridId=e,this}getType(){return c.XYZ}}const p=Object.freeze({KML:Symbol.for("kml"),GPX:Symbol.for("gpx"),GEOJSON:Symbol.for("geojson"),EWKT:Symbol.for("ewkt")});class m extends d{constructor(e,t){if(super(e,t),this.constructor===m)throw new Error("Can not construct abstract class.");this._showPointNames=!0,this._clusterParams={},this._styleHint=null,this._style=null}isClustered(){return!!Object.keys(this._clusterParams).length}get clusterParams(){return{...this._clusterParams}}setClusterParams(e){return e&&(this._clusterParams={...e}),this}hasStyleHint(){return!!this.isClustered()||!!this._styleHint}get styleHint(){return this.isClustered()&&!this._styleHint?s.T.CLUSTER:this._styleHint}setStyleHint(e){return(e||null===e)&&(this._styleHint=e),this}get showPointNames(){return this._showPointNames}setShowPointNames(e){return this._showPointNames=e,this}setStyle(e){return(e||null===e)&&(this._style=e),this}get style(){return this._style}hasStyle(){return!!this._style}}class _ extends m{constructor(e,t,n=null){super(e,t),this._sourceType=n,this._data=null,this._srid=null,this._localData=!1,this._features=[]}_getFallbackLabel(){switch(this.sourceType){case p.KML:return"KML";case p.GPX:return"GPX";case p.GEOJSON:return"GeoJSON";case p.EWKT:return"EWKT";default:return""}}get label(){return this._label?this._label:this._getFallbackLabel()}get sourceType(){return this._sourceType}get data(){return this._data}get srid(){return this._srid}get features(){return[...this._features]}setSource(e,t){return this._data=e,this._srid=t,this}setFeatures(e){return this._features=[...e],this}addFeature(e){return this._features.push(e),this}hasFeatures(){return this._features.length>0}hasLabel(){return!!this._label||this.label!==this._getFallbackLabel()}get localData(){return this._localData}markAsLocalData(e){return this._localData=e,this}isUpdatableByInterval(){return!this.localData}isStylable(){return this.sourceType!==p.KML}getType(){return c.VECTOR}static forUrl(e,t,n,r=null){return new u(e,(0,o.FJ)(t,n,e,r)).setLabel(r).onResolve(((e,t)=>{e.copyPropertiesFrom(t)}))}}class v extends m{constructor(e,t,n,r){super(e,t),this._url=n,this._sourceType=r}get url(){return this._url}get sourceType(){return this._sourceType}getType(){return c.RT_VECTOR}}class y extends m{constructor(e,t,n,r,i){super(e,t),this._url=n,this._collectionId=r,this._limit=null,this._srid=i,this._filter=null}get collectionId(){return this._collectionId}get url(){return this._url}get srid(){return this._srid}get limit(){return this._limit}get filter(){return this._filter}setLimit(e){return(0,a.Et)(e)&&(this._limit=e),this}setFilter(e){return(0,a.Kg)(e)&&(this._filter=e),this}hasFilter(){return!!this._filter}hasLimit(){return!!this._limit}isUpdatableByInterval(){return!0}isStylable(){return!0}getType(){return c.OAF}}class b extends d{constructor(e,t,n){super(e,t),this._geoResourceIds=[...n]}get geoResourceIds(){return[...this._geoResourceIds]}getType(){return c.AGGREGATE}}class S extends d{constructor(e,t,n){super(e,t),this._styleUrl=n}get styleUrl(){return this._styleUrl}getType(){return c.VT}}const f=(e,t,n=null)=>new Proxy(e,{set:function(e,n,r){return Object.keys(e).includes(n)&&e[n]!==r?(e[n]=r,t(n,r),!0):Reflect.set(...arguments)},get:(e,t)=>!(!n||t!==n)||e[t]})},95266:(e,t,n)=>{var r=n(31601),i=n(76314),o=n(4417),a=n(35427),s=i(r),c=o(a);s.push([e.id,`.rotation-icon {\n\tmask: url(${c});\n\t-webkit-mask-image: url(${c});\n}\n\n.icon {\n\tbackground: var(--text3,);\n\tmask-size: cover;\n\t-webkit-mask-size: cover;\n\tcursor: pointer;\n\tdisplay: inline-block;\n\theight: 2em;\n\twidth: 2em;\n\tborder-top: 0.5em solid var(--error-color);\n}\n\n.rotation-button {\n\tbackground-color: var(--primary-color);\n\tdisplay: inline-block;\n\theight: 2.5em;\n\twidth: 2.5em;\n\tborder-radius: 50%;\n\tborder: none;\n\toutline: none;\n\tpadding-top: 0.25em;\n\ttransition: all var(--animation-duration-small-open) var(--animation-easing-open);\n}\n\n.hidden {\n\tdisplay: none;\n}\n\n.rotation-button:hover,\n.rotation-button:focus {\n\ttransform: scale(1.1);\n}\n.rotation-button:focus {\n\tbox-shadow: 0 0 0 0.2em var(--primary-color-lighter);\n}\n\n.rotation-button:active {\n\ttransform: scale(1.15);\n\tborder: none;\n}\n`,""]),e.exports=s},96057:(e,t,n)=>{"use strict";n.d(t,{ZD:()=>s,qi:()=>c,sL:()=>a});var r=n(18410),i=n(22295);const o=()=>{const{StoreService:e}=r.z.inject("StoreService");return e.getStore()},a=e=>{const{media:{observeResponsiveParameter:t}}=o().getState();t&&o().dispatch({type:i.aF,payload:e})},s=e=>{const{media:{observeResponsiveParameter:t}}=o().getState();t&&o().dispatch({type:i.z_,payload:e})},c=e=>{o().dispatch({type:i.T5,payload:e})}},96462:(e,t,n)=>{var r=n(29498);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},96579:(e,t,n)=>{var r=n(31601),i=n(76314)(r);i.push([e.id,".stackable-content-notification-panel {\n\tmax-height: 100%;\n\tdisplay: flex;\n\tposition: fixed;\n\tjustify-content: center;\n\tflex-direction: column;\n\tbottom: 0.7em;\n\tleft: 0;\n\tright: 0;\n\tz-index: var(--z-notification);\n\tpointer-events: none;\n}\n\n.stackable-content-sheet-panel {\n\tmax-height: 100%;\n\tdisplay: flex;\n\tposition: fixed;\n\tjustify-content: center;\n\tflex-direction: column;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\tz-index: calc(var(--z-mainmenu) + 1);\n\tpointer-events: none;\n}\n\n.stackable-content-panel ba-notification-item:last-child {\n\tmargin-bottom: 1em;\n}\n\n.interaction-bottomsheet {\n\tposition: absolute;\n\tbottom: 0;\n\tz-index: 1;\n\twidth: 100%;\n}\n",""]),e.exports=i},96857:(e,t,n)=>{var r=n(31601),i=n(76314)(r);i.push([e.id,".chips__button {\n\tposition: absolute;\n\tpadding: 0.3em 0.5em;\n\tfont-size: 0.9rem;\n\ttop: 0.7em;\n\tleft: 0.7em;\n\tborder: 1px solid var(--primary-color);\n\tbackground: var(--primary-bg-color);\n\tdisplay: flex;\n\tmargin-left: 0;\n\tz-index: calc(var(--z-header) + 20);\n\tborder-radius: 2em;\n\tcursor: pointer;\n\ttext-decoration: none;\n\tflex-shrink: 0;\n}\n.chips__button:focus {\n\tbox-shadow: 0 0 0 0.2em var(--primary-color-lighter);\n}\n.chips__button:focus-visible {\n\toutline-offset: 0.2em;\n\toutline: 0.2em solid var(--secondary-color);\n}\n.chips__button-text {\n\tcolor: var(--text1);\n\tfont-weight: bold;\n\tmargin-left: 2em;\n\tpadding: 0.3em;\n}\n.chips__button:hover .chips__button-text {\n\tcolor: var(--primary-color);\n}\n.chips__icon {\n\tposition: absolute;\n\theight: 1.7em;\n\twidth: 1.7em;\n\tleft: 0.6em;\n\ttop: 0.3em;\n\tbackground: linear-gradient(to top, var(--secondary-color) 0%, var(--primary-color) 50%);\n}\n",""]),e.exports=i},97156:(e,t,n)=>{var r=n(74048);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},97711:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmktYm94Ij48cGF0aCBkPSJNNS4xNDcgNy41MzRxMS4wMzEuMTg5IDEuNjA3Ljc4Ny41ODMuNTk4LjU4MyAxLjQ3NyAwIDEuMzQ5LTEuMDgxIDIuMDg3dC0zLjA3MS43MzhxLS42NjggMC0xLjM3OS0uMTEtLjcwNC0uMTE2LTEuNDU3LS4zNDJ2LTEuMTlxLjU5Ny4yOTkgMS4zMDguNDUydDEuNDg2LjE1M3ExLjM1MSAwIDIuMDU1LS40NTguNzExLS40NTguNzExLTEuMzMgMC0uODA2LS42NjEtMS4yNTctLjY1NC0uNDU4LTEuODI3LS40NThIMi4xODRWNy4wN2gxLjI5NHExLjA1OSAwIDEuNjIxLS4zNi41NjItLjM2Ni41NjItMS4wNSAwLS43MDItLjU4My0xLjA3NC0uNTc2LS4zNzgtMS42NTYtLjM3OC0uNTkgMC0xLjI2NS4xMVQuNjcxIDQuNjZWMy41NjJxLjgxOC0uMTk1IDEuNTI5LS4yOTMuNzE4LS4wOTggMS4zNTEtLjA5OCAxLjYzNSAwIDIuNTg4LjY0MS45NTMuNjM1Ljk1MyAxLjcyMSAwIC43NTctLjUwNSAxLjI4Mi0uNTA1LjUxOS0xLjQzNi43MnptNC42MS0zLjE4NXY3LjA4NWgxLjM3OXExLjc0NiAwIDIuNTU0LS44NTQuODE0LS44NTQuODE0LTIuNjk3IDAtMS44MzEtLjgxNC0yLjY3OS0uODA4LS44NTQtMi41NTQtLjg1NHpNOC42MTYgMy4zMzVoMi4zNDVxMi40NTIgMCAzLjU5OSAxLjEwNSAxLjE0NyAxLjA5OCAxLjE0NyAzLjQ0MiAwIDIuMzU2LTEuMTUzIDMuNDZ0LTMuNTkzIDEuMTA1SDguNjE2eiIvPjwvc3ZnPjwhLS1NSVQgTGljZW5zZS0tPgo="},97717:(e,t,n)=>{var r=n(31601),i=n(76314)(r);i.push([e.id,".privacy_policy-container {\n\tuser-select: none;\n\tfont-size: 0.8rem;\n\tdisplay: inline-block;\n\tposition: relative;\n\tborder-left: 1px dotted var(--text1);\n\tpadding: 0 1em;\n\tmargin: 0.4em 0;\n}\n.privacy-policy-link {\n\tfont-size: 0.8rem;\n\tcolor: var(--text4);\n}\n.privacy-policy-link:hover {\n\ttext-decoration: underline;\n}\n.privacy-policy-link:focus {\n\ttext-decoration: underline;\n}\n.privacy-policy-link:focus-visible {\n\toutline-offset: 0.2em;\n\toutline: 0.2em solid var(--secondary-color);\n}\n",""]),e.exports=i},97823:(e,t,n)=>{var r=n(85099);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},99293:(e,t,n)=>{var r=n(55921);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},99651:(e,t,n)=>{"use strict";function r(e,t){let n=0;return function(...r){const i=(new Date).getTime();if(!(i-n<e))return n=i,t(...r)}}function i(e,t){let n;return function(...r){n&&clearTimeout(n),n=setTimeout((()=>{t(...r),n=null}),e)}}n.d(t,{qr:()=>i,v6:()=>r,yy:()=>o});const o=async e=>new Promise((t=>setTimeout(t,e)))},99887:(e,t,n)=>{"use strict";n.d(t,{FW:()=>a,OB:()=>s,b3:()=>i,qL:()=>o});var r=n(42376);const i=(e,t,n)=>{var r;return r=e,e=Math.min(Math.max(r,-85.05112878),85.05112878),2*Math.cos(e*Math.PI/180)*Math.PI*6378137/((e,t)=>Math.ceil(t*Math.pow(2,e)))(t,n)},o=e=>(0,r.LI)(e,3),a=e=>(0,r.LI)(e,5),s=e=>e.map((e=>(0,r.LI)(e,7)))}}]);